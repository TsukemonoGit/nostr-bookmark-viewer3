import{S as kt,i as yt,s as Et,H as al,e as Me,a as v,k as f,M as Ot,D as tl,E as ol,h as r,c as k,l as d,m,N as Ht,n,F as t,b as D,O as K,K as vt,P as wt,L as nl,o as ll,Q as zt,R as jt,T as il,U as ut,y as ft,q as T,z as dt,r as I,A as ht,V as lt,g as Ne,v as Ft,d as Ve,f as qt,B as mt,W as rl,u as sl}from"../chunks/index.fe32e296.js";import{R as _t,n as Gt,P as cl,t as Ue,d as ul,g as fl}from"../chunks/navigation.fb3cb79d.js";import{s as dl,m as Kt,a as Jt,g as hl,b as ml}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.b1870cef.js";import{T as pl}from"../chunks/Toast.89260eda.js";function gl(a){let l,e=`<script nonce="%sveltekit.nonce%">(${dl.toString()})();<\/script>`,s,o,c,i,h,g,w,b,L,_,p,P,V;return{c(){l=new al(!1),s=Me(),o=v(),c=f("div"),i=f("div"),h=Ot("svg"),g=Ot("path"),this.h()},l(N){const A=tl("svelte-gewkj4",document.head);l=ol(A,!1),s=Me(),A.forEach(r),o=k(N),c=d(N,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-checked":!0,title:!0,tabindex:!0});var M=m(c);i=d(M,"DIV",{class:!0});var B=m(i);h=Ht(B,"svg",{class:!0,xmlns:!0,viewBox:!0});var Z=m(h);g=Ht(Z,"path",{d:!0}),m(g).forEach(r),Z.forEach(r),B.forEach(r),M.forEach(r),this.h()},h(){l.a=s,n(g,"d",w=a[0]?a[4].sun:a[4].moon),n(h,"class",b="lightswitch-icon "+a[1]),n(h,"xmlns","http://www.w3.org/2000/svg"),n(h,"viewBox","0 0 512 512"),n(i,"class",L="lightswitch-thumb "+a[2]),n(c,"class",_="lightswitch-track "+a[3]),n(c,"role","switch"),n(c,"aria-label","Light Switch"),n(c,"aria-checked",a[0]),n(c,"title",p="Toggle "+(a[0]===!0?"Dark":"Light")+" Mode"),n(c,"tabindex","0")},m(N,A){l.m(e,document.head),t(document.head,s),D(N,o,A),D(N,c,A),t(c,i),t(i,h),t(h,g),P||(V=[K(c,"click",a[5]),K(c,"click",a[18]),K(c,"keydown",kl),K(c,"keydown",a[19]),K(c,"keyup",a[20]),K(c,"keypress",a[21])],P=!0)},p(N,[A]){A&1&&w!==(w=N[0]?N[4].sun:N[4].moon)&&n(g,"d",w),A&2&&b!==(b="lightswitch-icon "+N[1])&&n(h,"class",b),A&4&&L!==(L="lightswitch-thumb "+N[2])&&n(i,"class",L),A&8&&_!==(_="lightswitch-track "+N[3])&&n(c,"class",_),A&1&&n(c,"aria-checked",N[0]),A&1&&p!==(p="Toggle "+(N[0]===!0?"Dark":"Light")+" Mode")&&n(c,"title",p)},i:vt,o:vt,d(N){r(s),N&&l.d(),N&&r(o),N&&r(c),P=!1,wt(V)}}}const _l="cursor-pointer",bl="aspect-square scale-[0.8] flex justify-center items-center",vl="w-[70%] aspect-square";function kl(a){["Enter","Space"].includes(a.code)&&(a.preventDefault(),a.currentTarget.click())}function yl(a,l,e){let s,o,c,i,h,g,w,b;nl(a,Kt,E=>e(0,b=E));let{bgLight:L="bg-surface-50"}=l,{bgDark:_="bg-surface-900"}=l,{fillLight:p="fill-surface-50"}=l,{fillDark:P="fill-surface-900"}=l,{width:V="w-12"}=l,{height:N="h-6"}=l,{ring:A="ring-[1px] ring-surface-500/30"}=l,{rounded:M="rounded-token"}=l;const B="transition-all duration-[200ms]",Z={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function ge(){il(Kt,b=!b,b),ml(b),Jt(b)}ll(()=>{"modeCurrent"in localStorage||Jt(hl())});function W(E){ut.call(this,a,E)}function q(E){ut.call(this,a,E)}function ce(E){ut.call(this,a,E)}function C(E){ut.call(this,a,E)}return a.$$set=E=>{e(23,l=zt(zt({},l),jt(E))),"bgLight"in E&&e(6,L=E.bgLight),"bgDark"in E&&e(7,_=E.bgDark),"fillLight"in E&&e(8,p=E.fillLight),"fillDark"in E&&e(9,P=E.fillDark),"width"in E&&e(10,V=E.width),"height"in E&&e(11,N=E.height),"ring"in E&&e(12,A=E.ring),"rounded"in E&&e(13,M=E.rounded)},a.$$.update=()=>{a.$$.dirty&193&&e(17,s=b===!0?L:_),a.$$.dirty&193&&e(16,o=b===!0?_:L),a.$$.dirty&1&&e(15,c=b===!0?"translate-x-[100%]":""),a.$$.dirty&769&&e(14,i=b===!0?p:P),e(3,h=`${_l} ${B} ${V} ${N} ${A} ${M} ${s} ${l.class??""}`),a.$$.dirty&108544&&e(2,g=`${bl} ${B} ${N} ${M} ${o} ${c}`),a.$$.dirty&16384&&e(1,w=`${vl} ${i}`)},l=jt(l),[b,w,g,h,Z,ge,L,_,p,P,V,N,A,M,i,c,o,s,W,q,ce,C]}class El extends kt{constructor(l){super(),yt(this,l,yl,gl,Et,{bgLight:6,bgDark:7,fillLight:8,fillDark:9,width:10,height:11,ring:12,rounded:13})}}function Wt(a,l,e){const s=a.slice();return s[27]=l[e],s[29]=e,s}function Qt(a,l,e){const s=a.slice();return s[27]=l[e],s[29]=e,s}function Xt(a){let l,e=a[1],s=[];for(let o=0;o<e.length;o+=1)s[o]=Yt(Qt(a,e,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();l=Me()},l(o){for(let c=0;c<s.length;c+=1)s[c].l(o);l=Me()},m(o,c){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,c);D(o,l,c)},p(o,c){if(c&2050){e=o[1];let i;for(i=0;i<e.length;i+=1){const h=Qt(o,e,i);s[i]?s[i].p(h,c):(s[i]=Yt(h),s[i].c(),s[i].m(l.parentNode,l))}for(;i<s.length;i+=1)s[i].d(1);s.length=e.length}},d(o){rl(s,o),o&&r(l)}}}function Yt(a){let l,e,s,o,c=a[27]+"",i,h,g,w,b;function L(){return a[17](a[29])}return{c(){l=f("li"),e=f("button"),s=T("delete"),o=v(),i=T(c),h=v(),this.h()},l(_){l=d(_,"LI",{class:!0});var p=m(l);e=d(p,"BUTTON",{class:!0});var P=m(e);s=I(P,"delete"),P.forEach(r),o=k(p),i=I(p,c),h=k(p),p.forEach(r),this.h()},h(){n(e,"class","py-1 btn variant-filled-primary rounded-full"),l.value=g=a[27],n(l,"class","pb-1 px-5")},m(_,p){D(_,l,p),t(l,e),t(e,s),t(l,o),t(l,i),t(l,h),w||(b=K(e,"click",L),w=!0)},p(_,p){a=_,p&2&&c!==(c=a[27]+"")&&sl(i,c),p&2&&g!==(g=a[27])&&(l.value=g)},d(_){_&&r(l),w=!1,b()}}}function wl(a){let l;return{c(){l=T("▼詳細設定")},l(e){l=I(e,"▼詳細設定")},m(e,s){D(e,l,s)},d(e){e&&r(l)}}}function Ll(a){let l;return{c(){l=T("▲詳細設定")},l(e){l=I(e,"▲詳細設定")},m(e,s){D(e,l,s)},d(e){e&&r(l)}}}function Zt(a){let l,e,s,o,c,i,h,g,w,b,L,_,p,P,V,N,A,M,B,Z,ge,W,q,ce,C,E,Te,re,se,y,H,R,z,Ae,ae,oe,ee,Ce,Re,G,X,ke,Ie,Oe,ye,ue,fe,He,ne,x,ze,Y,Se,Ee,de,je,_e,Q,he,be,Xe,F=a[4].length>0&&xt(a);return Q=new El({}),{c(){l=f("div"),e=f("div"),s=f("p"),o=T("nextボタンをおしたときに設定が保存されます"),c=v(),i=f("p"),h=T("とりあえずnprofileの方だけに適応"),g=v(),w=f("p"),b=T("(naddrのほうはデフォルトのまま)"),L=v(),_=f("ul"),p=f("li"),P=f("span"),V=f("span"),N=T("検索用リレー"),A=v(),M=f("div"),B=f("button"),Z=T("デフォルトに戻す"),ge=v(),W=f("div"),q=f("input"),ce=v(),C=f("button"),E=T("add relay"),Te=v(),re=f("ul"),se=T(`リレーリスト
              `),F&&F.c(),y=v(),H=f("li"),R=f("span"),z=f("span"),Ae=T("軽量用設定"),ae=v(),oe=f("div"),ee=f("button"),Ce=T("デフォルトに戻す"),Re=v(),G=f("label"),X=f("input"),ke=v(),Ie=f("p"),Oe=T("自動的に画像を読み込む、URLプレビューを表示する"),ye=v(),ue=f("label"),fe=f("input"),He=v(),ne=f("p"),x=T("イベントの内容を読み込む (検索用リレー数0と同じ)"),ze=v(),Y=f("li"),Se=f("span"),Ee=f("span"),de=T("画面モード(仮)"),je=v(),_e=f("div"),ft(Q.$$.fragment),this.h()},l(U){l=d(U,"DIV",{class:!0});var $=m(l);e=d($,"DIV",{class:!0});var ve=m(e);s=d(ve,"P",{});var Fe=m(s);o=I(Fe,"nextボタンをおしたときに設定が保存されます"),Fe.forEach(r),c=k(ve),i=d(ve,"P",{});var qe=m(i);h=I(qe,"とりあえずnprofileの方だけに適応"),qe.forEach(r),g=k(ve),w=d(ve,"P",{});var ie=m(w);b=I(ie,"(naddrのほうはデフォルトのまま)"),ie.forEach(r),ve.forEach(r),L=k($),_=d($,"UL",{});var we=m(_);p=d(we,"LI",{class:!0});var te=m(p);P=d(te,"SPAN",{class:!0}),m(P).forEach(r),V=d(te,"SPAN",{class:!0});var Ye=m(V);N=I(Ye,"検索用リレー"),Ye.forEach(r),A=k(te),M=d(te,"DIV",{class:!0});var Le=m(M);B=d(Le,"BUTTON",{type:!0,class:!0});var Ze=m(B);Z=I(Ze,"デフォルトに戻す"),Ze.forEach(r),ge=k(Le),W=d(Le,"DIV",{class:!0});var Be=m(W);q=d(Be,"INPUT",{class:!0,type:!0,placeholder:!0}),ce=k(Be),C=d(Be,"BUTTON",{class:!0});var me=m(C);E=I(me,"add relay"),me.forEach(r),Be.forEach(r),Te=k(Le),re=d(Le,"UL",{class:!0});var Ge=m(re);se=I(Ge,`リレーリスト
              `),F&&F.l(Ge),Ge.forEach(r),Le.forEach(r),te.forEach(r),y=k(we),H=d(we,"LI",{class:!0});var Pe=m(H);R=d(Pe,"SPAN",{class:!0}),m(R).forEach(r),z=d(Pe,"SPAN",{class:!0});var De=m(z);Ae=I(De,"軽量用設定"),De.forEach(r),ae=k(Pe),oe=d(Pe,"DIV",{class:!0});var pe=m(oe);ee=d(pe,"BUTTON",{type:!0,class:!0});var xe=m(ee);Ce=I(xe,"デフォルトに戻す"),xe.forEach(r),Re=k(pe),G=d(pe,"LABEL",{class:!0});var Ke=m(G);X=d(Ke,"INPUT",{class:!0,type:!0}),ke=k(Ke),Ie=d(Ke,"P",{});var J=m(Ie);Oe=I(J,"自動的に画像を読み込む、URLプレビューを表示する"),J.forEach(r),Ke.forEach(r),ye=k(pe),ue=d(pe,"LABEL",{class:!0});var Je=m(ue);fe=d(Je,"INPUT",{class:!0,type:!0}),He=k(Je),ne=d(Je,"P",{});var We=m(ne);x=I(We,"イベントの内容を読み込む (検索用リレー数0と同じ)"),We.forEach(r),Je.forEach(r),pe.forEach(r),Pe.forEach(r),ze=k(we),Y=d(we,"LI",{class:!0});var le=m(Y);Se=d(le,"SPAN",{class:!0}),m(Se).forEach(r),Ee=d(le,"SPAN",{class:!0});var O=m(Ee);de=I(O,"画面モード(仮)"),O.forEach(r),je=k(le),_e=d(le,"DIV",{class:!0});var j=m(_e);dt(Q.$$.fragment,j),j.forEach(r),le.forEach(r),we.forEach(r),$.forEach(r),this.h()},h(){n(e,"class","underline decoration-dotted mx-2 px-2"),n(P,"class","badge bg-primary-500 mr-3"),n(V,"class","font-medium"),n(B,"type","button"),n(B,"class","btn variant-filled-surface mb-3 mt-1"),n(q,"class","px-2"),n(q,"type","text"),n(q,"placeholder","wss://..."),q.disabled=a[3],n(C,"class","py-1 btn variant-filled"),n(W,"class","relay input-group input-group-divider grid-cols-[1fr_auto] h-12"),n(re,"class","border-solid border-2 border-surface-500/25 mx-5 my-1"),n(M,"class","ml-5 mt-1"),n(p,"class","mt-5"),n(R,"class","badge bg-primary-500 mr-3"),n(z,"class","font-medium"),n(ee,"type","button"),n(ee,"class","btn variant-filled-surface mb-3 mt-1"),n(X,"class","checkbox"),n(X,"type","checkbox"),n(G,"class","flex items-center space-x-2"),n(fe,"class","checkbox"),n(fe,"type","checkbox"),n(ue,"class","flex items-center space-x-2"),n(oe,"class","ml-5 mt-1"),n(H,"class","mt-5"),n(Se,"class","badge bg-primary-500 mr-3"),n(Ee,"class","font-medium"),n(_e,"class","ml-5 mt-1"),n(Y,"class","mt-5"),n(l,"class","card m-4 p-4")},m(U,$){D(U,l,$),t(l,e),t(e,s),t(s,o),t(e,c),t(e,i),t(i,h),t(e,g),t(e,w),t(w,b),t(l,L),t(l,_),t(_,p),t(p,P),t(p,V),t(V,N),t(p,A),t(p,M),t(M,B),t(B,Z),t(M,ge),t(M,W),t(W,q),lt(q,a[7]),t(W,ce),t(W,C),t(C,E),t(M,Te),t(M,re),t(re,se),F&&F.m(re,null),t(_,y),t(_,H),t(H,R),t(H,z),t(z,Ae),t(H,ae),t(H,oe),t(oe,ee),t(ee,Ce),t(oe,Re),t(oe,G),t(G,X),X.checked=a[5],t(G,ke),t(G,Ie),t(Ie,Oe),t(oe,ye),t(oe,ue),t(ue,fe),fe.checked=a[6],t(ue,He),t(ue,ne),t(ne,x),t(_,ze),t(_,Y),t(Y,Se),t(Y,Ee),t(Ee,de),t(Y,je),t(Y,_e),ht(Q,_e,null),he=!0,be||(Xe=[K(B,"click",a[19]),K(q,"input",a[20]),K(C,"click",a[13]),K(ee,"click",a[22]),K(X,"change",a[23]),K(fe,"change",a[24])],be=!0)},p(U,$){(!he||$&8)&&(q.disabled=U[3]),$&128&&q.value!==U[7]&&lt(q,U[7]),U[4].length>0?F?F.p(U,$):(F=xt(U),F.c(),F.m(re,null)):F&&(F.d(1),F=null),$&32&&(X.checked=U[5]),$&64&&(fe.checked=U[6])},i(U){he||(Ne(Q.$$.fragment,U),he=!0)},o(U){Ve(Q.$$.fragment,U),he=!1},d(U){U&&r(l),F&&F.d(),mt(Q),be=!1,wt(Xe)}}}function xt(a){let l,e=a[4],s=[];for(let o=0;o<e.length;o+=1)s[o]=$t(Wt(a,e,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();l=Me()},l(o){for(let c=0;c<s.length;c+=1)s[c].l(o);l=Me()},m(o,c){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,c);D(o,l,c)},p(o,c){if(c&16400){e=o[4];let i;for(i=0;i<e.length;i+=1){const h=Wt(o,e,i);s[i]?s[i].p(h,c):(s[i]=$t(h),s[i].c(),s[i].m(l.parentNode,l))}for(;i<s.length;i+=1)s[i].d(1);s.length=e.length}},d(o){rl(s,o),o&&r(l)}}}function $t(a){let l,e,s,o,c=a[27]+"",i,h,g,w,b;function L(){return a[21](a[29])}return{c(){l=f("li"),e=f("button"),s=T("delete"),o=v(),i=T(c),h=v(),this.h()},l(_){l=d(_,"LI",{class:!0});var p=m(l);e=d(p,"BUTTON",{class:!0});var P=m(e);s=I(P,"delete"),P.forEach(r),o=k(p),i=I(p,c),h=k(p),p.forEach(r),this.h()},h(){n(e,"class","py-1 btn variant-filled-primary rounded-full"),l.value=g=a[27],n(l,"class","pb-1 px-3")},m(_,p){D(_,l,p),t(l,e),t(e,s),t(l,o),t(l,i),t(l,h),w||(b=K(e,"click",L),w=!0)},p(_,p){a=_,p&16&&c!==(c=a[27]+"")&&sl(i,c),p&16&&g!==(g=a[27])&&(l.value=g)},d(_){_&&r(l),w=!1,b()}}}function el(a){let l,e,s;return e=new cl({props:{"...":!0,stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30",width:"w-24"}}),{c(){l=f("div"),ft(e.$$.fragment),this.h()},l(o){l=d(o,"DIV",{class:!0});var c=m(l);dt(e.$$.fragment,c),c.forEach(r),this.h()},h(){n(l,"class","block fixed bottom-2 right-2")},m(o,c){D(o,l,c),ht(e,l,null),s=!0},i(o){s||(Ne(e.$$.fragment,o),s=!0)},o(o){Ve(e.$$.fragment,o),s=!1},d(o){o&&r(l),mt(e)}}}function Pl(a){let l,e,s,o,c,i,h,g,w,b,L,_,p,P,V,N,A,M,B,Z,ge,W,q,ce,C,E,Te,re,se,y,H,R,z,Ae,ae,oe,ee,Ce,Re,G,X,ke,Ie,Oe,ye,ue,fe,He,ne,x,ze,Y,Se,Ee,de,je,_e,Q,he,be,Xe,F,U,$,ve,Fe,qe,ie,we,te,Ye,Le,Ze,Be,me,Ge,Pe,De,pe,xe,Ke;l=new pl({});let J=a[1].length>0&&Xt(a);function Je(u,S){return u[8]?Ll:wl}let We=Je(a),le=We(a),O=a[8]&&Zt(a),j=a[3]&&el();return{c(){ft(l.$$.fragment),e=v(),s=f("h4"),o=T("ぶくまびうあ"),c=v(),i=f("div"),h=f("ul"),g=f("li"),w=f("span"),b=f("span"),L=T("kind:30001に保存されているリストを取得、表示します。"),_=v(),p=f("li"),P=f("span"),V=v(),N=f("span"),A=T("ブックマークを取得する公開鍵を設定し、接続するリレーをリレーリストに追加してください。"),M=v(),B=f("li"),Z=f("span"),ge=v(),W=f("span"),q=T("各アイコンの説明は一覧ページ左上の 📝 マークをクリックすると表示されます"),ce=v(),C=f("div"),E=f("p"),Te=T("公開鍵(public key)"),re=v(),se=f("div"),y=f("button"),H=T("use NIP-07 "),R=f("br"),z=T("Extension"),Ae=v(),ae=f("input"),oe=v(),ee=f("div"),Ce=T(`※use NIP-07 Extension:
    拡張機能に有効なリレー(write)を設定している場合リレーリストを上書きします`),Re=v(),G=f("div"),X=f("p"),ke=f("span"),Ie=T("リレー(relay)"),Oe=T(`
    URLを入力したら`),ye=f("span"),ue=T("add relay"),fe=T("をクリックしてください"),He=v(),ne=f("div"),x=f("input"),ze=v(),Y=f("button"),Se=T("add relay"),Ee=v(),de=f("ul"),je=T(`リレーリスト
    `),J&&J.c(),_e=v(),Q=f("div"),he=f("div"),be=f("button"),le.c(),Xe=v(),O&&O.c(),F=v(),U=f("button"),$=T("Next →"),ve=v(),Fe=f("hr"),qe=v(),ie=f("div"),we=T("Github: "),te=f("a"),Ye=T("TsukemonoGit/nostr-bookmark-viewer3"),Le=v(),Ze=f("br"),Be=T(`
  Author:
  `),me=f("a"),Ge=T("mono(Nostr)"),Pe=v(),j&&j.c(),De=Me(),this.h()},l(u){dt(l.$$.fragment,u),e=k(u),s=d(u,"H4",{class:!0});var S=m(s);o=I(S,"ぶくまびうあ"),S.forEach(r),c=k(u),i=d(u,"DIV",{class:!0});var Lt=m(i);h=d(Lt,"UL",{class:!0});var $e=m(h);g=d($e,"LI",{});var pt=m(g);w=d(pt,"SPAN",{class:!0}),m(w).forEach(r),b=d(pt,"SPAN",{});var Pt=m(b);L=I(Pt,"kind:30001に保存されているリストを取得、表示します。"),Pt.forEach(r),pt.forEach(r),_=k($e),p=d($e,"LI",{});var st=m(p);P=d(st,"SPAN",{class:!0}),m(P).forEach(r),V=k(st),N=d(st,"SPAN",{});var Nt=m(N);A=I(Nt,"ブックマークを取得する公開鍵を設定し、接続するリレーをリレーリストに追加してください。"),Nt.forEach(r),st.forEach(r),M=k($e),B=d($e,"LI",{});var at=m(B);Z=d(at,"SPAN",{class:!0}),m(Z).forEach(r),ge=k(at),W=d(at,"SPAN",{});var Tt=m(W);q=I(Tt,"各アイコンの説明は一覧ページ左上の 📝 マークをクリックすると表示されます"),Tt.forEach(r),at.forEach(r),$e.forEach(r),Lt.forEach(r),ce=k(u),C=d(u,"DIV",{class:!0});var et=m(C);E=d(et,"P",{class:!0});var It=m(E);Te=I(It,"公開鍵(public key)"),It.forEach(r),re=k(et),se=d(et,"DIV",{class:!0});var ot=m(se);y=d(ot,"BUTTON",{class:!0});var nt=m(y);H=I(nt,"use NIP-07 "),R=d(nt,"BR",{}),z=I(nt,"Extension"),nt.forEach(r),Ae=k(ot),ae=d(ot,"INPUT",{type:!0,class:!0,placeholder:!0}),ot.forEach(r),oe=k(et),ee=d(et,"DIV",{class:!0});var St=m(ee);Ce=I(St,`※use NIP-07 Extension:
    拡張機能に有効なリレー(write)を設定している場合リレーリストを上書きします`),St.forEach(r),et.forEach(r),Re=k(u),G=d(u,"DIV",{class:!0});var tt=m(G);X=d(tt,"P",{});var rt=m(X);ke=d(rt,"SPAN",{class:!0});var Dt=m(ke);Ie=I(Dt,"リレー(relay)"),Dt.forEach(r),Oe=I(rt,`
    URLを入力したら`),ye=d(rt,"SPAN",{class:!0});var Ut=m(ye);ue=I(Ut,"add relay"),Ut.forEach(r),fe=I(rt,"をクリックしてください"),rt.forEach(r),He=k(tt),ne=d(tt,"DIV",{class:!0});var it=m(ne);x=d(it,"INPUT",{class:!0,type:!0,placeholder:!0}),ze=k(it),Y=d(it,"BUTTON",{class:!0});var At=m(Y);Se=I(At,"add relay"),At.forEach(r),it.forEach(r),Ee=k(tt),de=d(tt,"UL",{class:!0});var gt=m(de);je=I(gt,`リレーリスト
    `),J&&J.l(gt),gt.forEach(r),tt.forEach(r),_e=k(u),Q=d(u,"DIV",{class:!0});var ct=m(Q);he=d(ct,"DIV",{class:!0});var Rt=m(he);be=d(Rt,"BUTTON",{});var Bt=m(be);le.l(Bt),Bt.forEach(r),Rt.forEach(r),Xe=k(ct),O&&O.l(ct),ct.forEach(r),F=k(u),U=d(u,"BUTTON",{type:!0,class:!0});var Vt=m(U);$=I(Vt,"Next →"),Vt.forEach(r),ve=k(u),Fe=d(u,"HR",{}),qe=k(u),ie=d(u,"DIV",{});var Qe=m(ie);we=I(Qe,"Github: "),te=d(Qe,"A",{href:!0,target:!0,rel:!0,class:!0});var Mt=m(te);Ye=I(Mt,"TsukemonoGit/nostr-bookmark-viewer3"),Mt.forEach(r),Le=k(Qe),Ze=d(Qe,"BR",{}),Be=I(Qe,`
  Author:
  `),me=d(Qe,"A",{href:!0,target:!0,rel:!0,class:!0});var Ct=m(me);Ge=I(Ct,"mono(Nostr)"),Ct.forEach(r),Qe.forEach(r),Pe=k(u),j&&j.l(u),De=Me(),this.h()},h(){n(s,"class","h4"),n(w,"class","badge bg-primary-500"),n(P,"class","badge bg-primary-500"),n(Z,"class","badge bg-primary-500"),n(h,"class","list px-4"),n(i,"class","py-2 border-solid border-2 border-surface-500/25 mx-4"),n(E,"class","font-medium"),n(y,"class","py-1 btn variant-filled-secondary"),n(ae,"type","text"),n(ae,"class","px-2 text-ellipsis"),n(ae,"placeholder","npub1..."),n(se,"class","input-group input-group-divider grid-cols-[auto_1fr]"),n(ee,"class","text-sm mx-8"),n(C,"class","container my-4"),n(ke,"class","font-medium mr-1"),n(ye,"class","rounded-full variant-filled p-1 m-1"),n(x,"class","px-2"),n(x,"type","text"),n(x,"placeholder","wss://..."),x.disabled=a[3],n(Y,"class","py-1 btn variant-filled"),n(ne,"class","relay input-group input-group-divider grid-cols-[1fr_auto] h-12"),n(de,"class","border-solid border-2 border-surface-500/25 mx-8 my-1"),n(G,"class","container py-4"),n(he,"class","font-medium"),n(Q,"class","container py-4"),n(U,"type","button"),n(U,"class","btn variant-filled-secondary rounded-full my-5"),n(te,"href","https://github.com/TsukemonoGit/nostr-bookmark-viewer3"),n(te,"target","_blank"),n(te,"rel","noopener noreferrer"),n(te,"class","underline"),n(me,"href","https://nostr.com/npub1sjcvg64knxkrt6ev52rywzu9uzqakgy8ehhk8yezxmpewsthst6sw3jqcw"),n(me,"target","_blank"),n(me,"rel","noopener noreferrer"),n(me,"class","underline")},m(u,S){ht(l,u,S),D(u,e,S),D(u,s,S),t(s,o),D(u,c,S),D(u,i,S),t(i,h),t(h,g),t(g,w),t(g,b),t(b,L),t(h,_),t(h,p),t(p,P),t(p,V),t(p,N),t(N,A),t(h,M),t(h,B),t(B,Z),t(B,ge),t(B,W),t(W,q),D(u,ce,S),D(u,C,S),t(C,E),t(E,Te),t(C,re),t(C,se),t(se,y),t(y,H),t(y,R),t(y,z),t(se,Ae),t(se,ae),lt(ae,a[0]),t(C,oe),t(C,ee),t(ee,Ce),D(u,Re,S),D(u,G,S),t(G,X),t(X,ke),t(ke,Ie),t(X,Oe),t(X,ye),t(ye,ue),t(X,fe),t(G,He),t(G,ne),t(ne,x),lt(x,a[2]),t(ne,ze),t(ne,Y),t(Y,Se),t(G,Ee),t(G,de),t(de,je),J&&J.m(de,null),D(u,_e,S),D(u,Q,S),t(Q,he),t(he,be),le.m(be,null),t(Q,Xe),O&&O.m(Q,null),D(u,F,S),D(u,U,S),t(U,$),D(u,ve,S),D(u,Fe,S),D(u,qe,S),D(u,ie,S),t(ie,we),t(ie,te),t(te,Ye),t(ie,Le),t(ie,Ze),t(ie,Be),t(ie,me),t(me,Ge),D(u,Pe,S),j&&j.m(u,S),D(u,De,S),pe=!0,xe||(Ke=[K(y,"click",a[9]),K(ae,"input",a[15]),K(x,"input",a[16]),K(Y,"click",a[10]),K(be,"click",a[18]),K(U,"click",a[12])],xe=!0)},p(u,[S]){S&1&&ae.value!==u[0]&&lt(ae,u[0]),(!pe||S&8)&&(x.disabled=u[3]),S&4&&x.value!==u[2]&&lt(x,u[2]),u[1].length>0?J?J.p(u,S):(J=Xt(u),J.c(),J.m(de,null)):J&&(J.d(1),J=null),We!==(We=Je(u))&&(le.d(1),le=We(u),le&&(le.c(),le.m(be,null))),u[8]?O?(O.p(u,S),S&256&&Ne(O,1)):(O=Zt(u),O.c(),Ne(O,1),O.m(Q,null)):O&&(Ft(),Ve(O,1,1,()=>{O=null}),qt()),u[3]?j?S&8&&Ne(j,1):(j=el(),j.c(),Ne(j,1),j.m(De.parentNode,De)):j&&(Ft(),Ve(j,1,1,()=>{j=null}),qt())},i(u){pe||(Ne(l.$$.fragment,u),Ne(O),Ne(j),pe=!0)},o(u){Ve(l.$$.fragment,u),Ve(O),Ve(j),pe=!1},d(u){mt(l,u),u&&r(e),u&&r(s),u&&r(c),u&&r(i),u&&r(ce),u&&r(C),u&&r(Re),u&&r(G),J&&J.d(),u&&r(_e),u&&r(Q),le.d(),O&&O.d(),u&&r(F),u&&r(U),u&&r(ve),u&&r(Fe),u&&r(qe),u&&r(ie),u&&r(Pe),j&&j.d(u),u&&r(De),xe=!1,wt(Ke)}}}async function bt(a){let l,e;if(a.startsWith("ws://"))l=a.slice(5),e=new URL("http://"+l);else if(a.startsWith("wss://"))l=a.slice(6),e=new URL("https://"+l);else return console.log("test"),!1;let s=new Headers;s.set("Accept","application/nostr+json");try{let o=await fetch(e,{headers:s});console.log(o),console.log(o.status);try{console.log(await o.json())}catch{}return!!o.ok}catch(o){return console.log(o),!1}}function Nl(a,l,e){let s,o=[],c,i=!1,h,g=[],w,b,L;ll(async()=>{const y=localStorage.getItem("config");if(y){const R=JSON.parse(y);e(4,g=R.searchRelays),e(5,w=R.URLPreview),e(6,b=R.loadEvent)}else e(4,g=_t),e(5,w=!0),e(6,b=!0);const H=localStorage.getItem("nprofile");if(H)try{const{type:R,data:z}=Gt.decode(H);console.log(R),console.log(z),R==="nprofile"&&z.relays&&(e(0,s=z.pubkey),e(1,o=z.relays))}catch{console.log("nprofileのデコードに失敗しました")}});async function _(){try{e(0,s=await window.nostr.getPublicKey())}catch(y){console.log(y),h={message:"failed to get pubkey",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h);return}try{e(3,i=!0);const y=await window.nostr.getRelays(),H=Object.keys(y).filter(z=>y[z].write===!0),R=[];for(const z of H)console.log(z),R.includes(z)||await bt(z)&&R.push(z);R.length>0&&e(1,o=R),e(3,i=!1)}catch(y){console.log(y),h={message:"failed to get relays",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h)}}async function p(){if(!i){if(e(3,i=!0),e(2,c=c.trim()),o.includes(c))h={message:"already exists",timeout:3e3,background:"variant-filled"},Ue.trigger(h);else try{if(await bt(c))o.push(c),e(1,o);else throw e(3,i=!1),new Error}catch{h={message:"Please check relay URL",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h)}e(2,c=""),e(3,i=!1)}}function P(y){o.splice(y,1),e(1,o)}async function V(){e(3,i=!0),M();let y;try{y=ul(s)}catch{h={message:"Please check pubkey",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h),e(3,i=!1);return}if(o.length<1){h={message:"Please add relay",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h),e(3,i=!1);return}const H={pubkey:y,relays:o};try{const R=Gt.nprofileEncode(H);localStorage.setItem("nprofile",R),e(3,i=!1),await fl("/p/"+R)}catch{h={message:"nprofileエンコードに失敗しました",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h),e(3,i=!1);return}}async function N(){if(!i){if(e(3,i=!0),e(7,L=L.trim()),g.includes(L))h={message:"already exists",timeout:3e3,background:"variant-filled"},Ue.trigger(h);else try{if(await bt(L))g.push(L),e(4,g);else throw e(3,i=!1),new Error}catch{h={message:"Please check relay URL",timeout:3e3,background:"variant-filled-error"},Ue.trigger(h)}e(7,L=""),e(3,i=!1)}}function A(y){g.splice(y,1),e(4,g)}function M(){if(g)try{const H=JSON.stringify({searchRelays:g,URLPreview:w,loadEvent:b});localStorage.setItem("config",H)}catch(y){console.log(y)}}let B=!1;function Z(){s=this.value,e(0,s)}function ge(){c=this.value,e(2,c)}const W=y=>P(y),q=()=>{e(8,B=!B)},ce=()=>{console.log(_t),e(4,g=[..._t])};function C(){L=this.value,e(7,L)}const E=y=>A(y),Te=()=>{e(5,w=!0),e(6,b=!0)};function re(){w=this.checked,e(5,w)}function se(){b=this.checked,e(6,b)}return[s,o,c,i,g,w,b,L,B,_,p,P,V,N,A,Z,ge,W,q,ce,C,E,Te,re,se]}class Tl extends kt{constructor(l){super(),yt(this,l,Nl,Pl,Et,{})}}function Il(a){let l,e,s,o,c,i,h,g,w,b,L,_;return L=new Tl({}),{c(){l=f("meta"),e=f("meta"),s=f("meta"),o=f("meta"),c=f("meta"),i=v(),h=f("main"),g=f("h1"),w=T("nostr-bookmark-viewer3(v4)"),b=v(),ft(L.$$.fragment),this.h()},l(p){const P=tl("svelte-1ive41a",document.head);l=d(P,"META",{name:!0,content:!0}),e=d(P,"META",{prefix:!0}),s=d(P,"META",{property:!0,content:!0}),o=d(P,"META",{property:!0,content:!0}),c=d(P,"META",{property:!0,content:!0}),P.forEach(r),i=k(p),h=d(p,"MAIN",{class:!0});var V=m(h);g=d(V,"H1",{class:!0});var N=m(g);w=I(N,"nostr-bookmark-viewer3(v4)"),N.forEach(r),b=k(V),dt(L.$$.fragment,V),V.forEach(r),this.h()},h(){document.title="nostr-bookmark-viewer",n(l,"name","description"),n(l,"content","user setting"),n(e,"prefix","og: https://ogp.me/ns#"),n(s,"property","og:title"),n(s,"content","nostr-bookmark-viewer3"),n(o,"property","og:description"),n(o,"content","Nostrのブックマークをみたりできるやつ"),n(c,"property","og:image"),n(c,"content","https://nostr-bookmark-viewer3.vercel.app/img2.png"),n(g,"class","h1 mb-5"),n(h,"class","container max-w-5xl p-2")},m(p,P){t(document.head,l),t(document.head,e),t(document.head,s),t(document.head,o),t(document.head,c),D(p,i,P),D(p,h,P),t(h,g),t(g,w),t(h,b),ht(L,h,null),_=!0},p:vt,i(p){_||(Ne(L.$$.fragment,p),_=!0)},o(p){Ve(L.$$.fragment,p),_=!1},d(p){r(l),r(e),r(s),r(o),r(c),p&&r(i),p&&r(h),mt(L)}}}class Rl extends kt{constructor(l){super(),yt(this,l,null,Il,Et,{})}}export{Rl as component};
