import{S as mt,i as vt,s as gt,k as p,a as S,y as ee,q as w,D as bt,l as _,h as f,c as T,z as te,m,r as y,n as d,F as c,b as D,A as le,N as ye,d as N,f as _e,g as I,B as ae,P as Ae,L as We,o as $t,Q as Ne,K as de,v as he,u as W,R as kt,w as Et,T as wt,U as yt,e as re,O as ft,V as Xe}from"../chunks/index.e81ade4b.js";import{p as Dt}from"../chunks/stores.8e8b0047.js";import{n as Ve,a as It,f as Nt,P as Vt,p as St,t as Tt,g as At}from"../chunks/navigation.6cf19591.js";import{M as Pt,R as dt,n as we,m as Me,A as Bt,T as pt,N as Ot,a as _t,P as Ct,b as Mt,c as jt,d as Ft,e as ht,C as Lt}from"../chunks/Content.362e5346.js";import{p as Ut}from"../chunks/popup.7188fd77.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.0751fc73.js";function Ye(i,t,l){const e=i.slice();return e[29]=t[l],e[31]=l,e}function Ze(i,t,l){const e=i.slice();return e[37]=t[l],e}function xe(i,t,l){const e=i.slice();return e[34]=t[l],e}function et(i,t,l){const e=i.slice();return e[40]=t[l],e}function tt(i){let t,l=i[40]+"",e;return{c(){t=p("li"),e=w(l),this.h()},l(a){t=_(a,"LI",{class:!0});var n=m(t);e=y(n,l),n.forEach(f),this.h()},h(){d(t,"class","ml-4")},m(a,n){D(a,t,n),c(t,e)},p:de,d(a){a&&f(t)}}}function Jt(i){let t,l,e,a,n,o,s,r;return e=new Bt({props:{gridColumns:"grid grid-cols-[auto_1fr_auto]",slotDefault:"place-self-center",slotTrail:"place-self-end",padding:"p-0",background:"bg-surface-300-600-token ",gap:"gap-0",$$slots:{trail:[Qt],lead:[Ht],default:[Gt]},$$scope:{ctx:i}}}),n=new pt({props:{justify:"justify-center",flex:"flex-1",rounded:"",class:"bg-surface-50/80 w-full drop-shadow",$$slots:{default:[Xt]},$$scope:{ctx:i}}}),s=new Ot({props:{relays:dt,$$slots:{default:[il]},$$scope:{ctx:i}}}),{c(){t=p("div"),l=p("div"),ee(e.$$.fragment),a=S(),ee(n.$$.fragment),o=S(),ee(s.$$.fragment),this.h()},l(u){t=_(u,"DIV",{class:!0});var h=m(t);l=_(h,"DIV",{class:!0});var $=m(l);te(e.$$.fragment,$),a=T($),te(n.$$.fragment,$),$.forEach(f),h.forEach(f),o=T(u),te(s.$$.fragment,u),this.h()},h(){d(l,"class","max-w-screen-lg m-auto z-10"),d(t,"class","w-full fixed top-0 left-1/2 transform -translate-x-1/2 z-10")},m(u,h){D(u,t,h),c(t,l),le(e,l,null),c(l,a),le(n,l,null),D(u,o,h),le(s,u,h),r=!0},p(u,h){const $={};h[0]&72|h[1]&4096&&($.$$scope={dirty:h,ctx:u}),e.$set($);const k={};h[0]&16|h[1]&4096&&(k.$$scope={dirty:h,ctx:u}),n.$set(k);const g={};h[0]&32|h[1]&4096&&(g.$$scope={dirty:h,ctx:u}),s.$set(g)},i(u){r||(I(e.$$.fragment,u),I(n.$$.fragment,u),I(s.$$.fragment,u),r=!0)},o(u){N(e.$$.fragment,u),N(n.$$.fragment,u),N(s.$$.fragment,u),r=!1},d(u){u&&f(t),ae(e),ae(n),u&&f(o),ae(s,u)}}}function qt(i){let t;return{c(){t=w(i[1])},l(l){t=y(l,i[1])},m(l,e){D(l,t,e)},p(l,e){e[0]&2&&W(t,l[1])},i:de,o:de,d(l){l&&f(t)}}}function Rt(i){let t;return{c(){t=w("now loading")},l(l){t=y(l,"now loading")},m(l,e){D(l,t,e)},p:de,i:de,o:de,d(l){l&&f(t)}}}function lt(i){let t,l;return t=new _t({props:{group:ul,name:i[3][0].tags[0][1],value:0,$$slots:{default:[Kt]},$$scope:{ctx:i}}}),{c(){ee(t.$$.fragment)},l(e){te(t.$$.fragment,e)},m(e,a){le(t,e,a),l=!0},p(e,a){const n={};a[0]&8&&(n.name=e[3][0].tags[0][1]),a[0]&8|a[1]&4096&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){ae(t,e)}}}function Kt(i){let t=i[3][0].tags[0][1]+"",l;return{c(){l=w(t)},l(e){l=y(e,t)},m(e,a){D(e,l,a)},p(e,a){a[0]&8&&t!==(t=e[3][0].tags[0][1]+"")&&W(l,t)},d(e){e&&f(l)}}}function zt(i){let t,l,e=!i[6]&&lt(i);return{c(){e&&e.c(),t=re()},l(a){e&&e.l(a),t=re()},m(a,n){e&&e.m(a,n),D(a,t,n),l=!0},p(a,n){a[6]?e&&(he(),N(e,1,1,()=>{e=null}),_e()):e?(e.p(a,n),n[0]&64&&I(e,1)):(e=lt(a),e.c(),I(e,1),e.m(t.parentNode,t))},i(a){l||(I(e),l=!0)},o(a){N(e),l=!1},d(a){e&&e.d(a),a&&f(t)}}}function Gt(i){let t,l,e;return l=new pt({props:{padding:"py-3 px-4",justify:"justify",active:"variant-filled-secondary",hover:"hover:variant-soft-secondary",border:"border-b border-surface-400-500-token",rounded:"rounded-tl-container-token rounded-tr-container-token",$$slots:{default:[zt]},$$scope:{ctx:i}}}),{c(){t=p("div"),ee(l.$$.fragment),this.h()},l(a){t=_(a,"DIV",{class:!0});var n=m(t);te(l.$$.fragment,n),n.forEach(f),this.h()},h(){d(t,"class","tabGroup svelte-pws32x")},m(a,n){D(a,t,n),le(l,t,null),e=!0},p(a,n){const o={};n[0]&72|n[1]&4096&&(o.$$scope={dirty:n,ctx:a}),l.$set(o)},i(a){e||(I(l.$$.fragment,a),e=!0)},o(a){N(l.$$.fragment,a),e=!1},d(a){a&&f(t),ae(l)}}}function Ht(i){let t,l,e,a,n;return{c(){t=p("div"),l=p("button"),e=w("üìù"),this.h()},l(o){t=_(o,"DIV",{class:!0});var s=m(t);l=_(s,"BUTTON",{class:!0});var r=m(l);e=y(r,"üìù"),r.forEach(f),s.forEach(f),this.h()},h(){d(l,"class","btn-icon variant-filled"),d(t,"class","lead-icon pl-2 z-20")},m(o,s){D(o,t,s),c(t,l),c(l,e),a||(n=kt(Ut.call(null,l,i[10])),a=!0)},p:de,d(o){o&&f(t),a=!1,n()}}}function Qt(i){let t;return{c(){t=p("div"),this.h()},l(l){t=_(l,"DIV",{class:!0}),m(t).forEach(f),this.h()},h(){d(t,"class","pr-2 text-center justify-center")},m(l,e){D(l,t,e)},p:de,d(l){l&&f(t)}}}function Wt(i){let t;return{c(){t=w("public")},l(l){t=y(l,"public")},m(l,e){D(l,t,e)},d(l){l&&f(t)}}}function Xt(i){let t,l,e;function a(o){i[15](o)}let n={name:"pub",value:"pub",$$slots:{default:[Wt]},$$scope:{ctx:i}};return i[4]!==void 0&&(n.group=i[4]),t=new _t({props:n}),Et.push(()=>wt(t,"group",a)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,s){le(t,o,s),e=!0},p(o,s){const r={};s[1]&4096&&(r.$$scope={dirty:s,ctx:o}),!l&&s[0]&16&&(l=!0,r.group=o[4],yt(()=>l=!1)),t.$set(r)},i(o){e||(I(t.$$.fragment,o),e=!0)},o(o){N(t.$$.fragment,o),e=!1},d(o){ae(t,o)}}}function at(i){let t,l,e=i[5],a=[];for(let o=0;o<e.length;o+=1)a[o]=ct(Ye(i,e,o));const n=o=>N(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=re()},l(o){for(let s=0;s<a.length;s+=1)a[s].l(o);t=re()},m(o,s){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(o,s);D(o,t,s),l=!0},p(o,s){if(s[0]&14368|s[1]&6){e=o[5];let r;for(r=0;r<e.length;r+=1){const u=Ye(o,e,r);a[r]?(a[r].p(u,s),I(a[r],1)):(a[r]=ct(u),a[r].c(),I(a[r],1),a[r].m(t.parentNode,t))}for(he(),r=e.length;r<a.length;r+=1)n(r);_e()}},i(o){if(!l){for(let s=0;s<e.length;s+=1)I(a[s]);l=!0}},o(o){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)N(a[s]);l=!1},d(o){Ae(a,o),o&&f(t)}}}function Yt(i){let t,l,e,a=i[29][0]+"",n,o,s,r,u=i[29].slice(1),h=[];for(let $=0;$<u.length;$+=1)h[$]=rt(Ze(i,u,$));return{c(){t=p("div"),l=p("div"),e=p("div"),n=w(a),o=S(),s=p("div");for(let $=0;$<h.length;$+=1)h[$].c();r=S(),this.h()},l($){t=_($,"DIV",{class:!0});var k=m(t);l=_(k,"DIV",{class:!0});var g=m(l);e=_(g,"DIV",{class:!0});var O=m(e);n=y(O,a),O.forEach(f),o=T(g),s=_(g,"DIV",{class:!0});var B=m(s);for(let E=0;E<h.length;E+=1)h[E].l(B);B.forEach(f),g.forEach(f),r=T(k),k.forEach(f),this.h()},h(){d(e,"class","font-bold"),d(s,"class","flex"),d(l,"class","grid grid-rows-[auto_auto] gap-0"),d(t,"class","card drop-shadow-md p-2 my-1 grid grid-cols-[1fr_auto] gap-1")},m($,k){D($,t,k),c(t,l),c(l,e),c(e,n),c(l,o),c(l,s);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(s,null);c(t,r)},p($,k){if(k[0]&32&&a!==(a=$[29][0]+"")&&W(n,a),k[0]&32){u=$[29].slice(1);let g;for(g=0;g<u.length;g+=1){const O=Ze($,u,g);h[g]?h[g].p(O,k):(h[g]=rt(O),h[g].c(),h[g].m(s,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=u.length}},i:de,o:de,d($){$&&f(t),Ae(h,$)}}}function Zt(i){let t,l,e,a,n,o,s,r,u,h,$,k,g;l=new Ft({props:{queryKey:[i[29][1]],id:i[29][1],$$slots:{nodata:[sl,({text:E})=>({32:E}),({text:E})=>[0,E?2:0]],error:[nl,({text:E})=>({32:E}),({text:E})=>[0,E?2:0]],loading:[ol,({text:E})=>({32:E}),({text:E})=>[0,E?2:0]],default:[rl,({text:E})=>({32:E}),({text:E})=>[0,E?2:0]]},$$scope:{ctx:i}}});function O(){return i[19](i[29])}function B(){return i[20](i[29])}return{c(){t=p("div"),ee(l.$$.fragment),e=S(),a=p("div"),n=p("button"),o=w("üê•"),s=S(),r=p("button"),u=w("üîó"),h=S(),this.h()},l(E){t=_(E,"DIV",{class:!0});var V=m(t);te(l.$$.fragment,V),e=T(V),a=_(V,"DIV",{class:!0});var C=m(a);n=_(C,"BUTTON",{class:!0});var z=m(n);o=y(z,"üê•"),z.forEach(f),s=T(C),r=_(C,"BUTTON",{class:!0});var U=m(r);u=y(U,"üîó"),U.forEach(f),C.forEach(f),h=T(V),V.forEach(f),this.h()},h(){d(n,"class","btn p-0 mt-1 variant-filled justify-self-end"),d(r,"class","btn p-0 mt-1 variant-filled justify-self-end"),d(a,"class","flex flex-col"),d(t,"class","card drop-shadow px-1 py-2 my-1 grid grid-cols-[1fr_auto] gap-1")},m(E,V){D(E,t,V),le(l,t,null),c(t,e),c(t,a),c(a,n),c(n,o),c(a,s),c(a,r),c(r,u),c(t,h),$=!0,k||(g=[ye(n,"click",O),ye(r,"click",B)],k=!0)},p(E,V){i=E;const C={};V[0]&32&&(C.queryKey=[i[29][1]]),V[0]&32&&(C.id=i[29][1]),V[0]&32|V[1]&4098&&(C.$$scope={dirty:V,ctx:i}),l.$set(C)},i(E){$||(I(l.$$.fragment,E),$=!0)},o(E){N(l.$$.fragment,E),$=!1},d(E){E&&f(t),ae(l),k=!1,ft(g)}}}function rt(i){let t,l=i[37]+"",e,a;return{c(){t=p("div"),e=w(l),a=S(),this.h()},l(n){t=_(n,"DIV",{class:!0});var o=m(t);e=y(o,l),a=T(o),o.forEach(f),this.h()},h(){d(t,"class","flex flex-wrap px-1 mx-1 break-all")},m(n,o){D(n,t,o),c(t,e),c(t,a)},p(n,o){o[0]&32&&l!==(l=n[37]+"")&&W(e,l)},d(n){n&&f(t)}}}function ot(i){let t,l;return{c(){t=p("img"),this.h()},l(e){t=_(e,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){d(t,"class","w-12 object-contain justify-center"),Xe(t.src,l=JSON.parse(i[33].content).picture)||d(t,"src",l),d(t,"alt","avatar")},m(e,a){D(e,t,a)},p(e,a){a[1]&4&&!Xe(t.src,l=JSON.parse(e[33].content).picture)&&d(t,"src",l)},d(e){e&&f(t)}}}function nt(i){let t,l,e=i[32].tags,a=[];for(let o=0;o<e.length;o+=1)a[o]=it(xe(i,e,o));const n=o=>N(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=re()},l(o){for(let s=0;s<a.length;s+=1)a[s].l(o);t=re()},m(o,s){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(o,s);D(o,t,s),l=!0},p(o,s){if(s[0]&2048|s[1]&6){e=o[32].tags;let r;for(r=0;r<e.length;r+=1){const u=xe(o,e,r);a[r]?(a[r].p(u,s),I(a[r],1)):(a[r]=it(u),a[r].c(),I(a[r],1),a[r].m(t.parentNode,t))}for(he(),r=e.length;r<a.length;r+=1)n(r);_e()}},i(o){if(!l){for(let s=0;s<e.length;s+=1)I(a[s]);l=!0}},o(o){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)N(a[s]);l=!1},d(o){Ae(a,o),o&&f(t)}}}function st(i){let t,l;return t=new ht({props:{queryKey:["metadata",i[34][1]],pubkey:i[34][1],$$slots:{default:[xt,({metadata:e})=>({33:e}),({metadata:e})=>[0,e?4:0]]},$$scope:{ctx:i}}}),{c(){ee(t.$$.fragment)},l(e){te(t.$$.fragment,e)},m(e,a){le(t,e,a),l=!0},p(e,a){const n={};a[1]&2&&(n.queryKey=["metadata",e[34][1]]),a[1]&2&&(n.pubkey=e[34][1]),a[1]&4102&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){ae(t,e)}}}function xt(i){let t,l,e,a,n,o=JSON.parse(i[33].content).name+"",s,r,u,h;function $(){return i[18](i[33],i[34])}return{c(){t=p("div"),l=w("to "),e=p("button"),a=w("@"),n=p("u"),s=w(o),r=S(),this.h()},l(k){t=_(k,"DIV",{class:!0});var g=m(t);l=y(g,"to "),e=_(g,"BUTTON",{class:!0});var O=m(e);a=y(O,"@"),n=_(O,"U",{});var B=m(n);s=y(B,o),B.forEach(f),O.forEach(f),g.forEach(f),r=T(k),this.h()},h(){d(e,"class","text-emerald-800 whitespace-nowrap overflow-hidden text-ellipsis"),d(t,"class","-mt-1 px-2 opacity-50 text-sm whitespace-nowrap overflow-hidden")},m(k,g){D(k,t,g),c(t,l),c(t,e),c(e,a),c(e,n),c(n,s),D(k,r,g),u||(h=ye(e,"click",$),u=!0)},p(k,g){i=k,g[1]&4&&o!==(o=JSON.parse(i[33].content).name+"")&&W(s,o)},d(k){k&&f(t),k&&f(r),u=!1,h()}}}function it(i){let t,l,e=i[34][0]==="p"&&st(i);return{c(){e&&e.c(),t=re()},l(a){e&&e.l(a),t=re()},m(a,n){e&&e.m(a,n),D(a,t,n),l=!0},p(a,n){a[34][0]==="p"?e?(e.p(a,n),n[1]&2&&I(e,1)):(e=st(a),e.c(),I(e,1),e.m(t.parentNode,t)):e&&(he(),N(e,1,1,()=>{e=null}),_e())},i(a){l||(I(e),l=!0)},o(a){N(e),l=!1},d(a){e&&e.d(a),a&&f(t)}}}function el(i){let t,l,e=JSON.parse(i[33].content).picture,a,n,o,s,r=JSON.parse(i[33].content).display_name+"",u,h,$,k,g,O,B=JSON.parse(i[33].content).name+"",E,V,C,z,U=new Date(i[32].created_at*1e3).toLocaleString()+"",ce,oe,ue,G,J,R,ne,be,j=e&&ot(i);function ke(){return i[16](i[33],i[32])}function fe(){return i[17](i[32])}let b=i[32].tags.length>0&&nt(i);return J=new Lt({props:{text:i[32].content,tag:i[32].tags}}),{c(){t=p("div"),l=p("div"),j&&j.c(),a=S(),n=p("div"),o=p("div"),s=p("div"),u=w(r),h=S(),$=p("div"),k=p("button"),g=w("@"),O=p("u"),E=w(B),V=S(),C=p("div"),z=p("button"),ce=w(U),oe=S(),b&&b.c(),ue=S(),G=p("div"),ee(J.$$.fragment),this.h()},l(A){t=_(A,"DIV",{class:!0});var P=m(t);l=_(P,"DIV",{class:!0});var Q=m(l);j&&j.l(Q),Q.forEach(f),a=T(P),n=_(P,"DIV",{class:!0});var X=m(n);o=_(X,"DIV",{class:!0});var Y=m(o);s=_(Y,"DIV",{class:!0});var Z=m(s);u=y(Z,r),Z.forEach(f),h=T(Y),$=_(Y,"DIV",{class:!0});var pe=m($);k=_(pe,"BUTTON",{class:!0});var se=m(k);g=y(se,"@"),O=_(se,"U",{});var me=m(O);E=y(me,B),me.forEach(f),se.forEach(f),pe.forEach(f),V=T(Y),C=_(Y,"DIV",{class:!0});var $e=m(C);z=_($e,"BUTTON",{class:!0});var ie=m(z);ce=y(ie,U),ie.forEach(f),$e.forEach(f),Y.forEach(f),oe=T(X),b&&b.l(X),ue=T(X),G=_(X,"DIV",{class:!0});var H=m(G);te(J.$$.fragment,H),H.forEach(f),X.forEach(f),P.forEach(f),this.h()},h(){d(l,"class","w-12 h-12 rounded-full flex justify-center overflow-hidden bg-surface-500/25 mt-1"),d(s,"class","font-bold wi truncate"),d(k,"class","text-emerald-800 text-sm"),d($,"class","truncate wid min-w-[2em]"),d(z,"class","text-sm underline decoration-emerald-500"),d(C,"class","place-self-end min-w-max"),d(o,"class","w-full grid grid-cols-[auto_1fr_auto] gap-1"),d(G,"class","parent-container break-all whitespace-pre-wrap"),d(n,"class","grid grid-rows-[auto_auto_auto] gap-0 break-all w-full"),d(t,"class","grid grid-cols-[auto_1fr] gap-1")},m(A,P){D(A,t,P),c(t,l),j&&j.m(l,null),c(t,a),c(t,n),c(n,o),c(o,s),c(s,u),c(o,h),c(o,$),c($,k),c(k,g),c(k,O),c(O,E),c(o,V),c(o,C),c(C,z),c(z,ce),c(n,oe),b&&b.m(n,null),c(n,ue),c(n,G),le(J,G,null),R=!0,ne||(be=[ye(k,"click",ke),ye(z,"click",fe)],ne=!0)},p(A,P){i=A,P[1]&4&&(e=JSON.parse(i[33].content).picture),e?j?j.p(i,P):(j=ot(i),j.c(),j.m(l,null)):j&&(j.d(1),j=null),(!R||P[1]&4)&&r!==(r=JSON.parse(i[33].content).display_name+"")&&W(u,r),(!R||P[1]&4)&&B!==(B=JSON.parse(i[33].content).name+"")&&W(E,B),(!R||P[1]&2)&&U!==(U=new Date(i[32].created_at*1e3).toLocaleString()+"")&&W(ce,U),i[32].tags.length>0?b?(b.p(i,P),P[1]&2&&I(b,1)):(b=nt(i),b.c(),I(b,1),b.m(n,ue)):b&&(he(),N(b,1,1,()=>{b=null}),_e());const Q={};P[1]&2&&(Q.text=i[32].content),P[1]&2&&(Q.tag=i[32].tags),J.$set(Q)},i(A){R||(I(b),I(J.$$.fragment,A),R=!0)},o(A){N(b),N(J.$$.fragment,A),R=!1},d(A){A&&f(t),j&&j.d(),b&&b.d(),ae(J),ne=!1,ft(be)}}}function tl(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Loading note... ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Loading note... ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","loading")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function ll(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Failed to get note ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Failed to get note ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","error")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function al(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Note not found ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Note not found ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","nodata")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function rl(i){let t,l;return t=new ht({props:{queryKey:["metadata",i[32].pubkey],pubkey:i[32].pubkey,$$slots:{nodata:[al,({metadata:e})=>({33:e}),({metadata:e})=>[0,e?4:0]],error:[ll,({metadata:e})=>({33:e}),({metadata:e})=>[0,e?4:0]],loading:[tl,({metadata:e})=>({33:e}),({metadata:e})=>[0,e?4:0]],default:[el,({metadata:e})=>({33:e}),({metadata:e})=>[0,e?4:0]]},$$scope:{ctx:i}}}),{c(){ee(t.$$.fragment)},l(e){te(t.$$.fragment,e)},m(e,a){le(t,e,a),l=!0},p(e,a){const n={};a[1]&2&&(n.queryKey=["metadata",e[32].pubkey]),a[1]&2&&(n.pubkey=e[32].pubkey),a[0]&32|a[1]&4102&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){N(t.$$.fragment,e),l=!1},d(e){ae(t,e)}}}function ol(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Loading note... ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Loading note... ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","loading")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function nl(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Failed to get note ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Failed to get note ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","error")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function sl(i){let t,l,e,a=i[29][1]+"",n,o;return{c(){t=p("div"),l=p("p"),e=w("Note not found ("),n=w(a),o=w(")"),this.h()},l(s){t=_(s,"DIV",{slot:!0});var r=m(t);l=_(r,"P",{class:!0});var u=m(l);e=y(u,"Note not found ("),n=y(u,a),o=y(u,")"),u.forEach(f),r.forEach(f),this.h()},h(){d(l,"class","break-all"),d(t,"slot","nodata")},m(s,r){D(s,t,r),c(t,l),c(l,e),c(l,n),c(l,o)},p(s,r){r[0]&32&&a!==(a=s[29][1]+"")&&W(n,a)},d(s){s&&f(t)}}}function ct(i){let t,l,e,a;const n=[Zt,Yt],o=[];function s(r,u){return r[29][0]==="e"?0:r[29][0]!=="d"?1:-1}return~(t=s(i))&&(l=o[t]=n[t](i)),{c(){l&&l.c(),e=re()},l(r){l&&l.l(r),e=re()},m(r,u){~t&&o[t].m(r,u),D(r,e,u),a=!0},p(r,u){let h=t;t=s(r),t===h?~t&&o[t].p(r,u):(l&&(he(),N(o[h],1,1,()=>{o[h]=null}),_e()),~t?(l=o[t],l?l.p(r,u):(l=o[t]=n[t](r),l.c()),I(l,1),l.m(e.parentNode,e)):l=null)},i(r){a||(I(l),a=!0)},o(r){N(l),a=!1},d(r){~t&&o[t].d(r),r&&f(e)}}}function il(i){let t,l,e=i[5]&&at(i);return{c(){e&&e.c(),t=re()},l(a){e&&e.l(a),t=re()},m(a,n){e&&e.m(a,n),D(a,t,n),l=!0},p(a,n){a[5]?e?(e.p(a,n),n[0]&32&&I(e,1)):(e=at(a),e.c(),I(e,1),e.m(t.parentNode,t)):e&&(he(),N(e,1,1,()=>{e=null}),_e())},i(a){l||(I(e),l=!0)},o(a){N(e),l=!1},d(a){e&&e.d(a),a&&f(t)}}}function ut(i){let t,l,e;return l=new Vt({props:{"...":!0,stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30",width:"w-24"}}),{c(){t=p("div"),ee(l.$$.fragment),this.h()},l(a){t=_(a,"DIV",{class:!0});var n=m(t);te(l.$$.fragment,n),n.forEach(f),this.h()},h(){d(t,"class","fixed bottom-2 right-2")},m(a,n){D(a,t,n),le(l,t,null),e=!0},i(a){e||(I(l.$$.fragment,a),e=!0)},o(a){N(l.$$.fragment,a),e=!1},d(a){a&&f(t),ae(l)}}}function cl(i){let t,l,e,a,n,o,s,r,u,h,$,k,g,O=Ve.npubEncode(i[7])+"",B,E,V,C,z,U,ce,oe,ue,G,J,R,ne,be,j,ke,fe,b,A,P,Q,X,Y,Z,pe,se,me,$e,ie,H,x,Se,ve,De,Pe,je;o=new Pt({});let Ee=i[8],K=[];for(let v=0;v<Ee.length;v+=1)K[v]=tt(et(i,Ee,v));const Fe=[Rt,qt,Jt],ge=[];function Le(v,M){return v[3]?v[2]?1:2:0}H=Le(i),x=ge[H]=Fe[H](i);let q=i[6]&&ut();return{c(){t=p("meta"),l=p("meta"),e=p("meta"),a=p("meta"),n=S(),ee(o.$$.fragment),s=S(),r=p("div"),u=p("div"),h=p("p"),$=w("„Äêpubkey„Äë"),k=S(),g=p("p"),B=w(O),E=S(),V=p("p"),C=w("„Äêrelays„Äë"),z=S(),U=p("ul");for(let v=0;v<K.length;v+=1)K[v].c();ce=S(),oe=p("hr"),ue=S(),G=p("div"),J=p("ul"),R=p("li"),ne=p("span"),be=w("üê•"),j=w(" Nostr„ÅßÂÖ±Êúâ„Åô„Çã"),ke=S(),fe=p("li"),b=p("span"),A=w("üîó"),P=w(" Â§ñÈÉ®„Ç¢„Éó„É™„ÅßÈñã„Åè"),Q=S(),X=p("hr"),Y=S(),Z=p("button"),pe=w("Go back to Setup"),se=S(),me=p("div"),$e=S(),ie=p("main"),x.c(),Se=S(),ve=p("div"),q&&q.c(),this.h()},l(v){const M=bt("svelte-391qmj",document.head);t=_(M,"META",{prefix:!0}),l=_(M,"META",{property:!0,content:!0}),e=_(M,"META",{property:!0,content:!0}),a=_(M,"META",{property:!0,content:!0}),M.forEach(f),n=T(v),te(o.$$.fragment,v),s=T(v),r=_(v,"DIV",{class:!0,"data-popup":!0});var F=m(r);u=_(F,"DIV",{});var L=m(u);h=_(L,"P",{});var Ie=m(h);$=y(Ie,"„Äêpubkey„Äë"),Ie.forEach(f),k=T(L),g=_(L,"P",{});var Ue=m(g);B=y(Ue,O),Ue.forEach(f),E=T(L),V=_(L,"P",{class:!0});var Je=m(V);C=y(Je,"„Äêrelays„Äë"),Je.forEach(f),z=T(L),U=_(L,"UL",{class:!0});var qe=m(U);for(let Ce=0;Ce<K.length;Ce+=1)K[Ce].l(qe);qe.forEach(f),L.forEach(f),ce=T(F),oe=_(F,"HR",{class:!0}),ue=T(F),G=_(F,"DIV",{class:!0});var Re=m(G);J=_(Re,"UL",{class:!0});var Te=m(J);R=_(Te,"LI",{class:!0});var Be=m(R);ne=_(Be,"SPAN",{class:!0});var Ke=m(ne);be=y(Ke,"üê•"),Ke.forEach(f),j=y(Be," Nostr„ÅßÂÖ±Êúâ„Åô„Çã"),Be.forEach(f),ke=T(Te),fe=_(Te,"LI",{class:!0});var Oe=m(fe);b=_(Oe,"SPAN",{class:!0});var ze=m(b);A=y(ze,"üîó"),ze.forEach(f),P=y(Oe," Â§ñÈÉ®„Ç¢„Éó„É™„ÅßÈñã„Åè"),Oe.forEach(f),Te.forEach(f),Re.forEach(f),Q=T(F),X=_(F,"HR",{class:!0}),Y=T(F),Z=_(F,"BUTTON",{type:!0,class:!0});var Ge=m(Z);pe=y(Ge,"Go back to Setup"),Ge.forEach(f),se=T(F),me=_(F,"DIV",{class:!0}),m(me).forEach(f),F.forEach(f),$e=T(v),ie=_(v,"MAIN",{class:!0});var He=m(ie);x.l(He),He.forEach(f),Se=T(v),ve=_(v,"DIV",{class:!0});var Qe=m(ve);q&&q.l(Qe),Qe.forEach(f),this.h()},h(){d(t,"prefix","og: https://ogp.me/ns#"),d(l,"property","og:title"),d(l,"content","nostr-bookmark-viewer3"),d(e,"property","og:description"),d(e,"content","naddr:id:"+i[9]+",pubkey:"+i[7]),d(a,"property","og:image"),d(a,"content",i[0]),d(V,"class","mt-2"),d(U,"class","list-disc"),d(oe,"class","!border-t-2 my-1"),d(ne,"class","btn variant-filled p-0 w-5"),d(R,"class","ml-4"),d(b,"class","btn variant-filled p-0 w-5"),d(fe,"class","ml-4"),d(J,"class","list-disc"),d(G,"class","text-sm"),d(X,"class","!border-t-2 my-1"),d(Z,"type","button"),d(Z,"class","btn variant-filled py-1"),d(me,"class","arrow bg-surface-100-800-token"),d(r,"class","card p-4 w-72 shadow-xl z-20 break-all"),d(r,"data-popup","popupFeatured"),d(ie,"class","container max-w-5xl px-1 mt-24 mb-12"),d(ve,"class","container max-w-5xl mx-auto z-10")},m(v,M){c(document.head,t),c(document.head,l),c(document.head,e),c(document.head,a),D(v,n,M),le(o,v,M),D(v,s,M),D(v,r,M),c(r,u),c(u,h),c(h,$),c(u,k),c(u,g),c(g,B),c(u,E),c(u,V),c(V,C),c(u,z),c(u,U);for(let F=0;F<K.length;F+=1)K[F]&&K[F].m(U,null);c(r,ce),c(r,oe),c(r,ue),c(r,G),c(G,J),c(J,R),c(R,ne),c(ne,be),c(R,j),c(J,ke),c(J,fe),c(fe,b),c(b,A),c(fe,P),c(r,Q),c(r,X),c(r,Y),c(r,Z),c(Z,pe),c(r,se),c(r,me),D(v,$e,M),D(v,ie,M),ge[H].m(ie,null),D(v,Se,M),D(v,ve,M),q&&q.m(ve,null),De=!0,Pe||(je=ye(Z,"click",i[14]),Pe=!0)},p(v,M){if((!De||M[0]&1)&&d(a,"content",v[0]),M[0]&256){Ee=v[8];let L;for(L=0;L<Ee.length;L+=1){const Ie=et(v,Ee,L);K[L]?K[L].p(Ie,M):(K[L]=tt(Ie),K[L].c(),K[L].m(U,null))}for(;L<K.length;L+=1)K[L].d(1);K.length=Ee.length}let F=H;H=Le(v),H===F?ge[H].p(v,M):(he(),N(ge[F],1,1,()=>{ge[F]=null}),_e(),x=ge[H],x?x.p(v,M):(x=ge[H]=Fe[H](v),x.c()),I(x,1),x.m(ie,null)),v[6]?q?M[0]&64&&I(q,1):(q=ut(),q.c(),I(q,1),q.m(ve,null)):q&&(he(),N(q,1,1,()=>{q=null}),_e())},i(v){De||(I(o.$$.fragment,v),I(x),I(q),De=!0)},o(v){N(o.$$.fragment,v),N(x),N(q),De=!1},d(v){f(t),f(l),f(e),f(a),v&&f(n),ae(o,v),v&&f(s),v&&f(r),Ae(K,v),v&&f($e),v&&f(ie),ge[H].d(),v&&f(Se),v&&f(ve),q&&q.d(),Pe=!1,je()}}}let ul=0;function fl(i,t,l){let e,a;We(i,we,b=>l(6,e=b)),We(i,Dt,b=>l(21,a=b));let n="";const{type:o,data:s}=Ve.decode(a.params.naddr);let r,u=!1;const{pubkey:h,relays:$,identifier:k,kind:g}=o==="naddr"&&s.relays?{pubkey:s.pubkey,relays:s.relays.length>0?s.relays:dt,identifier:s.identifier,kind:s.kind}:{pubkey:"",relays:[],identifier:"",kind:30001};console.log(h,$,k,g),g!==30001&&(r="„Éñ„ÇØ„Éû„ÅÆnaddr„Åò„ÇÉ„Å™„ÅÑ„Åã„ÇÇ",console.log("„Éñ„ÇØ„Éû„ÅÆnaddr„Åò„ÇÉ„Å™„ÅÑ„Åã„ÇÇ"));const O=[{authors:[h],kinds:[g],"#d":[k]}];let B,E="pub",V;$t(async()=>{if(l(0,n=It(Ve.npubEncode(h),k)),Ne(we,e=!0,e),h!==""||$.length>0){if(l(3,B=await Nt($,O)),console.log(B),B.length===0){l(2,u=!0),l(1,r="„Éñ„ÇØ„Éû„Å™„Çì„ÇÇ„Å™„ÅÑ„Åã„ÇÇ"),console.log("„Éñ„ÇØ„Éû„Å™„Çì„ÇÇ„Å™„ÅÑ„Åã„ÇÇ"),Ne(we,e=!1,e);return}l(5,V=B[0].tags),Ne(we,e=!1,e)}});const C={event:"click",target:"popupFeatured",placement:"bottom"},z={ref:Mt,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function U(b,A){console.log(b);const P={type:"component",value:{metadata:b,pubkey:A},component:z};Me.trigger(P)}const ce={ref:jt,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function oe(b){console.log("click");const A={type:"component",title:"Event Json",value:{note:b},component:ce};Me.trigger(A)}const ue={ref:Ct,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function G(b){console.log("quote");const A=[b],P={type:"component",component:ue,title:"postNote",body:"NIP-07„ÅÆpreferred relays„ÅÆwrite„Å´Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„É™„É¨„Éº„Å´„Éù„Çπ„Éà„Åó„Åæ„Åô„ÄÇ",value:{content:`\r
nostr:${Ve.noteEncode(b[1])}\r
`,tags:A},response:async Q=>{if(console.log(Q),Q){Ne(we,e=!0,e);const X={id:"",pubkey:await window.nostr.getPublicKey(),created_at:Math.floor(Date.now()/1e3),kind:1,tags:A,content:Q.content,sig:""},Y=await window.nostr.getRelays(),Z=Object.keys(Y).filter(se=>Y[se].write===!0),pe=await St(X,Z);if(pe){const se={message:pe.msg.join("<br>"),timeout:3e3};Tt.trigger(se)}Ne(we,e=!1,e)}}};Me.trigger(P)}const J=()=>At(window.location.origin);function R(b){E=b,l(4,E)}return[n,r,u,B,E,V,e,h,$,k,C,U,oe,G,J,R,(b,A)=>{U(b,A.pubkey)},b=>{oe(b)},(b,A)=>{U(b,A[1])},b=>G(b),b=>{window.open("https://nostr.com/"+Ve.noteEncode(b[1]),"_blank")}]}class gl extends mt{constructor(t){super(),vt(this,t,fl,cl,gt,{},null,[-1,-1])}}export{gl as component};
