import{a2 as pa,a3 as va,a4 as zt,a5 as ma,s as Pe,r as Oe,f as g,a as F,g as k,h as E,c as U,d as p,j as m,i as I,w as y,x as Se,y as Ie,z as Ce,I as Kr,D as He,E as Xe,F as Y,G as Qe,C as ot,L as Be,Y as ya,Z as rr,$ as dn,J as at,p as ba,e as Z,B as Fe,K as ga,A as H,V as ka,R as jr,q as hn,H as Gr,v as Jr,X as ce,l as q,m as P,P as nr,n as N,o as wa,a6 as Eo,a7 as lt,O as Ve,a0 as hr,U as dt,Q as _r}from"./scheduler.9fee0ef1.js";import{g as ee,t as L,c as te,a as A,S as De,i as Re,p as ht,b as ie,d as le,m as oe,e as ae}from"./index.9deb4333.js";import{w as ir,x as _n,y as Ea,G as Oa,z as Oo,A as Sa,B as Ia,C as Ca,D as qa,n as X,t as or,E as pn,b as So,R as Pa,f as Da,e as Ze,u as xe,F as vn,H as ft,I as Ra}from"./navigation.8a69eadb.js";import"./ProgressBar.svelte_svelte_type_style_lang.28e18f2f.js";import{w as ar,r as Ft,d as er}from"./index.4948511f.js";function $e(n,e){const t=e.token={};function r(i,o,a,l){if(e.token!==t)return;e.resolved=l;let s=e.ctx;a!==void 0&&(s=s.slice(),s[a]=l);const u=i&&(e.current=i)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(ee(),L(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),te())}):e.block.d(1),u.c(),A(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[o]=u),c&&ma()}if(pa(n)){const i=va();if(n.then(o=>{zt(i),r(e.then,1,e.value,o),zt(null)},o=>{if(zt(i),r(e.catch,2,e.error,o),zt(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function pr(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function sr(n,e){const t={},r={},i={$$scope:1};let o=n.length;for(;o--;){const a=n[o],l=e[o];if(l){for(const s in a)s in l||(r[s]=1);for(const s in l)i[s]||(t[s]=l[s],i[s]=1);n[o]=l}else for(const s in a)i[s]=1}for(const a in r)a in t||(t[a]=void 0);return t}function mn(n){return typeof n=="object"&&n!==null?n:{}}function Ta(){const{subscribe:n,set:e,update:t}=ar([]);return{subscribe:n,set:e,update:t,trigger:r=>t(i=>(i.push(r),i)),close:()=>t(r=>(r.length>0&&r.shift(),r)),clear:()=>e([])}}const qe=Ta();function Aa(n,e){const t='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let r,i;function o(f){f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),i.focus())}function a(f){!f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),r.focus())}const l=f=>{if(e===!1)return;const d=Array.from(n.querySelectorAll(t));d.length&&(r=d[0],i=d[d.length-1],f||r.focus(),r.addEventListener("keydown",o),i.addEventListener("keydown",a))};l(!1);function s(){r&&r.removeEventListener("keydown",o),i&&i.removeEventListener("keydown",a)}const u=(f,d)=>(f.length&&(s(),l(!0)),d),c=new MutationObserver(u);return c.observe(n,{childList:!0,subtree:!0}),{update(f){e=f,f?l(!1):s()},destroy(){s(),c.disconnect()}}}const Ma=n=>({}),yn=n=>({}),ja=n=>({}),bn=n=>({}),La=n=>({}),gn=n=>({});function kn(n){let e,t,r;const i=n[22].lead,o=Oe(i,n,n[21],gn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",t="app-bar-slot-lead "+n[4])},m(a,l){I(a,e,l),o&&o.m(e,null),r=!0},p(a,l){o&&o.p&&(!r||l&2097152)&&Se(o,i,a,a[21],r?Ce(i,a[21],l,La):Ie(a[21]),gn),(!r||l&16&&t!==(t="app-bar-slot-lead "+a[4]))&&m(e,"class",t)},i(a){r||(A(o,a),r=!0)},o(a){L(o,a),r=!1},d(a){a&&p(e),o&&o.d(a)}}}function wn(n){let e,t,r;const i=n[22].trail,o=Oe(i,n,n[21],bn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",t="app-bar-slot-trail "+n[2])},m(a,l){I(a,e,l),o&&o.m(e,null),r=!0},p(a,l){o&&o.p&&(!r||l&2097152)&&Se(o,i,a,a[21],r?Ce(i,a[21],l,ja):Ie(a[21]),bn),(!r||l&4&&t!==(t="app-bar-slot-trail "+a[2]))&&m(e,"class",t)},i(a){r||(A(o,a),r=!0)},o(a){L(o,a),r=!1},d(a){a&&p(e),o&&o.d(a)}}}function En(n){let e,t,r;const i=n[22].headline,o=Oe(i,n,n[21],yn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",t="app-bar-row-headline "+n[5])},m(a,l){I(a,e,l),o&&o.m(e,null),r=!0},p(a,l){o&&o.p&&(!r||l&2097152)&&Se(o,i,a,a[21],r?Ce(i,a[21],l,Ma):Ie(a[21]),yn),(!r||l&32&&t!==(t="app-bar-row-headline "+a[5]))&&m(e,"class",t)},i(a){r||(A(o,a),r=!0)},o(a){L(o,a),r=!1},d(a){a&&p(e),o&&o.d(a)}}}function Na(n){let e,t,r,i,o,a,l,s,u,c,f=n[8].lead&&kn(n);const d=n[22].default,h=Oe(d,n,n[21],null);let _=n[8].trail&&wn(n),v=n[8].headline&&En(n);return{c(){e=g("div"),t=g("div"),f&&f.c(),r=F(),i=g("div"),h&&h.c(),a=F(),_&&_.c(),s=F(),v&&v.c(),this.h()},l(b){e=k(b,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-labelledby":!0});var w=E(e);t=k(w,"DIV",{class:!0});var S=E(t);f&&f.l(S),r=U(S),i=k(S,"DIV",{class:!0});var D=E(i);h&&h.l(D),D.forEach(p),a=U(S),_&&_.l(S),S.forEach(p),s=U(w),v&&v.l(w),w.forEach(p),this.h()},h(){m(i,"class",o="app-bar-slot-default "+n[3]),m(t,"class",l="app-bar-row-main "+n[6]),m(e,"class",u="app-bar "+n[7]),m(e,"data-testid","app-bar"),m(e,"role","toolbar"),m(e,"aria-label",n[0]),m(e,"aria-labelledby",n[1])},m(b,w){I(b,e,w),y(e,t),f&&f.m(t,null),y(t,r),y(t,i),h&&h.m(i,null),y(t,a),_&&_.m(t,null),y(e,s),v&&v.m(e,null),c=!0},p(b,[w]){b[8].lead?f?(f.p(b,w),w&256&&A(f,1)):(f=kn(b),f.c(),A(f,1),f.m(t,r)):f&&(ee(),L(f,1,1,()=>{f=null}),te()),h&&h.p&&(!c||w&2097152)&&Se(h,d,b,b[21],c?Ce(d,b[21],w,null):Ie(b[21]),null),(!c||w&8&&o!==(o="app-bar-slot-default "+b[3]))&&m(i,"class",o),b[8].trail?_?(_.p(b,w),w&256&&A(_,1)):(_=wn(b),_.c(),A(_,1),_.m(t,null)):_&&(ee(),L(_,1,1,()=>{_=null}),te()),(!c||w&64&&l!==(l="app-bar-row-main "+b[6]))&&m(t,"class",l),b[8].headline?v?(v.p(b,w),w&256&&A(v,1)):(v=En(b),v.c(),A(v,1),v.m(e,null)):v&&(ee(),L(v,1,1,()=>{v=null}),te()),(!c||w&128&&u!==(u="app-bar "+b[7]))&&m(e,"class",u),(!c||w&1)&&m(e,"aria-label",b[0]),(!c||w&2)&&m(e,"aria-labelledby",b[1])},i(b){c||(A(f),A(h,b),A(_),A(v),c=!0)},o(b){L(f),L(h,b),L(_),L(v),c=!1},d(b){b&&p(e),f&&f.d(),h&&h.d(b),_&&_.d(),v&&v.d()}}}const Va="flex flex-col",Fa="grid items-center",Ua="",Ba="flex-none flex justify-between items-center",Ha="flex-auto",Qa="flex-none flex items-center space-x-4";function Ka(n,e,t){let r,i,o,a,l,s,{$$slots:u={},$$scope:c}=e;const f=Kr(u);let{background:d="bg-surface-100-800-token"}=e,{border:h=""}=e,{padding:_="p-4"}=e,{shadow:v=""}=e,{spacing:b="space-y-4"}=e,{gridColumns:w="grid-cols-[auto_1fr_auto]"}=e,{gap:S="gap-4"}=e,{regionRowMain:D=""}=e,{regionRowHeadline:T=""}=e,{slotLead:j=""}=e,{slotDefault:O=""}=e,{slotTrail:C=""}=e,{label:R=""}=e,{labelledby:M=""}=e;return n.$$set=Q=>{t(23,e=He(He({},e),Xe(Q))),"background"in Q&&t(9,d=Q.background),"border"in Q&&t(10,h=Q.border),"padding"in Q&&t(11,_=Q.padding),"shadow"in Q&&t(12,v=Q.shadow),"spacing"in Q&&t(13,b=Q.spacing),"gridColumns"in Q&&t(14,w=Q.gridColumns),"gap"in Q&&t(15,S=Q.gap),"regionRowMain"in Q&&t(16,D=Q.regionRowMain),"regionRowHeadline"in Q&&t(17,T=Q.regionRowHeadline),"slotLead"in Q&&t(18,j=Q.slotLead),"slotDefault"in Q&&t(19,O=Q.slotDefault),"slotTrail"in Q&&t(20,C=Q.slotTrail),"label"in Q&&t(0,R=Q.label),"labelledby"in Q&&t(1,M=Q.labelledby),"$$scope"in Q&&t(21,c=Q.$$scope)},n.$$.update=()=>{t(7,r=`${Va} ${d} ${h} ${b} ${_} ${v} ${e.class??""}`),n.$$.dirty&114688&&t(6,i=`${Fa} ${w} ${S} ${D}`),n.$$.dirty&131072&&t(5,o=`${Ua} ${T}`),n.$$.dirty&262144&&t(4,a=`${Ba} ${j}`),n.$$.dirty&524288&&t(3,l=`${Ha} ${O}`),n.$$.dirty&1048576&&t(2,s=`${Qa} ${C}`)},e=Xe(e),[R,M,s,l,a,o,i,r,f,d,h,_,v,b,w,S,D,T,j,O,C,c,u]}class Md extends De{constructor(e){super(),Re(this,e,Ka,Na,Pe,{background:9,border:10,padding:11,shadow:12,spacing:13,gridColumns:14,gap:15,regionRowMain:16,regionRowHeadline:17,slotLead:18,slotDefault:19,slotTrail:20,label:0,labelledby:1})}}const Ga=n=>({}),On=n=>({});function Sn(n){let e,t,r;const i=n[17].panel,o=Oe(i,n,n[16],On);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var l=E(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",t="tab-panel "+n[2]),m(e,"role","tabpanel"),m(e,"aria-labelledby",n[1]),m(e,"tabindex","0")},m(a,l){I(a,e,l),o&&o.m(e,null),r=!0},p(a,l){o&&o.p&&(!r||l&65536)&&Se(o,i,a,a[16],r?Ce(i,a[16],l,Ga):Ie(a[16]),On),(!r||l&4&&t!==(t="tab-panel "+a[2]))&&m(e,"class",t),(!r||l&2)&&m(e,"aria-labelledby",a[1])},i(a){r||(A(o,a),r=!0)},o(a){L(o,a),r=!1},d(a){a&&p(e),o&&o.d(a)}}}function Ja(n){let e,t,r,i,o,a,l,s;const u=n[17].default,c=Oe(u,n,n[16],null);let f=n[5].panel&&Sn(n);return{c(){e=g("div"),t=g("div"),c&&c.c(),i=F(),f&&f.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,"data-testid":!0});var h=E(e);t=k(h,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var _=E(t);c&&c.l(_),_.forEach(p),i=U(h),f&&f.l(h),h.forEach(p),this.h()},h(){m(t,"class",r="tab-list "+n[3]),m(t,"role","tablist"),m(t,"aria-labelledby",n[0]),m(e,"class",o="tab-group "+n[4]),m(e,"data-testid","tab-group")},m(d,h){I(d,e,h),y(e,t),c&&c.m(t,null),y(e,i),f&&f.m(e,null),a=!0,l||(s=[Y(e,"click",n[18]),Y(e,"keypress",n[19]),Y(e,"keydown",n[20]),Y(e,"keyup",n[21])],l=!0)},p(d,[h]){c&&c.p&&(!a||h&65536)&&Se(c,u,d,d[16],a?Ce(u,d[16],h,null):Ie(d[16]),null),(!a||h&8&&r!==(r="tab-list "+d[3]))&&m(t,"class",r),(!a||h&1)&&m(t,"aria-labelledby",d[0]),d[5].panel?f?(f.p(d,h),h&32&&A(f,1)):(f=Sn(d),f.c(),A(f,1),f.m(e,null)):f&&(ee(),L(f,1,1,()=>{f=null}),te()),(!a||h&16&&o!==(o="tab-group "+d[4]))&&m(e,"class",o)},i(d){a||(A(c,d),A(f),a=!0)},o(d){L(c,d),L(f),a=!1},d(d){d&&p(e),c&&c.d(d),f&&f.d(),l=!1,Qe(s)}}}const za="space-y-4",Wa="flex overflow-x-auto hide-scrollbar",Ya="";function Xa(n,e,t){let r,i,o,{$$slots:a={},$$scope:l}=e;const s=Kr(a);let{justify:u="justify-start"}=e,{border:c="border-b border-surface-400-500-token"}=e,{active:f="border-b-2 border-surface-900-50-token"}=e,{hover:d="hover:variant-soft"}=e,{flex:h="flex-none"}=e,{padding:_="px-4 py-2"}=e,{rounded:v="rounded-tl-container-token rounded-tr-container-token"}=e,{spacing:b="space-y-1"}=e,{regionList:w=""}=e,{regionPanel:S=""}=e,{labelledby:D=""}=e,{panel:T=""}=e;ot("active",f),ot("hover",d),ot("flex",h),ot("padding",_),ot("rounded",v),ot("spacing",b);function j(M){Be.call(this,n,M)}function O(M){Be.call(this,n,M)}function C(M){Be.call(this,n,M)}function R(M){Be.call(this,n,M)}return n.$$set=M=>{t(22,e=He(He({},e),Xe(M))),"justify"in M&&t(6,u=M.justify),"border"in M&&t(7,c=M.border),"active"in M&&t(8,f=M.active),"hover"in M&&t(9,d=M.hover),"flex"in M&&t(10,h=M.flex),"padding"in M&&t(11,_=M.padding),"rounded"in M&&t(12,v=M.rounded),"spacing"in M&&t(13,b=M.spacing),"regionList"in M&&t(14,w=M.regionList),"regionPanel"in M&&t(15,S=M.regionPanel),"labelledby"in M&&t(0,D=M.labelledby),"panel"in M&&t(1,T=M.panel),"$$scope"in M&&t(16,l=M.$$scope)},n.$$.update=()=>{t(4,r=`${za} ${e.class??""}`),n.$$.dirty&16576&&t(3,i=`${Wa} ${u} ${c} ${w}`),n.$$.dirty&32768&&t(2,o=`${Ya} ${S}`)},e=Xe(e),[D,T,o,i,r,s,u,c,f,d,h,_,v,b,w,S,l,a,j,O,C,R]}class jd extends De{constructor(e){super(),Re(this,e,Xa,Ja,Pe,{justify:6,border:7,active:8,hover:9,flex:10,padding:11,rounded:12,spacing:13,regionList:14,regionPanel:15,labelledby:0,panel:1})}}const Za=n=>({}),In=n=>({});function Cn(n){let e,t;const r=n[22].lead,i=Oe(r,n,n[21],In);return{c(){e=g("div"),i&&i.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=E(e);i&&i.l(a),a.forEach(p),this.h()},h(){m(e,"class","tab-lead")},m(o,a){I(o,e,a),i&&i.m(e,null),t=!0},p(o,a){i&&i.p&&(!t||a[0]&2097152)&&Se(i,r,o,o[21],t?Ce(r,o[21],a,Za):Ie(o[21]),In)},i(o){t||(A(i,o),t=!0)},o(o){L(i,o),t=!1},d(o){o&&p(e),i&&i.d(o)}}}function xa(n){let e,t,r,i,o,a,l,s,u,c,f,d,h,_,v,b=[{type:"radio"},{name:n[1]},{__value:n[2]},n[11](),{tabindex:"-1"}],w={};for(let j=0;j<b.length;j+=1)w=He(w,b[j]);let S=n[12].lead&&Cn(n);const D=n[22].default,T=Oe(D,n,n[21],null);return h=ya(n[30][0]),{c(){e=g("label"),t=g("div"),r=g("div"),i=g("input"),o=F(),a=g("div"),S&&S.c(),l=F(),s=g("div"),T&&T.c(),this.h()},l(j){e=k(j,"LABEL",{class:!0,title:!0});var O=E(e);t=k(O,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0});var C=E(t);r=k(C,"DIV",{class:!0});var R=E(r);i=k(R,"INPUT",{type:!0,name:!0,tabindex:!0}),R.forEach(p),o=U(C),a=k(C,"DIV",{class:!0});var M=E(a);S&&S.l(M),l=U(M),s=k(M,"DIV",{class:!0});var Q=E(s);T&&T.l(Q),Q.forEach(p),M.forEach(p),C.forEach(p),O.forEach(p),this.h()},h(){rr(i,w),m(r,"class","h-0 w-0 overflow-hidden"),m(s,"class","tab-label"),m(a,"class",u="tab-interface "+n[8]),m(t,"class",c="tab "+n[7]),m(t,"data-testid","tab"),m(t,"role","tab"),m(t,"aria-controls",n[4]),m(t,"aria-selected",n[5]),m(t,"tabindex",f=n[5]?0:-1),m(e,"class",n[9]),m(e,"title",n[3]),h.p(i)},m(j,O){I(j,e,O),y(e,t),y(t,r),y(r,i),i.autofocus&&i.focus(),n[28](i),i.checked=i.__value===n[0],y(t,o),y(t,a),S&&S.m(a,null),y(a,l),y(a,s),T&&T.m(s,null),d=!0,_||(v=[Y(i,"change",n[29]),Y(i,"click",n[26]),Y(i,"change",n[27]),Y(t,"keydown",n[10]),Y(t,"keydown",n[23]),Y(t,"keyup",n[24]),Y(t,"keypress",n[25])],_=!0)},p(j,O){rr(i,w=sr(b,[{type:"radio"},(!d||O[0]&2)&&{name:j[1]},(!d||O[0]&4)&&{__value:j[2]},j[11](),{tabindex:"-1"}])),O[0]&1&&(i.checked=i.__value===j[0]),j[12].lead?S?(S.p(j,O),O[0]&4096&&A(S,1)):(S=Cn(j),S.c(),A(S,1),S.m(a,l)):S&&(ee(),L(S,1,1,()=>{S=null}),te()),T&&T.p&&(!d||O[0]&2097152)&&Se(T,D,j,j[21],d?Ce(D,j[21],O,null):Ie(j[21]),null),(!d||O[0]&256&&u!==(u="tab-interface "+j[8]))&&m(a,"class",u),(!d||O[0]&128&&c!==(c="tab "+j[7]))&&m(t,"class",c),(!d||O[0]&16)&&m(t,"aria-controls",j[4]),(!d||O[0]&32)&&m(t,"aria-selected",j[5]),(!d||O[0]&32&&f!==(f=j[5]?0:-1))&&m(t,"tabindex",f),(!d||O[0]&512)&&m(e,"class",j[9]),(!d||O[0]&8)&&m(e,"title",j[3])},i(j){d||(A(S),A(T,j),d=!0)},o(j){L(S),L(T,j),d=!1},d(j){j&&p(e),n[28](null),S&&S.d(),T&&T.d(j),h.r(),_=!1,Qe(v)}}}const $a="text-center cursor-pointer transition-colors duration-100",es="";function ts(n,e,t){let r,i,o,a,l;const s=["group","name","value","title","controls","regionTab","active","hover","flex","padding","rounded","spacing"];let u=dn(e,s),{$$slots:c={},$$scope:f}=e;const d=Kr(c);let{group:h}=e,{name:_}=e,{value:v}=e,{title:b=""}=e,{controls:w=""}=e,{regionTab:S=""}=e,{active:D=at("active")}=e,{hover:T=at("hover")}=e,{flex:j=at("flex")}=e,{padding:O=at("padding")}=e,{rounded:C=at("rounded")}=e,{spacing:R=at("spacing")}=e,M;function Q(G){if(["Enter","Space"].includes(G.code))G.preventDefault(),M.click();else if(G.code==="ArrowRight"){const he=M.closest(".tab-list");if(!he)return;const _e=Array.from(he.querySelectorAll(".tab")),se=M.closest(".tab");if(!se)return;const ne=_e.indexOf(se),fe=ne+1>=_e.length?0:ne+1,pe=_e[fe],Te=pe==null?void 0:pe.querySelector("input");pe&&Te&&(Te.click(),pe.focus())}else if(G.code==="ArrowLeft"){const he=M.closest(".tab-list");if(!he)return;const _e=Array.from(he.querySelectorAll(".tab")),se=M.closest(".tab");if(!se)return;const ne=_e.indexOf(se),fe=ne-1<0?_e.length-1:ne-1,pe=_e[fe],Te=pe==null?void 0:pe.querySelector("input");pe&&Te&&(Te.click(),pe.focus())}}function x(){return delete u.class,u}const z=[[]];function $(G){Be.call(this,n,G)}function me(G){Be.call(this,n,G)}function W(G){Be.call(this,n,G)}function J(G){Be.call(this,n,G)}function K(G){Be.call(this,n,G)}function re(G){ba[G?"unshift":"push"](()=>{M=G,t(6,M)})}function de(){h=this.__value,t(0,h)}return n.$$set=G=>{t(32,e=He(He({},e),Xe(G))),t(31,u=dn(e,s)),"group"in G&&t(0,h=G.group),"name"in G&&t(1,_=G.name),"value"in G&&t(2,v=G.value),"title"in G&&t(3,b=G.title),"controls"in G&&t(4,w=G.controls),"regionTab"in G&&t(13,S=G.regionTab),"active"in G&&t(14,D=G.active),"hover"in G&&t(15,T=G.hover),"flex"in G&&t(16,j=G.flex),"padding"in G&&t(17,O=G.padding),"rounded"in G&&t(18,C=G.rounded),"spacing"in G&&t(19,R=G.spacing),"$$scope"in G&&t(21,f=G.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&5&&t(5,r=v===h),n.$$.dirty[0]&49184&&t(20,i=r?D:T),t(9,o=`${$a} ${j} ${O} ${C} ${i} ${e.class??""}`),n.$$.dirty[0]&524288&&t(8,a=`${es} ${R}`),n.$$.dirty[0]&8192&&t(7,l=`${S}`)},e=Xe(e),[h,_,v,b,w,r,M,l,a,o,Q,x,d,S,D,T,j,O,C,R,i,f,c,$,me,W,J,K,re,de,z]}class Ld extends De{constructor(e){super(),Re(this,e,ts,xa,Pe,{group:0,name:1,value:2,title:3,controls:4,regionTab:13,active:14,hover:15,flex:16,padding:17,rounded:18,spacing:19},null,[-1,-1])}}function qn(n){let e=n[12],t,r,i=An(n);return{c(){i.c(),t=Z()},l(o){i.l(o),t=Z()},m(o,a){i.m(o,a),I(o,t,a),r=!0},p(o,a){a[0]&4096&&Pe(e,e=o[12])?(ee(),L(i,1,1,H),te(),i=An(o),i.c(),A(i,1),i.m(t.parentNode,t)):i.p(o,a)},i(o){r||(A(i),r=!0)},o(o){L(i),r=!1},d(o){o&&p(t),i.d(o)}}}function rs(n){var u,c;let e,t,r,i,o;const a=[(u=n[14])==null?void 0:u.props,{parent:n[15]}];var l=(c=n[14])==null?void 0:c.ref;function s(f,d){var _;let h={$$slots:{default:[is]},$$scope:{ctx:f}};if(d!==void 0&&d[0]&49152)h=sr(a,[d[0]&16384&&mn((_=f[14])==null?void 0:_.props),d[0]&32768&&{parent:f[15]}]);else for(let v=0;v<a.length;v+=1)h=He(h,a[v]);return{props:h}}return l&&(t=hn(l,s(n))),{c(){e=g("div"),t&&ie(t.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var d=E(e);t&&le(t.$$.fragment,d),d.forEach(p),this.h()},h(){var f;m(e,"class",r="modal contents "+(((f=n[12][0])==null?void 0:f.modalClasses)??"")),m(e,"data-testid","modal-component"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",i=n[12][0].title??"")},m(f,d){I(f,e,d),t&&oe(t,e,null),o=!0},p(f,d){var h,_,v;if(d[0]&16384&&l!==(l=(h=f[14])==null?void 0:h.ref)){if(t){ee();const b=t;L(b.$$.fragment,1,0,()=>{ae(b,1)}),te()}l?(t=hn(l,s(f,d)),ie(t.$$.fragment),A(t.$$.fragment,1),oe(t,e,null)):t=null}else if(l){const b=d[0]&49152?sr(a,[d[0]&16384&&mn((_=f[14])==null?void 0:_.props),d[0]&32768&&{parent:f[15]}]):{};d[0]&16384|d[1]&8192&&(b.$$scope={dirty:d,ctx:f}),t.$set(b)}(!o||d[0]&4096&&r!==(r="modal contents "+(((v=f[12][0])==null?void 0:v.modalClasses)??"")))&&m(e,"class",r),(!o||d[0]&4096&&i!==(i=f[12][0].title??""))&&m(e,"aria-label",i)},i(f){o||(t&&A(t.$$.fragment,f),o=!0)},o(f){t&&L(t.$$.fragment,f),o=!1},d(f){f&&p(e),t&&ae(t)}}}function ns(n){var v,b,w,S;let e,t,r,i,o,a,l,s,u=((v=n[12][0])==null?void 0:v.title)&&Dn(n),c=((b=n[12][0])==null?void 0:b.body)&&Rn(n),f=((w=n[12][0])==null?void 0:w.image)&&typeof((S=n[12][0])==null?void 0:S.image)=="string"&&Tn(n);function d(D,T){if(D[12][0].type==="alert")return ss;if(D[12][0].type==="confirm")return as;if(D[12][0].type==="prompt")return os}let h=d(n),_=h&&h(n);return{c(){e=g("div"),u&&u.c(),t=F(),c&&c.c(),r=F(),f&&f.c(),i=F(),_&&_.c(),this.h()},l(D){e=k(D,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var T=E(e);u&&u.l(T),t=U(T),c&&c.l(T),r=U(T),f&&f.l(T),i=U(T),_&&_.l(T),T.forEach(p),this.h()},h(){m(e,"class",o="modal "+n[16]),m(e,"data-testid","modal"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",a=n[12][0].title??"")},m(D,T){I(D,e,T),u&&u.m(e,null),y(e,t),c&&c.m(e,null),y(e,r),f&&f.m(e,null),y(e,i),_&&_.m(e,null),s=!0},p(D,T){var j,O,C,R;n=D,(j=n[12][0])!=null&&j.title?u?u.p(n,T):(u=Dn(n),u.c(),u.m(e,t)):u&&(u.d(1),u=null),(O=n[12][0])!=null&&O.body?c?c.p(n,T):(c=Rn(n),c.c(),c.m(e,r)):c&&(c.d(1),c=null),(C=n[12][0])!=null&&C.image&&typeof((R=n[12][0])==null?void 0:R.image)=="string"?f?f.p(n,T):(f=Tn(n),f.c(),f.m(e,i)):f&&(f.d(1),f=null),h===(h=d(n))&&_?_.p(n,T):(_&&_.d(1),_=h&&h(n),_&&(_.c(),_.m(e,null))),(!s||T[0]&65536&&o!==(o="modal "+n[16]))&&m(e,"class",o),(!s||T[0]&4096&&a!==(a=n[12][0].title??""))&&m(e,"aria-label",a)},i(D){s||(jr(()=>{s&&(l||(l=ht(e,ir,{duration:n[3],opacity:0,y:100},!0)),l.run(1))}),s=!0)},o(D){l||(l=ht(e,ir,{duration:n[3],opacity:0,y:100},!1)),l.run(0),s=!1},d(D){D&&p(e),u&&u.d(),c&&c.d(),f&&f.d(),_&&_.d(),D&&l&&l.end()}}}function Pn(n){var i;let e,t=((i=n[14])==null?void 0:i.slot)+"",r;return{c(){e=new Gr(!1),r=Z(),this.h()},l(o){e=Jr(o,!1),r=Z(),this.h()},h(){e.a=r},m(o,a){e.m(t,o,a),I(o,r,a)},p(o,a){var l;a[0]&16384&&t!==(t=((l=o[14])==null?void 0:l.slot)+"")&&e.p(t)},d(o){o&&(p(r),e.d())}}}function is(n){var r;let e,t=((r=n[14])==null?void 0:r.slot)&&Pn(n);return{c(){t&&t.c(),e=Z()},l(i){t&&t.l(i),e=Z()},m(i,o){t&&t.m(i,o),I(i,e,o)},p(i,o){var a;(a=i[14])!=null&&a.slot?t?t.p(i,o):(t=Pn(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&p(e),t&&t.d(i)}}}function Dn(n){let e,t,r=n[12][0].title+"",i;return{c(){e=g("header"),t=new Gr(!1),this.h()},l(o){e=k(o,"HEADER",{class:!0});var a=E(e);t=Jr(a,!1),a.forEach(p),this.h()},h(){t.a=null,m(e,"class",i="modal-header "+n[9])},m(o,a){I(o,e,a),t.m(r,e)},p(o,a){a[0]&4096&&r!==(r=o[12][0].title+"")&&t.p(r),a[0]&512&&i!==(i="modal-header "+o[9])&&m(e,"class",i)},d(o){o&&p(e)}}}function Rn(n){let e,t,r=n[12][0].body+"",i;return{c(){e=g("article"),t=new Gr(!1),this.h()},l(o){e=k(o,"ARTICLE",{class:!0});var a=E(e);t=Jr(a,!1),a.forEach(p),this.h()},h(){t.a=null,m(e,"class",i="modal-body "+n[10])},m(o,a){I(o,e,a),t.m(r,e)},p(o,a){a[0]&4096&&r!==(r=o[12][0].body+"")&&t.p(r),a[0]&1024&&i!==(i="modal-body "+o[10])&&m(e,"class",i)},d(o){o&&p(e)}}}function Tn(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var r;m(e,"class","modal-image "+ds),ce(e.src,t=(r=n[12][0])==null?void 0:r.image)||m(e,"src",t),m(e,"alt","Modal")},m(r,i){I(r,e,i)},p(r,i){var o;i[0]&4096&&!ce(e.src,t=(o=r[12][0])==null?void 0:o.image)&&m(e,"src",t)},d(r){r&&p(e)}}}function os(n){let e,t,r,i,o,a,l,s,u,c,f,d,h,_,v=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},n[12][0].valueAttr],b={};for(let w=0;w<v.length;w+=1)b=He(b,v[w]);return{c(){e=g("form"),t=g("input"),r=F(),i=g("footer"),o=g("button"),a=q(n[0]),s=F(),u=g("button"),c=q(n[2]),this.h()},l(w){e=k(w,"FORM",{class:!0});var S=E(e);t=k(S,"INPUT",{class:!0,name:!0,type:!0}),r=U(S),i=k(S,"FOOTER",{class:!0});var D=E(i);o=k(D,"BUTTON",{type:!0,class:!0});var T=E(o);a=P(T,n[0]),T.forEach(p),s=U(D),u=k(D,"BUTTON",{type:!0,class:!0});var j=E(u);c=P(j,n[2]),j.forEach(p),D.forEach(p),S.forEach(p),this.h()},h(){rr(t,b),m(o,"type","button"),m(o,"class",l="btn "+n[7]),m(u,"type","submit"),m(u,"class",f="btn "+n[8]),m(i,"class",d="modal-footer "+n[11]),m(e,"class","space-y-4")},m(w,S){I(w,e,S),y(e,t),t.autofocus&&t.focus(),nr(t,n[13]),y(e,r),y(e,i),y(i,o),y(o,a),y(i,s),y(i,u),y(u,c),h||(_=[Y(t,"input",n[39]),Y(o,"click",n[21]),Y(e,"submit",n[23])],h=!0)},p(w,S){rr(t,b=sr(v,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},S[0]&4096&&w[12][0].valueAttr])),S[0]&8192&&t.value!==w[13]&&nr(t,w[13]),S[0]&1&&N(a,w[0]),S[0]&128&&l!==(l="btn "+w[7])&&m(o,"class",l),S[0]&4&&N(c,w[2]),S[0]&256&&f!==(f="btn "+w[8])&&m(u,"class",f),S[0]&2048&&d!==(d="modal-footer "+w[11])&&m(i,"class",d)},d(w){w&&p(e),h=!1,Qe(_)}}}function as(n){let e,t,r,i,o,a,l,s,u,c,f;return{c(){e=g("footer"),t=g("button"),r=q(n[0]),o=F(),a=g("button"),l=q(n[1]),this.h()},l(d){e=k(d,"FOOTER",{class:!0});var h=E(e);t=k(h,"BUTTON",{type:!0,class:!0});var _=E(t);r=P(_,n[0]),_.forEach(p),o=U(h),a=k(h,"BUTTON",{type:!0,class:!0});var v=E(a);l=P(v,n[1]),v.forEach(p),h.forEach(p),this.h()},h(){m(t,"type","button"),m(t,"class",i="btn "+n[7]),m(a,"type","button"),m(a,"class",s="btn "+n[8]),m(e,"class",u="modal-footer "+n[11])},m(d,h){I(d,e,h),y(e,t),y(t,r),y(e,o),y(e,a),y(a,l),c||(f=[Y(t,"click",n[21]),Y(a,"click",n[22])],c=!0)},p(d,h){h[0]&1&&N(r,d[0]),h[0]&128&&i!==(i="btn "+d[7])&&m(t,"class",i),h[0]&2&&N(l,d[1]),h[0]&256&&s!==(s="btn "+d[8])&&m(a,"class",s),h[0]&2048&&u!==(u="modal-footer "+d[11])&&m(e,"class",u)},d(d){d&&p(e),c=!1,Qe(f)}}}function ss(n){let e,t,r,i,o,a,l;return{c(){e=g("footer"),t=g("button"),r=q(n[0]),this.h()},l(s){e=k(s,"FOOTER",{class:!0});var u=E(e);t=k(u,"BUTTON",{type:!0,class:!0});var c=E(t);r=P(c,n[0]),c.forEach(p),u.forEach(p),this.h()},h(){m(t,"type","button"),m(t,"class",i="btn "+n[7]),m(e,"class",o="modal-footer "+n[11])},m(s,u){I(s,e,u),y(e,t),y(t,r),a||(l=Y(t,"click",n[21]),a=!0)},p(s,u){u[0]&1&&N(r,s[0]),u[0]&128&&i!==(i="btn "+s[7])&&m(t,"class",i),u[0]&2048&&o!==(o="modal-footer "+s[11])&&m(e,"class",o)},d(s){s&&p(e),a=!1,l()}}}function An(n){let e,t,r,i,o,a,l,s,u,c,f;const d=[ns,rs],h=[];function _(v,b){return v[12][0].type!=="component"?0:1}return r=_(n),i=h[r]=d[r](n),{c(){e=g("div"),t=g("div"),i.c(),this.h()},l(v){e=k(v,"DIV",{class:!0,"data-testid":!0});var b=E(e);t=k(b,"DIV",{class:!0});var w=E(t);i.l(w),w.forEach(p),b.forEach(p),this.h()},h(){m(t,"class",o="modal-transition "+n[17]),m(e,"class",l="modal-backdrop "+n[18]),m(e,"data-testid","modal-backdrop")},m(v,b){I(v,e,b),y(e,t),h[r].m(t,null),u=!0,c||(f=[Y(e,"mousedown",n[19]),Y(e,"mouseup",n[20]),Y(e,"touchstart",n[37],{passive:!0}),Y(e,"touchend",n[38],{passive:!0}),ka(Aa.call(null,e,!0))],c=!0)},p(v,b){n=v;let w=r;r=_(n),r===w?h[r].p(n,b):(ee(),L(h[w],1,1,()=>{h[w]=null}),te(),i=h[r],i?i.p(n,b):(i=h[r]=d[r](n),i.c()),A(i,1),i.m(t,null)),(!u||b[0]&131072&&o!==(o="modal-transition "+n[17]))&&m(t,"class",o),(!u||b[0]&262144&&l!==(l="modal-backdrop "+n[18]))&&m(e,"class",l)},i(v){u||(A(i),jr(()=>{u&&(a||(a=ht(t,ir,{duration:n[3],opacity:n[4],x:n[5],y:n[6]},!0)),a.run(1))}),jr(()=>{u&&(s||(s=ht(e,_n,{duration:n[3]},!0)),s.run(1))}),u=!0)},o(v){L(i),a||(a=ht(t,ir,{duration:n[3],opacity:n[4],x:n[5],y:n[6]},!1)),a.run(0),s||(s=ht(e,_n,{duration:n[3]},!1)),s.run(0),u=!1},d(v){v&&p(e),h[r].d(),v&&a&&a.end(),v&&s&&s.end(),c=!1,Qe(f)}}}function ls(n){let e,t,r,i,o=n[12].length>0&&qn(n);return{c(){o&&o.c(),e=Z()},l(a){o&&o.l(a),e=Z()},m(a,l){o&&o.m(a,l),I(a,e,l),t=!0,r||(i=Y(window,"keydown",n[24]),r=!0)},p(a,l){a[12].length>0?o?(o.p(a,l),l[0]&4096&&A(o,1)):(o=qn(a),o.c(),A(o,1),o.m(e.parentNode,e)):o&&(ee(),L(o,1,1,()=>{o=null}),te())},i(a){t||(A(o),t=!0)},o(a){L(o),t=!1},d(a){a&&p(e),o&&o.d(a),r=!1,i()}}}const us="fixed top-0 left-0 right-0 bottom-0 overflow-y-auto",cs="w-full h-fit min-h-full p-4 overflow-y-auto flex justify-center",fs="block overflow-y-auto",ds="w-full h-auto";function hs(n,e,t){let r,i,o,a,l,s;Fe(n,qe,V=>t(12,s=V));const u=ga();let{position:c="items-center"}=e,{components:f={}}=e,{duration:d=150}=e,{flyOpacity:h=0}=e,{flyX:_=0}=e,{flyY:v=100}=e,{background:b="bg-surface-100-800-token"}=e,{width:w="w-modal"}=e,{height:S="h-auto"}=e,{padding:D="p-4"}=e,{spacing:T="space-y-4"}=e,{rounded:j="rounded-container-token"}=e,{shadow:O="shadow-xl"}=e,{zIndex:C="z-[999]"}=e,{buttonNeutral:R="variant-ghost-surface"}=e,{buttonPositive:M="variant-filled"}=e,{buttonTextCancel:Q="Cancel"}=e,{buttonTextConfirm:x="Confirm"}=e,{buttonTextSubmit:z="Submit"}=e,{regionBackdrop:$="bg-surface-backdrop-token"}=e,{regionHeader:me="text-2xl font-bold"}=e,{regionBody:W="max-h-[200px] overflow-hidden"}=e,{regionFooter:J="flex justify-end space-x-2"}=e,K;const re={buttonTextCancel:Q,buttonTextConfirm:x,buttonTextSubmit:z};let de,G=!1;qe.subscribe(V=>{V.length&&(V[0].type==="prompt"&&t(13,K=V[0].value),t(0,Q=V[0].buttonTextCancel||re.buttonTextCancel),t(1,x=V[0].buttonTextConfirm||re.buttonTextConfirm),t(2,z=V[0].buttonTextSubmit||re.buttonTextSubmit),t(14,de=typeof V[0].component=="string"?f[V[0].component]:V[0].component))});function he(V){if(!(V.target instanceof Element))return;const ge=V.target.classList;(ge.contains("modal-backdrop")||ge.contains("modal-transition"))&&(G=!0)}function _e(V){if(!(V.target instanceof Element))return;const ge=V.target.classList;(ge.contains("modal-backdrop")||ge.contains("modal-transition"))&&G&&(s[0].response&&s[0].response(void 0),qe.close(),u("backdrop",V)),G=!1}function se(){s[0].response&&s[0].response(!1),qe.close()}function ne(){s[0].response&&s[0].response(!0),qe.close()}function fe(V){V.preventDefault(),s[0].response&&s[0].response(K),qe.close()}function pe(V){s.length&&V.code==="Escape"&&se()}function Te(V){Be.call(this,n,V)}function ve(V){Be.call(this,n,V)}function je(){K=this.value,t(13,K)}return n.$$set=V=>{t(43,e=He(He({},e),Xe(V))),"position"in V&&t(25,c=V.position),"components"in V&&t(26,f=V.components),"duration"in V&&t(3,d=V.duration),"flyOpacity"in V&&t(4,h=V.flyOpacity),"flyX"in V&&t(5,_=V.flyX),"flyY"in V&&t(6,v=V.flyY),"background"in V&&t(27,b=V.background),"width"in V&&t(28,w=V.width),"height"in V&&t(29,S=V.height),"padding"in V&&t(30,D=V.padding),"spacing"in V&&t(31,T=V.spacing),"rounded"in V&&t(32,j=V.rounded),"shadow"in V&&t(33,O=V.shadow),"zIndex"in V&&t(34,C=V.zIndex),"buttonNeutral"in V&&t(7,R=V.buttonNeutral),"buttonPositive"in V&&t(8,M=V.buttonPositive),"buttonTextCancel"in V&&t(0,Q=V.buttonTextCancel),"buttonTextConfirm"in V&&t(1,x=V.buttonTextConfirm),"buttonTextSubmit"in V&&t(2,z=V.buttonTextSubmit),"regionBackdrop"in V&&t(35,$=V.regionBackdrop),"regionHeader"in V&&t(9,me=V.regionHeader),"regionBody"in V&&t(10,W=V.regionBody),"regionFooter"in V&&t(11,J=V.regionFooter)},n.$$.update=()=>{var V,ge,Le;n.$$.dirty[0]&33558528&&t(36,r=((V=s[0])==null?void 0:V.position)??c),t(18,i=`${us} ${$} ${C} ${e.class??""} ${((ge=s[0])==null?void 0:ge.backdropClasses)??""}`),n.$$.dirty[1]&32&&t(17,o=`${cs} ${r??""}`),n.$$.dirty[0]&2013270016|n.$$.dirty[1]&7&&t(16,a=`${fs} ${b} ${w} ${S} ${D} ${T} ${j} ${O} ${((Le=s[0])==null?void 0:Le.modalClasses)??""}`),n.$$.dirty[0]&2046824447|n.$$.dirty[1]&23&&t(15,l={position:c,duration:d,flyOpacity:h,flyX:_,flyY:v,background:b,width:w,height:S,padding:D,spacing:T,rounded:j,shadow:O,buttonNeutral:R,buttonPositive:M,buttonTextCancel:Q,buttonTextConfirm:x,buttonTextSubmit:z,regionBackdrop:$,regionHeader:me,regionBody:W,regionFooter:J,onClose:se})},e=Xe(e),[Q,x,z,d,h,_,v,R,M,me,W,J,s,K,de,l,a,o,i,he,_e,se,ne,fe,pe,c,f,b,w,S,D,T,j,O,C,$,r,Te,ve,je]}class Nd extends De{constructor(e){super(),Re(this,e,hs,ls,Pe,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */const zr=ar();var Lr=function(n,e){return Lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Lr(n,e)};function Wr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Lr(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function _s(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(c){try{u(r.next(c))}catch(f){a(f)}}function s(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(l,s)}u((r=r.apply(n,e||[])).next())})}function Io(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(c){return s([u,c])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ut(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lr(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function ur(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function _t(n){return this instanceof _t?(this.v=n,this):new _t(n)}function ps(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(h){return new Promise(function(_,v){o.push([d,h,_,v])>1||l(d,h)})})}function l(d,h){try{s(r[d](h))}catch(_){f(o[0][3],_)}}function s(d){d.value instanceof _t?Promise.resolve(d.value.v).then(u,c):f(o[0][2],d)}function u(d){l("next",d)}function c(d){l("throw",d)}function f(d,h){d(h),o.shift(),o.length&&l(o[0][0],o[0][1])}}function vs(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ut=="function"?Ut(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(l,s){a=n[o](a),i(l,s,a.done,a.value)})}}function i(o,a,l,s){Promise.resolve(s).then(function(u){o({value:u,done:l})},a)}}function Ee(n){return typeof n=="function"}function ms(n){var e=function(r){Error.call(r),r.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var kr=ms(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Mn(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Yr=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=Ut(a),s=l.next();!s.done;s=l.next()){var u=s.value;u.remove(this)}}catch(v){e={error:v}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(Ee(c))try{c()}catch(v){o=v instanceof kr?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Ut(f),h=d.next();!h.done;h=d.next()){var _=h.value;try{jn(_)}catch(v){o=o??[],v instanceof kr?o=ur(ur([],lr(o)),lr(v.errors)):o.push(v)}}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(o)throw new kr(o)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)jn(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Mn(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&Mn(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}();Yr.EMPTY;function Co(n){return n instanceof Yr||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function jn(n){Ee(n)?n():n.unsubscribe()}var qo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Nr={setTimeout:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=Nr.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ur([n,e],lr(t))):setTimeout.apply(void 0,ur([n,e],lr(t)))},clearTimeout:function(n){var e=Nr.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Po(n){Nr.setTimeout(function(){throw n})}function Ln(){}function ys(n){n()}var Xr=function(n){Wr(e,n);function e(t){var r=n.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Co(t)&&t.add(r)):r.destination=ws,r}return e.create=function(t,r,i){return new Vr(t,r,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Yr),bs=Function.prototype.bind;function wr(n,e){return bs.call(n,e)}var gs=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){Wt(r)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){Wt(r)}else Wt(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Wt(t)}},n}(),Vr=function(n){Wr(e,n);function e(t,r,i){var o=n.call(this)||this,a;if(Ee(t)||!t)a={next:t??void 0,error:r??void 0,complete:i??void 0};else{var l;o&&qo.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=function(){return o.unsubscribe()},a={next:t.next&&wr(t.next,l),error:t.error&&wr(t.error,l),complete:t.complete&&wr(t.complete,l)}):a=t}return o.destination=new gs(a),o}return e}(Xr);function Wt(n){Po(n)}function ks(n){throw n}var ws={closed:!0,next:Ln,error:ks,complete:Ln},Zr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Do(n){return n}function vr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Ro(n)}function Ro(n){return n.length===0?Do:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var Ge=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this,o=Os(e)?e:new Vr(e,t,r);return ys(function(){var a=i,l=a.operator,s=a.source;o.add(l?l.call(o,s):s?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var r=this;return t=Nn(t),new t(function(i,o){var a=new Vr({next:function(l){try{e(l)}catch(s){o(s),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[Zr]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ro(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Nn(e),new e(function(r,i){var o;t.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function Nn(n){var e;return(e=n??qo.Promise)!==null&&e!==void 0?e:Promise}function Es(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function Os(n){return n&&n instanceof Xr||Es(n)&&Co(n)}function Ss(n){return Ee(n==null?void 0:n.lift)}function ut(n){return function(e){if(Ss(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pt(n,e,t,r,i){return new Is(n,e,t,r,i)}var Is=function(n){Wr(e,n);function e(t,r,i,o,a,l){var s=n.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=l,s._next=r?function(u){try{r(u)}catch(c){t.error(c)}}:n.prototype._next,s._error=o?function(u){try{o(u)}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._error,s._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:n.prototype._complete,s}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Xr);function Cs(n){return n&&Ee(n.schedule)}function qs(n){return n[n.length-1]}function To(n){return Cs(qs(n))?n.pop():void 0}var Ao=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function Mo(n){return Ee(n==null?void 0:n.then)}function jo(n){return Ee(n[Zr])}function Lo(n){return Symbol.asyncIterator&&Ee(n==null?void 0:n[Symbol.asyncIterator])}function No(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ps(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vo=Ps();function Fo(n){return Ee(n==null?void 0:n[Vo])}function Uo(n){return ps(this,arguments,function(){var t,r,i,o;return Io(this,function(a){switch(a.label){case 0:t=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,_t(t.read())];case 3:return r=a.sent(),i=r.value,o=r.done,o?[4,_t(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,_t(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Bo(n){return Ee(n==null?void 0:n.getReader)}function Ht(n){if(n instanceof Ge)return n;if(n!=null){if(jo(n))return Ds(n);if(Ao(n))return Rs(n);if(Mo(n))return Ts(n);if(Lo(n))return Ho(n);if(Fo(n))return As(n);if(Bo(n))return Ms(n)}throw No(n)}function Ds(n){return new Ge(function(e){var t=n[Zr]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Rs(n){return new Ge(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Ts(n){return new Ge(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Po)})}function As(n){return new Ge(function(e){var t,r;try{for(var i=Ut(n),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()})}function Ho(n){return new Ge(function(e){js(n,e).catch(function(t){return e.error(t)})})}function Ms(n){return Ho(Uo(n))}function js(n,e){var t,r,i,o;return _s(this,void 0,void 0,function(){var a,l;return Io(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),t=vs(n),s.label=1;case 1:return[4,t.next()];case 2:if(r=s.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=s.sent(),i={error:l},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ye(n,e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Qo(n,e){return e===void 0&&(e=0),ut(function(t,r){t.subscribe(pt(r,function(i){return Ye(r,n,function(){return r.next(i)},e)},function(){return Ye(r,n,function(){return r.complete()},e)},function(i){return Ye(r,n,function(){return r.error(i)},e)}))})}function Ko(n,e){return e===void 0&&(e=0),ut(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},e))})}function Ls(n,e){return Ht(n).pipe(Ko(e),Qo(e))}function Ns(n,e){return Ht(n).pipe(Ko(e),Qo(e))}function Vs(n,e){return new Ge(function(t){var r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Fs(n,e){return new Ge(function(t){var r;return Ye(t,e,function(){r=n[Vo](),Ye(t,e,function(){var i,o,a;try{i=r.next(),o=i.value,a=i.done}catch(l){t.error(l);return}a?t.complete():t.next(o)},0,!0)}),function(){return Ee(r==null?void 0:r.return)&&r.return()}})}function Go(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ge(function(t){Ye(t,e,function(){var r=n[Symbol.asyncIterator]();Ye(t,e,function(){r.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function Us(n,e){return Go(Uo(n),e)}function Bs(n,e){if(n!=null){if(jo(n))return Ls(n,e);if(Ao(n))return Vs(n,e);if(Mo(n))return Ns(n,e);if(Lo(n))return Go(n,e);if(Fo(n))return Fs(n,e);if(Bo(n))return Us(n,e)}throw No(n)}function Jo(n,e){return e?Bs(n,e):Ht(n)}function xr(n,e){return ut(function(t,r){var i=0;t.subscribe(pt(r,function(o){r.next(n.call(e,o,i++))}))})}function Hs(n,e,t,r,i,o,a,l){var s=[],u=0,c=0,f=!1,d=function(){f&&!s.length&&!u&&e.complete()},h=function(v){return u<r?_(v):s.push(v)},_=function(v){o&&e.next(v),u++;var b=!1;Ht(t(v,c++)).subscribe(pt(e,function(w){i==null||i(w),o?h(w):e.next(w)},function(){b=!0},void 0,function(){if(b)try{u--;for(var w=function(){var S=s.shift();a?Ye(e,a,function(){return _(S)}):_(S)};s.length&&u<r;)w();d()}catch(S){e.error(S)}}))};return n.subscribe(pt(e,h,function(){f=!0,d()})),function(){l==null||l()}}function zo(n,e,t){return t===void 0&&(t=1/0),Ee(e)?zo(function(r,i){return xr(function(o,a){return e(r,o,i,a)})(Ht(n(r,i)))},t):(typeof e=="number"&&(t=e),ut(function(r,i){return Hs(r,i,n,t)}))}function Qs(n){return n===void 0&&(n=1/0),zo(Do,n)}function Ks(){return Qs(1)}function Vn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Ks()(Jo(n,To(n)))}function Wo(n,e){return ut(function(t,r){var i=0;t.subscribe(pt(r,function(o){return n.call(e,o,i++)&&r.next(o)}))})}function Gs(n,e,t,r,i){return function(o,a){var l=t,s=e,u=0;o.subscribe(pt(a,function(c){var f=u++;s=l?n(s,c,f):(l=!0,c),r&&a.next(s)},i&&function(){l&&a.next(s),a.complete()}))}}function Js(n,e){return ut(Gs(n,e,arguments.length>=2,!0))}function zs(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=To(n);return ut(function(r,i){(t?Vn(n,r,t):Vn(n,r)).subscribe(i)})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Ws(n){return Wo(e=>e.event.id===n)}function Ys(n){return Wo(e=>e.event.pubkey===n)}function Xs(){return Js((n,e)=>[...n,e],[])}function Zs(n){return vr(Xs(),xr(e=>{const t=new Map;return e.forEach(r=>{const i=n(r),o=t.get(i);o?t.set(i,[...o,r]):t.set(i,[r])}),t}))}function xs(n){return vr(Zs(n),xr(e=>Array.from(e.entries()).map(([,t])=>t.slice(-1)[0])))}class Qt{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Bt=typeof window>"u"||"Deno"in window;function Ne(){}function $s(n,e){return typeof n=="function"?n(e):n}function Fr(n){return typeof n=="number"&&n>=0&&n!==1/0}function Yo(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Vt(n,e,t){return mr(n)?typeof e=="function"?{...t,queryKey:n,queryFn:e}:{...e,queryKey:n}:n}function We(n,e,t){return mr(n)?[{...e,queryKey:n},t]:[n||{},e]}function Fn(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:l}=n;if(mr(a)){if(r){if(e.queryHash!==$r(a,e.options))return!1}else if(!cr(e.queryKey,a))return!1}if(t!=="all"){const s=e.isActive();if(t==="active"&&!s||t==="inactive"&&s)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function Un(n,e){const{exact:t,fetching:r,predicate:i,mutationKey:o}=n;if(mr(o)){if(!e.options.mutationKey)return!1;if(t){if(st(e.options.mutationKey)!==st(o))return!1}else if(!cr(e.options.mutationKey,o))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function $r(n,e){return((e==null?void 0:e.queryKeyHashFn)||st)(n)}function st(n){return JSON.stringify(n,(e,t)=>Br(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function cr(n,e){return Xo(n,e)}function Xo(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Xo(n[t],e[t])):!1}function Zo(n,e){if(n===e)return n;const t=Bn(n)&&Bn(e);if(t||Br(n)&&Br(e)){const r=t?n.length:Object.keys(n).length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let s=0;s<o;s++){const u=t?s:i[s];a[u]=Zo(n[u],e[u]),a[u]===n[u]&&l++}return r===o&&l===r?n:a}return e}function Ur(n,e){if(n&&!e||e&&!n)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Bn(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Br(n){if(!Hn(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Hn(t)||!t.hasOwnProperty("isPrototypeOf"))}function Hn(n){return Object.prototype.toString.call(n)==="[object Object]"}function mr(n){return Array.isArray(n)}function xo(n){return new Promise(e=>{setTimeout(e,n)})}function Qn(n){xo(0).then(n)}function el(){if(typeof AbortController=="function")return new AbortController}function Hr(n,e,t){return t.isDataEqual!=null&&t.isDataEqual(n,e)?n:typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Zo(n,e):e}class tl extends Qt{constructor(){super(),this.setup=e=>{if(!Bt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const fr=new tl,Kn=["online","offline"];class rl extends Qt{constructor(){super(),this.setup=e=>{if(!Bt&&window.addEventListener){const t=()=>e();return Kn.forEach(r=>{window.addEventListener(r,t,!1)}),()=>{Kn.forEach(r=>{window.removeEventListener(r,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const dr=new rl;function nl(n){return Math.min(1e3*2**n,3e4)}function yr(n){return(n??"online")==="online"?dr.isOnline():!0}class $o{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function tr(n){return n instanceof $o}function ea(n){let e=!1,t=0,r=!1,i,o,a;const l=new Promise((b,w)=>{o=b,a=w}),s=b=>{r||(h(new $o(b)),n.abort==null||n.abort())},u=()=>{e=!0},c=()=>{e=!1},f=()=>!fr.isFocused()||n.networkMode!=="always"&&!dr.isOnline(),d=b=>{r||(r=!0,n.onSuccess==null||n.onSuccess(b),i==null||i(),o(b))},h=b=>{r||(r=!0,n.onError==null||n.onError(b),i==null||i(),a(b))},_=()=>new Promise(b=>{i=w=>{const S=r||!f();return S&&b(w),S},n.onPause==null||n.onPause()}).then(()=>{i=void 0,r||n.onContinue==null||n.onContinue()}),v=()=>{if(r)return;let b;try{b=n.fn()}catch(w){b=Promise.reject(w)}Promise.resolve(b).then(d).catch(w=>{var S,D;if(r)return;const T=(S=n.retry)!=null?S:3,j=(D=n.retryDelay)!=null?D:nl,O=typeof j=="function"?j(t,w):j,C=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,w);if(e||!C){h(w);return}t++,n.onFail==null||n.onFail(t,w),xo(O).then(()=>{if(f())return _()}).then(()=>{e?h(w):v()})})};return yr(n.networkMode)?v():_().then(v),{promise:l,cancel:s,continue:()=>(i==null?void 0:i())?l:Promise.resolve(),cancelRetry:u,continueRetry:c}}const en=console;function il(){let n=[],e=0,t=c=>{c()},r=c=>{c()};const i=c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},o=c=>{e?n.push(c):Qn(()=>{t(c)})},a=c=>(...f)=>{o(()=>{c(...f)})},l=()=>{const c=n;n=[],c.length&&Qn(()=>{r(()=>{c.forEach(f=>{t(f)})})})};return{batch:i,batchCalls:a,schedule:o,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{r=c}}}const be=il();class ta{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fr(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Bt?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class ol extends ta{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||en,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||al(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const r=Hr(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const r=this.promise;return(t=this.retryer)==null||t.cancel(e),r?r.then(Ne).catch(Ne):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Yo(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(_=>_.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const a=el(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};s(l);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(s(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta})}const d=h=>{if(tr(h)&&h.silent||this.dispatch({type:"error",error:h}),!tr(h)){var _,v,b,w;(_=(v=this.cache.config).onError)==null||_.call(v,h,this),(b=(w=this.cache.config).onSettled)==null||b.call(w,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=ea({fn:c.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:h=>{var _,v,b,w;if(typeof h>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(_=(v=this.cache.config).onSuccess)==null||_.call(v,h,this),(b=(w=this.cache.config).onSettled)==null||b.call(w,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(h,_)=>{this.dispatch({type:"failed",failureCount:h,error:_})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=r=>{var i,o;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:yr(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return tr(a)&&a.revert&&this.revertState?{...this.revertState}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),be.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function al(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=typeof e<"u",r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class sl extends Qt{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,r){var i;const o=t.queryKey,a=(i=t.queryHash)!=null?i:$r(o,t);let l=this.get(a);return l||(l=new ol({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){be.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[r]=We(e,t);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>Fn(r,i))}findAll(e,t){const[r]=We(e,t);return Object.keys(r).length>0?this.queries.filter(i=>Fn(r,i)):this.queries}notify(e){be.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){be.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){be.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class ll extends ta{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||en,this.observers=[],this.state=e.state||ul(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var C;return this.retryer=ea({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(R,M)=>{this.dispatch({type:"failed",failureCount:R,error:M})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(C=this.options.retry)!=null?C:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var r,i,o,a,l,s,u,c;if(!t){var f,d,h,_;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(d=this.mutationCache.config).onMutate)==null?void 0:f.call(d,this.state.variables,this));const R=await((h=(_=this.options).onMutate)==null?void 0:h.call(_,this.state.variables));R!==this.state.context&&this.dispatch({type:"loading",context:R,variables:this.state.variables})}const C=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,C,this.state.variables,this.state.context,this)),await((o=(a=this.options).onSuccess)==null?void 0:o.call(a,C,this.state.variables,this.state.context)),await((l=(s=this.mutationCache.config).onSettled)==null?void 0:l.call(s,C,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,C,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:C}),C}catch(C){try{var v,b,w,S,D,T,j,O;throw await((v=(b=this.mutationCache.config).onError)==null?void 0:v.call(b,C,this.state.variables,this.state.context,this)),await((w=(S=this.options).onError)==null?void 0:w.call(S,C,this.state.variables,this.state.context)),await((D=(T=this.mutationCache.config).onSettled)==null?void 0:D.call(T,void 0,C,this.state.variables,this.state.context,this)),await((j=(O=this.options).onSettled)==null?void 0:j.call(O,void 0,C,this.state.variables,this.state.context)),C}finally{this.dispatch({type:"error",error:C})}}}dispatch(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!yr(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=t(this.state),be.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function ul(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class cl extends Qt{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,r){const i=new ll({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){be.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>Un(e,t))}findAll(e){return this.mutations.filter(t=>Un(e,t))}notify(e){be.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(r=>r.state.isPaused);return be.batch(()=>t.reduce((r,i)=>r.then(()=>i.continue().catch(Ne)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function fl(){return{onFetch:n=>{n.fetchFn=()=>{var e,t,r,i,o,a;const l=(e=n.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,s=(r=n.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,u=s==null?void 0:s.pageParam,c=(s==null?void 0:s.direction)==="forward",f=(s==null?void 0:s.direction)==="backward",d=((o=n.state.data)==null?void 0:o.pages)||[],h=((a=n.state.data)==null?void 0:a.pageParams)||[];let _=h,v=!1;const b=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>{var C;if((C=n.signal)!=null&&C.aborted)v=!0;else{var R;(R=n.signal)==null||R.addEventListener("abort",()=>{v=!0})}return n.signal}})},w=n.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+n.options.queryHash+"'")),S=(O,C,R,M)=>(_=M?[C,..._]:[..._,C],M?[R,...O]:[...O,R]),D=(O,C,R,M)=>{if(v)return Promise.reject("Cancelled");if(typeof R>"u"&&!C&&O.length)return Promise.resolve(O);const Q={queryKey:n.queryKey,pageParam:R,meta:n.options.meta};b(Q);const x=w(Q);return Promise.resolve(x).then($=>S(O,R,$,M))};let T;if(!d.length)T=D([]);else if(c){const O=typeof u<"u",C=O?u:Gn(n.options,d);T=D(d,O,C)}else if(f){const O=typeof u<"u",C=O?u:dl(n.options,d);T=D(d,O,C,!0)}else{_=[];const O=typeof n.options.getNextPageParam>"u";T=(l&&d[0]?l(d[0],0,d):!0)?D([],O,h[0]):Promise.resolve(S([],h[0],d[0]));for(let R=1;R<d.length;R++)T=T.then(M=>{if(l&&d[R]?l(d[R],R,d):!0){const x=O?h[R]:Gn(n.options,M);return D(M,O,x)}return Promise.resolve(S(M,h[R],d[R]))})}return T.then(O=>({pages:O,pageParams:_}))}}}}function Gn(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function dl(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}class ra{constructor(e={}){this.queryCache=e.queryCache||new sl,this.mutationCache=e.mutationCache||new cl,this.logger=e.logger||en,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=fr.subscribe(()=>{fr.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=dr.subscribe(()=>{dr.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[r]=We(e,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state.data}ensureQueryData(e,t,r){const i=Vt(e,t,r),o=this.getQueryData(i.queryKey);return o?Promise.resolve(o):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.queryCache.find(e),o=i==null?void 0:i.state.data,a=$s(t,o);if(typeof a>"u")return;const l=Vt(e),s=this.defaultQueryOptions(l);return this.queryCache.build(this,s).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return be.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state}removeQueries(e,t){const[r]=We(e,t),i=this.queryCache;be.batch(()=>{i.findAll(r).forEach(o=>{i.remove(o)})})}resetQueries(e,t,r){const[i,o]=We(e,t,r),a=this.queryCache,l={type:"active",...i};return be.batch(()=>(a.findAll(i).forEach(s=>{s.reset()}),this.refetchQueries(l,o)))}cancelQueries(e,t,r){const[i,o={}]=We(e,t,r);typeof o.revert>"u"&&(o.revert=!0);const a=be.batch(()=>this.queryCache.findAll(i).map(l=>l.cancel(o)));return Promise.all(a).then(Ne).catch(Ne)}invalidateQueries(e,t,r){const[i,o]=We(e,t,r);return be.batch(()=>{var a,l;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const s={...i,type:(a=(l=i.refetchType)!=null?l:i.type)!=null?a:"active"};return this.refetchQueries(s,o)})}refetchQueries(e,t,r){const[i,o]=We(e,t,r),a=be.batch(()=>this.queryCache.findAll(i).filter(s=>!s.isDisabled()).map(s=>{var u;return s.fetch(void 0,{...o,cancelRefetch:(u=o==null?void 0:o.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let l=Promise.all(a).then(Ne);return o!=null&&o.throwOnError||(l=l.catch(Ne)),l}fetchQuery(e,t,r){const i=Vt(e,t,r),o=this.defaultQueryOptions(i);typeof o.retry>"u"&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,t,r){return this.fetchQuery(e,t,r).then(Ne).catch(Ne)}fetchInfiniteQuery(e,t,r){const i=Vt(e,t,r);return i.behavior=fl(),this.fetchQuery(i)}prefetchInfiniteQuery(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(Ne).catch(Ne)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const r=this.queryDefaults.find(i=>st(e)===st(i.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(r=>cr(e,r.queryKey));return t==null?void 0:t.defaultOptions}setMutationDefaults(e,t){const r=this.mutationDefaults.find(i=>st(e)===st(i.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(r=>cr(e,r.mutationKey));return t==null?void 0:t.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=$r(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class hl extends Qt{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Jn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qr(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qr(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Ur(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const o=this.hasListeners();o&&zn(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(t),o&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();o&&(this.currentQuery!==i||this.options.enabled!==r.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),r=this.createResult(t,e);return pl(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Ne)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),Bt||this.currentResult.isStale||!Fr(this.options.staleTime))return;const t=Yo(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Bt||this.options.enabled===!1||!Fr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||fr.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const r=this.currentQuery,i=this.options,o=this.currentResult,a=this.currentResultState,l=this.currentResultOptions,s=e!==r,u=s?e.state:this.currentQueryInitialState,c=s?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:d,error:h,errorUpdatedAt:_,fetchStatus:v,status:b}=f,w=!1,S=!1,D;if(t._optimisticResults){const R=this.hasListeners(),M=!R&&Jn(e,t),Q=R&&zn(e,r,t,i);(M||Q)&&(v=yr(e.options.networkMode)?"fetching":"paused",d||(b="loading")),t._optimisticResults==="isRestoring"&&(v="idle")}if(t.keepPreviousData&&!f.dataUpdatedAt&&c!=null&&c.isSuccess&&b!=="error")D=c.data,d=c.dataUpdatedAt,b=c.status,w=!0;else if(t.select&&typeof f.data<"u")if(o&&f.data===(a==null?void 0:a.data)&&t.select===this.selectFn)D=this.selectResult;else try{this.selectFn=t.select,D=t.select(f.data),D=Hr(o==null?void 0:o.data,D,t),this.selectResult=D,this.selectError=null}catch(R){this.selectError=R}else D=f.data;if(typeof t.placeholderData<"u"&&typeof D>"u"&&b==="loading"){let R;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))R=o.data;else if(R=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof R<"u")try{R=t.select(R),this.selectError=null}catch(M){this.selectError=M}typeof R<"u"&&(b="success",D=Hr(o==null?void 0:o.data,R,t),S=!0)}this.selectError&&(h=this.selectError,D=this.selectResult,_=Date.now(),b="error");const T=v==="fetching",j=b==="loading",O=b==="error";return{status:b,fetchStatus:v,isLoading:j,isSuccess:b==="success",isError:O,isInitialLoading:j&&T,data:D,dataUpdatedAt:d,error:h,errorUpdatedAt:_,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!j,isLoadingError:O&&f.dataUpdatedAt===0,isPaused:v==="paused",isPlaceholderData:S,isPreviousData:w,isRefetchError:O&&f.dataUpdatedAt!==0,isStale:tn(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Ur(r,t))return;this.currentResult=r;const i={cache:!0},o=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!this.trackedProps.size)return!0;const s=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&s.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==t[c]&&s.has(c)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!tr(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){be.batch(()=>{if(e.onSuccess){var t,r,i,o;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(i=(o=this.options).onSettled)==null||i.call(o,this.currentResult.data,null)}else if(e.onError){var a,l,s,u;(a=(l=this.options).onError)==null||a.call(l,this.currentResult.error),(s=(u=this.options).onSettled)==null||s.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function _l(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Jn(n,e){return _l(n,e)||n.state.dataUpdatedAt>0&&Qr(n,e,e.refetchOnMount)}function Qr(n,e,t){if(e.enabled!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&tn(n,e)}return!1}function zn(n,e,t,r){return t.enabled!==!1&&(n!==e||r.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&tn(n,t)}function tn(n,e){return n.isStaleByTime(e.staleTime)}function pl(n,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!Ur(n.getCurrentResult(),e)}const na="$$_queryClient",vl=()=>{const n=at(na);if(!n)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return n},ml=n=>{ot(na,n)};function ia(){return vl()}function yl(n,e){const t=ia(),r=t.defaultQueryOptions(n);r._optimisticResults="optimistic";let i=new e(t,r);r.onError&&(r.onError=be.batchCalls(r.onError)),r.onSuccess&&(r.onSuccess=be.batchCalls(r.onSuccess)),r.onSettled&&(r.onSettled=be.batchCalls(r.onSettled)),Ft(i).subscribe(l=>{i=l,i.setOptions(r,{listeners:!1})});const o=Ft(i.getCurrentResult(),l=>i.subscribe(be.batchCalls(l))),{subscribe:a}=er(o,l=>(l=i.getOptimisticResult(r),r.notifyOnChangeProps?l:i.trackResult(l)));return{subscribe:a}}function bl(n,e,t){const r=Vt(n,e,t);return yl(r,hl)}function gl(n){let e;const t=n[2].default,r=Oe(t,n,n[1],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&2)&&Se(r,t,i,i[1],e?Ce(t,i[1],o,null):Ie(i[1]),null)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function kl(n,e,t){let{$$slots:r={},$$scope:i}=e,{client:o=new ra}=e;return wa(()=>{o.mount()}),ml(o),Eo(()=>{o.unmount()}),n.$$set=a=>{"client"in a&&t(0,o=a.client),"$$scope"in a&&t(1,i=a.$$scope)},[o,i,r]}class wl extends De{constructor(e){super(),Re(this,e,kl,gl,Pe,{client:0})}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function oa({rxNostr:n,queryKey:e,filters:t,operator:r,req:i,initData:o}){const a=ia();if(n.getRelays().length===0)return a.setQueryData(e,o),{data:Ft(o),status:Ft("success"),error:Ft()};let l;i?(i.emit(t),l=i):l=Ea({filters:t});const s=ar("loading"),u=ar(void 0),c=n.use(l).pipe(r),f=bl(e,()=>new Promise((d,h)=>{let _=!1;c.subscribe({next:v=>{_?a.setQueryData(e,v):(d(v),_=!0)},complete:()=>s.set("success"),error:v=>{console.error(v),s.set("error"),u.set(v),_||(h(v),_=!0)}})}));return{data:er(f,d=>d.data,o),status:er([f,s],([d,h])=>d.isSuccess?"success":d.isError?"error":h),error:er([f,u],([d,h])=>d.isError?d.error:h)}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function El({rxNostr:n,relays:e}){if(e.length===0)return Jo([[]]);const t=e.map(r=>{const i=typeof r=="string"?r:r.url,o=n.hasRelay(i)?n.getRelayState(i):"not-started";return{from:i,state:o}});return n.createConnectionStateObservable().pipe(zs(...t),xs(({from:r})=>r))}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Ol(n,e,t,r,i){const o=[{kinds:[r],authors:[t],limit:1}],a=vr(Sa(r),Ys(t),Oo(),Oa());return oa({rxNostr:n,queryKey:e,filters:o,operator:a,req:i})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Sl(n,e,t,r){const i=[{ids:[t],limit:1}],o=vr(Ws(t),Ia(),Oo());return oa({rxNostr:n,queryKey:e,filters:i,operator:o,req:r})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Il(n,e,t,r){return Ol(n,e,t,Ca.Kind.Metadata,r)}const Cl=n=>({}),Wn=n=>({}),ql=n=>({}),Yn=n=>({}),Pl=n=>({metadata:n&16,status:n&32}),Xn=n=>{var e;return{metadata:(e=n[4])==null?void 0:e.event,status:n[5]}},Dl=n=>({error:n&8}),Zn=n=>({error:n[3]});function Rl(n){let e;const t=n[12].nodata,r=Oe(t,n,n[11],Wn);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2048)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Cl):Ie(i[11]),Wn)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Tl(n){let e;const t=n[12].loading,r=Oe(t,n,n[11],Yn);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2048)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,ql):Ie(i[11]),Yn)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Al(n){let e;const t=n[12].default,r=Oe(t,n,n[11],Xn);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2096)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Pl):Ie(i[11]),Xn)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Ml(n){let e;const t=n[12].error,r=Oe(t,n,n[11],Zn);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2056)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Dl):Ie(i[11]),Zn)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function jl(n){let e,t,r,i;const o=[Ml,Al,Tl,Rl],a=[];function l(s,u){return s[3]?0:s[4]?1:s[5]==="loading"?2:3}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,[u]){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function Ll(n,e,t){let r,i,o,a,l,s,u=H,c=()=>(u(),u=lt(a,O=>t(3,s=O)),a),f,d=H,h=()=>(d(),d=lt(i,O=>t(4,f=O)),i),_,v=H,b=()=>(v(),v=lt(o,O=>t(5,_=O)),o);Fe(n,zr,O=>t(10,l=O)),n.$$.on_destroy.push(()=>u()),n.$$.on_destroy.push(()=>d()),n.$$.on_destroy.push(()=>v());let{$$slots:w={},$$scope:S}=e,{queryKey:D}=e,{pubkey:T}=e,{req:j=void 0}=e;return n.$$set=O=>{"queryKey"in O&&t(6,D=O.queryKey),"pubkey"in O&&t(7,T=O.pubkey),"req"in O&&t(8,j=O.req),"$$scope"in O&&t(11,S=O.$$scope)},n.$$.update=()=>{n.$$.dirty&1472&&t(9,r=Il(l.rxNostr,D,T,j)),n.$$.dirty&512&&h(t(2,i=r.data)),n.$$.dirty&512&&b(t(1,o=r.status)),n.$$.dirty&512&&c(t(0,a=r.error))},[a,o,i,s,f,_,D,T,j,r,l,S,w]}class Je extends De{constructor(e){super(),Re(this,e,Ll,jl,Pe,{queryKey:6,pubkey:7,req:8})}}const Nl=n=>({connections:n&4}),xn=n=>({connections:n[2]});function Vl(n){let e;const t=n[6].default,r=Oe(t,n,n[7],xn);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&132)&&Se(r,t,i,i[7],e?Ce(t,i[7],o,Nl):Ie(i[7]),xn)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Fl(n){let e,t;return e=new wl({props:{client:n[0],$$slots:{default:[Vl]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.client=r[0]),i&132&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Ul(n,e,t){let r,i,o,a,l=H,s=()=>(l(),l=lt(r,v=>t(2,a=v)),r);n.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:c}=e,{queryClientConfig:f={}}=e,{relays:d=[]}=e;const h=qa(),_={defaultOptions:{queries:{staleTime:1e3*60,refetchInterval:1/0}}};return Eo(()=>{h.dispose()}),n.$$set=v=>{"queryClientConfig"in v&&t(3,f=v.queryClientConfig),"relays"in v&&t(4,d=v.relays),"$$scope"in v&&t(7,c=v.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&s(t(1,r=El({rxNostr:h,relays:d}))),n.$$.dirty&8&&t(5,i={..._,...f}),n.$$.dirty&32&&t(0,o=new ra(i)),n.$$.dirty&16&&(h.setRelays(d),zr.set({rxNostr:h}))},[o,r,a,f,d,i,u,c]}class Vd extends De{constructor(e){super(),Re(this,e,Ul,Fl,Pe,{queryClientConfig:3,relays:4})}}const Bl=n=>({}),$n=n=>({}),Hl=n=>({}),ei=n=>({}),Ql=n=>({text:n&16,status:n&32}),ti=n=>{var e;return{text:(e=n[4])==null?void 0:e.event,status:n[5]}},Kl=n=>({error:n&8}),ri=n=>({error:n[3]});function Gl(n){let e;const t=n[12].nodata,r=Oe(t,n,n[11],$n);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2048)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Bl):Ie(i[11]),$n)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Jl(n){let e;const t=n[12].loading,r=Oe(t,n,n[11],ei);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2048)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Hl):Ie(i[11]),ei)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function zl(n){let e;const t=n[12].default,r=Oe(t,n,n[11],ti);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2096)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Ql):Ie(i[11]),ti)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Wl(n){let e;const t=n[12].error,r=Oe(t,n,n[11],ri);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&2056)&&Se(r,t,i,i[11],e?Ce(t,i[11],o,Kl):Ie(i[11]),ri)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Yl(n){let e,t,r,i;const o=[Wl,zl,Jl,Gl],a=[];function l(s,u){return s[3]?0:s[4]?1:s[5]==="loading"?2:3}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,[u]){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function Xl(n,e,t){let r,i,o,a,l,s,u=H,c=()=>(u(),u=lt(a,O=>t(3,s=O)),a),f,d=H,h=()=>(d(),d=lt(i,O=>t(4,f=O)),i),_,v=H,b=()=>(v(),v=lt(o,O=>t(5,_=O)),o);Fe(n,zr,O=>t(10,l=O)),n.$$.on_destroy.push(()=>u()),n.$$.on_destroy.push(()=>d()),n.$$.on_destroy.push(()=>v());let{$$slots:w={},$$scope:S}=e,{queryKey:D}=e,{id:T}=e,{req:j=void 0}=e;return n.$$set=O=>{"queryKey"in O&&t(6,D=O.queryKey),"id"in O&&t(7,T=O.id),"req"in O&&t(8,j=O.req),"$$scope"in O&&t(11,S=O.$$scope)},n.$$.update=()=>{n.$$.dirty&1472&&t(9,r=Sl(l.rxNostr,D,T,j)),n.$$.dirty&512&&h(t(2,i=r.data)),n.$$.dirty&512&&b(t(1,o=r.status)),n.$$.dirty&512&&c(t(0,a=r.error))},[a,o,i,s,f,_,D,T,j,r,l,S,w]}class Kt extends De{constructor(e){super(),Re(this,e,Xl,Yl,Pe,{queryKey:6,id:7,req:8})}}var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.is_node=void 0;var Er=null;function Zl(){return Er===null&&(Er=typeof B=="object"&&typeof B.process=="object"&&typeof B.process.versions=="object"&&typeof B.process.versions.node<"u"),Er}Gt.is_node=Zl;var Or={},Sr,ni;function xl(){if(ni)return Sr;ni=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Sr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),Sr}const $l="websocket",eu="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",tu=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],ru="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",nu=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],iu="1.0.34",ou={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},au="https://github.com/theturtle32/WebSocket-Node",su={node:">=4.0.0"},lu={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},uu={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},cu={verbose:!1},fu={test:"tape test/unit/*.js",gulp:"gulp"},du="index",hu={lib:"./lib"},_u="lib/browser.js",pu="Apache-2.0",vu={name:$l,description:eu,keywords:tu,author:ru,contributors:nu,version:iu,repository:ou,homepage:au,engines:su,dependencies:lu,devDependencies:uu,config:cu,scripts:fu,main:du,directories:hu,browser:_u,license:pu};var Ir,ii;function mu(){return ii||(ii=1,Ir=vu.version),Ir}var Cr,oi;function yu(){if(oi)return Cr;oi=1;var n;if(typeof globalThis=="object")n=globalThis;else try{n=xl()}catch{}finally{if(!n&&typeof window<"u"&&(n=window),!n)throw new Error("Could not determine global this")}var e=n.WebSocket||n.MozWebSocket,t=mu();function r(i,o){var a;return o?a=new e(i,o):a=new e(i),a}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(i){Object.defineProperty(r,i,{get:function(){return e[i]}})}),Cr={w3cwebsocket:e?r:null,version:t},Cr}var Yt={},qr={},vt={},mt={},yt={},bt={},ai;function bu(){if(ai)return bt;ai=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.ForOfAdaptor=void 0;var n=function(){function e(t,r){this.it_=t,this.last_=r}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var t=this.it_;return this.it_=this.it_.next(),{done:!1,value:t.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return bt.ForOfAdaptor=n,bt}var si;function rn(){if(si)return yt;si=1;var n=B&&B.__values||function(r){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&r[i],a=0;if(o)return o.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(yt,"__esModule",{value:!0}),yt.Container=void 0;var e=bu(),t=function(){function r(){}return r.prototype.empty=function(){return this.size()===0},r.prototype.rbegin=function(){return this.end().reverse()},r.prototype.rend=function(){return this.begin().reverse()},r.prototype[Symbol.iterator]=function(){return new e.ForOfAdaptor(this.begin(),this.end())},r.prototype.toJSON=function(){var i,o,a=[];try{for(var l=n(this),s=l.next();!s.done;s=l.next()){var u=s.value;a.push(u)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},r}();return yt.Container=t,yt}var gt={},li;function nn(){if(li)return gt;li=1;var n=B&&B.__read||function(t,r){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var o=i.call(t),a,l=[],s;try{for(;(r===void 0||r-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return l};Object.defineProperty(gt,"__esModule",{value:!0}),gt.NativeArrayIterator=void 0;var e=function(){function t(r,i){this.data_=r,this.index_=i}return t.prototype.index=function(){return this.index_},Object.defineProperty(t.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return--this.index_,this},t.prototype.next=function(){return++this.index_,this},t.prototype.advance=function(r){return this.index_+=r,this},t.prototype.equals=function(r){return this.data_===r.data_&&this.index_===r.index_},t.prototype.swap=function(r){var i,o;i=n([r.data_,this.data_],2),this.data_=i[0],r.data_=i[1],o=n([r.index_,this.index_],2),this.index_=o[0],r.index_=o[1]},t}();return gt.NativeArrayIterator=e,gt}var ui;function gu(){if(ui)return mt;ui=1;var n=B&&B.__extends||function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function l(){this.constructor=o}o.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(mt,"__esModule",{value:!0}),mt.SetContainer=void 0;var e=rn(),t=nn(),r=function(i){n(o,i);function o(a){var l=i.call(this)||this;return l.data_=a(l),l}return o.prototype.assign=function(a,l){this.clear(),this.insert(a,l)},o.prototype.clear=function(){this.data_.clear()},o.prototype.begin=function(){return this.data_.begin()},o.prototype.end=function(){return this.data_.end()},o.prototype.has=function(a){return!this.find(a).equals(this.end())},o.prototype.size=function(){return this.data_.size()},o.prototype.push=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(a.length===0)return this.size();var s=new t.NativeArrayIterator(a,0),u=new t.NativeArrayIterator(a,a.length);return this._Insert_by_range(s,u),this.size()},o.prototype.insert=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1?this._Insert_by_key(a[0]):a[0].next instanceof Function&&a[1].next instanceof Function?this._Insert_by_range(a[0],a[1]):this._Insert_by_hint(a[0],a[1])},o.prototype.erase=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1&&!(a[0]instanceof this.end().constructor&&a[0].source()===this)?this._Erase_by_val(a[0]):a.length===1?this._Erase_by_range(a[0]):this._Erase_by_range(a[0],a[1])},o.prototype._Erase_by_range=function(a,l){l===void 0&&(l=a.next());var s=this.data_.erase(a,l);return this._Handle_erase(a,l),s},o}(e.Container);return mt.SetContainer=r,mt}var Pr={},kt={},wt={},Et={},ci;function ku(){if(ci)return Et;ci=1;var n=B&&B.__extends||function(){var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])},t(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function o(){this.constructor=r}r.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(Et,"__esModule",{value:!0}),Et.Exception=void 0;var e=function(t){n(r,t);function r(i){var o=this.constructor,a=t.call(this,i)||this,l=o.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l,a}return Object.defineProperty(r.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),r.prototype.what=function(){return this.message},r.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},r}(Error);return Et.Exception=e,Et}var fi;function aa(){if(fi)return wt;fi=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(wt,"__esModule",{value:!0}),wt.LogicError=void 0;var e=ku(),t=function(r){n(i,r);function i(o){return r.call(this,o)||this}return i}(e.Exception);return wt.LogicError=t,wt}var di;function sa(){if(di)return kt;di=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(kt,"__esModule",{value:!0}),kt.InvalidArgument=void 0;var e=aa(),t=function(r){n(i,r);function i(o){return r.call(this,o)||this}return i}(e.LogicError);return kt.InvalidArgument=t,kt}var Ot={},hi;function wu(){if(hi)return Ot;hi=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.OutOfRange=void 0;var e=aa(),t=function(r){n(i,r);function i(o){return r.call(this,o)||this}return i}(e.LogicError);return Ot.OutOfRange=t,Ot}var _i;function br(){return _i||(_i=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorGenerator=void 0;var e=sa(),t=wu();(function(r){function i(h){if(typeof h=="string")return h;var _=h.constructor.name;return h.constructor.__MODULE&&(_="".concat(h.constructor.__MODULE,".").concat(_)),"std.".concat(_)}r.get_class_name=i;function o(h,_){return new t.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): it's empty container."))}r.empty=o;function a(h,_,v){return new t.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric index is negative -> (index = ").concat(v,")."))}r.negative_index=a;function l(h,_,v,b){return new t.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric index is equal or greater than size -> (index = ").concat(v,", size: ").concat(b,")."))}r.excessive_index=l;function s(h,_){return new e.InvalidArgument("Error on ".concat(i(h),".").concat(_,"(): parametric iterator is not this container's own."))}r.not_my_iterator=s;function u(h,_){return new e.InvalidArgument("Error on ".concat(i(h),".").concat(_,"(): parametric iterator, it already has been erased."))}r.erased_iterator=u;function c(h,_,v){return new t.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric iterator is directing negative position -> (index = ").concat(v,")."))}r.negative_iterator=c;function f(h,_){_===void 0&&(_="end");var v=i(h);return new t.OutOfRange("Error on ".concat(v,".Iterator.value: cannot access to the ").concat(v,".").concat(_,"().value."))}r.iterator_end_value=f;function d(h,_,v){throw new t.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): unable to find the matched key -> ").concat(v))}r.key_nout_found=d})(n.ErrorGenerator||(n.ErrorGenerator={}))}(Pr)),Pr}var pi;function Eu(){if(pi)return vt;pi=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},t=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(vt,"__esModule",{value:!0}),vt.UniqueSet=void 0;var r=gu(),i=br(),o=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.count=function(s){return this.find(s).equals(this.end())?0:1},l.prototype.insert=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.prototype.insert.apply(this,t([],e(s),!1))},l.prototype._Insert_by_range=function(s,u){for(;!s.equals(u);s=s.next())this._Insert_by_key(s.value)},l.prototype.extract=function(s){return s instanceof this.end().constructor?this._Extract_by_iterator(s):this._Extract_by_val(s)},l.prototype._Extract_by_val=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"extract",s);return this._Erase_by_range(u),s},l.prototype._Extract_by_iterator=function(s){return s.equals(this.end())===!0||this.has(s.value)===!1?this.end():(this._Erase_by_range(s),s)},l.prototype._Erase_by_val=function(s){var u=this.find(s);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(s){for(var u=s.begin();!u.equals(s.end());)this.has(u.value)===!1?(this.insert(u.value),u=s.erase(u)):u=u.next()},l}(r.SetContainer);return vt.UniqueSet=o,vt}var Dr={},Rr={},vi;function Ou(){return vi||(vi=1,function(n){var e=B&&B.__read||function(r,i){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var a=o.call(r),l,s=[],u;try{for(;(i===void 0||i-- >0)&&!(l=a.next()).done;)s.push(l.value)}catch(c){u={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return s},t=B&&B.__spreadArray||function(r,i,o){if(o||arguments.length===2)for(var a=0,l=i.length,s;a<l;a++)(s||!(a in i))&&(s||(s=Array.prototype.slice.call(i,0,a)),s[a]=i[a]);return r.concat(s||Array.prototype.slice.call(i))};Object.defineProperty(n,"__esModule",{value:!0}),n.IAssociativeContainer=void 0,function(r){function i(o){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var s,u;return a.length>=1&&a[0]instanceof Array?(s=function(){var c=a[0];o.push.apply(o,t([],e(c),!1))},u=a.slice(1)):a.length>=2&&a[0].next instanceof Function&&a[1].next instanceof Function?(s=function(){var c=a[0],f=a[1];o.assign(c,f)},u=a.slice(2)):(s=null,u=a),{ramda:s,tail:u}}r.construct=i}(n.IAssociativeContainer||(n.IAssociativeContainer={}))}(Rr)),Rr}var St={},It={},Ct={},mi;function Su(){if(mi)return Ct;mi=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct._Get_root=void 0;var n=Gt;function e(){return t===null&&(t=(0,n.is_node)()?B:self,t.__s_iUID===void 0&&(t.__s_iUID=0)),t}Ct._Get_root=e;var t=null;return Ct}var yi;function la(){if(yi)return It;yi=1,Object.defineProperty(It,"__esModule",{value:!0}),It.get_uid=void 0;var n=Su();function e(t){if(t instanceof Object){if(t.hasOwnProperty("__get_m_iUID")===!1){var r=++(0,n._Get_root)().__s_iUID;Object.defineProperty(t,"__get_m_iUID",{value:function(){return r}})}return t.__get_m_iUID()}else return t===void 0?-1:0}return It.get_uid=e,It}var bi;function on(){if(bi)return St;bi=1;var n=B&&B.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,c=u&&s[u],f=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(St,"__esModule",{value:!0}),St.hash=void 0;var e=la();function t(){for(var s,u,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=a;try{for(var h=n(c),_=h.next();!_.done;_=h.next()){var v=_.value;v=v&&v.valueOf();var b=typeof v;if(b==="boolean")d=r(v,d);else if(b==="number"||b==="bigint")d=i(v,d);else if(b==="string")d=o(v,d);else if(v instanceof Object&&v.hashCode instanceof Function){var w=v.hashCode();if(c.length===1)return w;d=d^w,d*=l}else d=i((0,e.get_uid)(v),d)}}catch(S){s={error:S}}finally{try{_&&!_.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return Math.abs(d)}St.hash=t;function r(s,u){return u^=s?1:0,u*=l,u}function i(s,u){return o(s.toString(),u)}function o(s,u){for(var c=0;c<s.length;++c)u^=s.charCodeAt(c),u*=l;return Math.abs(u)}var a=2166136261,l=16777619;return St}var Ae={},gi;function an(){if(gi)return Ae;gi=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.greater_equal=Ae.greater=Ae.less_equal=Ae.less=Ae.not_equal_to=Ae.equal_to=void 0;var n=la();function e(l,s){return l=l&&l.valueOf(),s=s&&s.valueOf(),l instanceof Object&&l.equals instanceof Function?l.equals(s):l===s}Ae.equal_to=e;function t(l,s){return!e(l,s)}Ae.not_equal_to=t;function r(l,s){return l=l.valueOf(),s=s.valueOf(),l instanceof Object?l.less instanceof Function?l.less(s):(0,n.get_uid)(l)<(0,n.get_uid)(s):l<s}Ae.less=r;function i(l,s){return r(l,s)||e(l,s)}Ae.less_equal=i;function o(l,s){return!i(l,s)}Ae.greater=o;function a(l,s){return!r(l,s)}return Ae.greater_equal=a,Ae}var ki;function ua(){return ki||(ki=1,function(n){var e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},t=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(n,"__esModule",{value:!0}),n.IHashContainer=void 0;var r=Ou(),i=on(),o=an();(function(a){function l(s,u,c){for(var f=[],d=3;d<arguments.length;d++)f[d-3]=arguments[d];var h=null,_=i.hash,v=o.equal_to;if(f.length===1&&f[0]instanceof u){var b=f[0];_=b.hash_function(),v=b.key_eq(),h=function(){var S=b.begin(),D=b.end();s.assign(S,D)}}else{var w=r.IAssociativeContainer.construct.apply(r.IAssociativeContainer,t([s],e(f),!1));h=w.ramda,w.tail.length>=1&&(_=w.tail[0]),w.tail.length>=2&&(v=w.tail[1])}c(_,v),h!==null&&h()}a.construct=l})(n.IHashContainer||(n.IHashContainer={}))}(Dr)),Dr}var Tr={},qt={},Pt={},wi;function sn(){if(wi)return Pt;wi=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.ListIterator=void 0;var n=br(),e=function(){function t(r,i,o){this.prev_=r,this.next_=i,this.value_=o}return t._Set_prev=function(r,i){r.prev_=i},t._Set_next=function(r,i){r.next_=i},t.prototype.prev=function(){return this.prev_},t.prototype.next=function(){return this.next_},Object.defineProperty(t.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),t.prototype._Try_value=function(){if(this.value_===void 0&&this.equals(this.source().end())===!0)throw n.ErrorGenerator.iterator_end_value(this.source())},t.prototype.equals=function(r){return this===r},t}();return Pt.ListIterator=e,Pt}var Dt={},Ei;function Iu(){if(Ei)return Dt;Ei=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.Repeater=void 0;var n=function(){function e(t,r){this.index_=t,this.value_=r}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(t){return this.index_===t.index_},e}();return Dt.Repeater=n,Dt}var Me={},Oi;function Cu(){if(Oi)return Me;Oi=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.next=Me.prev=Me.advance=Me.distance=Me.size=Me.empty=void 0;var n=sa();function e(s){return s instanceof Array?s.length!==0:s.empty()}Me.empty=e;function t(s){return s instanceof Array?s.length:s.size()}Me.size=t;function r(s,u){if(s.index instanceof Function)return i(s,u);for(var c=0;!s.equals(u);s=s.next())++c;return c}Me.distance=r;function i(s,u){var c=s.index(),f=u.index();return s.base instanceof Function?c-f:f-c}function o(s,u){if(u===0)return s;if(s.advance instanceof Function)return s.advance(u);var c;if(u<0){if(!(s.prev instanceof Function))throw new n.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");c=function(f){return f.prev()},u=-u}else c=function(f){return f.next()};for(;u-- >0;)s=c(s);return s}Me.advance=o;function a(s,u){return u===void 0&&(u=1),u===1?s.prev():o(s,-u)}Me.prev=a;function l(s,u){return u===void 0&&(u=1),u===1?s.next():o(s,u)}return Me.next=l,Me}var Si;function ca(){if(Si)return qt;Si=1;var n=B&&B.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(d[_]=h[_])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),e=B&&B.__read||function(u,c){var f=typeof Symbol=="function"&&u[Symbol.iterator];if(!f)return u;var d=f.call(u),h,_=[],v;try{for(;(c===void 0||c-- >0)&&!(h=d.next()).done;)_.push(h.value)}catch(b){v={error:b}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(v)throw v.error}}return _};Object.defineProperty(qt,"__esModule",{value:!0}),qt.ListContainer=void 0;var t=rn(),r=sn(),i=Iu(),o=nn(),a=Cu(),l=br(),s=function(u){n(c,u);function c(){var f=u.call(this)||this;return f.end_=f._Create_iterator(null,null),f.clear(),f}return c.prototype.assign=function(f,d){this.clear(),this.insert(this.end(),f,d)},c.prototype.clear=function(){r.ListIterator._Set_prev(this.end_,this.end_),r.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},c.prototype.resize=function(f){var d=f-this.size();d>0?this.insert(this.end(),d,void 0):d<0&&this.erase((0,a.advance)(this.end(),-d),this.end())},c.prototype.begin=function(){return this.begin_},c.prototype.end=function(){return this.end_},c.prototype.size=function(){return this.size_},c.prototype.push_front=function(f){this.insert(this.begin_,f)},c.prototype.push_back=function(f){this.insert(this.end_,f)},c.prototype.pop_front=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},c.prototype.pop_back=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},c.prototype.push=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];if(f.length===0)return this.size();var h=new o.NativeArrayIterator(f,0),_=new o.NativeArrayIterator(f,f.length);return this._Insert_by_range(this.end(),h,_),this.size()},c.prototype.insert=function(f){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return d.length===1?this._Insert_by_repeating_val(f,1,d[0]):d.length===2&&typeof d[0]=="number"?this._Insert_by_repeating_val(f,d[0],d[1]):this._Insert_by_range(f,d[0],d[1])},c.prototype._Insert_by_repeating_val=function(f,d,h){var _=new i.Repeater(0,h),v=new i.Repeater(d);return this._Insert_by_range(f,_,v)},c.prototype._Insert_by_range=function(f,d,h){for(var _=f.prev(),v=null,b=0,w=d;w.equals(h)===!1;w=w.next()){var S=this._Create_iterator(_,null,w.value);b===0&&(v=S),r.ListIterator._Set_next(_,S),_=S,++b}return f.equals(this.begin())===!0&&(this.begin_=v),r.ListIterator._Set_next(_,f),r.ListIterator._Set_prev(f,_),this.size_+=b,v},c.prototype.erase=function(f,d){return d===void 0&&(d=f.next()),this._Erase_by_range(f,d)},c.prototype._Erase_by_range=function(f,d){if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(f.equals(this.end_))return this.end_;var h=f.prev();r.ListIterator._Set_next(h,d),r.ListIterator._Set_prev(d,h);for(var _=f;!_.equals(d);_=_.next())_.erased_=!0,--this.size_;return f.equals(this.begin_)&&(this.begin_=d),d},c.prototype.swap=function(f){var d,h,_;d=e([f.begin_,this.begin_],2),this.begin_=d[0],f.begin_=d[1],h=e([f.end_,this.end_],2),this.end_=h[0],f.end_=h[1],_=e([f.size_,this.size_],2),this.size_=_[0],f.size_=_[1]},c}(t.Container);return qt.ListContainer=s,qt}var Rt={},Ii;function fa(){if(Ii)return Rt;Ii=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.ReverseIterator=void 0;var n=function(){function e(t){this.base_=t.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(t){return this.base_.equals(t.base_)},e}();return Rt.ReverseIterator=n,Rt}var Ci;function qu(){return Ci||(Ci=1,function(n){var e=B&&B.__extends||function(){var l=function(s,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),t=B&&B.__read||function(l,s){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(s===void 0||s-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(n,"__esModule",{value:!0}),n.SetElementList=void 0;var r=ca(),i=sn(),o=fa(),a=function(l){e(s,l);function s(u){var c=l.call(this)||this;return c.associative_=u,c}return s.prototype._Create_iterator=function(u,c,f){return s.Iterator.create(this,u,c,f)},s._Swap_associative=function(u,c){var f;f=t([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},s.prototype.associative=function(){return this.associative_},s}(r.ListContainer);n.SetElementList=a,function(l){var s=function(c){e(f,c);function f(d,h,_,v){var b=c.call(this,h,_,v)||this;return b.source_=d,b}return f.create=function(d,h,_,v){return new f(d,h,_,v)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.source_.associative()},f}(i.ListIterator);l.Iterator=s;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},f}(o.ReverseIterator);l.ReverseIterator=u}(a=n.SetElementList||(n.SetElementList={})),n.SetElementList=a}(Tr)),Tr}var Tt={},At={},qi;function da(){if(qi)return At;qi=1;var n=B&&B.__values||function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(At,"__esModule",{value:!0}),At.HashBuckets=void 0;var e=function(){function i(o,a){this.fetcher_=o,this.hasher_=a,this.max_load_factor_=r,this.data_=[],this.size_=0,this.initialize()}return i.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},i.prototype.rehash=function(o){var a,l,s,u;o=Math.max(o,t);for(var c=[],f=0;f<o;++f)c.push([]);try{for(var d=n(this.data_),h=d.next();!h.done;h=d.next()){var _=h.value;try{for(var v=(s=void 0,n(_)),b=v.next();!b.done;b=v.next()){var w=b.value,S=this.hasher_(this.fetcher_(w))%c.length;c[S].push(w)}}catch(D){s={error:D}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(s)throw s.error}}}}catch(D){a={error:D}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(a)throw a.error}}this.data_=c},i.prototype.reserve=function(o){o>this.capacity()&&(o=Math.floor(o/this.max_load_factor_),this.rehash(o))},i.prototype.initialize=function(){for(var o=0;o<t;++o)this.data_.push([])},i.prototype.length=function(){return this.data_.length},i.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},i.prototype.at=function(o){return this.data_[o]},i.prototype.load_factor=function(){return this.size_/this.length()},i.prototype.max_load_factor=function(o){if(o===void 0&&(o=null),o===null)return this.max_load_factor_;this.max_load_factor_=o},i.prototype.hash_function=function(){return this.hasher_},i.prototype.index=function(o){return this.hasher_(this.fetcher_(o))%this.length()},i.prototype.insert=function(o){var a=this.capacity();++this.size_>a&&this.reserve(a*2);var l=this.index(o);this.data_[l].push(o)},i.prototype.erase=function(o){for(var a=this.index(o),l=this.data_[a],s=0;s<l.length;++s)if(l[s]===o){l.splice(s,1),--this.size_;break}},i}();At.HashBuckets=e;var t=10,r=1;return At}var Pi;function Pu(){if(Pi)return Tt;Pi=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},t=B&&B.__values||function(a){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&a[l],u=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.SetHashBuckets=void 0;var r=da(),i=function(a){n(l,a);function l(s,u,c){var f=a.call(this,o,u)||this;return f.source_=s,f.key_eq_=c,f}return l._Swap_source=function(s,u){var c;c=e([u.source_,s.source_],2),s.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(s){var u,c,f=this.hash_function()(s)%this.length(),d=this.at(f);try{for(var h=t(d),_=h.next();!_.done;_=h.next()){var v=_.value;if(this.key_eq_(v.value,s))return v}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(r.HashBuckets);Tt.SetHashBuckets=i;function o(a){return a.value}return Tt}var it={},Di;function ha(){if(Di)return it;Di=1,Object.defineProperty(it,"__esModule",{value:!0}),it.make_pair=it.Pair=void 0;var n=on(),e=an(),t=function(){function i(o,a){this.first=o,this.second=a}return i.prototype.equals=function(o){return(0,e.equal_to)(this.first,o.first)&&(0,e.equal_to)(this.second,o.second)},i.prototype.less=function(o){return(0,e.equal_to)(this.first,o.first)===!1?(0,e.less)(this.first,o.first):(0,e.less)(this.second,o.second)},i.prototype.hashCode=function(){return(0,n.hash)(this.first,this.second)},i}();it.Pair=t;function r(i,o){return new t(i,o)}return it.make_pair=r,it}var Ri;function Du(){return Ri||(Ri=1,function(n){var e=B&&B.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(h[v]=_[v])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function h(){this.constructor=f}f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),t=B&&B.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h=d.call(c),_,v=[],b;try{for(;(f===void 0||f-- >0)&&!(_=h.next()).done;)v.push(_.value)}catch(w){b={error:w}}finally{try{_&&!_.done&&(d=h.return)&&d.call(h)}finally{if(b)throw b.error}}return v},r=B&&B.__spreadArray||function(c,f,d){if(d||arguments.length===2)for(var h=0,_=f.length,v;h<_;h++)(v||!(h in f))&&(v||(v=Array.prototype.slice.call(f,0,h)),v[h]=f[h]);return c.concat(v||Array.prototype.slice.call(f))};Object.defineProperty(n,"__esModule",{value:!0}),n.HashSet=void 0;var i=Eu(),o=ua(),a=qu(),l=Pu(),s=ha(),u=function(c){e(f,c);function f(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var _=c.call(this,function(v){return new a.SetElementList(v)})||this;return o.IHashContainer.construct.apply(o.IHashContainer,r([_,f,function(v,b){_.buckets_=new l.SetHashBuckets(_,v,b)}],t(d),!1)),_}return f.prototype.clear=function(){this.buckets_.clear(),c.prototype.clear.call(this)},f.prototype.swap=function(d){var h,_;h=t([d.data_,this.data_],2),this.data_=h[0],d.data_=h[1],a.SetElementList._Swap_associative(this.data_,d.data_),l.SetHashBuckets._Swap_source(this.buckets_,d.buckets_),_=t([d.buckets_,this.buckets_],2),this.buckets_=_[0],d.buckets_=_[1]},f.prototype.find=function(d){return this.buckets_.find(d)},f.prototype.begin=function(d){return d===void 0&&(d=null),d===null?c.prototype.begin.call(this):this.buckets_.at(d)[0]},f.prototype.end=function(d){if(d===void 0&&(d=null),d===null)return c.prototype.end.call(this);var h=this.buckets_.at(d);return h[h.length-1].next()},f.prototype.rbegin=function(d){return d===void 0&&(d=null),this.end(d).reverse()},f.prototype.rend=function(d){return d===void 0&&(d=null),this.begin(d).reverse()},f.prototype.bucket_count=function(){return this.buckets_.length()},f.prototype.bucket_size=function(d){return this.buckets_.at(d).length},f.prototype.load_factor=function(){return this.buckets_.load_factor()},f.prototype.hash_function=function(){return this.buckets_.hash_function()},f.prototype.key_eq=function(){return this.buckets_.key_eq()},f.prototype.bucket=function(d){return this.hash_function()(d)%this.buckets_.length()},f.prototype.max_load_factor=function(d){return d===void 0&&(d=null),this.buckets_.max_load_factor(d)},f.prototype.reserve=function(d){this.buckets_.reserve(d)},f.prototype.rehash=function(d){this.buckets_.rehash(d)},f.prototype._Insert_by_key=function(d){var h=this.find(d);return h.equals(this.end())===!1?new s.Pair(h,!1):(this.data_.push(d),h=h.prev(),this._Handle_insert(h,h.next()),new s.Pair(h,!0))},f.prototype._Insert_by_hint=function(d,h){var _=this.find(h);return _.equals(this.end())===!0&&(_=this.data_.insert(d,h),this._Handle_insert(_,_.next())),_},f.prototype._Handle_insert=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.insert(d)},f.prototype._Handle_erase=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.erase(d)},f}(i.UniqueSet);n.HashSet=u,function(c){c.Iterator=a.SetElementList.Iterator,c.ReverseIterator=a.SetElementList.ReverseIterator}(u=n.HashSet||(n.HashSet={})),n.HashSet=u}(qr)),qr}var Ar={},Mt={},jt={},Ti;function Ru(){if(Ti)return jt;Ti=1;var n=B&&B.__extends||function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function l(){this.constructor=o}o.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(jt,"__esModule",{value:!0}),jt.MapContainer=void 0;var e=rn(),t=nn(),r=function(i){n(o,i);function o(a){var l=i.call(this)||this;return l.data_=a(l),l}return o.prototype.assign=function(a,l){this.clear(),this.insert(a,l)},o.prototype.clear=function(){this.data_.clear()},o.prototype.begin=function(){return this.data_.begin()},o.prototype.end=function(){return this.data_.end()},o.prototype.has=function(a){return!this.find(a).equals(this.end())},o.prototype.size=function(){return this.data_.size()},o.prototype.push=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var s=new t.NativeArrayIterator(a,0),u=new t.NativeArrayIterator(a,a.length);return this.insert(s,u),this.size()},o.prototype.insert=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1?this.emplace(a[0].first,a[0].second):a[0].next instanceof Function&&a[1].next instanceof Function?this._Insert_by_range(a[0],a[1]):this.emplace_hint(a[0],a[1].first,a[1].second)},o.prototype.erase=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1&&(!(a[0]instanceof this.end().constructor)||a[0].source()!==this)?this._Erase_by_key(a[0]):a.length===1?this._Erase_by_range(a[0]):this._Erase_by_range(a[0],a[1])},o.prototype._Erase_by_range=function(a,l){l===void 0&&(l=a.next());var s=this.data_.erase(a,l);return this._Handle_erase(a,l),s},o}(e.Container);return jt.MapContainer=r,jt}var Ai;function Tu(){if(Ai)return Mt;Ai=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},t=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.UniqueMap=void 0;var r=Ru(),i=br(),o=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.count=function(s){return this.find(s).equals(this.end())?0:1},l.prototype.get=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"get",s);return u.second},l.prototype.take=function(s,u){var c=this.find(s);return c.equals(this.end())?this.emplace(s,u()).first.second:c.second},l.prototype.set=function(s,u){this.insert_or_assign(s,u)},l.prototype.insert=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.prototype.insert.apply(this,t([],e(s),!1))},l.prototype._Insert_by_range=function(s,u){for(var c=s;!c.equals(u);c=c.next())this.emplace(c.value.first,c.value.second)},l.prototype.insert_or_assign=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(s.length===2)return this._Insert_or_assign_with_key_value(s[0],s[1]);if(s.length===3)return this._Insert_or_assign_with_hint(s[0],s[1],s[2])},l.prototype._Insert_or_assign_with_key_value=function(s,u){var c=this.emplace(s,u);return c.second===!1&&(c.first.second=u),c},l.prototype._Insert_or_assign_with_hint=function(s,u,c){var f=this.emplace_hint(s,u,c);return f.second!==c&&(f.second=c),f},l.prototype.extract=function(s){return s instanceof this.end().constructor?this._Extract_by_iterator(s):this._Extract_by_key(s)},l.prototype._Extract_by_key=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"extract",s);var c=u.value;return this._Erase_by_range(u),c},l.prototype._Extract_by_iterator=function(s){return s.equals(this.end())===!0?this.end():(this._Erase_by_range(s),s)},l.prototype._Erase_by_key=function(s){var u=this.find(s);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(s){for(var u=s.begin();!u.equals(s.end());)this.has(u.first)===!1?(this.insert(u.value),u=s.erase(u)):u=u.next()},l}(r.MapContainer);return Mt.UniqueMap=o,Mt}var Mr={},Mi;function Au(){return Mi||(Mi=1,function(n){var e=B&&B.__extends||function(){var l=function(s,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),t=B&&B.__read||function(l,s){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(s===void 0||s-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(n,"__esModule",{value:!0}),n.MapElementList=void 0;var r=ca(),i=sn(),o=fa(),a=function(l){e(s,l);function s(u){var c=l.call(this)||this;return c.associative_=u,c}return s.prototype._Create_iterator=function(u,c,f){return s.Iterator.create(this,u,c,f)},s._Swap_associative=function(u,c){var f;f=t([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},s.prototype.associative=function(){return this.associative_},s}(r.ListContainer);n.MapElementList=a,function(l){var s=function(c){e(f,c);function f(d,h,_,v){var b=c.call(this,h,_,v)||this;return b.list_=d,b}return f.create=function(d,h,_,v){return new f(d,h,_,v)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.list_.associative()},Object.defineProperty(f.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.value.second},set:function(d){this.value.second=d},enumerable:!1,configurable:!0}),f}(i.ListIterator);l.Iterator=s;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},Object.defineProperty(f.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.base_.second},set:function(d){this.base_.second=d},enumerable:!1,configurable:!0}),f}(o.ReverseIterator);l.ReverseIterator=u}(a=n.MapElementList||(n.MapElementList={})),n.MapElementList=a}(Mr)),Mr}var Lt={},ji;function Mu(){if(ji)return Lt;ji=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},t=B&&B.__values||function(a){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&a[l],u=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.MapHashBuckets=void 0;var r=da(),i=function(a){n(l,a);function l(s,u,c){var f=a.call(this,o,u)||this;return f.source_=s,f.key_eq_=c,f}return l._Swap_source=function(s,u){var c;c=e([u.source_,s.source_],2),s.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(s){var u,c,f=this.hash_function()(s)%this.length(),d=this.at(f);try{for(var h=t(d),_=h.next();!_.done;_=h.next()){var v=_.value;if(this.key_eq_(v.first,s))return v}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(r.HashBuckets);Lt.MapHashBuckets=i;function o(a){return a.first}return Lt}var Nt={},Li;function ju(){if(Li)return Nt;Li=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Entry=void 0;var n=on(),e=an(),t=function(){function r(i,o){this.first=i,this.second=o}return r.prototype.equals=function(i){return(0,e.equal_to)(this.first,i.first)},r.prototype.less=function(i){return(0,e.less)(this.first,i.first)},r.prototype.hashCode=function(){return(0,n.hash)(this.first)},r}();return Nt.Entry=t,Nt}var Ni;function Lu(){return Ni||(Ni=1,function(n){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(_[b]=v[b])},f(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),t=B&&B.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var _=h.call(f),v,b=[],w;try{for(;(d===void 0||d-- >0)&&!(v=_.next()).done;)b.push(v.value)}catch(S){w={error:S}}finally{try{v&&!v.done&&(h=_.return)&&h.call(_)}finally{if(w)throw w.error}}return b},r=B&&B.__spreadArray||function(f,d,h){if(h||arguments.length===2)for(var _=0,v=d.length,b;_<v;_++)(b||!(_ in d))&&(b||(b=Array.prototype.slice.call(d,0,_)),b[_]=d[_]);return f.concat(b||Array.prototype.slice.call(d))};Object.defineProperty(n,"__esModule",{value:!0}),n.HashMap=void 0;var i=Tu(),o=ua(),a=Au(),l=Mu(),s=ju(),u=ha(),c=function(f){e(d,f);function d(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];var v=f.call(this,function(b){return new a.MapElementList(b)})||this;return o.IHashContainer.construct.apply(o.IHashContainer,r([v,d,function(b,w){v.buckets_=new l.MapHashBuckets(v,b,w)}],t(h),!1)),v}return d.prototype.clear=function(){this.buckets_.clear(),f.prototype.clear.call(this)},d.prototype.swap=function(h){var _,v;_=t([h.data_,this.data_],2),this.data_=_[0],h.data_=_[1],a.MapElementList._Swap_associative(this.data_,h.data_),l.MapHashBuckets._Swap_source(this.buckets_,h.buckets_),v=t([h.buckets_,this.buckets_],2),this.buckets_=v[0],h.buckets_=v[1]},d.prototype.find=function(h){return this.buckets_.find(h)},d.prototype.begin=function(h){return h===void 0&&(h=null),h===null?f.prototype.begin.call(this):this.buckets_.at(h)[0]},d.prototype.end=function(h){if(h===void 0&&(h=null),h===null)return f.prototype.end.call(this);var _=this.buckets_.at(h);return _[_.length-1].next()},d.prototype.rbegin=function(h){return h===void 0&&(h=null),this.end(h).reverse()},d.prototype.rend=function(h){return h===void 0&&(h=null),this.begin(h).reverse()},d.prototype.bucket_count=function(){return this.buckets_.length()},d.prototype.bucket_size=function(h){return this.buckets_.at(h).length},d.prototype.load_factor=function(){return this.buckets_.load_factor()},d.prototype.hash_function=function(){return this.buckets_.hash_function()},d.prototype.key_eq=function(){return this.buckets_.key_eq()},d.prototype.bucket=function(h){return this.hash_function()(h)%this.buckets_.length()},d.prototype.max_load_factor=function(h){return h===void 0&&(h=null),this.buckets_.max_load_factor(h)},d.prototype.reserve=function(h){this.buckets_.reserve(h)},d.prototype.rehash=function(h){this.buckets_.rehash(h)},d.prototype.emplace=function(h,_){var v=this.find(h);return v.equals(this.end())===!1?new u.Pair(v,!1):(this.data_.push(new s.Entry(h,_)),v=v.prev(),this._Handle_insert(v,v.next()),new u.Pair(v,!0))},d.prototype.emplace_hint=function(h,_,v){var b=this.find(_);return b.equals(this.end())===!0&&(b=this.data_.insert(h,new s.Entry(_,v)),this._Handle_insert(b,b.next())),b},d.prototype._Handle_insert=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.insert(h)},d.prototype._Handle_erase=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.erase(h)},d}(i.UniqueMap);n.HashMap=c,function(f){f.Iterator=a.MapElementList.Iterator,f.ReverseIterator=a.MapElementList.ReverseIterator}(c=n.HashMap||(n.HashMap={})),n.HashMap=c}(Ar)),Ar}var Vi;function Nu(){if(Vi)return Yt;Vi=1;var n=B&&B.__values||function(i){var o=typeof Symbol=="function"&&i[Symbol.iterator],a=0;return o?o.call(i):{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}}};Object.defineProperty(Yt,"__esModule",{value:!0});var e=Du(),t=Lu(),r=function(){function i(){this.listeners_=new t.HashMap,this.created_at_=new Date}return i.prototype.dispatchEvent=function(o){var a,l,s=this.listeners_.find(o.type);if(!s.equals(this.listeners_.end())){o.target=this,o.timeStamp=new Date().getTime()-this.created_at_.getTime();try{for(var u=n(s.second),c=u.next();!c.done;c=u.next()){var f=c.value;f(o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}},i.prototype.addEventListener=function(o,a){var l=this.listeners_.find(o);l.equals(this.listeners_.end())&&(l=this.listeners_.emplace(o,new e.HashSet).first),l.second.insert(a)},i.prototype.removeEventListener=function(o,a){var l=this.listeners_.find(o);l.equals(this.listeners_.end())||(l.second.erase(a),l.second.empty()&&this.listeners_.erase(l))},i}();return Yt.EventTarget=r,Yt}var Xt={},Fi;function gr(){if(Fi)return Xt;Fi=1,Object.defineProperty(Xt,"__esModule",{value:!0});var n=function(){function e(t,r){this.type=t,r&&Object.assign(this,r)}return e}();return Xt.Event=n,Xt}var Zt={},Ui;function Vu(){if(Ui)return Zt;Ui=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},r(i,o)};return function(i,o){r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(Zt,"__esModule",{value:!0});var e=gr(),t=function(r){n(i,r);function i(o,a){return r.call(this,o,a)||this}return i}(e.Event);return Zt.CloseEvent=t,Zt}var xt={},Bi;function Fu(){if(Bi)return xt;Bi=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},r(i,o)};return function(i,o){r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(xt,"__esModule",{value:!0});var e=gr(),t=function(r){n(i,r);function i(o,a){return r.call(this,o,a)||this}return i}(e.Event);return xt.MessageEvent=t,xt}var $t={},Hi;function Uu(){if(Hi)return $t;Hi=1;var n=B&&B.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},r(i,o)};return function(i,o){r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty($t,"__esModule",{value:!0});var e=gr(),t=function(r){n(i,r);function i(o,a){return r.call(this,o,a)||this}return i}(e.Event);return $t.ErrorEvent=t,$t}var Qi;function Bu(){return Qi||(Qi=1,function(n){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var b in v)v.hasOwnProperty(b)&&(_[b]=v[b])},f(d,h)};return function(d,h){f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),t=B&&B.__assign||function(){return t=Object.assign||function(f){for(var d,h=1,_=arguments.length;h<_;h++){d=arguments[h];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(f[v]=d[v])}return f},t.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var r=yu(),i=Nu(),o=gr(),a=Vu(),l=Fu(),s=Uu(),u=function(f){e(d,f);function d(h,_){var v=f.call(this)||this;return v.on_={},v.state_=d.CONNECTING,v.client_=new r.client,v.client_.on("connect",v._Handle_connect.bind(v)),v.client_.on("connectFailed",v._Handle_error.bind(v)),typeof _=="string"&&(_=[_]),v.client_.connect(h,_),v}return d.prototype.close=function(h,_){this.state_=d.CLOSING,h===void 0?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(h,_,!0)},d.prototype.send=function(h){if(typeof h.valueOf()=="string")this.connection_.sendUTF(h);else{var _=void 0;h instanceof Buffer?_=h:h instanceof Blob?_=new Buffer(h,"blob"):h.buffer?_=new Buffer(h.buffer):_=new Buffer(h),this.connection_.sendBytes(_)}},Object.defineProperty(d.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onopen",{get:function(){return this.on_.open},set:function(h){this._Set_on("open",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onclose",{get:function(){return this.on_.close},set:function(h){this._Set_on("close",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onmessage",{get:function(){return this.on_.message},set:function(h){this._Set_on("message",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onerror",{get:function(){return this.on_.error},set:function(h){this._Set_on("error",h)},enumerable:!0,configurable:!0}),d.prototype._Set_on=function(h,_){this.on_[h]&&this.removeEventListener(h,this.on_[h]),this.addEventListener(h,_),this.on_[h]=_},d.prototype._Handle_connect=function(h){this.connection_=h,this.state_=d.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var _=new o.Event("open",c);this.dispatchEvent(_)},d.prototype._Handle_close=function(h,_){var v=new a.CloseEvent("close",t({},c,{code:h,reason:_}));this.state_=d.CLOSED,this.dispatchEvent(v)},d.prototype._Handle_message=function(h){var _=new l.MessageEvent("message",t({},c,{data:h.binaryData?h.binaryData:h.utf8Data}));this.dispatchEvent(_)},d.prototype._Handle_error=function(h){var _=new s.ErrorEvent("error",t({},c,{error:h,message:h.message}));this.state_===d.CONNECTING&&(this.state_=d.CLOSED),this.dispatchEvent(_)},d}(i.EventTarget);n.WebSocket=u,function(f){f.CONNECTING=0,f.OPEN=1,f.CLOSING=2,f.CLOSED=3}(u=n.WebSocket||(n.WebSocket={})),n.WebSocket=u;var c={bubbles:!1,cancelable:!1}}(Or)),Or}var Hu=Gt;Hu.is_node()&&(B.WebSocket=Bu().WebSocket);async function Ki(n){const e=Qu(n),t=await caches.open("user-icon-cache-v1"),r=await t.match(`../usericon/${e}`);if(r){console.log(r);const i=await r.blob();return URL.createObjectURL(i)}else try{const i=await fetch(n);if(i.ok){t.put(`../usericon/${e}`,i.clone());const o=await i.blob();return URL.createObjectURL(o)}else return n}catch{return n}}function Qu(n){const e=Ku(n),t=Gu(n);return`image-${e}.${t}`}function Ku(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e=(e<<5)-e+r,e|=0}return e}function Gu(n){const e=n.split(".");return e[e.length-1]}function Gi(n){let e,t,r,i,o=JSON.parse(n[1][0].value.metadata.content).picture,a,l,s,u,c,f,d,h="about",_,v,b=JSON.parse(n[1][0].value.metadata.content).about+"",w,S,D,T,j="profileJSON",O,C,R=JSON.stringify(n[1][0].value.metadata,void 0,4)+"",M,Q,x,z,$,me="copy pubKey",W,J,K="copy hexKey",re,de,G,he="Open in external app",_e,se,ne=n[0].buttonTextCancel+"",fe,pe,Te,ve=o&&Ji(n);return{c(){e=g("div"),t=g("div"),r=g("div"),i=g("div"),ve&&ve.c(),a=F(),l=g("div"),s=g("img"),c=F(),f=g("div"),d=g("div"),d.textContent=h,_=F(),v=g("div"),w=q(b),S=F(),D=g("div"),T=g("div"),T.textContent=j,O=F(),C=g("div"),M=q(R),Q=F(),x=g("div"),z=g("div"),$=g("button"),$.textContent=me,W=F(),J=g("button"),J.textContent=K,re=F(),de=g("div"),G=g("button"),G.textContent=he,_e=F(),se=g("button"),fe=q(ne),this.h()},l(je){e=k(je,"DIV",{class:!0});var V=E(e);t=k(V,"DIV",{class:!0});var ge=E(t);r=k(ge,"DIV",{class:!0});var Le=E(r);i=k(Le,"DIV",{class:!0});var et=E(i);ve&&ve.l(et),et.forEach(p),a=U(Le),l=k(Le,"DIV",{});var ct=E(l);s=k(ct,"IMG",{class:!0,src:!0,alt:!0}),ct.forEach(p),Le.forEach(p),c=U(ge),f=k(ge,"DIV",{class:!0});var tt=E(f);d=k(tt,"DIV",{class:!0,"data-svelte-h":!0}),Ve(d)!=="svelte-ea5rn7"&&(d.textContent=h),_=U(tt),v=k(tt,"DIV",{class:!0});var ke=E(v);w=P(ke,b),ke.forEach(p),tt.forEach(p),S=U(ge),D=k(ge,"DIV",{class:!0});var ye=E(D);T=k(ye,"DIV",{class:!0,"data-svelte-h":!0}),Ve(T)!=="svelte-a5q7il"&&(T.textContent=j),O=U(ye),C=k(ye,"DIV",{class:!0});var Ke=E(C);M=P(Ke,R),Ke.forEach(p),ye.forEach(p),ge.forEach(p),Q=U(V),x=k(V,"DIV",{class:!0});var ue=E(x);z=k(ue,"DIV",{class:!0});var rt=E(z);$=k(rt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve($)!=="svelte-fzobrz"&&($.textContent=me),W=U(rt),J=k(rt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(J)!=="svelte-1v9dhxr"&&(J.textContent=K),rt.forEach(p),re=U(ue),de=k(ue,"DIV",{class:!0});var nt=E(de);G=k(nt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(G)!=="svelte-8b36t"&&(G.textContent=he),_e=U(nt),se=k(nt,"BUTTON",{type:!0,class:!0});var Ue=E(se);fe=P(Ue,ne),Ue.forEach(p),nt.forEach(p),ue.forEach(p),V.forEach(p),this.h()},h(){m(i,"class","w-16 h-16 rounded-lg flex justify-center overflow-hidden bg-surface-500/25"),m(s,"class",""),ce(s.src,u=JSON.parse(n[1][0].value.metadata.content).banner)||m(s,"src",u),m(s,"alt",""),m(r,"class","grid grid-cols-[auto_1fr] gap-2 max-w-md"),m(d,"class","font-bold"),m(v,"class","break-all whitespace-pre-wrap text-sm max-h-32 overflow-auto"),m(f,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(T,"class","font-bold"),m(C,"class","break-all whitespace-pre-wrap text-sm max-h-24 overflow-auto"),m(D,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(t,"class","grid grid-row-[auto_auto_auto] gap-1 max-w-md"),m($,"type","button"),m($,"class","btn variant-filled-secondary p-1"),m(J,"type","button"),m(J,"class","btn variant-filled-secondary p-1"),m(z,"class","grid grid-row-[auto_auto] gap-2"),m(G,"type","button"),m(G,"class","btn variant-filled-surface p-2"),m(se,"type","button"),m(se,"class","btn variant-filled-surface p-2"),m(de,"class","grid grid-row-[auto_auto] gap-2"),m(x,"class","grid grid-cols-[auto_auto] gap-2"),m(e,"class","modal-example-form "+Xu+" svelte-1wtdwek")},m(je,V){I(je,e,V),y(e,t),y(t,r),y(r,i),ve&&ve.m(i,null),y(r,a),y(r,l),y(l,s),y(t,c),y(t,f),y(f,d),y(f,_),y(f,v),y(v,w),y(t,S),y(t,D),y(D,T),y(D,O),y(D,C),y(C,M),y(e,Q),y(e,x),y(x,z),y(z,$),y(z,W),y(z,J),y(x,re),y(x,de),y(de,G),y(de,_e),y(de,se),y(se,fe),pe||(Te=[Y($,"click",n[3]),Y(J,"click",n[4]),Y(G,"click",n[5]),Y(se,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],pe=!0)},p(je,V){n=je,V&2&&(o=JSON.parse(n[1][0].value.metadata.content).picture),o?ve?ve.p(n,V):(ve=Ji(n),ve.c(),ve.m(i,null)):ve&&(ve.d(1),ve=null),V&2&&!ce(s.src,u=JSON.parse(n[1][0].value.metadata.content).banner)&&m(s,"src",u),V&2&&b!==(b=JSON.parse(n[1][0].value.metadata.content).about+"")&&N(w,b),V&2&&R!==(R=JSON.stringify(n[1][0].value.metadata,void 0,4)+"")&&N(M,R),V&1&&ne!==(ne=n[0].buttonTextCancel+"")&&N(fe,ne)},d(je){je&&p(e),ve&&ve.d(),pe=!1,Qe(Te)}}}function Ji(n){let e,t,r={ctx:n,current:null,token:null,hasCatch:!1,pending:Wu,then:zu,catch:Ju,value:6};return $e(t=Ki(JSON.parse(n[1][0].value.metadata.content).picture),r),{c(){e=Z(),r.block.c()},l(i){e=Z(),r.block.l(i)},m(i,o){I(i,e,o),r.block.m(i,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e},p(i,o){n=i,r.ctx=n,o&2&&t!==(t=Ki(JSON.parse(n[1][0].value.metadata.content).picture))&&$e(t,r)||pr(r,n,o)},d(i){i&&p(e),r.block.d(i),r.token=null,r=null}}}function Ju(n){return{c:H,l:H,m:H,p:H,d:H}}function zu(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","w-16 object-contain justify-center"),ce(e.src,t=n[6])||m(e,"src",t),m(e,"alt","avatar")},m(r,i){I(r,e,i)},p(r,i){i&2&&!ce(e.src,t=r[6])&&m(e,"src",t)},d(r){r&&p(e)}}}function Wu(n){return{c:H,l:H,m:H,p:H,d:H}}function Yu(n){let e,t=n[1][0]&&Gi(n);return{c(){t&&t.c(),e=Z()},l(r){t&&t.l(r),e=Z()},m(r,i){t&&t.m(r,i),I(r,e,i)},p(r,[i]){r[1][0]?t?t.p(r,i):(t=Gi(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(r){r&&p(e),t&&t.d(r)}}}const Xu="card p-4  shadow-xl space-y-4 break-all";function Zu(n,e,t){let r;Fe(n,qe,u=>t(1,r=u));let{parent:i}=e;function o(u){var f,d;const c=u==="npub"?X.npubEncode((f=r[0])==null?void 0:f.value.pubkey):(d=r[0])==null?void 0:d.value.pubkey;navigator.clipboard.writeText(c).then(()=>{console.log(`copied: ${c.slice(0,15)}...`);const h={message:`copied: ${c.slice(0,15)}...`,timeout:3e3};or.trigger(h)},()=>{console.log("");const h={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};or.trigger(h)}),i.onClose()}const a=()=>o("npub"),l=()=>o("hex"),s=()=>{var u;window.open("https://nostr.com/"+X.npubEncode((u=r[0])==null?void 0:u.value.pubkey),"_blank"),i.onClose()};return n.$$set=u=>{"parent"in u&&t(0,i=u.parent)},[i,r,o,a,l,s]}class ln extends De{constructor(e){super(),Re(this,e,Zu,Yu,Pe,{parent:0})}}function zi(n){let e,t,r=(n[1][0].title??"(title missing)")+"",i,o,a,l=JSON.stringify(n[1][0].value.note,void 0,4)+"",s,u,c,f,d,h="copy noteID",_,v,b="copy hexID",w,S,D=n[0].buttonTextCancel+"",T,j,O,C;return{c(){e=g("div"),t=g("header"),i=q(r),o=F(),a=g("div"),s=q(l),u=F(),c=g("footer"),f=g("div"),d=g("button"),d.textContent=h,_=F(),v=g("button"),v.textContent=b,w=F(),S=g("button"),T=q(D),this.h()},l(R){e=k(R,"DIV",{class:!0});var M=E(e);t=k(M,"HEADER",{class:!0});var Q=E(t);i=P(Q,r),Q.forEach(p),o=U(M),a=k(M,"DIV",{class:!0});var x=E(a);s=P(x,l),x.forEach(p),u=U(M),c=k(M,"FOOTER",{class:!0});var z=E(c);f=k(z,"DIV",{class:!0});var $=E(f);d=k($,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(d)!=="svelte-68nxdb"&&(d.textContent=h),_=U($),v=k($,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Ve(v)!=="svelte-h01fpj"&&(v.textContent=b),w=U($),S=k($,"BUTTON",{type:!0,class:!0});var me=E(S);T=P(me,D),me.forEach(p),$.forEach(p),z.forEach(p),M.forEach(p),this.h()},h(){m(t,"class",ec),m(a,"class","bg-surface-50-900-token break-words whitespace-pre-wrap max-h-60 overflow-auto"),m(d,"type","button"),m(d,"class","btn variant-filled-secondary p-1"),m(v,"type","button"),m(v,"class","btn variant-filled-secondary p-1"),m(S,"type","button"),m(S,"class","btn variant-filled-surface p-2"),m(f,"class","flex flex-wrap gap-2"),m(c,"class",j="modal-footer "+n[0].regionFooter),m(e,"class","modal-example-form "+$u+" bg-surface-200-700-token")},m(R,M){I(R,e,M),y(e,t),y(t,i),y(e,o),y(e,a),y(a,s),y(e,u),y(e,c),y(c,f),y(f,d),y(f,_),y(f,v),y(f,w),y(f,S),y(S,T),O||(C=[Y(d,"click",n[3]),Y(v,"click",n[4]),Y(S,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],O=!0)},p(R,M){n=R,M&2&&r!==(r=(n[1][0].title??"(title missing)")+"")&&N(i,r),M&2&&l!==(l=JSON.stringify(n[1][0].value.note,void 0,4)+"")&&N(s,l),M&1&&D!==(D=n[0].buttonTextCancel+"")&&N(T,D),M&1&&j!==(j="modal-footer "+n[0].regionFooter)&&m(c,"class",j)},d(R){R&&p(e),O=!1,Qe(C)}}}function xu(n){let e,t=n[1][0]&&zi(n);return{c(){t&&t.c(),e=Z()},l(r){t&&t.l(r),e=Z()},m(r,i){t&&t.m(r,i),I(r,e,i)},p(r,[i]){r[1][0]?t?t.p(r,i):(t=zi(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(r){r&&p(e),t&&t.d(r)}}}const $u="card p-4  shadow-xl space-y-4 break-all",ec="text-2xl font-bold";function tc(n,e,t){let r;Fe(n,qe,s=>t(1,r=s));let{parent:i}=e;function o(s){var c,f;const u=s==="note"?X.noteEncode((c=r[0])==null?void 0:c.value.note.id):(f=r[0])==null?void 0:f.value.note.id;navigator.clipboard.writeText(u).then(()=>{console.log(`copied: ${u.slice(0,15)}...`);const d={message:`copied: ${u.slice(0,15)}...`,timeout:3e3};or.trigger(d)},()=>{console.log("");const d={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};or.trigger(d)}),i.onClose()}const a=()=>o("note"),l=()=>o("hex");return n.$$set=s=>{"parent"in s&&t(0,i=s.parent)},[i,r,o,a,l]}class _a extends De{constructor(e){super(),Re(this,e,tc,xu,Pe,{parent:0})}}function Wi(n){let e,t,r=(n[4][0].title??"(title missing)")+"",i,o,a,l=(n[4][0].body??"(body missing)")+"",s,u,c,f,d,h,_,v,b="kind:",w,S=n[3].kind+"",D,T,j,O,C="content:",R,M,Q,x=n[3].content+"",z,$,me,W,J="tags:",K,re,de,G=n[3].tags+"",he,_e,se,ne,fe,pe=n[0].buttonTextCancel+"",Te,ve,je,V,ge,Le,et,ct,tt,ke=n[3].pubkey!==""&&Yi(n),ye=n[2]&&Xi(n);return{c(){e=g("div"),t=g("header"),i=q(r),o=F(),a=g("article"),s=q(l),u=F(),c=g("label"),f=g("textarea"),d=F(),ke&&ke.c(),h=F(),_=g("div"),v=g("b"),v.textContent=b,w=F(),D=q(S),T=g("br"),j=F(),O=g("b"),O.textContent=C,R=g("br"),M=F(),Q=g("span"),z=q(x),$=g("br"),me=F(),W=g("b"),W.textContent=J,K=g("br"),re=F(),ye&&ye.c(),de=q("["),he=q(G),_e=q("]"),se=F(),ne=g("footer"),fe=g("button"),Te=q(pe),je=F(),V=g("button"),ge=q("Post Note"),this.h()},l(Ke){e=k(Ke,"DIV",{class:!0});var ue=E(e);t=k(ue,"HEADER",{class:!0});var rt=E(t);i=P(rt,r),rt.forEach(p),o=U(ue),a=k(ue,"ARTICLE",{class:!0});var nt=E(a);s=P(nt,l),nt.forEach(p),u=U(ue),c=k(ue,"LABEL",{class:!0});var Ue=E(c);f=k(Ue,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),E(f).forEach(p),d=U(Ue),ke&&ke.l(Ue),h=U(Ue),_=k(Ue,"DIV",{class:!0});var we=E(_);v=k(we,"B",{"data-svelte-h":!0}),Ve(v)!=="svelte-1f135qs"&&(v.textContent=b),w=U(we),D=P(we,S),T=k(we,"BR",{}),j=U(we),O=k(we,"B",{"data-svelte-h":!0}),Ve(O)!=="svelte-tjjtbf"&&(O.textContent=C),R=k(we,"BR",{}),M=U(we),Q=k(we,"SPAN",{class:!0});var un=E(Q);z=P(un,x),un.forEach(p),$=k(we,"BR",{}),me=U(we),W=k(we,"B",{"data-svelte-h":!0}),Ve(W)!=="svelte-1e2ec1x"&&(W.textContent=J),K=k(we,"BR",{}),re=U(we),ye&&ye.l(we),de=P(we,"["),he=P(we,G),_e=P(we,"]"),we.forEach(p),se=U(Ue),ne=k(Ue,"FOOTER",{class:!0});var Jt=E(ne);fe=k(Jt,"BUTTON",{class:!0});var cn=E(fe);Te=P(cn,pe),cn.forEach(p),je=U(Jt),V=k(Jt,"BUTTON",{class:!0});var fn=E(V);ge=P(fn,"Post Note"),fn.forEach(p),Jt.forEach(p),Ue.forEach(p),ue.forEach(p),this.h()},h(){m(t,"class",ic),m(a,"class","body"),m(f,"class","textarea"),m(f,"rows","5"),m(f,"placeholder",""),m(Q,"class","whitespace-pre-wrap"),m(_,"class","break-all text-sm"),m(fe,"class",ve="btn "+n[0].buttonNeutral),m(V,"class",Le="btn "+n[0].buttonPositive),m(ne,"class",et="modal-footer "+n[0].regionFooter),m(c,"class","label break-all whitespace-pre-wrap"),m(e,"class","modal-example-form "+nc)},m(Ke,ue){I(Ke,e,ue),y(e,t),y(t,i),y(e,o),y(e,a),y(a,s),y(e,u),y(e,c),y(c,f),nr(f,n[1].content),y(c,d),ke&&ke.m(c,null),y(c,h),y(c,_),y(_,v),y(_,w),y(_,D),y(_,T),y(_,j),y(_,O),y(_,R),y(_,M),y(_,Q),y(Q,z),y(_,$),y(_,me),y(_,W),y(_,K),y(_,re),ye&&ye.m(_,null),y(_,de),y(_,he),y(_,_e),y(c,se),y(c,ne),y(ne,fe),y(fe,Te),y(ne,je),y(ne,V),y(V,ge),ct||(tt=[Y(f,"input",n[6]),Y(fe,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)}),Y(V,"click",n[5])],ct=!0)},p(Ke,ue){n=Ke,ue&16&&r!==(r=(n[4][0].title??"(title missing)")+"")&&N(i,r),ue&16&&l!==(l=(n[4][0].body??"(body missing)")+"")&&N(s,l),ue&2&&nr(f,n[1].content),n[3].pubkey!==""?ke?ke.p(n,ue):(ke=Yi(n),ke.c(),ke.m(c,h)):ke&&(ke.d(1),ke=null),ue&8&&S!==(S=n[3].kind+"")&&N(D,S),ue&8&&x!==(x=n[3].content+"")&&N(z,x),n[2]?ye?ye.p(n,ue):(ye=Xi(n),ye.c(),ye.m(_,de)):ye&&(ye.d(1),ye=null),ue&8&&G!==(G=n[3].tags+"")&&N(he,G),ue&1&&pe!==(pe=n[0].buttonTextCancel+"")&&N(Te,pe),ue&1&&ve!==(ve="btn "+n[0].buttonNeutral)&&m(fe,"class",ve),ue&1&&Le!==(Le="btn "+n[0].buttonPositive)&&m(V,"class",Le),ue&1&&et!==(et="modal-footer "+n[0].regionFooter)&&m(ne,"class",et)},d(Ke){Ke&&p(e),ke&&ke.d(),ye&&ye.d(),ct=!1,Qe(tt)}}}function Yi(n){let e,t,r,i,o="p",a,l;return{c(){e=g("label"),t=g("input"),r=F(),i=g("p"),i.textContent=o,this.h()},l(s){e=k(s,"LABEL",{class:!0});var u=E(e);t=k(u,"INPUT",{class:!0,type:!0}),r=U(u),i=k(u,"P",{"data-svelte-h":!0}),Ve(i)!=="svelte-110efq0"&&(i.textContent=o),u.forEach(p),this.h()},h(){m(t,"class","checkbox"),m(t,"type","checkbox"),m(e,"class","flex items-center space-x-2")},m(s,u){I(s,e,u),y(e,t),t.checked=n[2],y(e,r),y(e,i),a||(l=Y(t,"change",n[7]),a=!0)},p(s,u){u&4&&(t.checked=s[2])},d(s){s&&p(e),a=!1,l()}}}function Xi(n){let e,t=n[3].pubkey+"",r,i,o,a;return{c(){e=q("[p,"),r=q(t),i=q(",,mention],"),o=g("br"),a=F()},l(l){e=P(l,"[p,"),r=P(l,t),i=P(l,",,mention],"),o=k(l,"BR",{}),a=U(l)},m(l,s){I(l,e,s),I(l,r,s),I(l,i,s),I(l,o,s),I(l,a,s)},p(l,s){s&8&&t!==(t=l[3].pubkey+"")&&N(r,t)},d(l){l&&(p(e),p(r),p(i),p(o),p(a))}}}function rc(n){let e,t=n[4][0]&&Wi(n);return{c(){t&&t.c(),e=Z()},l(r){t&&t.l(r),e=Z()},m(r,i){t&&t.m(r,i),I(r,e,i)},p(r,[i]){r[4][0]?t?t.p(r,i):(t=Wi(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(r){r&&p(e),t&&t.d(r)}}}const nc="card p-4 w-modal shadow-xl space-y-4",ic="text-2xl font-bold";function oc(n,e,t){let r;Fe(n,qe,f=>t(4,r=f));let{parent:i}=e,o,a={pubkey:r[0].value.pubkey?r[0].value.pubkey:"",kind:1,tags:r[0].value.tags,content:r[0].value.content},l={content:r[0].value.content,tags:r[0].value.tags};function s(){l.content===void 0&&t(1,l.content="",l),t(1,l.content=l.content.trim(),l),o&&t(1,l.tags=[["p",a.pubkey,"","mention"],...a.tags],l),r[0].response&&r[0].response(l),qe.close()}function u(){l.content=this.value,t(1,l)}function c(){o=this.checked,t(2,o)}return n.$$set=f=>{"parent"in f&&t(0,i=f.parent)},n.$$.update=()=>{n.$$.dirty&2&&t(3,a.content=l.content,a)},[i,l,o,a,r,s,u,c]}class Fd extends De{constructor(e){super(),Re(this,e,oc,rc,Pe,{parent:0})}}const Zi=/(:[^:\s]+:)/,xi=/(https?:\/\/+[^\s"'<`\]\)]+[^\s"'<`:\].\)]+)/,$i=/\.(?:jpg|jpeg|png|gif|webp)$/i,eo=/(\r\n|\n|\r)/,to=/(nostr:[A-Za-z0-9]+)/,ro=/(#\[\d+\])/i;async function ac(n,e){var l;const t=e.filter(s=>s[0]==="emoji");let r=[];t.length>0&&r.push(Zi.source),r.push(to.source),r.push(xi.source),r.push($i.source),r.push(eo.source),r.push(ro.source);const i=new RegExp(r.join("|"),"g"),o=n.split(i||" "),a=[];for(let s of o)if(s!==void 0)if(s.match(to)){const u=s.indexOf("nostr:"),c=s.slice(0,u),f=s.slice(u);a.push({content:c,type:"text"}),a.push({content:f,type:"nostr",url:f.slice(6)})}else if(t.length>0&&s.match(Zi)){const u=(l=t.find(c=>`:${c[1]}:`===s))==null?void 0:l[2];u?a.push({content:s,type:"emoji",url:u}):a.push({content:s,type:"text"})}else sc(s)?s.match(xi)?s.match($i)?a.push({content:s,type:"image"}):a.push({content:s,type:"url"}):a.push({content:s,type:"url"}):s.match(eo)?a.push({content:"Newline",type:"newline"}):s.match(ro)?a.push({content:s,type:"quote",number:parseInt(s.slice(2,-1))}):a.push({content:s,type:"text"});return console.log(a),a}function sc(n){const e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;try{return new URL(n),e.test(n)}catch{return!1}}function no(n){let e,t,r,i,o,a,l=n[0].buttonTextCancel+"",s,u,c,f,d;return{c(){e=g("div"),t=g("img"),i=F(),o=g("footer"),a=g("button"),s=q(l),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=E(e);t=k(_,"IMG",{src:!0,alt:!0,class:!0}),i=U(_),o=k(_,"FOOTER",{class:!0});var v=E(o);a=k(v,"BUTTON",{class:!0});var b=E(a);s=P(b,l),b.forEach(p),v.forEach(p),_.forEach(p),this.h()},h(){var h;ce(t.src,r=(h=n[1][0])==null?void 0:h.image)||m(t,"src",r),m(t,"alt",""),m(t,"class","svelte-1scgpoe"),m(a,"class",u="btn "+n[0].buttonNeutral),m(o,"class",c="modal-footer "+n[0].regionFooter),m(e,"class","modal-example-form "+uc)},m(h,_){I(h,e,_),y(e,t),y(e,i),y(e,o),y(o,a),y(a,s),f||(d=[Y(t,"click",n[2]),Y(a,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],f=!0)},p(h,_){var v;n=h,_&2&&!ce(t.src,r=(v=n[1][0])==null?void 0:v.image)&&m(t,"src",r),_&1&&l!==(l=n[0].buttonTextCancel+"")&&N(s,l),_&1&&u!==(u="btn "+n[0].buttonNeutral)&&m(a,"class",u),_&1&&c!==(c="modal-footer "+n[0].regionFooter)&&m(o,"class",c)},d(h){h&&p(e),f=!1,Qe(d)}}}function lc(n){let e,t=n[1][0]&&no(n);return{c(){t&&t.c(),e=Z()},l(r){t&&t.l(r),e=Z()},m(r,i){t&&t.m(r,i),I(r,e,i)},p(r,[i]){r[1][0]?t?t.p(r,i):(t=no(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(r){r&&p(e),t&&t.d(r)}}}const uc="card p-4  shadow-xl space-y-4 break-all";function cc(n,e,t){let r;Fe(n,qe,a=>t(1,r=a));let{parent:i}=e;function o(){var a;window.open((a=r[0])==null?void 0:a.image,"_blank")}return n.$$set=a=>{"parent"in a&&t(0,i=a.parent)},[i,r,o]}class fc extends De{constructor(e){super(),Re(this,e,cc,lc,Pe,{parent:0})}}function io(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain object-contain max-h-[6rem]"),ce(e.src,t=n[0].image)||m(e,"src",t),m(e,"alt","")},m(r,i){I(r,e,i)},p(r,i){i&1&&!ce(e.src,t=r[0].image)&&m(e,"src",t)},d(r){r&&p(e)}}}function oo(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain w-5 pl-0.5 pr-0.5"),ce(e.src,t=n[0].favicon)||m(e,"src",t),m(e,"alt","")},m(r,i){I(r,e,i)},p(r,i){i&1&&!ce(e.src,t=r[0].favicon)&&m(e,"src",t)},d(r){r&&p(e)}}}function dc(n){let e,t,r,i,o,a,l,s,u=n[0].title+"",c,f,d,h=n[0].description+"",_,v,b,w,S,D=new URL(n[1]).hostname+"",T,j=n[0].image&&io(n),O=n[0].favicon!==""&&oo(n);return{c(){e=g("div"),t=g("a"),r=g("div"),i=g("div"),o=g("div"),j&&j.c(),a=F(),l=g("div"),s=g("div"),c=q(u),f=F(),d=g("div"),_=q(h),v=F(),b=g("div"),O&&O.c(),w=F(),S=g("div"),T=q(D),this.h()},l(C){e=k(C,"DIV",{class:!0});var R=E(e);t=k(R,"A",{class:!0,href:!0,target:!0});var M=E(t);r=k(M,"DIV",{class:!0});var Q=E(r);i=k(Q,"DIV",{class:!0});var x=E(i);o=k(x,"DIV",{class:!0});var z=E(o);j&&j.l(z),z.forEach(p),a=U(x),l=k(x,"DIV",{class:!0});var $=E(l);s=k($,"DIV",{class:!0});var me=E(s);c=P(me,u),me.forEach(p),f=U($),d=k($,"DIV",{class:!0});var W=E(d);_=P(W,h),W.forEach(p),$.forEach(p),x.forEach(p),v=U(Q),b=k(Q,"DIV",{class:!0});var J=E(b);O&&O.l(J),w=U(J),S=k(J,"DIV",{class:!0});var K=E(S);T=P(K,D),K.forEach(p),J.forEach(p),Q.forEach(p),M.forEach(p),R.forEach(p),this.h()},h(){m(o,"class","overflow-hidden relative rounded-xl max-h-[6rem]"),m(s,"class","line-clamp-2 text-sm font-bold text-primary-800 underline decoration-primary-600"),m(d,"class","line-clamp-4 text-xs text-primary-500"),m(l,"class","p-0.5 grid grid-rows-[auto_1fr] z-10 min-w-[12em]"),m(i,"class","grid grid-cols-[auto_1fr] gap-0.5"),m(S,"class","text-xs text-purple-900/50"),m(b,"class","flex flex-row-reverse ... -my-1"),m(r,"class","grid grid-rows-[auto_1fr]"),m(t,"class",""),m(t,"href",n[1]),m(t,"target","_blank"),m(e,"class","drop-shadow-md rounded-2xl m-0 p-1 border-2 border-primary-500 hover:drop-shadow-xl z-20 break-all bg-primary-200")},m(C,R){I(C,e,R),y(e,t),y(t,r),y(r,i),y(i,o),j&&j.m(o,null),y(i,a),y(i,l),y(l,s),y(s,c),y(l,f),y(l,d),y(d,_),y(r,v),y(r,b),O&&O.m(b,null),y(b,w),y(b,S),y(S,T)},p(C,[R]){C[0].image?j?j.p(C,R):(j=io(C),j.c(),j.m(o,null)):j&&(j.d(1),j=null),R&1&&u!==(u=C[0].title+"")&&N(c,u),R&1&&h!==(h=C[0].description+"")&&N(_,h),C[0].favicon!==""?O?O.p(C,R):(O=oo(C),O.c(),O.m(b,w)):O&&(O.d(1),O=null),R&2&&D!==(D=new URL(C[1]).hostname+"")&&N(T,D),R&2&&m(t,"href",C[1])},i:H,o:H,d(C){C&&p(e),j&&j.d(),O&&O.d()}}}function hc(n,e,t){let{ogp:r}=e,{url:i}=e;return n.$$set=o=>{"ogp"in o&&t(0,r=o.ogp),"url"in o&&t(1,i=o.url)},[r,i]}class _c extends De{constructor(e){super(),Re(this,e,hc,dc,Pe,{ogp:0,url:1})}}function ao(n,e,t){const r=n.slice();return r[22]=e[t],r}function so(n,e,t){const r=n.slice();return r[22]=e[t],r}function pc(n){let e,t,r,i,o;t=new Je({props:{queryKey:["metadata",X.decode(n[0]).data.pubkey],pubkey:X.decode(n[0]).data.pubkey,$$slots:{nodata:[wc],error:[kc],loading:[gc],default:[bc,({metadata:l})=>({21:l}),({metadata:l})=>l?2097152:0]},$$scope:{ctx:n}}});let a={ctx:n,current:null,token:null,hasCatch:!1,pending:Dc,then:Oc,catch:Ec,value:20,blocks:[,,,]};return $e(i=n[4](n[0]),a),{c(){e=g("div"),ie(t.$$.fragment),r=F(),a.block.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var s=E(e);le(t.$$.fragment,s),r=U(s),a.block.l(s),s.forEach(p),this.h()},h(){m(e,"class","card border border-surface-400 px-3 py-2")},m(l,s){I(l,e,s),oe(t,e,null),y(e,r),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,o=!0},p(l,s){n=l;const u={};s&1&&(u.queryKey=["metadata",X.decode(n[0]).data.pubkey]),s&1&&(u.pubkey=X.decode(n[0]).data.pubkey),s&136314881&&(u.$$scope={dirty:s,ctx:n}),t.$set(u),a.ctx=n,s&1&&i!==(i=n[4](n[0]))&&$e(i,a)||pr(a,n,s)},i(l){o||(A(t.$$.fragment,l),A(a.block),o=!0)},o(l){L(t.$$.fragment,l);for(let s=0;s<3;s+=1){const u=a.blocks[s];L(u)}o=!1},d(l){l&&p(e),ae(t),a.block.d(),a.token=null,a=null}}}function vc(n){let e,t;return e=new Je({props:{queryKey:["metadata",X.decode(n[0]).data.pubkey],pubkey:X.decode(n[0]).data.pubkey,$$slots:{nodata:[Mc],error:[Ac],loading:[Tc],default:[Rc,({metadata:r})=>({21:r}),({metadata:r})=>r?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.queryKey=["metadata",X.decode(r[0]).data.pubkey]),i&1&&(o.pubkey=X.decode(r[0]).data.pubkey),i&136314881&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function mc(n){let e,t;return e=new Je({props:{queryKey:["metadata",X.decode(n[0]).data],pubkey:X.decode(n[0]).data,$$slots:{nodata:[Vc],error:[Nc],loading:[Lc],default:[jc,({metadata:r})=>({21:r}),({metadata:r})=>r?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.queryKey=["metadata",X.decode(r[0]).data]),i&1&&(o.pubkey=X.decode(r[0]).data),i&136314881&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function yc(n){let e,t,r,i;return r=new Kt({props:{queryKey:[X.decode(n[0]).type==="note"?X.decode(n[0]).data:X.decode(n[0]).data.id],id:X.decode(n[0]).type==="note"?X.decode(n[0]).data:X.decode(n[0]).data.id,$$slots:{nodata:[af],error:[of],loading:[nf],default:[rf,({text:o})=>({20:o}),({text:o})=>o?1048576:0]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=g("div"),ie(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);le(r.$$.fragment,l),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(o,a){I(o,e,a),y(e,t),oe(r,t,null),i=!0},p(o,a){const l={};a&1&&(l.queryKey=[X.decode(o[0]).type==="note"?X.decode(o[0]).data:X.decode(o[0]).data.id]),a&1&&(l.id=X.decode(o[0]).type==="note"?X.decode(o[0]).data:X.decode(o[0]).data.id),a&135266307&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){i||(A(r.$$.fragment,o),i=!0)},o(o){L(r.$$.fragment,o),i=!1},d(o){o&&p(e),ae(r)}}}function bc(n){let e,t,r,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[13](n[21])}return{c(){e=g("button"),t=q("@"),r=g("u"),o=q(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=E(e);t=P(c,"@"),r=k(c,"U",{});var f=E(r);o=P(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80")},m(u,c){I(u,e,c),y(e,t),y(e,r),y(r,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function gc(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function kc(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function wc(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function Ec(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function Oc(n){let e,t,r=n[20]&&lo(n);return{c(){r&&r.c(),e=Z()},l(i){r&&r.l(i),e=Z()},m(i,o){r&&r.m(i,o),I(i,e,o),t=!0},p(i,o){i[20]?r?(r.p(i,o),o&1&&A(r,1)):(r=lo(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ee(),L(r,1,1,()=>{r=null}),te())},i(i){t||(A(r),t=!0)},o(i){L(r),t=!1},d(i){i&&p(e),r&&r.d(i)}}}function lo(n){let e,t=new Date(n[20].created_at*1e3).toLocaleString()+"",r,i,o,a,l,s,u,c,f;function d(){return n[14](n[20])}let h=n[20].tags.length>0&&uo(n);return s=new ze({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("button"),r=q(t),i=F(),o=g("div"),h&&h.c(),a=F(),l=g("div"),ie(s.$$.fragment),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var v=E(e);r=P(v,t),v.forEach(p),i=U(_),o=k(_,"DIV",{class:!0});var b=E(o);h&&h.l(b),a=U(b),l=k(b,"DIV",{class:!0});var w=E(l);le(s.$$.fragment,w),w.forEach(p),b.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 ml-2 text-xs underline decoration-secondary-500"),m(l,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(o,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix")},m(_,v){I(_,e,v),y(e,r),I(_,i,v),I(_,o,v),h&&h.m(o,null),y(o,a),y(o,l),oe(s,l,null),u=!0,c||(f=Y(e,"click",d),c=!0)},p(_,v){n=_,(!u||v&1)&&t!==(t=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(r,t),n[20].tags.length>0?h?(h.p(n,v),v&1&&A(h,1)):(h=uo(n),h.c(),A(h,1),h.m(o,a)):h&&(ee(),L(h,1,1,()=>{h=null}),te());const b={};v&1&&(b.text=n[20].content),v&1&&(b.tag=n[20].tags),v&1&&(b.id=n[20].id),v&2&&(b.view=n[1]),s.$set(b)},i(_){u||(A(h),A(s.$$.fragment,_),u=!0)},o(_){L(h),L(s.$$.fragment,_),u=!1},d(_){_&&(p(e),p(i),p(o)),h&&h.d(),ae(s),c=!1,f()}}}function uo(n){let e,t,r=Ze(n[20].tags),i=[];for(let a=0;a<r.length;a+=1)i[a]=co(ao(n,r,a));const o=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);t=!0},p(a,l){if(l&3145757){r=Ze(a[20].tags);let s;for(s=0;s<r.length;s+=1){const u=ao(a,r,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=co(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(ee(),s=r.length;s<i.length;s+=1)o(s);te()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)A(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(a){a&&p(e),_r(i,a)}}}function Sc(n){let e,t,r=n[22][0]+"",i,o,a=n[22][1]+"",l,s;return{c(){e=g("div"),t=q("["),i=q(r),o=q(`]
                    `),l=q(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=E(e);t=P(c,"["),i=P(c,r),o=P(c,`]
                    `),l=P(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden")},m(u,c){I(u,e,c),y(e,t),y(e,i),y(e,o),y(e,l),y(e,s)},p(u,c){c&1&&r!==(r=u[22][0]+"")&&N(i,r),c&1&&a!==(a=u[22][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function Ic(n){let e,t;return e=new Kt({props:{queryKey:[n[22][1]],id:n[22][1],$$slots:{default:[qc,({text:r})=>({20:r}),({text:r})=>r?1048576:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.queryKey=[r[22][1]]),i&1&&(o.id=r[22][1]),i&135266304&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Cc(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[22][1]],pubkey:n[22][1],$$slots:{default:[Pc,({metadata:r})=>({21:r}),({metadata:r})=>r?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.queryKey=["metadata",r[22][1]]),i&1&&(o.pubkey=r[22][1]),i&136314881&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function qc(n){let e,t,r,i=n[20].content+"",o,a,l,s;function u(){return n[16](n[20])}return{c(){e=g("div"),t=q("[e] "),r=g("button"),o=q(i),a=F(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=E(e);t=P(f,"[e] "),r=k(f,"BUTTON",{class:!0});var d=E(r);o=P(d,i),d.forEach(p),f.forEach(p),a=U(c),this.h()},h(){m(r,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(c,f){I(c,e,f),y(e,t),y(e,r),y(r,o),I(c,a,f),l||(s=Y(r,"click",u),l=!0)},p(c,f){n=c,f&1048576&&i!==(i=n[20].content+"")&&N(o,i)},d(c){c&&(p(e),p(a)),l=!1,s()}}}function Pc(n){let e,t,r,i,o,a=JSON.parse(n[21].content).name+"",l,s,u,c;function f(){return n[15](n[21],n[22])}return{c(){e=g("div"),t=q("to "),r=g("button"),i=q("@"),o=g("u"),l=q(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=E(e);t=P(h,"to "),r=k(h,"BUTTON",{class:!0});var _=E(r);i=P(_,"@"),o=k(_,"U",{});var v=E(o);l=P(v,a),v.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(r,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),y(e,t),y(e,r),y(r,i),y(r,o),y(o,l),I(d,s,h),u||(c=Y(r,"click",f),u=!0)},p(d,h){n=d,h&2097152&&a!==(a=JSON.parse(n[21].content).name+"")&&N(l,a)},d(d){d&&(p(e),p(s)),u=!1,c()}}}function co(n){let e,t,r,i;const o=[Cc,Ic,Sc],a=[];function l(s,u){return s[22][0]==="p"?0:s[22][0]==="e"||s[22][0]==="q"?1:s[22][0]!=="emoji"&&s[22][0]!=="r"&&s[22][0]!=="t"?2:-1}return~(e=l(n))&&(t=a[e]=o[e](n)),{c(){t&&t.c(),r=Z()},l(s){t&&t.l(s),r=Z()},m(s,u){~e&&a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?~e&&a[e].p(s,u):(t&&(ee(),L(a[c],1,1,()=>{a[c]=null}),te()),~e?(t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r)):t=null)},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),~e&&a[e].d(s)}}}function Dc(n){let e,t;return{c(){e=g("div"),t=q(n[0]),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=E(e);t=P(i,n[0]),i.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(r,i){I(r,e,i),y(e,t)},p(r,i){i&1&&N(t,r[0])},i:H,o:H,d(r){r&&p(e)}}}function Rc(n){let e,t,r,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[12](n[21])}return{c(){e=g("button"),t=q("@"),r=g("u"),o=q(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=E(e);t=P(c,"@"),r=k(c,"U",{});var f=E(r);o=P(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80")},m(u,c){I(u,e,c),y(e,t),y(e,r),y(r,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function Tc(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function Ac(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function Mc(n){let e,t,r=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data.pubkey+"")&&N(i,r)},d(o){o&&p(e)}}}function jc(n){let e,t,r,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[11](n[21])}return{c(){e=g("button"),t=q("@"),r=g("u"),o=q(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=E(e);t=P(c,"@"),r=k(c,"U",{});var f=E(r);o=P(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-sm text-black/80")},m(u,c){I(u,e,c),y(e,t),y(e,r),y(r,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function Lc(n){let e,t,r=X.decode(n[0]).data+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data+"")&&N(i,r)},d(o){o&&p(e)}}}function Nc(n){let e,t,r=X.decode(n[0]).data+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data+"")&&N(i,r)},d(o){o&&p(e)}}}function Vc(n){let e,t,r=X.decode(n[0]).data+"",i;return{c(){e=g("div"),t=g("div"),i=q(r),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);i=P(l,r),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),y(e,t),y(t,i)},p(o,a){a&1&&r!==(r=X.decode(o[0]).data+"")&&N(i,r)},d(o){o&&p(e)}}}function fo(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),ce(e.src,t=JSON.parse(n[21].content).picture)||m(e,"src",t),m(e,"alt","avatar")},m(r,i){I(r,e,i)},p(r,i){i&2097152&&!ce(e.src,t=JSON.parse(r[21].content).picture)&&m(e,"src",t)},d(r){r&&p(e)}}}function ho(n){let e,t,r=Ze(xe(n[20].tags)),i=[];for(let a=0;a<r.length;a+=1)i[a]=_o(so(n,r,a));const o=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);t=!0},p(a,l){if(l&3145742){r=Ze(xe(a[20].tags));let s;for(s=0;s<r.length;s+=1){const u=so(a,r,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=_o(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(ee(),s=r.length;s<i.length;s+=1)o(s);te()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)A(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(a){a&&p(e),_r(i,a)}}}function Fc(n){let e,t,r=n[22][0]+"",i,o,a=n[22][1]+"",l,s;return{c(){e=g("div"),t=q("["),i=q(r),o=q(`]
                    `),l=q(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=E(e);t=P(c,"["),i=P(c,r),o=P(c,`]
                    `),l=P(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){I(u,e,c),y(e,t),y(e,i),y(e,o),y(e,l),y(e,s)},p(u,c){c&1048576&&r!==(r=u[22][0]+"")&&N(i,r),c&1048576&&a!==(a=u[22][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function Uc(n){let e,t;return e=new Kt({props:{queryKey:[n[22][1]],id:n[22][1],$$slots:{nodata:[zc],error:[Jc],loading:[Gc],default:[Kc,({text:r})=>({20:r}),({text:r})=>r?1048576:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1048576&&(o.queryKey=[r[22][1]]),i&1048576&&(o.id=r[22][1]),i&135266306&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Bc(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[22][1]],pubkey:n[22][1],$$slots:{nodata:[Zc],error:[Xc],loading:[Yc],default:[Wc,({metadata:r})=>({21:r}),({metadata:r})=>r?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1048576&&(o.queryKey=["metadata",r[22][1]]),i&1048576&&(o.pubkey=r[22][1]),i&137363456&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Hc(n){let e=n[20].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&1048576&&e!==(e=r[20].content+"")&&N(t,e)},d(r){r&&p(t)}}}function Qc(n){let e="<content-warning>",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p:H,d(r){r&&p(t)}}}function Kc(n){let e,t,r=n[22][0]+"",i,o,a,l,s,u,c;function f(v,b){return b&1048578&&(l=null),l==null&&(l=!!(v[20].tags.some(lf)&&v[1]==!1)),l?Qc:Hc}let d=f(n,-1),h=d(n);function _(){return n[10](n[20])}return{c(){e=g("div"),t=q("["),i=q(r),o=q(`]
                      `),a=g("button"),h.c(),s=F(),this.h()},l(v){e=k(v,"DIV",{class:!0});var b=E(e);t=P(b,"["),i=P(b,r),o=P(b,`]
                      `),a=k(b,"BUTTON",{class:!0});var w=E(a);h.l(w),w.forEach(p),b.forEach(p),s=U(v),this.h()},h(){m(a,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(v,b){I(v,e,b),y(e,t),y(e,i),y(e,o),y(e,a),h.m(a,null),I(v,s,b),u||(c=Y(a,"click",_),u=!0)},p(v,b){n=v,b&1048576&&r!==(r=n[22][0]+"")&&N(i,r),d===(d=f(n,b))&&h?h.p(n,b):(h.d(1),h=d(n),h&&(h.c(),h.m(a,null)))},d(v){v&&(p(e),p(s)),h.d(),u=!1,c()}}}function Gc(n){let e,t,r,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),t=g("div"),r=q("["),o=q(i),a=q("] "),s=q(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=E(e);t=k(f,"DIV",{class:!0});var d=E(t);r=P(d,"["),o=P(d,i),a=P(d,"] "),s=P(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(c,f){I(c,e,f),y(e,t),y(t,r),y(t,o),y(t,a),y(t,s),y(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function Jc(n){let e,t,r,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),t=g("div"),r=q("["),o=q(i),a=q("] "),s=q(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=E(e);t=k(f,"DIV",{class:!0});var d=E(t);r=P(d,"["),o=P(d,i),a=P(d,"] "),s=P(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(c,f){I(c,e,f),y(e,t),y(t,r),y(t,o),y(t,a),y(t,s),y(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function zc(n){let e,t,r,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),t=g("div"),r=q("["),o=q(i),a=q("] "),s=q(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=E(e);t=k(f,"DIV",{class:!0});var d=E(t);r=P(d,"["),o=P(d,i),a=P(d,"] "),s=P(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(c,f){I(c,e,f),y(e,t),y(t,r),y(t,o),y(t,a),y(t,s),y(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function Wc(n){let e,t,r,i,o,a=JSON.parse(n[21].content).name+"",l,s,u,c;function f(){return n[9](n[21],n[22])}return{c(){e=g("div"),t=q("to[p] "),r=g("button"),i=q("@"),o=g("u"),l=q(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=E(e);t=P(h,"to[p] "),r=k(h,"BUTTON",{class:!0});var _=E(r);i=P(_,"@"),o=k(_,"U",{});var v=E(o);l=P(v,a),v.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(r,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),y(e,t),y(e,r),y(r,i),y(r,o),y(o,l),I(d,s,h),u||(c=Y(r,"click",f),u=!0)},p(d,h){n=d,h&2097152&&a!==(a=JSON.parse(n[21].content).name+"")&&N(l,a)},d(d){d&&(p(e),p(s)),u=!1,c()}}}function Yc(n){let e,t,r,i=n[22][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function Xc(n){let e,t,r,i=n[22][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function Zc(n){let e,t,r,i=n[22][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function _o(n){let e,t,r,i;const o=[Bc,Uc,Fc],a=[];function l(s,u){return s[22][0]==="p"?0:s[22][0]==="e"||s[22][0]==="q"?1:2}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function xc(n){let e,t,r=JSON.parse(n[21].content).picture,i,o,a=JSON.parse(n[21].content).display_name+"",l,s,u,c,f,d,h=JSON.parse(n[21].content).name+"",_,v,b,w,S=new Date(n[20].created_at*1e3).toLocaleString()+"",D,T,j=n[20].tags&&xe(n[20].tags).length>0,O,C,R,M,Q,x,z=r&&fo(n);function $(){return n[7](n[21],n[20])}function me(){return n[8](n[20])}let W=j&&ho(n);return R=new ze({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),z&&z.c(),i=F(),o=g("div"),l=q(a),s=F(),u=g("div"),c=g("button"),f=q("@"),d=g("u"),_=q(h),v=F(),b=g("div"),w=g("button"),D=q(S),T=F(),W&&W.c(),O=F(),C=g("div"),ie(R.$$.fragment),this.h()},l(J){e=k(J,"DIV",{class:!0});var K=E(e);t=k(K,"DIV",{});var re=E(t);z&&z.l(re),re.forEach(p),i=U(K),o=k(K,"DIV",{class:!0});var de=E(o);l=P(de,a),de.forEach(p),s=U(K),u=k(K,"DIV",{class:!0});var G=E(u);c=k(G,"BUTTON",{class:!0});var he=E(c);f=P(he,"@"),d=k(he,"U",{});var _e=E(d);_=P(_e,h),_e.forEach(p),he.forEach(p),G.forEach(p),v=U(K),b=k(K,"DIV",{class:!0});var se=E(b);w=k(se,"BUTTON",{class:!0});var ne=E(w);D=P(ne,S),ne.forEach(p),se.forEach(p),K.forEach(p),T=U(J),W&&W.l(J),O=U(J),C=k(J,"DIV",{class:!0});var fe=E(C);le(R.$$.fragment,fe),fe.forEach(p),this.h()},h(){m(o,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(w,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(C,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(J,K){I(J,e,K),y(e,t),z&&z.m(t,null),y(e,i),y(e,o),y(o,l),y(e,s),y(e,u),y(u,c),y(c,f),y(c,d),y(d,_),y(e,v),y(e,b),y(b,w),y(w,D),I(J,T,K),W&&W.m(J,K),I(J,O,K),I(J,C,K),oe(R,C,null),M=!0,Q||(x=[Y(c,"click",$),Y(w,"click",me)],Q=!0)},p(J,K){n=J,K&2097152&&(r=JSON.parse(n[21].content).picture),r?z?z.p(n,K):(z=fo(n),z.c(),z.m(t,null)):z&&(z.d(1),z=null),(!M||K&2097152)&&a!==(a=JSON.parse(n[21].content).display_name+"")&&N(l,a),(!M||K&2097152)&&h!==(h=JSON.parse(n[21].content).name+"")&&N(_,h),(!M||K&1048576)&&S!==(S=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(D,S),K&1048576&&(j=n[20].tags&&xe(n[20].tags).length>0),j?W?(W.p(n,K),K&1048576&&A(W,1)):(W=ho(n),W.c(),A(W,1),W.m(O.parentNode,O)):W&&(ee(),L(W,1,1,()=>{W=null}),te());const re={};K&1048576&&(re.text=n[20].content),K&1048576&&(re.tag=n[20].tags),K&1048576&&(re.id=n[20].id),K&2&&(re.view=n[1]),R.$set(re)},i(J){M||(A(W),A(R.$$.fragment,J),M=!0)},o(J){L(W),L(R.$$.fragment,J),M=!1},d(J){J&&(p(e),p(T),p(O),p(C)),z&&z.d(),W&&W.d(J),ae(R),Q=!1,Qe(x)}}}function $c(n){let e,t,r=n[20].pubkey+"",i,o,a,l,s=new Date(n[20].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function v(){return n[6](n[20])}return f=new ze({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("div"),l=g("button"),u=q(s),c=F(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var w=E(e);t=k(w,"DIV",{class:!0});var S=E(t);i=P(S,r),S.forEach(p),o=U(w),a=k(w,"DIV",{class:!0});var D=E(a);l=k(D,"BUTTON",{class:!0});var T=E(l);u=P(T,s),T.forEach(p),c=U(D),le(f.$$.fragment,D),D.forEach(p),w.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(a,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,w){I(b,e,w),y(e,t),y(t,i),y(e,o),y(e,a),y(a,l),y(l,u),y(a,c),oe(f,a,null),d=!0,h||(_=Y(l,"click",v),h=!0)},p(b,w){n=b,(!d||w&1048576)&&r!==(r=n[20].pubkey+"")&&N(i,r),(!d||w&1048576)&&s!==(s=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(u,s);const S={};w&1048576&&(S.text=n[20].content),w&1048576&&(S.tag=n[20].tags),w&1048576&&(S.id=n[20].id),w&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){L(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function ef(n){let e,t,r=n[20].pubkey+"",i,o,a,l=new Date(n[20].created_at*1e3).toLocaleString()+"",s,u,c,f,d,h,_;function v(){return n[5](n[20])}return f=new ze({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("button"),s=q(l),u=F(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var w=E(e);t=k(w,"DIV",{class:!0});var S=E(t);i=P(S,r),o=U(S),a=k(S,"BUTTON",{class:!0});var D=E(a);s=P(D,l),D.forEach(p),S.forEach(p),u=U(w),c=k(w,"DIV",{class:!0});var T=E(c);le(f.$$.fragment,T),T.forEach(p),w.forEach(p),this.h()},h(){m(a,"class","text-xs underline decoration-secondary-500"),m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,w){I(b,e,w),y(e,t),y(t,i),y(t,o),y(t,a),y(a,s),y(e,u),y(e,c),oe(f,c,null),d=!0,h||(_=Y(a,"click",v),h=!0)},p(b,w){n=b,(!d||w&1048576)&&r!==(r=n[20].pubkey+"")&&N(i,r),(!d||w&1048576)&&l!==(l=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(s,l);const S={};w&1048576&&(S.text=n[20].content),w&1048576&&(S.tag=n[20].tags),w&1048576&&(S.id=n[20].id),w&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){L(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function tf(n){let e,t,r=n[20].pubkey+"",i,o,a,l,s;return l=new ze({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=E(e);t=k(c,"DIV",{class:!0});var f=E(t);i=P(f,r),f.forEach(p),o=U(c),a=k(c,"DIV",{class:!0});var d=E(a);le(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(a,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){I(u,e,c),y(e,t),y(t,i),y(e,o),y(e,a),oe(l,a,null),s=!0},p(u,c){(!s||c&1048576)&&r!==(r=u[20].pubkey+"")&&N(i,r);const f={};c&1048576&&(f.text=u[20].content),c&1048576&&(f.tag=u[20].tags),c&1048576&&(f.id=u[20].id),c&2&&(f.view=u[1]),l.$set(f)},i(u){s||(A(l.$$.fragment,u),s=!0)},o(u){L(l.$$.fragment,u),s=!1},d(u){u&&p(e),ae(l)}}}function rf(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[20].pubkey],pubkey:n[20].pubkey,$$slots:{nodata:[tf],error:[ef],loading:[$c],default:[xc,({metadata:r})=>({21:r}),({metadata:r})=>r?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&1048576&&(o.queryKey=["metadata",r[20].pubkey]),i&1048576&&(o.pubkey=r[20].pubkey),i&137363458&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function nf(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function of(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function af(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function sf(n){let e,t,r,i,o,a,l,s;const u=[yc,mc,vc,pc],c=[];function f(d,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(r=null),h&1&&(i=null),e==null&&(e=X.decode(d[0]).type==="note"||X.decode(d[0]).type==="nevent"),e?0:(t==null&&(t=X.decode(d[0]).type==="npub"),t?1:(r==null&&(r=X.decode(d[0]).type==="nprofile"),r?2:(i==null&&(i=X.decode(d[0]).type==="naddr"),i?3:-1)))}return~(o=f(n,-1))&&(a=c[o]=u[o](n)),{c(){a&&a.c(),l=Z()},l(d){a&&a.l(d),l=Z()},m(d,h){~o&&c[o].m(d,h),I(d,l,h),s=!0},p(d,[h]){let _=o;o=f(d,h),o===_?~o&&c[o].p(d,h):(a&&(ee(),L(c[_],1,1,()=>{c[_]=null}),te()),~o?(a=c[o],a?a.p(d,h):(a=c[o]=u[o](d),a.c()),A(a,1),a.m(l.parentNode,l)):a=null)},i(d){s||(A(a),s=!0)},o(d){L(a),s=!1},d(d){d&&p(l),~o&&c[o].d(d)}}}const lf=n=>n[0]==="content-warning";function uf(n,e,t){let r,i;Fe(n,pn,C=>t(17,r=C)),Fe(n,So,C=>t(1,i=C));let{encodedId:o}=e;const a={ref:ln,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function l(C,R){console.log(C);const M={type:"component",value:{metadata:C,pubkey:R},component:a};qe.trigger(M)}const s={ref:_a,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function u(C){console.log("click");const R={type:"component",title:"Event Json",value:{note:C},component:s};qe.trigger(R)}async function c(C){const R=X.decode(C).data;if(console.log(r),!(C in r)){const M=R.relays&&R.relays.length>0?R.relays:Pa,Q=[{authors:[R.pubkey],"#d":[R.identifier],kinds:[R.kind]}],x=await Da(M,Q);return x.length>0&&(x.sort((z,$)=>$.created_at-z.created_at),dt(pn,r[C]=x[0],r)),x[0]}return r[C]}const f=C=>{u(C)},d=C=>{u(C)},h=(C,R)=>{l(C,R.pubkey)},_=C=>{u(C)},v=(C,R)=>{l(C,R[1])},b=C=>{u(C)},w=C=>{l(C,X.decode(o).data)},S=C=>{l(C,X.decode(o).data.pubkey)},D=C=>{l(C,X.decode(o).data.pubkey)},T=C=>{u(C)},j=(C,R)=>{l(C,R[1])},O=C=>{u(C)};return n.$$set=C=>{"encodedId"in C&&t(0,o=C.encodedId)},[o,i,l,u,c,f,d,h,_,v,b,w,S,D,T,j,O]}class cf extends De{constructor(e){super(),Re(this,e,uf,sf,Pe,{encodedId:0})}}function po(n,e,t){const r=n.slice();return r[14]=e[t],r}function vo(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),ce(e.src,t=JSON.parse(n[13].content).picture)||m(e,"src",t),m(e,"alt","avatar")},m(r,i){I(r,e,i)},p(r,i){i&8192&&!ce(e.src,t=JSON.parse(r[13].content).picture)&&m(e,"src",t)},d(r){r&&p(e)}}}function mo(n){let e,t,r=Ze(xe(n[12].tags)),i=[];for(let a=0;a<r.length;a+=1)i[a]=yo(po(n,r,a));const o=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);t=!0},p(a,l){if(l&12302){r=Ze(xe(a[12].tags));let s;for(s=0;s<r.length;s+=1){const u=po(a,r,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=yo(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(ee(),s=r.length;s<i.length;s+=1)o(s);te()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)A(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(a){a&&p(e),_r(i,a)}}}function ff(n){let e,t,r=n[14][0]+"",i,o,a=n[14][1]+"",l,s;return{c(){e=g("div"),t=q("["),i=q(r),o=q(`]
                  `),l=q(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=E(e);t=P(c,"["),i=P(c,r),o=P(c,`]
                  `),l=P(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){I(u,e,c),y(e,t),y(e,i),y(e,o),y(e,l),y(e,s)},p(u,c){c&4096&&r!==(r=u[14][0]+"")&&N(i,r),c&4096&&a!==(a=u[14][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function df(n){let e,t;return e=new Kt({props:{queryKey:[n[14][1]],id:n[14][1],$$slots:{nodata:[bf],error:[yf],loading:[mf],default:[vf,({text:r})=>({12:r}),({text:r})=>r?4096:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&4096&&(o.queryKey=[r[14][1]]),i&4096&&(o.id=r[14][1]),i&135170&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function hf(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[14][1]],pubkey:n[14][1],$$slots:{nodata:[Ef],error:[wf],loading:[kf],default:[gf,({metadata:r})=>({13:r}),({metadata:r})=>r?8192:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&4096&&(o.queryKey=["metadata",r[14][1]]),i&4096&&(o.pubkey=r[14][1]),i&143360&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function _f(n){let e=n[12].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&4096&&e!==(e=r[12].content+"")&&N(t,e)},d(r){r&&p(t)}}}function pf(n){let e="<content-warning>",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p:H,d(r){r&&p(t)}}}function vf(n){let e,t,r,i,o,a,l;function s(d,h){return h&4098&&(i=null),i==null&&(i=!!(d[12].tags.some(Af)&&d[1]==!1)),i?pf:_f}let u=s(n,-1),c=u(n);function f(){return n[9](n[12])}return{c(){e=g("div"),t=q("[e] "),r=g("button"),c.c(),o=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=E(e);t=P(h,"[e] "),r=k(h,"BUTTON",{class:!0});var _=E(r);c.l(_),_.forEach(p),h.forEach(p),o=U(d),this.h()},h(){m(r,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),y(e,t),y(e,r),c.m(r,null),I(d,o,h),a||(l=Y(r,"click",f),a=!0)},p(d,h){n=d,u===(u=s(n,h))&&c?c.p(n,h):(c.d(1),c=u(n),c&&(c.c(),c.m(r,null)))},d(d){d&&(p(e),p(o)),c.d(),a=!1,l()}}}function mf(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("[e] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"[e] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function yf(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("[e] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"[e] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function bf(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("[e] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"[e] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function gf(n){let e,t,r,i,o,a=JSON.parse(n[13].content).name+"",l,s,u,c;function f(){return n[8](n[13],n[14])}return{c(){e=g("div"),t=q("to[p] "),r=g("button"),i=q("@"),o=g("u"),l=q(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=E(e);t=P(h,"to[p] "),r=k(h,"BUTTON",{class:!0});var _=E(r);i=P(_,"@"),o=k(_,"U",{});var v=E(o);l=P(v,a),v.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(r,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),y(e,t),y(e,r),y(r,i),y(r,o),y(o,l),I(d,s,h),u||(c=Y(r,"click",f),u=!0)},p(d,h){n=d,h&8192&&a!==(a=JSON.parse(n[13].content).name+"")&&N(l,a)},d(d){d&&(p(e),p(s)),u=!1,c()}}}function kf(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function wf(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function Ef(n){let e,t,r,i=n[14][1]+"",o,a;return{c(){e=g("div"),t=g("div"),r=q("to[p] "),o=q(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=E(e);t=k(s,"DIV",{class:!0});var u=E(t);r=P(u,"to[p] "),o=P(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),y(e,t),y(t,r),y(t,o),y(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function yo(n){let e,t,r,i;const o=[hf,df,ff],a=[];function l(s,u){return s[14][0]==="p"?0:s[14][0]==="e"||s[14][0]==="q"?1:2}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function Of(n){let e,t,r=JSON.parse(n[13].content).picture,i,o,a=JSON.parse(n[13].content).display_name+"",l,s,u,c,f,d,h=JSON.parse(n[13].content).name+"",_,v,b,w,S=new Date(n[12].created_at*1e3).toLocaleString()+"",D,T,j=n[12].tags&&xe(n[12].tags).length>0,O,C,R,M,Q,x,z=r&&vo(n);function $(){return n[6](n[13],n[12])}function me(){return n[7](n[12])}let W=j&&mo(n);return R=new ze({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),z&&z.c(),i=F(),o=g("div"),l=q(a),s=F(),u=g("div"),c=g("button"),f=q("@"),d=g("u"),_=q(h),v=F(),b=g("div"),w=g("button"),D=q(S),T=F(),W&&W.c(),O=F(),C=g("div"),ie(R.$$.fragment),this.h()},l(J){e=k(J,"DIV",{class:!0});var K=E(e);t=k(K,"DIV",{});var re=E(t);z&&z.l(re),re.forEach(p),i=U(K),o=k(K,"DIV",{class:!0});var de=E(o);l=P(de,a),de.forEach(p),s=U(K),u=k(K,"DIV",{class:!0});var G=E(u);c=k(G,"BUTTON",{class:!0});var he=E(c);f=P(he,"@"),d=k(he,"U",{});var _e=E(d);_=P(_e,h),_e.forEach(p),he.forEach(p),G.forEach(p),v=U(K),b=k(K,"DIV",{class:!0});var se=E(b);w=k(se,"BUTTON",{class:!0});var ne=E(w);D=P(ne,S),ne.forEach(p),se.forEach(p),K.forEach(p),T=U(J),W&&W.l(J),O=U(J),C=k(J,"DIV",{class:!0});var fe=E(C);le(R.$$.fragment,fe),fe.forEach(p),this.h()},h(){m(o,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(w,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(C,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(J,K){I(J,e,K),y(e,t),z&&z.m(t,null),y(e,i),y(e,o),y(o,l),y(e,s),y(e,u),y(u,c),y(c,f),y(c,d),y(d,_),y(e,v),y(e,b),y(b,w),y(w,D),I(J,T,K),W&&W.m(J,K),I(J,O,K),I(J,C,K),oe(R,C,null),M=!0,Q||(x=[Y(c,"click",$),Y(w,"click",me)],Q=!0)},p(J,K){n=J,K&8192&&(r=JSON.parse(n[13].content).picture),r?z?z.p(n,K):(z=vo(n),z.c(),z.m(t,null)):z&&(z.d(1),z=null),(!M||K&8192)&&a!==(a=JSON.parse(n[13].content).display_name+"")&&N(l,a),(!M||K&8192)&&h!==(h=JSON.parse(n[13].content).name+"")&&N(_,h),(!M||K&4096)&&S!==(S=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(D,S),K&4096&&(j=n[12].tags&&xe(n[12].tags).length>0),j?W?(W.p(n,K),K&4096&&A(W,1)):(W=mo(n),W.c(),A(W,1),W.m(O.parentNode,O)):W&&(ee(),L(W,1,1,()=>{W=null}),te());const re={};K&4096&&(re.text=n[12].content),K&4096&&(re.tag=n[12].tags),K&4096&&(re.id=n[12].id),K&2&&(re.view=n[1]),R.$set(re)},i(J){M||(A(W),A(R.$$.fragment,J),M=!0)},o(J){L(W),L(R.$$.fragment,J),M=!1},d(J){J&&(p(e),p(T),p(O),p(C)),z&&z.d(),W&&W.d(J),ae(R),Q=!1,Qe(x)}}}function Sf(n){let e,t,r=n[12].pubkey+"",i,o,a,l,s=new Date(n[12].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function v(){return n[5](n[12])}return f=new ze({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("div"),l=g("button"),u=q(s),c=F(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var w=E(e);t=k(w,"DIV",{class:!0});var S=E(t);i=P(S,r),S.forEach(p),o=U(w),a=k(w,"DIV",{class:!0});var D=E(a);l=k(D,"BUTTON",{class:!0});var T=E(l);u=P(T,s),T.forEach(p),c=U(D),le(f.$$.fragment,D),D.forEach(p),w.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(a,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,w){I(b,e,w),y(e,t),y(t,i),y(e,o),y(e,a),y(a,l),y(l,u),y(a,c),oe(f,a,null),d=!0,h||(_=Y(l,"click",v),h=!0)},p(b,w){n=b,(!d||w&4096)&&r!==(r=n[12].pubkey+"")&&N(i,r),(!d||w&4096)&&s!==(s=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(u,s);const S={};w&4096&&(S.text=n[12].content),w&4096&&(S.tag=n[12].tags),w&4096&&(S.id=n[12].id),w&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){L(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function If(n){let e,t,r=n[12].pubkey+"",i,o,a,l=new Date(n[12].created_at*1e3).toLocaleString()+"",s,u,c,f,d,h,_;function v(){return n[4](n[12])}return f=new ze({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("button"),s=q(l),u=F(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var w=E(e);t=k(w,"DIV",{class:!0});var S=E(t);i=P(S,r),o=U(S),a=k(S,"BUTTON",{class:!0});var D=E(a);s=P(D,l),D.forEach(p),S.forEach(p),u=U(w),c=k(w,"DIV",{class:!0});var T=E(c);le(f.$$.fragment,T),T.forEach(p),w.forEach(p),this.h()},h(){m(a,"class","text-xs underline decoration-secondary-500"),m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,w){I(b,e,w),y(e,t),y(t,i),y(t,o),y(t,a),y(a,s),y(e,u),y(e,c),oe(f,c,null),d=!0,h||(_=Y(a,"click",v),h=!0)},p(b,w){n=b,(!d||w&4096)&&r!==(r=n[12].pubkey+"")&&N(i,r),(!d||w&4096)&&l!==(l=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(s,l);const S={};w&4096&&(S.text=n[12].content),w&4096&&(S.tag=n[12].tags),w&4096&&(S.id=n[12].id),w&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){L(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function Cf(n){let e,t,r=n[12].pubkey+"",i,o,a,l,s;return l=new ze({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),t=g("div"),i=q(r),o=F(),a=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=E(e);t=k(c,"DIV",{class:!0});var f=E(t);i=P(f,r),f.forEach(p),o=U(c),a=k(c,"DIV",{class:!0});var d=E(a);le(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(a,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){I(u,e,c),y(e,t),y(t,i),y(e,o),y(e,a),oe(l,a,null),s=!0},p(u,c){(!s||c&4096)&&r!==(r=u[12].pubkey+"")&&N(i,r);const f={};c&4096&&(f.text=u[12].content),c&4096&&(f.tag=u[12].tags),c&4096&&(f.id=u[12].id),c&2&&(f.view=u[1]),l.$set(f)},i(u){s||(A(l.$$.fragment,u),s=!0)},o(u){L(l.$$.fragment,u),s=!1},d(u){u&&p(e),ae(l)}}}function qf(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[12].pubkey],pubkey:n[12].pubkey,$$slots:{nodata:[Cf],error:[If],loading:[Sf],default:[Of,({metadata:r})=>({13:r}),({metadata:r})=>r?8192:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&4096&&(o.queryKey=["metadata",r[12].pubkey]),i&4096&&(o.pubkey=r[12].pubkey),i&143362&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Pf(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function Df(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function Rf(n){let e,t,r;return{c(){e=g("div"),t=g("div"),r=q(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=E(e);t=k(o,"DIV",{class:!0});var a=E(t);r=P(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,o){I(i,e,o),y(e,t),y(t,r)},p(i,o){o&1&&N(r,i[0])},d(i){i&&p(e)}}}function Tf(n){let e,t,r,i;return r=new Kt({props:{queryKey:[n[0]],id:n[0],$$slots:{nodata:[Rf],error:[Df],loading:[Pf],default:[qf,({text:o})=>({12:o}),({text:o})=>o?4096:0]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=g("div"),ie(r.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=E(e);t=k(a,"DIV",{class:!0});var l=E(t);le(r.$$.fragment,l),l.forEach(p),a.forEach(p),this.h()},h(){m(t,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(o,a){I(o,e,a),y(e,t),oe(r,t,null),i=!0},p(o,[a]){const l={};a&1&&(l.queryKey=[o[0]]),a&1&&(l.id=o[0]),a&135171&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){i||(A(r.$$.fragment,o),i=!0)},o(o){L(r.$$.fragment,o),i=!1},d(o){o&&p(e),ae(r)}}}const Af=n=>n[0]==="content-warning";function Mf(n,e,t){let r;Fe(n,So,v=>t(1,r=v));let{id:i}=e;const o={ref:ln,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function a(v,b){console.log(v);const w={type:"component",value:{metadata:v,pubkey:b},component:o};qe.trigger(w)}const l={ref:_a,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function s(v){console.log("click");const b={type:"component",title:"Event Json",value:{note:v},component:l};qe.trigger(b)}const u=v=>{s(v)},c=v=>{s(v)},f=(v,b)=>{a(v,b.pubkey)},d=v=>{s(v)},h=(v,b)=>{a(v,b[1])},_=v=>{s(v)};return n.$$set=v=>{"id"in v&&t(0,i=v.id)},[i,r,a,s,u,c,f,d,h,_]}class jf extends De{constructor(e){super(),Re(this,e,Mf,Tf,Pe,{id:0})}}function bo(n,e,t){const r=n.slice();return r[20]=e[t],r[22]=t,r}function Lf(n){let e,t,r,i={ctx:n,current:null,token:null,hasCatch:!1,pending:Od,then:Ff,catch:Vf,value:19,blocks:[,,,]};return $e(t=n[10](n[1],n[2]),i),{c(){e=Z(),i.block.c()},l(o){e=Z(),i.block.l(o)},m(o,a){I(o,e,a),i.block.m(o,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(o,a){n=o,i.ctx=n,a&6&&t!==(t=n[10](n[1],n[2]))&&$e(t,i)||pr(i,n,a)},i(o){r||(A(i.block),r=!0)},o(o){for(let a=0;a<3;a+=1){const l=i.blocks[a];L(l)}r=!1},d(o){o&&p(e),i.block.d(o),i.token=null,i=null}}}function Nf(n){let e,t,r,i,o=n[2][n[2].findIndex(wo)][1]+"",a,l,s;return{c(){e=g("button"),t=q("content-warning"),r=g("br"),i=F(),a=q(o),this.h()},l(u){e=k(u,"BUTTON",{type:!0,class:!0});var c=E(e);t=P(c,"content-warning"),r=k(c,"BR",{}),i=U(c),a=P(c,o),c.forEach(p),this.h()},h(){m(e,"type","button"),m(e,"class","btn variant-filled-warning m-0")},m(u,c){I(u,e,c),y(e,t),y(e,r),y(e,i),y(e,a),l||(s=Y(e,"click",n[11]),l=!0)},p(u,c){c&4&&o!==(o=u[2][u[2].findIndex(wo)][1]+"")&&N(a,o)},i:H,o:H,d(u){u&&p(e),l=!1,s()}}}function Vf(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function Ff(n){let e,t,r=Ze(n[19]),i=[];for(let a=0;a<r.length;a+=1)i[a]=ko(bo(n,r,a));const o=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=E(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","parent-container break-all whitespace-pre-wrap")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);t=!0},p(a,l){if(l&16779262){r=Ze(a[19]);let s;for(s=0;s<r.length;s+=1){const u=bo(a,r,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=ko(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(ee(),s=r.length;s<i.length;s+=1)o(s);te()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)A(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(a){a&&p(e),_r(i,a)}}}function go(n){let e,t,r,i;const o=[Jf,Gf,Kf,Qf,Hf,Bf,Uf],a=[];function l(s,u){return s[20].type==="newline"?0:s[20].type==="emoji"?1:s[20].type==="url"?2:s[20].type==="image"?3:s[20].type==="nostr"&&s[20].url?4:s[20].type==="quote"&&s[20].number!==void 0?5:s[20].content.length>0?6:-1}return~(e=l(n))&&(t=a[e]=o[e](n)),{c(){t&&t.c(),r=Z()},l(s){t&&t.l(s),r=Z()},m(s,u){~e&&a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?~e&&a[e].p(s,u):(t&&(ee(),L(a[c],1,1,()=>{a[c]=null}),te()),~e?(t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r)):t=null)},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),~e&&a[e].d(s)}}}function Uf(n){let e,t=n[20].content+"",r;return{c(){e=g("span"),r=q(t)},l(i){e=k(i,"SPAN",{});var o=E(e);r=P(o,t),o.forEach(p)},m(i,o){I(i,e,o),y(e,r)},p(i,o){o&6&&t!==(t=i[20].content+"")&&N(r,t)},i:H,o:H,d(i){i&&p(e)}}}function Bf(n){let e,t,r,i;const o=[Xf,Yf,Wf,zf],a=[];function l(s,u){return s[2][s[20].number][0]==="p"?0:s[2][s[20].number][0]==="e"||s[2][s[20].number][0]==="q"?1:s[2][s[20].number][0]==="t"?2:3}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function Hf(n){let e,t,r,i,o;const a=[rd,td],l=[];function s(u,c){return c&6&&(e=null),e==null&&(e=!!u[6](u[20].url)),e?0:1}return t=s(n,-1),r=l[t]=a[t](n),{c(){r.c(),i=Z()},l(u){r.l(u),i=Z()},m(u,c){l[t].m(u,c),I(u,i,c),o=!0},p(u,c){let f=t;t=s(u,c),t===f?l[t].p(u,c):(ee(),L(l[f],1,1,()=>{l[f]=null}),te(),r=l[t],r?r.p(u,c):(r=l[t]=a[t](u),r.c()),A(r,1),r.m(i.parentNode,i))},i(u){o||(A(r),o=!0)},o(u){L(r),o=!1},d(u){u&&p(i),l[t].d(u)}}}function Qf(n){let e;function t(o,a){return o[3]?id:nd}let r=t(n),i=r(n);return{c(){i.c(),e=Z()},l(o){i.l(o),e=Z()},m(o,a){i.m(o,a),I(o,e,a)},p(o,a){r===(r=t(o))&&i?i.p(o,a):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},i:H,o:H,d(o){o&&p(e),i.d(o)}}}function Kf(n){let e,t,r,i;const o=[ld,sd],a=[];function l(s,u){return s[3]?0:1}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=Z()},l(s){t.l(s),r=Z()},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function Gf(n){let e,t,r,i,o,a;function l(){return n[13](n[20])}return{c(){e=g("span"),t=g("img"),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=E(e);t=k(u,"IMG",{class:!0,src:!0,alt:!0}),i=U(u),u.forEach(p),this.h()},h(){m(t,"class","max-h-[1.5em] object-contain"),ce(t.src,r=n[20].url)||m(t,"src",r),m(t,"alt",""),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(s,u){I(s,e,u),y(e,t),y(e,i),o||(a=Y(t,"click",l),o=!0)},p(s,u){n=s,u&6&&!ce(t.src,r=n[20].url)&&m(t,"src",r)},i:H,o:H,d(s){s&&p(e),o=!1,a()}}}function Jf(n){let e;return{c(){e=g("br")},l(t){e=k(t,"BR",{})},m(t,r){I(t,e,r)},p:H,i:H,o:H,d(t){t&&p(e)}}}function zf(n){let e=n[2][n[20].number][1]+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&6&&e!==(e=r[2][r[20].number][1]+"")&&N(t,e)},i:H,o:H,d(r){r&&p(t)}}}function Wf(n){let e,t,r=n[2][n[20].number][1]+"",i;return{c(){e=g("u"),t=q("#"),i=q(r)},l(o){e=k(o,"U",{});var a=E(e);t=P(a,"#"),i=P(a,r),a.forEach(p)},m(o,a){I(o,e,a),y(e,t),y(e,i)},p(o,a){a&6&&r!==(r=o[2][o[20].number][1]+"")&&N(i,r)},i:H,o:H,d(o){o&&p(e)}}}function Yf(n){let e,t;return e=new jf({props:{id:n[2][n[20].number][1]}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&6&&(o.id=r[2][r[20].number][1]),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Xf(n){let e,t;return e=new Je({props:{queryKey:["metadata",n[2][n[20].number][1]],pubkey:n[2][n[20].number][1],$$slots:{nodata:[ed],error:[$f],loading:[xf],default:[Zf,({metadata:r})=>({24:r}),({metadata:r})=>r?16777216:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&6&&(o.queryKey=["metadata",r[2][r[20].number][1]]),i&6&&(o.pubkey=r[2][r[20].number][1]),i&50331654&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function Zf(n){let e,t,r,i=JSON.parse(n[24].content).name+"",o,a,l,s;function u(){return n[15](n[20],n[24])}return{c(){e=g("button"),t=q("@"),r=g("u"),o=q(i),a=F(),this.h()},l(c){e=k(c,"BUTTON",{class:!0});var f=E(e);t=P(f,"@"),r=k(f,"U",{});var d=E(r);o=P(d,i),d.forEach(p),f.forEach(p),a=U(c),this.h()},h(){m(e,"class","flex inline-flex text-sm text-black/80")},m(c,f){I(c,e,f),y(e,t),y(e,r),y(r,o),I(c,a,f),l||(s=Y(e,"click",u),l=!0)},p(c,f){n=c,f&16777216&&i!==(i=JSON.parse(n[24].content).name+"")&&N(o,i)},d(c){c&&(p(e),p(a)),l=!1,s()}}}function xf(n){let e,t,r=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),t=g("div"),i=q(r),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=E(e);t=k(l,"DIV",{class:!0});var s=E(t);i=P(s,r),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(a,l){I(a,e,l),y(e,t),y(t,i),y(e,o)},p(a,l){l&6&&r!==(r=a[2][a[20].number][1]+"")&&N(i,r)},d(a){a&&p(e)}}}function $f(n){let e,t,r=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),t=g("div"),i=q(r),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=E(e);t=k(l,"DIV",{class:!0});var s=E(t);i=P(s,r),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(a,l){I(a,e,l),y(e,t),y(t,i),y(e,o)},p(a,l){l&6&&r!==(r=a[2][a[20].number][1]+"")&&N(i,r)},d(a){a&&p(e)}}}function ed(n){let e,t,r=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),t=g("div"),i=q(r),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=E(e);t=k(l,"DIV",{class:!0});var s=E(t);i=P(s,r),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(t,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(a,l){I(a,e,l),y(e,t),y(t,i),y(e,o)},p(a,l){l&6&&r!==(r=a[2][a[20].number][1]+"")&&N(i,r)},d(a){a&&p(e)}}}function td(n){let e,t=n[20].content+"",r;return{c(){e=g("span"),r=q(t),this.h()},l(i){e=k(i,"SPAN",{class:!0});var o=E(e);r=P(o,t),o.forEach(p),this.h()},h(){m(e,"class","text-black/80")},m(i,o){I(i,e,o),y(e,r)},p(i,o){o&6&&t!==(t=i[20].content+"")&&N(r,t)},i:H,o:H,d(i){i&&p(e)}}}function rd(n){let e,t;return e=new cf({props:{encodedId:n[20].url}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&6&&(o.encodedId=r[20].url),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function nd(n){let e,t,r,i;function o(s,u){return s[20].content.length>80?ad:od}let a=o(n),l=a(n);return{c(){e=g("span"),t=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=E(e);t=k(u,"A",{class:!0,href:!0,target:!0});var c=E(t);l.l(c),c.forEach(p),i=U(u),u.forEach(p),this.h()},h(){m(t,"class","anchor"),m(t,"href",r=n[20].content),m(t,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),y(e,t),l.m(t,null),y(e,i)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(t,null))),u&6&&r!==(r=s[20].content)&&m(t,"href",r)},d(s){s&&p(e),l.d()}}}function id(n){let e,t,r,i,o,a;function l(){return n[14](n[20])}return{c(){e=g("span"),t=g("img"),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=E(e);t=k(u,"IMG",{class:!0,src:!0,alt:!0}),i=U(u),u.forEach(p),this.h()},h(){m(t,"class","max-h-[10em] object-contain"),ce(t.src,r=n[20].content)||m(t,"src",r),m(t,"alt",""),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(s,u){I(s,e,u),y(e,t),y(e,i),o||(a=Y(t,"click",l),o=!0)},p(s,u){n=s,u&6&&!ce(t.src,r=n[20].content)&&m(t,"src",r)},d(s){s&&p(e),o=!1,a()}}}function od(n){let e=n[20].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&6&&e!==(e=r[20].content+"")&&N(t,e)},d(r){r&&p(t)}}}function ad(n){let e=n[20].content.slice(0,75)+"",t,r;return{c(){t=q(e),r=q("...")},l(i){t=P(i,e),r=P(i,"...")},m(i,o){I(i,t,o),I(i,r,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(t,e)},d(i){i&&(p(t),p(r))}}}function sd(n){let e,t,r,i;function o(s,u){return s[20].content.length>80?cd:ud}let a=o(n),l=a(n);return{c(){e=g("span"),t=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=E(e);t=k(u,"A",{class:!0,href:!0,target:!0});var c=E(t);l.l(c),c.forEach(p),i=U(u),u.forEach(p),this.h()},h(){m(t,"class","anchor"),m(t,"href",r=n[20].content),m(t,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),y(e,t),l.m(t,null),y(e,i)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(t,null))),u&6&&r!==(r=s[20].content)&&m(t,"href",r)},i:H,o:H,d(s){s&&p(e),l.d()}}}function ld(n){let e,t,r,i,o,a,l;const s=[_d,hd,dd,fd],u=[];function c(f,d){var h;return d&6&&(e=null),d&6&&(t=null),d&6&&(r=null),e==null&&(e=!!new URL(f[20].content).hostname.endsWith("twitter.com")),e?0:(t==null&&(t=new URL(f[20].content).hostname==="www.youtube.com"||new URL(f[20].content).hostname==="m.youtube.com"||new URL(f[20].content).hostname==="youtu.be"),t?1:(r==null&&(r=!!((h=f[20].content)!=null&&h.endsWith(".mp4"))),r?2:3))}return i=c(n,-1),o=u[i]=s[i](n),{c(){o.c(),a=Z()},l(f){o.l(f),a=Z()},m(f,d){u[i].m(f,d),I(f,a,d),l=!0},p(f,d){let h=i;i=c(f,d),i===h?u[i].p(f,d):(ee(),L(u[h],1,1,()=>{u[h]=null}),te(),o=u[i],o?o.p(f,d):(o=u[i]=s[i](f),o.c()),A(o,1),o.m(a.parentNode,a))},i(f){l||(A(o),l=!0)},o(f){L(o),l=!1},d(f){f&&p(a),u[i].d(f)}}}function ud(n){let e=n[20].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&6&&e!==(e=r[20].content+"")&&N(t,e)},d(r){r&&p(t)}}}function cd(n){let e=n[20].content.slice(0,75)+"",t,r;return{c(){t=q(e),r=q("...")},l(i){t=P(i,e),r=P(i,"...")},m(i,o){I(i,t,o),I(i,r,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(t,e)},d(i){i&&(p(t),p(r))}}}function fd(n){let e,t,r,i={ctx:n,current:null,token:null,hasCatch:!1,pending:kd,then:vd,catch:pd,value:23,blocks:[,,,]};return $e(t=n[7](n[20].content),i),{c(){e=Z(),i.block.c()},l(o){e=Z(),i.block.l(o)},m(o,a){I(o,e,a),i.block.m(o,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(o,a){n=o,i.ctx=n,a&6&&t!==(t=n[7](n[20].content))&&$e(t,i)||pr(i,n,a)},i(o){r||(A(i.block),r=!0)},o(o){for(let a=0;a<3;a+=1){const l=i.blocks[a];L(l)}r=!1},d(o){o&&p(e),i.block.d(o),i.token=null,i=null}}}function dd(n){let e,t,r,i,o,a;return{c(){e=g("video"),t=g("source"),i=g("track"),a=q(`
                  Your browser does not support the video tag.
                `),this.h()},l(l){e=k(l,"VIDEO",{class:!0});var s=E(e);t=k(s,"SOURCE",{src:!0,type:!0}),i=k(s,"TRACK",{kind:!0,src:!0,label:!0}),a=P(s,`
                  Your browser does not support the video tag.
                `),s.forEach(p),this.h()},h(){ce(t.src,r=n[20].content)||m(t,"src",r),m(t,"type","video/mp4"),m(i,"kind","captions"),ce(i.src,o="")||m(i,"src",o),m(i,"label","English"),i.default=!0,e.controls=!0,m(e,"class","max-h-[20em]")},m(l,s){I(l,e,s),y(e,t),y(e,i),y(e,a)},p(l,s){s&6&&!ce(t.src,r=l[20].content)&&m(t,"src",r)},i:H,o:H,d(l){l&&p(e)}}}function hd(n){let e,t;return{c(){e=g("iframe"),this.h()},l(r){e=k(r,"IFRAME",{class:!0,width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),E(e).forEach(p),this.h()},h(){m(e,"class","rounded"),m(e,"width","320"),m(e,"height","180"),ce(e.src,t=`https://www.youtube.com/embed/${n[8](n[20].content)}`)||m(e,"src",t),m(e,"title","YouTube video player"),m(e,"frameborder","0"),m(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.allowFullscreen=!0},m(r,i){I(r,e,i)},p(r,i){i&6&&!ce(e.src,t=`https://www.youtube.com/embed/${r[8](r[20].content)}`)&&m(e,"src",t)},i:H,o:H,d(r){r&&p(e)}}}function _d(n){let e,t,r,i,o=n[20].content+"",a,l,s,u,c="",f,d;return{c(){e=g("div"),t=g("blockquote"),r=g("p"),i=g("a"),a=q(o),s=F(),u=g("script"),u.innerHTML=c,d=F(),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=E(e);t=k(_,"BLOCKQUOTE",{class:!0});var v=E(t);r=k(v,"P",{lang:!0,dir:!0});var b=E(r);i=k(b,"A",{class:!0,href:!0});var w=E(i);a=P(w,o),w.forEach(p),b.forEach(p),v.forEach(p),s=U(_),u=k(_,"SCRIPT",{src:!0,charset:!0,"data-svelte-h":!0}),Ve(u)!=="svelte-1f1foi9"&&(u.innerHTML=c),d=U(_),_.forEach(p),this.h()},h(){m(i,"class","anchor"),m(i,"href",l=n[20].content),m(r,"lang","ja"),m(r,"dir","ltr"),m(t,"class","twitter-tweet"),u.async=!0,ce(u.src,f="https://platform.twitter.com/widgets.js")||m(u,"src",f),m(u,"charset","utf-8"),m(e,"class","max-h-[24rem] max-w-[36rem] overflow-auto")},m(h,_){I(h,e,_),y(e,t),y(t,r),y(r,i),y(i,a),y(e,s),y(e,u),y(e,d)},p(h,_){_&6&&o!==(o=h[20].content+"")&&N(a,o),_&6&&l!==(l=h[20].content)&&m(i,"href",l)},i:H,o:H,d(h){h&&p(e)}}}function pd(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function vd(n){let e,t,r,i;const o=[yd,md],a=[];function l(s,u){return s[4][s[20].content].title!==""?0:1}return e=l(n),t=a[e]=o[e](n),{c(){t.c(),r=F()},l(s){t.l(s),r=U(s)},m(s,u){a[e].m(s,u),I(s,r,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(ee(),L(a[c],1,1,()=>{a[c]=null}),te(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),A(t,1),t.m(r.parentNode,r))},i(s){i||(A(t),i=!0)},o(s){L(t),i=!1},d(s){s&&p(r),a[e].d(s)}}}function md(n){let e,t,r;function i(l,s){return l[20].content.length>80?gd:bd}let o=i(n),a=o(n);return{c(){e=g("span"),t=g("a"),a.c(),this.h()},l(l){e=k(l,"SPAN",{class:!0});var s=E(e);t=k(s,"A",{class:!0,href:!0,target:!0});var u=E(t);a.l(u),u.forEach(p),s.forEach(p),this.h()},h(){m(t,"class","anchor"),m(t,"href",r=n[20].content),m(t,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(l,s){I(l,e,s),y(e,t),a.m(t,null)},p(l,s){o===(o=i(l))&&a?a.p(l,s):(a.d(1),a=o(l),a&&(a.c(),a.m(t,null))),s&6&&r!==(r=l[20].content)&&m(t,"href",r)},i:H,o:H,d(l){l&&p(e),a.d()}}}function yd(n){let e,t;return e=new _c({props:{ogp:n[4][n[20].content],url:n[20].content}}),{c(){ie(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,i){oe(e,r,i),t=!0},p(r,i){const o={};i&22&&(o.ogp=r[4][r[20].content]),i&6&&(o.url=r[20].content),e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){ae(e,r)}}}function bd(n){let e=n[20].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&6&&e!==(e=r[20].content+"")&&N(t,e)},d(r){r&&p(t)}}}function gd(n){let e=n[20].content.slice(0,75)+"",t,r;return{c(){t=q(e),r=q("...")},l(i){t=P(i,e),r=P(i,"...")},m(i,o){I(i,t,o),I(i,r,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(t,e)},d(i){i&&(p(t),p(r))}}}function kd(n){let e,t,r,i;function o(s,u){return s[20].content.length>80?Ed:wd}let a=o(n),l=a(n);return{c(){e=g("span"),t=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=E(e);t=k(u,"A",{class:!0,href:!0,target:!0});var c=E(t);l.l(c),c.forEach(p),u.forEach(p),i=U(s),this.h()},h(){m(t,"class","anchor"),m(t,"href",r=n[20].content),m(t,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),y(e,t),l.m(t,null),I(s,i,u)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(t,null))),u&6&&r!==(r=s[20].content)&&m(t,"href",r)},i:H,o:H,d(s){s&&(p(e),p(i)),l.d()}}}function wd(n){let e=n[20].content+"",t;return{c(){t=q(e)},l(r){t=P(r,e)},m(r,i){I(r,t,i)},p(r,i){i&6&&e!==(e=r[20].content+"")&&N(t,e)},d(r){r&&p(t)}}}function Ed(n){let e=n[20].content.slice(0,75)+"",t,r;return{c(){t=q(e),r=q("...")},l(i){t=P(i,e),r=P(i,"...")},m(i,o){I(i,t,o),I(i,r,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(t,e)},d(i){i&&(p(t),p(r))}}}function ko(n){let e,t,r=n[20].content.length>0&&go(n);return{c(){r&&r.c(),e=Z()},l(i){r&&r.l(i),e=Z()},m(i,o){r&&r.m(i,o),I(i,e,o),t=!0},p(i,o){i[20].content.length>0?r?(r.p(i,o),o&6&&A(r,1)):(r=go(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ee(),L(r,1,1,()=>{r=null}),te())},i(i){t||(A(r),t=!0)},o(i){L(r),t=!1},d(i){i&&p(e),r&&r.d(i)}}}function Od(n){let e;return{c(){e=q(n[1])},l(t){e=P(t,n[1])},m(t,r){I(t,e,r)},p(t,r){r&2&&N(e,t[1])},i:H,o:H,d(t){t&&p(e)}}}function Sd(n){let e,t,r,i,o;const a=[Nf,Lf],l=[];function s(u,c){return c&5&&(e=null),e==null&&(e=!!(u[2].some(Cd)&&u[0]==!1)),e?0:1}return t=s(n,-1),r=l[t]=a[t](n),{c(){r.c(),i=Z()},l(u){r.l(u),i=Z()},m(u,c){l[t].m(u,c),I(u,i,c),o=!0},p(u,[c]){let f=t;t=s(u,c),t===f?l[t].p(u,c):(ee(),L(l[f],1,1,()=>{l[f]=null}),te(),r=l[t],r?r.p(u,c):(r=l[t]=a[t](u),r.c()),A(r,1),r.m(i.parentNode,i))},i(u){o||(A(r),o=!0)},o(u){L(r),o=!1},d(u){u&&p(i),l[t].d(u)}}}function Id(n,e){e||(e=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const Cd=n=>n[0]==="content-warning",wo=n=>n[0]==="content-warning";function qd(n,e,t){let r,i;Fe(n,vn,O=>t(16,r=O)),Fe(n,ft,O=>t(4,i=O));let{id:o}=e,{text:a}=e,{tag:l}=e,{URLPreview:s}=e;const u={ref:fc,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function c(O){if(typeof O=="string"){const C={type:"component",image:O,component:u};qe.trigger(C)}}function f(O){try{return X.decode(O),!0}catch{return!1}}async function d(O){if(!i[O]||i[O].title==="")try{const C=await Ra(O);ft.update(R=>({...R,[O]:C}))}catch(C){console.log(C),dt(ft,i[O].title="",i),dt(ft,i[O].image="",i),dt(ft,i[O].description="",i),dt(ft,i[O].favicon="",i)}}const h=O=>{const C=new URL(O);if(C.hostname==="youtu.be")return C.pathname.substring(1);if(C.hostname==="www.youtube.com"||C.hostname==="m.youtube.com")return C.pathname.startsWith("/shorts/")?C.pathname.replace("/shorts/",""):Id("v",O)},_={ref:ln,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function v(O,C){console.log(O);const R={type:"component",value:{metadata:O,pubkey:C},component:_};qe.trigger(R)}async function b(O,C){if(o in r)return r[o];{const R=await ac(O,C);return dt(vn,r[o]=R,r),R}}let{view:w=!1}=e;function S(){t(0,w=!0)}const D=O=>c(O.url),T=O=>c(O.content),j=(O,C)=>{const R=O.number===void 0?0:O.number;v(C,l[R][1])};return n.$$set=O=>{"id"in O&&t(12,o=O.id),"text"in O&&t(1,a=O.text),"tag"in O&&t(2,l=O.tag),"URLPreview"in O&&t(3,s=O.URLPreview),"view"in O&&t(0,w=O.view)},[w,a,l,s,i,c,f,d,h,v,b,S,o,D,T,j]}class ze extends De{constructor(e){super(),Re(this,e,qd,Sd,Pe,{id:12,text:1,tag:2,URLPreview:3,view:0})}}export{Md as A,ze as C,Nd as M,Vd as N,Fd as P,jd as T,Ld as a,ln as b,_a as c,Kt as d,Je as e,sr as f,Ki as g,$e as h,qe as m,pr as u};
