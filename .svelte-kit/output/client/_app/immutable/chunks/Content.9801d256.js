import{S as Oe,i as Ie,s as we,e as Y,b as C,O as W,g as L,v as ue,d as V,f as ce,h as _,L as Ee,a3 as ss,Q as $t,R as Xr,K as Q,k as g,l as k,m as w,n as m,F as v,Y as as,a5 as mr,a6 as We,P as Te,U as Zr,x as xr,y as ie,z as le,A as se,ab as ci,aq as ls,B as ae,a as j,c as U,V as fe,q as O,r as I,a9 as en,W as tn,u as N,H as us,E as cs,a1 as fs,a4 as ds,C as Pe,G as qe,I as De,J as Re,o as hs,ar as fi,a7 as Ke,ad as Ir,$ as Ve,a0 as Yt,X as Xe,T as ze}from"./index.1fa16860.js";import{D as Bt,E as rn,F as di,G as _s,B as hi,H as ps,A as vs,I as ms,J as _i,n as x,t as Ht,s as ys,P as bs,K as nn,c as pi,R as gs,f as ks,u as Fe,L as on,M as Je,N as ws,g as sn}from"./navigation.b66b9f2c.js";import{f as yr,e as Qt,h as Kt,d as Sr,i as Es,j as vi,k as rr,l as Os,n as Is,o as H}from"./ProgressBar.svelte_svelte_type_style_lang.baaee050.js";import"./singletons.754aa4bc.js";import{w as Gt,r as wt,d as Vt}from"./index.6b4ebe8d.js";function Ss(){const{subscribe:o,set:e,update:r}=Gt([]);return{subscribe:o,set:e,update:r,trigger:t=>r(n=>(n.push(t),n)),close:()=>r(t=>(t.length>0&&t.shift(),t)),clear:()=>e([])}}const ye=Ss();function Cs(o,e){const r='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let t,n;function i(f){f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),n.focus())}function s(f){!f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),t.focus())}const l=f=>{if(e===!1)return;const d=Array.from(o.querySelectorAll(r));d.length&&(t=d[0],n=d[d.length-1],f||t.focus(),t.addEventListener("keydown",i),n.addEventListener("keydown",s))};l(!1);function a(){t&&t.removeEventListener("keydown",i),n&&n.removeEventListener("keydown",s)}const u=(f,d)=>(f.length&&(a(),l(!0)),d),c=new MutationObserver(u);return c.observe(o,{childList:!0,subtree:!0}),{update(f){e=f,f?l(!1):a()},destroy(){a(),c.disconnect()}}}function an(o){let e=o[12],r,t,n=dn(o);return{c(){n.c(),r=Y()},l(i){n.l(i),r=Y()},m(i,s){n.m(i,s),C(i,r,s),t=!0},p(i,s){s[0]&4096&&we(e,e=i[12])?(ue(),V(n,1,1,Q),ce(),n=dn(i),n.c(),L(n,1),n.m(r.parentNode,r)):n.p(i,s)},i(i){t||(L(n),t=!0)},o(i){V(n),t=!1},d(i){i&&_(r),n.d(i)}}}function Ps(o){var u,c;let e,r,t,n,i;const s=[(u=o[14])==null?void 0:u.props,{parent:o[15]}];var l=(c=o[14])==null?void 0:c.ref;function a(f){let d={$$slots:{default:[Ds]},$$scope:{ctx:f}};for(let h=0;h<s.length;h+=1)d=$t(d,s[h]);return{props:d}}return l&&(r=xr(l,a(o))),{c(){e=g("div"),r&&ie(r.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var d=w(e);r&&le(r.$$.fragment,d),d.forEach(_),this.h()},h(){var f;m(e,"class",t="modal contents "+(((f=o[12][0])==null?void 0:f.modalClasses)??"")),m(e,"data-testid","modal-component"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",n=o[12][0].title??"")},m(f,d){C(f,e,d),r&&se(r,e,null),i=!0},p(f,d){var p,y,b;const h=d[0]&49152?ci(s,[d[0]&16384&&ls((p=f[14])==null?void 0:p.props),d[0]&32768&&{parent:f[15]}]):{};if(d[0]&16384|d[1]&8192&&(h.$$scope={dirty:d,ctx:f}),d[0]&16384&&l!==(l=(y=f[14])==null?void 0:y.ref)){if(r){ue();const E=r;V(E.$$.fragment,1,0,()=>{ae(E,1)}),ce()}l?(r=xr(l,a(f)),ie(r.$$.fragment),L(r.$$.fragment,1),se(r,e,null)):r=null}else l&&r.$set(h);(!i||d[0]&4096&&t!==(t="modal contents "+(((b=f[12][0])==null?void 0:b.modalClasses)??"")))&&m(e,"class",t),(!i||d[0]&4096&&n!==(n=f[12][0].title??""))&&m(e,"aria-label",n)},i(f){i||(r&&L(r.$$.fragment,f),i=!0)},o(f){r&&V(r.$$.fragment,f),i=!1},d(f){f&&_(e),r&&ae(r)}}}function qs(o){var y,b,E,S;let e,r,t,n,i,s,l,a,u=((y=o[12][0])==null?void 0:y.title)&&un(o),c=((b=o[12][0])==null?void 0:b.body)&&cn(o),f=((E=o[12][0])==null?void 0:E.image)&&typeof((S=o[12][0])==null?void 0:S.image)=="string"&&fn(o);function d(q,T){if(q[12][0].type==="alert")return Ms;if(q[12][0].type==="confirm")return Ts;if(q[12][0].type==="prompt")return Rs}let h=d(o),p=h&&h(o);return{c(){e=g("div"),u&&u.c(),r=j(),c&&c.c(),t=j(),f&&f.c(),n=j(),p&&p.c(),this.h()},l(q){e=k(q,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var T=w(e);u&&u.l(T),r=U(T),c&&c.l(T),t=U(T),f&&f.l(T),n=U(T),p&&p.l(T),T.forEach(_),this.h()},h(){m(e,"class",i="modal "+o[16]),m(e,"data-testid","modal"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",s=o[12][0].title??"")},m(q,T){C(q,e,T),u&&u.m(e,null),v(e,r),c&&c.m(e,null),v(e,t),f&&f.m(e,null),v(e,n),p&&p.m(e,null),a=!0},p(q,T){var K,P,A,M;o=q,(K=o[12][0])!=null&&K.title?u?u.p(o,T):(u=un(o),u.c(),u.m(e,r)):u&&(u.d(1),u=null),(P=o[12][0])!=null&&P.body?c?c.p(o,T):(c=cn(o),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(A=o[12][0])!=null&&A.image&&typeof((M=o[12][0])==null?void 0:M.image)=="string"?f?f.p(o,T):(f=fn(o),f.c(),f.m(e,n)):f&&(f.d(1),f=null),h===(h=d(o))&&p?p.p(o,T):(p&&p.d(1),p=h&&h(o),p&&(p.c(),p.m(e,null))),(!a||T[0]&65536&&i!==(i="modal "+o[16]))&&m(e,"class",i),(!a||T[0]&4096&&s!==(s=o[12][0].title??""))&&m(e,"aria-label",s)},i(q){a||(mr(()=>{a&&(l||(l=We(e,Bt,{duration:o[3],opacity:0,y:100},!0)),l.run(1))}),a=!0)},o(q){l||(l=We(e,Bt,{duration:o[3],opacity:0,y:100},!1)),l.run(0),a=!1},d(q){q&&_(e),u&&u.d(),c&&c.d(),f&&f.d(),p&&p.d(),q&&l&&l.end()}}}function ln(o){var n;let e,r=((n=o[14])==null?void 0:n.slot)+"",t;return{c(){e=new us(!1),t=Y(),this.h()},l(i){e=cs(i,!1),t=Y(),this.h()},h(){e.a=t},m(i,s){e.m(r,i,s),C(i,t,s)},p(i,s){var l;s[0]&16384&&r!==(r=((l=i[14])==null?void 0:l.slot)+"")&&e.p(r)},d(i){i&&_(t),i&&e.d()}}}function Ds(o){var t;let e,r=((t=o[14])==null?void 0:t.slot)&&ln(o);return{c(){r&&r.c(),e=Y()},l(n){r&&r.l(n),e=Y()},m(n,i){r&&r.m(n,i),C(n,e,i)},p(n,i){var s;(s=n[14])!=null&&s.slot?r?r.p(n,i):(r=ln(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){r&&r.d(n),n&&_(e)}}}function un(o){let e,r=o[12][0].title+"",t;return{c(){e=g("header"),this.h()},l(n){e=k(n,"HEADER",{class:!0});var i=w(e);i.forEach(_),this.h()},h(){m(e,"class",t="modal-header "+o[9])},m(n,i){C(n,e,i),e.innerHTML=r},p(n,i){i[0]&4096&&r!==(r=n[12][0].title+"")&&(e.innerHTML=r),i[0]&512&&t!==(t="modal-header "+n[9])&&m(e,"class",t)},d(n){n&&_(e)}}}function cn(o){let e,r=o[12][0].body+"",t;return{c(){e=g("article"),this.h()},l(n){e=k(n,"ARTICLE",{class:!0});var i=w(e);i.forEach(_),this.h()},h(){m(e,"class",t="modal-body "+o[10])},m(n,i){C(n,e,i),e.innerHTML=r},p(n,i){i[0]&4096&&r!==(r=n[12][0].body+"")&&(e.innerHTML=r),i[0]&1024&&t!==(t="modal-body "+n[10])&&m(e,"class",t)},d(n){n&&_(e)}}}function fn(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var t;m(e,"class","modal-image "+Us),fe(e.src,r=(t=o[12][0])==null?void 0:t.image)||m(e,"src",r),m(e,"alt","Modal")},m(t,n){C(t,e,n)},p(t,n){var i;n[0]&4096&&!fe(e.src,r=(i=t[12][0])==null?void 0:i.image)&&m(e,"src",r)},d(t){t&&_(e)}}}function Rs(o){let e,r,t,n,i,s,l,a,u,c,f,d,h,p,y=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},o[12][0].valueAttr],b={};for(let E=0;E<y.length;E+=1)b=$t(b,y[E]);return{c(){e=g("form"),r=g("input"),t=j(),n=g("footer"),i=g("button"),s=O(o[0]),a=j(),u=g("button"),c=O(o[2]),this.h()},l(E){e=k(E,"FORM",{class:!0});var S=w(e);r=k(S,"INPUT",{class:!0,name:!0,type:!0}),t=U(S),n=k(S,"FOOTER",{class:!0});var q=w(n);i=k(q,"BUTTON",{type:!0,class:!0});var T=w(i);s=I(T,o[0]),T.forEach(_),a=U(q),u=k(q,"BUTTON",{type:!0,class:!0});var K=w(u);c=I(K,o[2]),K.forEach(_),q.forEach(_),S.forEach(_),this.h()},h(){en(r,b),m(i,"type","button"),m(i,"class",l="btn "+o[7]),m(u,"type","submit"),m(u,"class",f="btn "+o[8]),m(n,"class",d="modal-footer "+o[11]),m(e,"class","space-y-4")},m(E,S){C(E,e,S),v(e,r),r.autofocus&&r.focus(),tn(r,o[13]),v(e,t),v(e,n),v(n,i),v(i,s),v(n,a),v(n,u),v(u,c),h||(p=[W(r,"input",o[39]),W(i,"click",o[21]),W(e,"submit",o[23])],h=!0)},p(E,S){en(r,b=ci(y,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},S[0]&4096&&E[12][0].valueAttr])),S[0]&8192&&r.value!==E[13]&&tn(r,E[13]),S[0]&1&&N(s,E[0]),S[0]&128&&l!==(l="btn "+E[7])&&m(i,"class",l),S[0]&4&&N(c,E[2]),S[0]&256&&f!==(f="btn "+E[8])&&m(u,"class",f),S[0]&2048&&d!==(d="modal-footer "+E[11])&&m(n,"class",d)},d(E){E&&_(e),h=!1,Te(p)}}}function Ts(o){let e,r,t,n,i,s,l,a,u,c,f;return{c(){e=g("footer"),r=g("button"),t=O(o[0]),i=j(),s=g("button"),l=O(o[1]),this.h()},l(d){e=k(d,"FOOTER",{class:!0});var h=w(e);r=k(h,"BUTTON",{type:!0,class:!0});var p=w(r);t=I(p,o[0]),p.forEach(_),i=U(h),s=k(h,"BUTTON",{type:!0,class:!0});var y=w(s);l=I(y,o[1]),y.forEach(_),h.forEach(_),this.h()},h(){m(r,"type","button"),m(r,"class",n="btn "+o[7]),m(s,"type","button"),m(s,"class",a="btn "+o[8]),m(e,"class",u="modal-footer "+o[11])},m(d,h){C(d,e,h),v(e,r),v(r,t),v(e,i),v(e,s),v(s,l),c||(f=[W(r,"click",o[21]),W(s,"click",o[22])],c=!0)},p(d,h){h[0]&1&&N(t,d[0]),h[0]&128&&n!==(n="btn "+d[7])&&m(r,"class",n),h[0]&2&&N(l,d[1]),h[0]&256&&a!==(a="btn "+d[8])&&m(s,"class",a),h[0]&2048&&u!==(u="modal-footer "+d[11])&&m(e,"class",u)},d(d){d&&_(e),c=!1,Te(f)}}}function Ms(o){let e,r,t,n,i,s,l;return{c(){e=g("footer"),r=g("button"),t=O(o[0]),this.h()},l(a){e=k(a,"FOOTER",{class:!0});var u=w(e);r=k(u,"BUTTON",{type:!0,class:!0});var c=w(r);t=I(c,o[0]),c.forEach(_),u.forEach(_),this.h()},h(){m(r,"type","button"),m(r,"class",n="btn "+o[7]),m(e,"class",i="modal-footer "+o[11])},m(a,u){C(a,e,u),v(e,r),v(r,t),s||(l=W(r,"click",o[21]),s=!0)},p(a,u){u[0]&1&&N(t,a[0]),u[0]&128&&n!==(n="btn "+a[7])&&m(r,"class",n),u[0]&2048&&i!==(i="modal-footer "+a[11])&&m(e,"class",i)},d(a){a&&_(e),s=!1,l()}}}function dn(o){let e,r,t,n,i,s,l,a,u,c,f;const d=[qs,Ps],h=[];function p(y,b){return y[12][0].type!=="component"?0:1}return t=p(o),n=h[t]=d[t](o),{c(){e=g("div"),r=g("div"),n.c(),this.h()},l(y){e=k(y,"DIV",{class:!0,"data-testid":!0});var b=w(e);r=k(b,"DIV",{class:!0});var E=w(r);n.l(E),E.forEach(_),b.forEach(_),this.h()},h(){m(r,"class",i="modal-transition "+o[17]),m(e,"class",l="modal-backdrop "+o[18]),m(e,"data-testid","modal-backdrop")},m(y,b){C(y,e,b),v(e,r),h[t].m(r,null),u=!0,c||(f=[W(e,"mousedown",o[19]),W(e,"mouseup",o[20]),W(e,"touchstart",o[37]),W(e,"touchend",o[38]),as(Cs.call(null,e,!0))],c=!0)},p(y,b){o=y;let E=t;t=p(o),t===E?h[t].p(o,b):(ue(),V(h[E],1,1,()=>{h[E]=null}),ce(),n=h[t],n?n.p(o,b):(n=h[t]=d[t](o),n.c()),L(n,1),n.m(r,null)),(!u||b[0]&131072&&i!==(i="modal-transition "+o[17]))&&m(r,"class",i),(!u||b[0]&262144&&l!==(l="modal-backdrop "+o[18]))&&m(e,"class",l)},i(y){u||(L(n),mr(()=>{u&&(s||(s=We(r,Bt,{duration:o[3],opacity:o[4],x:o[5],y:o[6]},!0)),s.run(1))}),mr(()=>{u&&(a||(a=We(e,rn,{duration:o[3]},!0)),a.run(1))}),u=!0)},o(y){V(n),s||(s=We(r,Bt,{duration:o[3],opacity:o[4],x:o[5],y:o[6]},!1)),s.run(0),a||(a=We(e,rn,{duration:o[3]},!1)),a.run(0),u=!1},d(y){y&&_(e),h[t].d(),y&&s&&s.end(),y&&a&&a.end(),c=!1,Te(f)}}}function Ls(o){let e,r,t,n,i=o[12].length>0&&an(o);return{c(){i&&i.c(),e=Y()},l(s){i&&i.l(s),e=Y()},m(s,l){i&&i.m(s,l),C(s,e,l),r=!0,t||(n=W(window,"keydown",o[24]),t=!0)},p(s,l){s[12].length>0?i?(i.p(s,l),l[0]&4096&&L(i,1)):(i=an(s),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(ue(),V(i,1,1,()=>{i=null}),ce())},i(s){r||(L(i),r=!0)},o(s){V(i),r=!1},d(s){i&&i.d(s),s&&_(e),t=!1,n()}}}const As="fixed top-0 left-0 right-0 bottom-0",Ns="w-full h-full p-4 overflow-y-auto flex justify-center",js="block",Us="w-full h-auto";function Vs(o,e,r){let t,n,i,s,l,a;Ee(o,ye,B=>r(12,a=B));const u=ss();let{position:c="items-center"}=e,{components:f={}}=e,{duration:d=150}=e,{flyOpacity:h=0}=e,{flyX:p=0}=e,{flyY:y=100}=e,{background:b="bg-surface-100-800-token"}=e,{width:E="w-modal"}=e,{height:S="h-auto"}=e,{padding:q="p-4"}=e,{spacing:T="space-y-4"}=e,{rounded:K="rounded-container-token"}=e,{shadow:P="shadow-xl"}=e,{zIndex:A="z-[999]"}=e,{buttonNeutral:M="variant-ghost-surface"}=e,{buttonPositive:R="variant-filled"}=e,{buttonTextCancel:J="Cancel"}=e,{buttonTextConfirm:X="Confirm"}=e,{buttonTextSubmit:G="Submit"}=e,{regionBackdrop:ne="bg-surface-backdrop-token"}=e,{regionHeader:de="text-2xl font-bold"}=e,{regionBody:D="max-h-[200px] overflow-hidden"}=e,{regionFooter:$="flex justify-end space-x-2"}=e,F;const Z={buttonTextCancel:J,buttonTextConfirm:X,buttonTextSubmit:G};let re,oe=!1;ye.subscribe(B=>{B.length&&(B[0].type==="prompt"&&r(13,F=B[0].value),r(0,J=B[0].buttonTextCancel||Z.buttonTextCancel),r(1,X=B[0].buttonTextConfirm||Z.buttonTextConfirm),r(2,G=B[0].buttonTextSubmit||Z.buttonTextSubmit),r(14,re=typeof B[0].component=="string"?f[B[0].component]:B[0].component))});function z(B){if(!(B.target instanceof Element))return;const ve=B.target.classList;(ve.contains("modal-backdrop")||ve.contains("modal-transition"))&&(oe=!0)}function ee(B){if(!(B.target instanceof Element))return;const ve=B.target.classList;(ve.contains("modal-backdrop")||ve.contains("modal-transition"))&&oe&&(a[0].response&&a[0].response(void 0),ye.close(),u("backdrop",B)),oe=!1}function te(){a[0].response&&a[0].response(!1),ye.close()}function pe(){a[0].response&&a[0].response(!0),ye.close()}function be(B){B.preventDefault(),a[0].response&&a[0].response(F),ye.close()}function Ne(B){a.length&&B.code==="Escape"&&te()}function $e(B){Zr.call(this,o,B)}function he(B){Zr.call(this,o,B)}function Se(){F=this.value,r(13,F)}return o.$$set=B=>{r(43,e=$t($t({},e),Xr(B))),"position"in B&&r(25,c=B.position),"components"in B&&r(26,f=B.components),"duration"in B&&r(3,d=B.duration),"flyOpacity"in B&&r(4,h=B.flyOpacity),"flyX"in B&&r(5,p=B.flyX),"flyY"in B&&r(6,y=B.flyY),"background"in B&&r(27,b=B.background),"width"in B&&r(28,E=B.width),"height"in B&&r(29,S=B.height),"padding"in B&&r(30,q=B.padding),"spacing"in B&&r(31,T=B.spacing),"rounded"in B&&r(32,K=B.rounded),"shadow"in B&&r(33,P=B.shadow),"zIndex"in B&&r(34,A=B.zIndex),"buttonNeutral"in B&&r(7,M=B.buttonNeutral),"buttonPositive"in B&&r(8,R=B.buttonPositive),"buttonTextCancel"in B&&r(0,J=B.buttonTextCancel),"buttonTextConfirm"in B&&r(1,X=B.buttonTextConfirm),"buttonTextSubmit"in B&&r(2,G=B.buttonTextSubmit),"regionBackdrop"in B&&r(35,ne=B.regionBackdrop),"regionHeader"in B&&r(9,de=B.regionHeader),"regionBody"in B&&r(10,D=B.regionBody),"regionFooter"in B&&r(11,$=B.regionFooter)},o.$$.update=()=>{var B,ve,Be;o.$$.dirty[0]&33558528&&r(36,t=((B=a[0])==null?void 0:B.position)??c),r(18,n=`${As} ${ne} ${A} ${e.class??""} ${((ve=a[0])==null?void 0:ve.backdropClasses)??""}`),o.$$.dirty[1]&32&&r(17,i=`${Ns} ${t??""}`),o.$$.dirty[0]&2013270016|o.$$.dirty[1]&7&&r(16,s=`${js} ${b} ${E} ${S} ${q} ${T} ${K} ${P} ${((Be=a[0])==null?void 0:Be.modalClasses)??""}`),o.$$.dirty[0]&2046824447|o.$$.dirty[1]&23&&r(15,l={position:c,duration:d,flyOpacity:h,flyX:p,flyY:y,background:b,width:E,height:S,padding:q,spacing:T,rounded:K,shadow:P,buttonNeutral:M,buttonPositive:R,buttonTextCancel:J,buttonTextConfirm:X,buttonTextSubmit:G,regionBackdrop:ne,regionHeader:de,regionBody:D,regionFooter:$,onClose:te})},e=Xr(e),[J,X,G,d,h,p,y,M,R,de,D,$,a,F,re,l,s,i,n,z,ee,te,pe,be,Ne,c,f,b,E,S,q,T,K,P,A,ne,t,$e,he,Se]}class nd extends Oe{constructor(e){super(),Ie(this,e,Vs,Ls,we,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */const Cr=Gt();function me(o){return typeof o=="function"}function Fs(o){var e=function(t){Error.call(t),t.stack=new Error().stack},r=o(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var nr=Fs(function(o){return function(r){o(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function hn(o,e){if(o){var r=o.indexOf(e);0<=r&&o.splice(r,1)}}var Pr=function(){function o(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return o.prototype.unsubscribe=function(){var e,r,t,n,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=yr(s),a=l.next();!a.done;a=l.next()){var u=a.value;u.remove(this)}}catch(y){e={error:y}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(me(c))try{c()}catch(y){i=y instanceof nr?y.errors:[y]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=yr(f),h=d.next();!h.done;h=d.next()){var p=h.value;try{_n(p)}catch(y){i=i??[],y instanceof nr?i=Qt(Qt([],Kt(i)),Kt(y.errors)):i.push(y)}}}catch(y){t={error:y}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}}if(i)throw new nr(i)}},o.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)_n(e);else{if(e instanceof o){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},o.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},o.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},o.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&hn(r,e)},o.prototype.remove=function(e){var r=this._finalizers;r&&hn(r,e),e instanceof o&&e._removeParent(this)},o.EMPTY=function(){var e=new o;return e.closed=!0,e}(),o}();Pr.EMPTY;function mi(o){return o instanceof Pr||o&&"closed"in o&&me(o.remove)&&me(o.add)&&me(o.unsubscribe)}function _n(o){me(o)?o():o.unsubscribe()}var yi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},br={setTimeout:function(o,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var n=br.delegate;return n!=null&&n.setTimeout?n.setTimeout.apply(n,Qt([o,e],Kt(r))):setTimeout.apply(void 0,Qt([o,e],Kt(r)))},clearTimeout:function(o){var e=br.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(o)},delegate:void 0};function bi(o){br.setTimeout(function(){throw o})}function pn(){}function $s(o){o()}var qr=function(o){Sr(e,o);function e(r){var t=o.call(this)||this;return t.isStopped=!1,r?(t.destination=r,mi(r)&&r.add(t)):t.destination=Ks,t}return e.create=function(r,t,n){return new gr(r,t,n)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Pr),Bs=Function.prototype.bind;function or(o,e){return Bs.call(o,e)}var Hs=function(){function o(e){this.partialObserver=e}return o.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(t){Mt(t)}},o.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(t){Mt(t)}else Mt(e)},o.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Mt(r)}},o}(),gr=function(o){Sr(e,o);function e(r,t,n){var i=o.call(this)||this,s;if(me(r)||!r)s={next:r??void 0,error:t??void 0,complete:n??void 0};else{var l;i&&yi.useDeprecatedNextContext?(l=Object.create(r),l.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&or(r.next,l),error:r.error&&or(r.error,l),complete:r.complete&&or(r.complete,l)}):s=r}return i.destination=new Hs(s),i}return e}(qr);function Mt(o){bi(o)}function Qs(o){throw o}var Ks={closed:!0,next:pn,error:Qs,complete:pn},Dr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function gi(o){return o}function Xt(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return ki(o)}function ki(o){return o.length===0?gi:o.length===1?o[0]:function(r){return o.reduce(function(t,n){return n(t)},r)}}var Me=function(){function o(e){e&&(this._subscribe=e)}return o.prototype.lift=function(e){var r=new o;return r.source=this,r.operator=e,r},o.prototype.subscribe=function(e,r,t){var n=this,i=Js(e)?e:new gr(e,r,t);return $s(function(){var s=n,l=s.operator,a=s.source;i.add(l?l.call(i,a):a?n._subscribe(i):n._trySubscribe(i))}),i},o.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},o.prototype.forEach=function(e,r){var t=this;return r=vn(r),new r(function(n,i){var s=new gr({next:function(l){try{e(l)}catch(a){i(a),s.unsubscribe()}},error:i,complete:n});t.subscribe(s)})},o.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},o.prototype[Dr]=function(){return this},o.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ki(e)(this)},o.prototype.toPromise=function(e){var r=this;return e=vn(e),new e(function(t,n){var i;r.subscribe(function(s){return i=s},function(s){return n(s)},function(){return t(i)})})},o.create=function(e){return new o(e)},o}();function vn(o){var e;return(e=o??yi.Promise)!==null&&e!==void 0?e:Promise}function Gs(o){return o&&me(o.next)&&me(o.error)&&me(o.complete)}function Js(o){return o&&o instanceof qr||Gs(o)&&mi(o)}function zs(o){return me(o==null?void 0:o.lift)}function Ge(o){return function(e){if(zs(e))return e.lift(function(r){try{return o(r,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(o,e,r,t,n){return new Ws(o,e,r,t,n)}var Ws=function(o){Sr(e,o);function e(r,t,n,i,s,l){var a=o.call(this,r)||this;return a.onFinalize=s,a.shouldUnsubscribe=l,a._next=t?function(u){try{t(u)}catch(c){r.error(c)}}:o.prototype._next,a._error=i?function(u){try{i(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:o.prototype._error,a._complete=n?function(){try{n()}catch(u){r.error(u)}finally{this.unsubscribe()}}:o.prototype._complete,a}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;o.prototype.unsubscribe.call(this),!t&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(qr);function Ys(o){return o&&me(o.schedule)}function Xs(o){return o[o.length-1]}function wi(o){return Ys(Xs(o))?o.pop():void 0}var Ei=function(o){return o&&typeof o.length=="number"&&typeof o!="function"};function Oi(o){return me(o==null?void 0:o.then)}function Ii(o){return me(o[Dr])}function Si(o){return Symbol.asyncIterator&&me(o==null?void 0:o[Symbol.asyncIterator])}function Ci(o){return new TypeError("You provided "+(o!==null&&typeof o=="object"?"an invalid object":"'"+o+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Zs(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pi=Zs();function qi(o){return me(o==null?void 0:o[Pi])}function Di(o){return Es(this,arguments,function(){var r,t,n,i;return vi(this,function(s){switch(s.label){case 0:r=o.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,rr(r.read())];case 3:return t=s.sent(),n=t.value,i=t.done,i?[4,rr(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,rr(n)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Ri(o){return me(o==null?void 0:o.getReader)}function Ot(o){if(o instanceof Me)return o;if(o!=null){if(Ii(o))return xs(o);if(Ei(o))return ea(o);if(Oi(o))return ta(o);if(Si(o))return Ti(o);if(qi(o))return ra(o);if(Ri(o))return na(o)}throw Ci(o)}function xs(o){return new Me(function(e){var r=o[Dr]();if(me(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ea(o){return new Me(function(e){for(var r=0;r<o.length&&!e.closed;r++)e.next(o[r]);e.complete()})}function ta(o){return new Me(function(e){o.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,bi)})}function ra(o){return new Me(function(e){var r,t;try{for(var n=yr(o),i=n.next();!i.done;i=n.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(l){r={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}e.complete()})}function Ti(o){return new Me(function(e){oa(o,e).catch(function(r){return e.error(r)})})}function na(o){return Ti(Di(o))}function oa(o,e){var r,t,n,i;return Os(this,void 0,void 0,function(){var s,l;return vi(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=Is(o),a.label=1;case 1:return[4,r.next()];case 2:if(t=a.sent(),!!t.done)return[3,4];if(s=t.value,e.next(s),e.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=a.sent(),n={error:l},[3,11];case 6:return a.trys.push([6,,9,10]),t&&!t.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ue(o,e,r,t,n){t===void 0&&(t=0),n===void 0&&(n=!1);var i=e.schedule(function(){r(),n?o.add(this.schedule(null,t)):this.unsubscribe()},t);if(o.add(i),!n)return i}function Mi(o,e){return e===void 0&&(e=0),Ge(function(r,t){r.subscribe(Ye(t,function(n){return Ue(t,o,function(){return t.next(n)},e)},function(){return Ue(t,o,function(){return t.complete()},e)},function(n){return Ue(t,o,function(){return t.error(n)},e)}))})}function Li(o,e){return e===void 0&&(e=0),Ge(function(r,t){t.add(o.schedule(function(){return r.subscribe(t)},e))})}function ia(o,e){return Ot(o).pipe(Li(e),Mi(e))}function sa(o,e){return Ot(o).pipe(Li(e),Mi(e))}function aa(o,e){return new Me(function(r){var t=0;return e.schedule(function(){t===o.length?r.complete():(r.next(o[t++]),r.closed||this.schedule())})})}function la(o,e){return new Me(function(r){var t;return Ue(r,e,function(){t=o[Pi](),Ue(r,e,function(){var n,i,s;try{n=t.next(),i=n.value,s=n.done}catch(l){r.error(l);return}s?r.complete():r.next(i)},0,!0)}),function(){return me(t==null?void 0:t.return)&&t.return()}})}function Ai(o,e){if(!o)throw new Error("Iterable cannot be null");return new Me(function(r){Ue(r,e,function(){var t=o[Symbol.asyncIterator]();Ue(r,e,function(){t.next().then(function(n){n.done?r.complete():r.next(n.value)})},0,!0)})})}function ua(o,e){return Ai(Di(o),e)}function ca(o,e){if(o!=null){if(Ii(o))return ia(o,e);if(Ei(o))return aa(o,e);if(Oi(o))return sa(o,e);if(Si(o))return Ai(o,e);if(qi(o))return la(o,e);if(Ri(o))return ua(o,e)}throw Ci(o)}function Ni(o,e){return e?ca(o,e):Ot(o)}function Rr(o,e){return Ge(function(r,t){var n=0;r.subscribe(Ye(t,function(i){t.next(o.call(e,i,n++))}))})}function fa(o,e,r,t,n,i,s,l){var a=[],u=0,c=0,f=!1,d=function(){f&&!a.length&&!u&&e.complete()},h=function(y){return u<t?p(y):a.push(y)},p=function(y){i&&e.next(y),u++;var b=!1;Ot(r(y,c++)).subscribe(Ye(e,function(E){n==null||n(E),i?h(E):e.next(E)},function(){b=!0},void 0,function(){if(b)try{u--;for(var E=function(){var S=a.shift();s?Ue(e,s,function(){return p(S)}):p(S)};a.length&&u<t;)E();d()}catch(S){e.error(S)}}))};return o.subscribe(Ye(e,h,function(){f=!0,d()})),function(){l==null||l()}}function ji(o,e,r){return r===void 0&&(r=1/0),me(e)?ji(function(t,n){return Rr(function(i,s){return e(t,i,n,s)})(Ot(o(t,n)))},r):(typeof e=="number"&&(r=e),Ge(function(t,n){return fa(t,n,o,r)}))}function da(o){return o===void 0&&(o=1/0),ji(gi,o)}function ha(){return da(1)}function mn(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return ha()(Ni(o,wi(o)))}function Ui(o,e){return Ge(function(r,t){var n=0;r.subscribe(Ye(t,function(i){return o.call(e,i,n++)&&t.next(i)}))})}function _a(o,e,r,t,n){return function(i,s){var l=r,a=e,u=0;i.subscribe(Ye(s,function(c){var f=u++;a=l?o(a,c,f):(l=!0,c),t&&s.next(a)},n&&function(){l&&s.next(a),s.complete()}))}}function pa(o,e){return Ge(_a(o,e,arguments.length>=2,!0))}function va(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var r=wi(o);return Ge(function(t,n){(r?mn(o,t,r):mn(o,t)).subscribe(n)})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function ma(o){return Ui(e=>e.event.id===o)}function ya(o){return Ui(e=>e.event.pubkey===o)}function ba(){return pa((o,e)=>[...o,e],[])}function ga(o){return Xt(ba(),Rr(e=>{const r=new Map;return e.forEach(t=>{const n=o(t),i=r.get(n);i?r.set(n,[...i,t]):r.set(n,[t])}),r}))}function ka(o){return Xt(ga(o),Rr(e=>Array.from(e.entries()).map(([,r])=>r.slice(-1)[0])))}class It{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Et=typeof window>"u"||"Deno"in window;function Ce(){}function wa(o,e){return typeof o=="function"?o(e):o}function kr(o){return typeof o=="number"&&o>=0&&o!==1/0}function Vi(o,e){return Math.max(o+(e||0)-Date.now(),0)}function kt(o,e,r){return Zt(o)?typeof e=="function"?{...r,queryKey:o,queryFn:e}:{...e,queryKey:o}:o}function je(o,e,r){return Zt(o)?[{...e,queryKey:o},r]:[o||{},e]}function yn(o,e){const{type:r="all",exact:t,fetchStatus:n,predicate:i,queryKey:s,stale:l}=o;if(Zt(s)){if(t){if(e.queryHash!==Tr(s,e.options))return!1}else if(!Jt(e.queryKey,s))return!1}if(r!=="all"){const a=e.isActive();if(r==="active"&&!a||r==="inactive"&&a)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof n<"u"&&n!==e.state.fetchStatus||i&&!i(e))}function bn(o,e){const{exact:r,fetching:t,predicate:n,mutationKey:i}=o;if(Zt(i)){if(!e.options.mutationKey)return!1;if(r){if(Qe(e.options.mutationKey)!==Qe(i))return!1}else if(!Jt(e.options.mutationKey,i))return!1}return!(typeof t=="boolean"&&e.state.status==="loading"!==t||n&&!n(e))}function Tr(o,e){return((e==null?void 0:e.queryKeyHashFn)||Qe)(o)}function Qe(o){return JSON.stringify(o,(e,r)=>wr(r)?Object.keys(r).sort().reduce((t,n)=>(t[n]=r[n],t),{}):r)}function Jt(o,e){return Fi(o,e)}function Fi(o,e){return o===e?!0:typeof o!=typeof e?!1:o&&e&&typeof o=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Fi(o[r],e[r])):!1}function $i(o,e){if(o===e)return o;const r=kn(o)&&kn(e);if(r||wr(o)&&wr(e)){const t=r?o.length:Object.keys(o).length,n=r?e:Object.keys(e),i=n.length,s=r?[]:{};let l=0;for(let a=0;a<i;a++){const u=r?a:n[a];s[u]=$i(o[u],e[u]),s[u]===o[u]&&l++}return t===i&&l===t?o:s}return e}function gn(o,e){if(o&&!e||e&&!o)return!1;for(const r in o)if(o[r]!==e[r])return!1;return!0}function kn(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function wr(o){if(!wn(o))return!1;const e=o.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!wn(r)||!r.hasOwnProperty("isPrototypeOf"))}function wn(o){return Object.prototype.toString.call(o)==="[object Object]"}function Zt(o){return Array.isArray(o)}function Bi(o){return new Promise(e=>{setTimeout(e,o)})}function En(o){Bi(0).then(o)}function Ea(){if(typeof AbortController=="function")return new AbortController}function Er(o,e,r){return r.isDataEqual!=null&&r.isDataEqual(o,e)?o:typeof r.structuralSharing=="function"?r.structuralSharing(o,e):r.structuralSharing!==!1?$i(o,e):e}class Oa extends It{constructor(){super(),this.setup=e=>{if(!Et&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const zt=new Oa,On=["online","offline"];class Ia extends It{constructor(){super(),this.setup=e=>{if(!Et&&window.addEventListener){const r=()=>e();return On.forEach(t=>{window.addEventListener(t,r,!1)}),()=>{On.forEach(t=>{window.removeEventListener(t,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setOnline(t):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Wt=new Ia;function Sa(o){return Math.min(1e3*2**o,3e4)}function xt(o){return(o??"online")==="online"?Wt.isOnline():!0}class Hi{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Ft(o){return o instanceof Hi}function Qi(o){let e=!1,r=0,t=!1,n,i,s;const l=new Promise((b,E)=>{i=b,s=E}),a=b=>{t||(h(new Hi(b)),o.abort==null||o.abort())},u=()=>{e=!0},c=()=>{e=!1},f=()=>!zt.isFocused()||o.networkMode!=="always"&&!Wt.isOnline(),d=b=>{t||(t=!0,o.onSuccess==null||o.onSuccess(b),n==null||n(),i(b))},h=b=>{t||(t=!0,o.onError==null||o.onError(b),n==null||n(),s(b))},p=()=>new Promise(b=>{n=E=>{const S=t||!f();return S&&b(E),S},o.onPause==null||o.onPause()}).then(()=>{n=void 0,t||o.onContinue==null||o.onContinue()}),y=()=>{if(t)return;let b;try{b=o.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(d).catch(E=>{var S,q;if(t)return;const T=(S=o.retry)!=null?S:3,K=(q=o.retryDelay)!=null?q:Sa,P=typeof K=="function"?K(r,E):K,A=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,E);if(e||!A){h(E);return}r++,o.onFail==null||o.onFail(r,E),Bi(P).then(()=>{if(f())return p()}).then(()=>{e?h(E):y()})})};return xt(o.networkMode)?y():p().then(y),{promise:l,cancel:a,continue:()=>(n==null?void 0:n())?l:Promise.resolve(),cancelRetry:u,continueRetry:c}}const Mr=console;function Ca(){let o=[],e=0,r=c=>{c()},t=c=>{c()};const n=c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},i=c=>{e?o.push(c):En(()=>{r(c)})},s=c=>(...f)=>{i(()=>{c(...f)})},l=()=>{const c=o;o=[],c.length&&En(()=>{t(()=>{c.forEach(f=>{r(f)})})})};return{batch:n,batchCalls:s,schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{t=c}}}const _e=Ca();class Ki{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kr(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Et?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Pa extends Ki{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Mr,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||qa(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const t=Er(this.state.data,e,this.options);return this.dispatch({data:t,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),t}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const t=this.promise;return(r=this.retryer)==null||r.cancel(e),t?t.then(Ce).catch(Ce):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Vi(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(t=>t.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(t=>t.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var t,n;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const s=Ea(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(s)return this.abortSignalConsumed=!0,s.signal}})};a(l);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(a(c),(t=this.options.behavior)==null||t.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((n=c.fetchOptions)==null?void 0:n.meta)){var f;this.dispatch({type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta})}const d=h=>{if(Ft(h)&&h.silent||this.dispatch({type:"error",error:h}),!Ft(h)){var p,y,b,E;(p=(y=this.cache.config).onError)==null||p.call(y,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Qi({fn:c.fetchFn,abort:s==null?void 0:s.abort.bind(s),onSuccess:h=>{var p,y,b,E;if(typeof h>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(p=(y=this.cache.config).onSuccess)==null||p.call(y,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(h,p)=>{this.dispatch({type:"failed",failureCount:h,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=t=>{var n,i;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(n=e.meta)!=null?n:null,fetchStatus:xt(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Ft(s)&&s.revert&&this.revertState?{...this.revertState}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function qa(o){const e=typeof o.initialData=="function"?o.initialData():o.initialData,r=typeof e<"u",t=r?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?t??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class Da extends It{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,t){var n;const i=r.queryKey,s=(n=r.queryHash)!=null?n:Tr(i,r);let l=this.get(s);return l||(l=new Pa({cache:this,logger:e.getLogger(),queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:t,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){_e.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[t]=je(e,r);return typeof t.exact>"u"&&(t.exact=!0),this.queries.find(n=>yn(t,n))}findAll(e,r){const[t]=je(e,r);return Object.keys(t).length>0?this.queries.filter(n=>yn(t,n)):this.queries}notify(e){_e.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){_e.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){_e.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Ra extends Ki{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Mr,this.observers=[],this.state=e.state||Ta(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var A;return this.retryer=Qi({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(M,R)=>{this.dispatch({type:"failed",failureCount:M,error:R})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(A=this.options.retry)!=null?A:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var t,n,i,s,l,a,u,c;if(!r){var f,d,h,p;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(d=this.mutationCache.config).onMutate)==null?void 0:f.call(d,this.state.variables,this));const M=await((h=(p=this.options).onMutate)==null?void 0:h.call(p,this.state.variables));M!==this.state.context&&this.dispatch({type:"loading",context:M,variables:this.state.variables})}const A=await e();return await((t=(n=this.mutationCache.config).onSuccess)==null?void 0:t.call(n,A,this.state.variables,this.state.context,this)),await((i=(s=this.options).onSuccess)==null?void 0:i.call(s,A,this.state.variables,this.state.context)),await((l=(a=this.mutationCache.config).onSettled)==null?void 0:l.call(a,A,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,A,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:A}),A}catch(A){try{var y,b,E,S,q,T,K,P;throw await((y=(b=this.mutationCache.config).onError)==null?void 0:y.call(b,A,this.state.variables,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,A,this.state.variables,this.state.context)),await((q=(T=this.mutationCache.config).onSettled)==null?void 0:q.call(T,void 0,A,this.state.variables,this.state.context,this)),await((K=(P=this.options).onSettled)==null?void 0:K.call(P,void 0,A,this.state.variables,this.state.context)),A}finally{this.dispatch({type:"error",error:A})}}}dispatch(e){const r=t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!xt(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Ta(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Ma extends It{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,t){const n=new Ra({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:t,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(n),n}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){_e.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>bn(e,r))}findAll(e){return this.mutations.filter(r=>bn(e,r))}notify(e){_e.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(t=>t.state.isPaused);return _e.batch(()=>r.reduce((t,n)=>t.then(()=>n.continue().catch(Ce)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function La(){return{onFetch:o=>{o.fetchFn=()=>{var e,r,t,n,i,s;const l=(e=o.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,a=(t=o.fetchOptions)==null||(n=t.meta)==null?void 0:n.fetchMore,u=a==null?void 0:a.pageParam,c=(a==null?void 0:a.direction)==="forward",f=(a==null?void 0:a.direction)==="backward",d=((i=o.state.data)==null?void 0:i.pages)||[],h=((s=o.state.data)==null?void 0:s.pageParams)||[];let p=h,y=!1;const b=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>{var A;if((A=o.signal)!=null&&A.aborted)y=!0;else{var M;(M=o.signal)==null||M.addEventListener("abort",()=>{y=!0})}return o.signal}})},E=o.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+o.options.queryHash+"'")),S=(P,A,M,R)=>(p=R?[A,...p]:[...p,A],R?[M,...P]:[...P,M]),q=(P,A,M,R)=>{if(y)return Promise.reject("Cancelled");if(typeof M>"u"&&!A&&P.length)return Promise.resolve(P);const J={queryKey:o.queryKey,pageParam:M,meta:o.options.meta};b(J);const X=E(J);return Promise.resolve(X).then(ne=>S(P,M,ne,R))};let T;if(!d.length)T=q([]);else if(c){const P=typeof u<"u",A=P?u:In(o.options,d);T=q(d,P,A)}else if(f){const P=typeof u<"u",A=P?u:Aa(o.options,d);T=q(d,P,A,!0)}else{p=[];const P=typeof o.options.getNextPageParam>"u";T=(l&&d[0]?l(d[0],0,d):!0)?q([],P,h[0]):Promise.resolve(S([],h[0],d[0]));for(let M=1;M<d.length;M++)T=T.then(R=>{if(l&&d[M]?l(d[M],M,d):!0){const X=P?h[M]:In(o.options,R);return q(R,P,X)}return Promise.resolve(S(R,h[M],d[M]))})}return T.then(P=>({pages:P,pageParams:p}))}}}}function In(o,e){return o.getNextPageParam==null?void 0:o.getNextPageParam(e[e.length-1],e)}function Aa(o,e){return o.getPreviousPageParam==null?void 0:o.getPreviousPageParam(e[0],e)}class Gi{constructor(e={}){this.queryCache=e.queryCache||new Da,this.mutationCache=e.mutationCache||new Ma,this.logger=e.logger||Mr,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=zt.subscribe(()=>{zt.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Wt.subscribe(()=>{Wt.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[t]=je(e,r);return t.fetchStatus="fetching",this.queryCache.findAll(t).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state.data}ensureQueryData(e,r,t){const n=kt(e,r,t),i=this.getQueryData(n.queryKey);return i?Promise.resolve(i):this.fetchQuery(n)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:t})=>{const n=t.data;return[r,n]})}setQueryData(e,r,t){const n=this.queryCache.find(e),i=n==null?void 0:n.state.data,s=wa(r,i);if(typeof s>"u")return;const l=kt(e),a=this.defaultQueryOptions(l);return this.queryCache.build(this,a).setData(s,{...t,manual:!0})}setQueriesData(e,r,t){return _e.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,r,t)]))}getQueryState(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state}removeQueries(e,r){const[t]=je(e,r),n=this.queryCache;_e.batch(()=>{n.findAll(t).forEach(i=>{n.remove(i)})})}resetQueries(e,r,t){const[n,i]=je(e,r,t),s=this.queryCache,l={type:"active",...n};return _e.batch(()=>(s.findAll(n).forEach(a=>{a.reset()}),this.refetchQueries(l,i)))}cancelQueries(e,r,t){const[n,i={}]=je(e,r,t);typeof i.revert>"u"&&(i.revert=!0);const s=_e.batch(()=>this.queryCache.findAll(n).map(l=>l.cancel(i)));return Promise.all(s).then(Ce).catch(Ce)}invalidateQueries(e,r,t){const[n,i]=je(e,r,t);return _e.batch(()=>{var s,l;if(this.queryCache.findAll(n).forEach(u=>{u.invalidate()}),n.refetchType==="none")return Promise.resolve();const a={...n,type:(s=(l=n.refetchType)!=null?l:n.type)!=null?s:"active"};return this.refetchQueries(a,i)})}refetchQueries(e,r,t){const[n,i]=je(e,r,t),s=_e.batch(()=>this.queryCache.findAll(n).filter(a=>!a.isDisabled()).map(a=>{var u;return a.fetch(void 0,{...i,cancelRefetch:(u=i==null?void 0:i.cancelRefetch)!=null?u:!0,meta:{refetchPage:n.refetchPage}})}));let l=Promise.all(s).then(Ce);return i!=null&&i.throwOnError||(l=l.catch(Ce)),l}fetchQuery(e,r,t){const n=kt(e,r,t),i=this.defaultQueryOptions(n);typeof i.retry>"u"&&(i.retry=!1);const s=this.queryCache.build(this,i);return s.isStaleByTime(i.staleTime)?s.fetch(i):Promise.resolve(s.state.data)}prefetchQuery(e,r,t){return this.fetchQuery(e,r,t).then(Ce).catch(Ce)}fetchInfiniteQuery(e,r,t){const n=kt(e,r,t);return n.behavior=La(),this.fetchQuery(n)}prefetchInfiniteQuery(e,r,t){return this.fetchInfiniteQuery(e,r,t).then(Ce).catch(Ce)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const t=this.queryDefaults.find(n=>Qe(e)===Qe(n.queryKey));t?t.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(t=>Jt(e,t.queryKey));return r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const t=this.mutationDefaults.find(n=>Qe(e)===Qe(n.mutationKey));t?t.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(t=>Jt(e,t.mutationKey));return r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=Tr(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class Na extends It{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Sn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Or(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Or(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const t=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),gn(t,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=t.queryKey),this.updateQuery();const i=this.hasListeners();i&&Cn(this.currentQuery,n,this.options,t)&&this.executeFetch(),this.updateResult(r),i&&(this.currentQuery!==n||this.options.enabled!==t.enabled||this.options.staleTime!==t.staleTime)&&this.updateStaleTimeout();const s=this.computeRefetchInterval();i&&(this.currentQuery!==n||this.options.enabled!==t.enabled||s!==this.currentRefetchInterval)&&this.updateRefetchInterval(s)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),t=this.createResult(r,e);return Ua(this,t,e)&&(this.currentResult=t,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),t}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(t=>{Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(t),e[t])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),t=this.client.getQueryCache().build(this.client,r);return t.isFetchingOptimistic=!0,t.fetch().then(()=>this.createResult(t,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Ce)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Et||this.currentResult.isStale||!kr(this.options.staleTime))return;const r=Vi(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Et||this.options.enabled===!1||!kr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||zt.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const t=this.currentQuery,n=this.options,i=this.currentResult,s=this.currentResultState,l=this.currentResultOptions,a=e!==t,u=a?e.state:this.currentQueryInitialState,c=a?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:d,error:h,errorUpdatedAt:p,fetchStatus:y,status:b}=f,E=!1,S=!1,q;if(r._optimisticResults){const M=this.hasListeners(),R=!M&&Sn(e,r),J=M&&Cn(e,t,r,n);(R||J)&&(y=xt(e.options.networkMode)?"fetching":"paused",d||(b="loading")),r._optimisticResults==="isRestoring"&&(y="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&c!=null&&c.isSuccess&&b!=="error")q=c.data,d=c.dataUpdatedAt,b=c.status,E=!0;else if(r.select&&typeof f.data<"u")if(i&&f.data===(s==null?void 0:s.data)&&r.select===this.selectFn)q=this.selectResult;else try{this.selectFn=r.select,q=r.select(f.data),q=Er(i==null?void 0:i.data,q,r),this.selectResult=q,this.selectError=null}catch(M){this.selectError=M}else q=f.data;if(typeof r.placeholderData<"u"&&typeof q>"u"&&b==="loading"){let M;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))M=i.data;else if(M=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof M<"u")try{M=r.select(M),this.selectError=null}catch(R){this.selectError=R}typeof M<"u"&&(b="success",q=Er(i==null?void 0:i.data,M,r),S=!0)}this.selectError&&(h=this.selectError,q=this.selectResult,p=Date.now(),b="error");const T=y==="fetching",K=b==="loading",P=b==="error";return{status:b,fetchStatus:y,isLoading:K,isSuccess:b==="success",isError:P,isInitialLoading:K&&T,data:q,dataUpdatedAt:d,error:h,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!K,isLoadingError:P&&f.dataUpdatedAt===0,isPaused:y==="paused",isPlaceholderData:S,isPreviousData:E,isRefetchError:P&&f.dataUpdatedAt!==0,isStale:Lr(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,t=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,gn(t,r))return;this.currentResult=t;const n={cache:!0},i=()=>{if(!r)return!0;const{notifyOnChangeProps:s}=this.options,l=typeof s=="function"?s():s;if(l==="all"||!l&&!this.trackedProps.size)return!0;const a=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==r[c]&&a.has(c)})};(e==null?void 0:e.listeners)!==!1&&i()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!Ft(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){_e.batch(()=>{if(e.onSuccess){var r,t,n,i;(r=(t=this.options).onSuccess)==null||r.call(t,this.currentResult.data),(n=(i=this.options).onSettled)==null||n.call(i,this.currentResult.data,null)}else if(e.onError){var s,l,a,u;(s=(l=this.options).onError)==null||s.call(l,this.currentResult.error),(a=(u=this.options).onSettled)==null||a.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function ja(o,e){return e.enabled!==!1&&!o.state.dataUpdatedAt&&!(o.state.status==="error"&&e.retryOnMount===!1)}function Sn(o,e){return ja(o,e)||o.state.dataUpdatedAt>0&&Or(o,e,e.refetchOnMount)}function Or(o,e,r){if(e.enabled!==!1){const t=typeof r=="function"?r(o):r;return t==="always"||t!==!1&&Lr(o,e)}return!1}function Cn(o,e,r,t){return r.enabled!==!1&&(o!==e||t.enabled===!1)&&(!r.suspense||o.state.status!=="error")&&Lr(o,r)}function Lr(o,e){return o.isStaleByTime(e.staleTime)}function Ua(o,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:o.getCurrentResult()!==e}const Ji="$$_queryClient",Va=()=>{const o=ds(Ji);if(!o)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return o},Fa=o=>{fs(Ji,o)};function zi(){return Va()}function $a(o,e){const r=zi(),t=r.defaultQueryOptions(o);t._optimisticResults="optimistic";let n=new e(r,t);t.onError&&(t.onError=_e.batchCalls(t.onError)),t.onSuccess&&(t.onSuccess=_e.batchCalls(t.onSuccess)),t.onSettled&&(t.onSettled=_e.batchCalls(t.onSettled)),wt(n).subscribe(l=>{n=l,n.setOptions(t,{listeners:!1})});const i=wt(n.getCurrentResult(),l=>n.subscribe(_e.batchCalls(l))),{subscribe:s}=Vt(i,l=>(l=n.getOptimisticResult(t),t.notifyOnChangeProps?l:n.trackResult(l)));return{subscribe:s}}function Ba(o,e,r){const t=kt(o,e,r);return $a(t,Na)}function Ha(o){let e;const r=o[2].default,t=Pe(r,o,o[1],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,[i]){t&&t.p&&(!e||i&2)&&qe(t,r,n,n[1],e?Re(r,n[1],i,null):De(n[1]),null)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function Qa(o,e,r){let{$$slots:t={},$$scope:n}=e,{client:i=new Gi}=e;return hs(()=>{i.mount()}),Fa(i),fi(()=>{i.unmount()}),o.$$set=s=>{"client"in s&&r(0,i=s.client),"$$scope"in s&&r(1,n=s.$$scope)},[i,n,t]}class Ka extends Oe{constructor(e){super(),Ie(this,e,Qa,Ha,we,{client:0})}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Wi({rxNostr:o,queryKey:e,filters:r,operator:t,req:n,initData:i}){const s=zi();if(o.getRelays().length===0)return s.setQueryData(e,i),{data:wt(i),status:wt("success"),error:wt()};let l;n?(n.emit(r),l=n):l=di({filters:r});const a=Gt("loading"),u=Gt(void 0),c=o.use(l).pipe(t),f=Ba(e,()=>new Promise((d,h)=>{let p=!1;c.subscribe({next:y=>{p?s.setQueryData(e,y):(d(y),p=!0)},complete:()=>a.set("success"),error:y=>{console.error(y),a.set("error"),u.set(y),p||(h(y),p=!0)}})}));return{data:Vt(f,d=>d.data,i),status:Vt([f,a],([d,h])=>d.isSuccess?"success":d.isError?"error":h),error:Vt([f,u],([d,h])=>d.isError?d.error:h)}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Ga({rxNostr:o,relays:e}){if(e.length===0)return Ni([[]]);const r=e.map(t=>{const n=typeof t=="string"?t:t.url,i=o.hasRelay(n)?o.getRelayState(n):"not-started";return{from:n,state:i}});return o.createConnectionStateObservable().pipe(va(...r),ka(({from:t})=>t))}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Ja(o,e,r,t,n){const i=[{kinds:[t],authors:[r],limit:1}],s=Xt(ps(t),ya(r),hi(),_s());return Wi({rxNostr:o,queryKey:e,filters:i,operator:s,req:n})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function za(o,e,r,t){const n=[{ids:[r],limit:1}],i=Xt(ma(r),vs(),hi());return Wi({rxNostr:o,queryKey:e,filters:n,operator:i,req:t})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Wa(o,e,r,t){return Ja(o,e,r,ms.Kind.Metadata,t)}const Ya=o=>({metadata:o&16,status:o&32}),Pn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},Xa=o=>({metadata:o&16,status:o&32}),qn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},Za=o=>({metadata:o&16,status:o&32}),Dn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},xa=o=>({error:o&8,metadata:o&16,status:o&32}),Rn=o=>{var e;return{error:o[3],metadata:(e=o[4])==null?void 0:e.event,status:o[5]}};function el(o){let e;const r=o[12].nodata,t=Pe(r,o,o[11],Pn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,Ya):De(n[11]),Pn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function tl(o){let e;const r=o[12].loading,t=Pe(r,o,o[11],qn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,Xa):De(n[11]),qn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function rl(o){let e;const r=o[12].default,t=Pe(r,o,o[11],Dn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,Za):De(n[11]),Dn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function nl(o){let e;const r=o[12].error,t=Pe(r,o,o[11],Rn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2104)&&qe(t,r,n,n[11],e?Re(r,n[11],i,xa):De(n[11]),Rn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function ol(o){let e,r,t,n;const i=[nl,rl,tl,el],s=[];function l(a,u){return a[3]?0:a[4]?1:a[5]==="loading"?2:3}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,[u]){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function il(o,e,r){let t,n,i,s,l,a,u=Q,c=()=>(u(),u=Ke(s,P=>r(3,a=P)),s),f,d=Q,h=()=>(d(),d=Ke(n,P=>r(4,f=P)),n),p,y=Q,b=()=>(y(),y=Ke(i,P=>r(5,p=P)),i);Ee(o,Cr,P=>r(10,l=P)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>y());let{$$slots:E={},$$scope:S}=e,{queryKey:q}=e,{pubkey:T}=e,{req:K=void 0}=e;return o.$$set=P=>{"queryKey"in P&&r(6,q=P.queryKey),"pubkey"in P&&r(7,T=P.pubkey),"req"in P&&r(8,K=P.req),"$$scope"in P&&r(11,S=P.$$scope)},o.$$.update=()=>{o.$$.dirty&1472&&r(9,t=Wa(l.rxNostr,q,T,K)),o.$$.dirty&512&&h(r(2,n=t.data)),o.$$.dirty&512&&b(r(1,i=t.status)),o.$$.dirty&512&&c(r(0,s=t.error))},[s,i,n,a,f,p,q,T,K,t,l,S,E]}class Le extends Oe{constructor(e){super(),Ie(this,e,il,ol,we,{queryKey:6,pubkey:7,req:8})}}const sl=o=>({connections:o&4}),Tn=o=>({connections:o[2]});function al(o){let e;const r=o[6].default,t=Pe(r,o,o[7],Tn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&132)&&qe(t,r,n,n[7],e?Re(r,n[7],i,sl):De(n[7]),Tn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function ll(o){let e,r;return e=new Ka({props:{client:o[0],$$slots:{default:[al]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,[n]){const i={};n&1&&(i.client=t[0]),n&132&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function ul(o,e,r){let t,n,i,s,l=Q,a=()=>(l(),l=Ke(t,y=>r(2,s=y)),t);o.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:c}=e,{queryClientConfig:f={}}=e,{relays:d=[]}=e;const h=_i(),p={defaultOptions:{queries:{staleTime:1e3*60,refetchInterval:1/0}}};return fi(()=>{h.dispose()}),o.$$set=y=>{"queryClientConfig"in y&&r(3,f=y.queryClientConfig),"relays"in y&&r(4,d=y.relays),"$$scope"in y&&r(7,c=y.$$scope)},o.$$.update=()=>{o.$$.dirty&16&&a(r(1,t=Ga({rxNostr:h,relays:d}))),o.$$.dirty&8&&r(5,n={...p,...f}),o.$$.dirty&32&&r(0,i=new Gi(n)),o.$$.dirty&16&&(h.setRelays(d),Cr.set({rxNostr:h}))},[i,t,s,f,d,n,u,c]}class od extends Oe{constructor(e){super(),Ie(this,e,ul,ll,we,{queryClientConfig:3,relays:4})}}const cl=o=>({text:o&16,status:o&32}),Mn=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},fl=o=>({text:o&16,status:o&32}),Ln=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},dl=o=>({text:o&16,status:o&32}),An=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},hl=o=>({error:o&8,text:o&16,status:o&32}),Nn=o=>{var e;return{error:o[3],text:(e=o[4])==null?void 0:e.event,status:o[5]}};function _l(o){let e;const r=o[12].nodata,t=Pe(r,o,o[11],Mn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,cl):De(n[11]),Mn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function pl(o){let e;const r=o[12].loading,t=Pe(r,o,o[11],Ln);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,fl):De(n[11]),Ln)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function vl(o){let e;const r=o[12].default,t=Pe(r,o,o[11],An);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2096)&&qe(t,r,n,n[11],e?Re(r,n[11],i,dl):De(n[11]),An)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function ml(o){let e;const r=o[12].error,t=Pe(r,o,o[11],Nn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,i){t&&t.m(n,i),e=!0},p(n,i){t&&t.p&&(!e||i&2104)&&qe(t,r,n,n[11],e?Re(r,n[11],i,hl):De(n[11]),Nn)},i(n){e||(L(t,n),e=!0)},o(n){V(t,n),e=!1},d(n){t&&t.d(n)}}}function yl(o){let e,r,t,n;const i=[ml,vl,pl,_l],s=[];function l(a,u){return a[3]?0:a[4]?1:a[5]==="loading"?2:3}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,[u]){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function bl(o,e,r){let t,n,i,s,l,a,u=Q,c=()=>(u(),u=Ke(s,P=>r(3,a=P)),s),f,d=Q,h=()=>(d(),d=Ke(n,P=>r(4,f=P)),n),p,y=Q,b=()=>(y(),y=Ke(i,P=>r(5,p=P)),i);Ee(o,Cr,P=>r(10,l=P)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>y());let{$$slots:E={},$$scope:S}=e,{queryKey:q}=e,{id:T}=e,{req:K=void 0}=e;return o.$$set=P=>{"queryKey"in P&&r(6,q=P.queryKey),"id"in P&&r(7,T=P.id),"req"in P&&r(8,K=P.req),"$$scope"in P&&r(11,S=P.$$scope)},o.$$.update=()=>{o.$$.dirty&1472&&r(9,t=za(l.rxNostr,q,T,K)),o.$$.dirty&512&&h(r(2,n=t.data)),o.$$.dirty&512&&b(r(1,i=t.status)),o.$$.dirty&512&&c(r(0,s=t.error))},[s,i,n,a,f,p,q,T,K,t,l,S,E]}class St extends Oe{constructor(e){super(),Ie(this,e,bl,yl,we,{queryKey:6,id:7,req:8})}}var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.is_node=void 0;var ir=null;function gl(){return ir===null&&(ir=typeof H=="object"&&typeof H.process=="object"&&typeof H.process.versions=="object"&&typeof H.process.versions.node<"u"),ir}Ct.is_node=gl;var sr={},ar,jn;function kl(){if(jn)return ar;jn=1;var o=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return ar=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return o()}try{return __global__||o()}finally{delete Object.prototype.__global__}}(),ar}const wl="websocket",El="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ol=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Il="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Sl=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Cl="1.0.34",Pl={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ql="https://github.com/theturtle32/WebSocket-Node",Dl={node:">=4.0.0"},Rl={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Tl={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ml={verbose:!1},Ll={test:"tape test/unit/*.js",gulp:"gulp"},Al="index",Nl={lib:"./lib"},jl="lib/browser.js",Ul="Apache-2.0",Vl={name:wl,description:El,keywords:Ol,author:Il,contributors:Sl,version:Cl,repository:Pl,homepage:ql,engines:Dl,dependencies:Rl,devDependencies:Tl,config:Ml,scripts:Ll,main:Al,directories:Nl,browser:jl,license:Ul};var lr,Un;function Fl(){return Un||(Un=1,lr=Vl.version),lr}var ur,Vn;function $l(){if(Vn)return ur;Vn=1;var o;if(typeof globalThis=="object")o=globalThis;else try{o=kl()}catch{}finally{if(!o&&typeof window<"u"&&(o=window),!o)throw new Error("Could not determine global this")}var e=o.WebSocket||o.MozWebSocket,r=Fl();function t(n,i){var s;return i?s=new e(n,i):s=new e(n),s}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]}})}),ur={w3cwebsocket:e?t:null,version:r},ur}var Lt={},cr={},xe={},et={},tt={},rt={},Fn;function Bl(){if(Fn)return rt;Fn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.ForOfAdaptor=void 0;var o=function(){function e(r,t){this.it_=r,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var r=this.it_;return this.it_=this.it_.next(),{done:!1,value:r.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return rt.ForOfAdaptor=o,rt}var $n;function Ar(){if($n)return tt;$n=1;var o=H&&H.__values||function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(tt,"__esModule",{value:!0}),tt.Container=void 0;var e=Bl(),r=function(){function t(){}return t.prototype.empty=function(){return this.size()===0},t.prototype.rbegin=function(){return this.end().reverse()},t.prototype.rend=function(){return this.begin().reverse()},t.prototype[Symbol.iterator]=function(){return new e.ForOfAdaptor(this.begin(),this.end())},t.prototype.toJSON=function(){var n,i,s=[];try{for(var l=o(this),a=l.next();!a.done;a=l.next()){var u=a.value;s.push(u)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return s},t}();return tt.Container=r,tt}var nt={},Bn;function Nr(){if(Bn)return nt;Bn=1;var o=H&&H.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var i=n.call(r),s,l=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)l.push(s.value)}catch(u){a={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return l};Object.defineProperty(nt,"__esModule",{value:!0}),nt.NativeArrayIterator=void 0;var e=function(){function r(t,n){this.data_=t,this.index_=n}return r.prototype.index=function(){return this.index_},Object.defineProperty(r.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),r.prototype.prev=function(){return--this.index_,this},r.prototype.next=function(){return++this.index_,this},r.prototype.advance=function(t){return this.index_+=t,this},r.prototype.equals=function(t){return this.data_===t.data_&&this.index_===t.index_},r.prototype.swap=function(t){var n,i;n=o([t.data_,this.data_],2),this.data_=n[0],t.data_=n[1],i=o([t.index_,this.index_],2),this.index_=i[0],t.index_=i[1]},r}();return nt.NativeArrayIterator=e,nt}var Hn;function Hl(){if(Hn)return et;Hn=1;var o=H&&H.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},n(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");n(i,s);function l(){this.constructor=i}i.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}();Object.defineProperty(et,"__esModule",{value:!0}),et.SetContainer=void 0;var e=Ar(),r=Nr(),t=function(n){o(i,n);function i(s){var l=n.call(this)||this;return l.data_=s(l),l}return i.prototype.assign=function(s,l){this.clear(),this.insert(s,l)},i.prototype.clear=function(){this.data_.clear()},i.prototype.begin=function(){return this.data_.begin()},i.prototype.end=function(){return this.data_.end()},i.prototype.has=function(s){return!this.find(s).equals(this.end())},i.prototype.size=function(){return this.data_.size()},i.prototype.push=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(s.length===0)return this.size();var a=new r.NativeArrayIterator(s,0),u=new r.NativeArrayIterator(s,s.length);return this._Insert_by_range(a,u),this.size()},i.prototype.insert=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return s.length===1?this._Insert_by_key(s[0]):s[0].next instanceof Function&&s[1].next instanceof Function?this._Insert_by_range(s[0],s[1]):this._Insert_by_hint(s[0],s[1])},i.prototype.erase=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return s.length===1&&!(s[0]instanceof this.end().constructor&&s[0].source()===this)?this._Erase_by_val(s[0]):s.length===1?this._Erase_by_range(s[0]):this._Erase_by_range(s[0],s[1])},i.prototype._Erase_by_range=function(s,l){l===void 0&&(l=s.next());var a=this.data_.erase(s,l);return this._Handle_erase(s,l),a},i}(e.Container);return et.SetContainer=t,et}var fr={},ot={},it={},st={},Qn;function Ql(){if(Qn)return st;Qn=1;var o=H&&H.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])},r(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(st,"__esModule",{value:!0}),st.Exception=void 0;var e=function(r){o(t,r);function t(n){var i=this.constructor,s=r.call(this,n)||this,l=i.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l,s}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),t.prototype.what=function(){return this.message},t.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},t}(Error);return st.Exception=e,st}var Kn;function Yi(){if(Kn)return it;Kn=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s[a]=l[a])},t(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(it,"__esModule",{value:!0}),it.LogicError=void 0;var e=Ql(),r=function(t){o(n,t);function n(i){return t.call(this,i)||this}return n}(e.Exception);return it.LogicError=r,it}var Gn;function Xi(){if(Gn)return ot;Gn=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s[a]=l[a])},t(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.InvalidArgument=void 0;var e=Yi(),r=function(t){o(n,t);function n(i){return t.call(this,i)||this}return n}(e.LogicError);return ot.InvalidArgument=r,ot}var at={},Jn;function Kl(){if(Jn)return at;Jn=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s[a]=l[a])},t(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.OutOfRange=void 0;var e=Yi(),r=function(t){o(n,t);function n(i){return t.call(this,i)||this}return n}(e.LogicError);return at.OutOfRange=r,at}var zn;function er(){return zn||(zn=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.ErrorGenerator=void 0;var e=Xi(),r=Kl();(function(t){function n(h){if(typeof h=="string")return h;var p=h.constructor.name;return h.constructor.__MODULE&&(p="".concat(h.constructor.__MODULE,".").concat(p)),"std.".concat(p)}t.get_class_name=n;function i(h,p){return new r.OutOfRange("Error on ".concat(n(h),".").concat(p,"(): it's empty container."))}t.empty=i;function s(h,p,y){return new r.OutOfRange("Error on ".concat(n(h),".").concat(p,"(): parametric index is negative -> (index = ").concat(y,")."))}t.negative_index=s;function l(h,p,y,b){return new r.OutOfRange("Error on ".concat(n(h),".").concat(p,"(): parametric index is equal or greater than size -> (index = ").concat(y,", size: ").concat(b,")."))}t.excessive_index=l;function a(h,p){return new e.InvalidArgument("Error on ".concat(n(h),".").concat(p,"(): parametric iterator is not this container's own."))}t.not_my_iterator=a;function u(h,p){return new e.InvalidArgument("Error on ".concat(n(h),".").concat(p,"(): parametric iterator, it already has been erased."))}t.erased_iterator=u;function c(h,p,y){return new r.OutOfRange("Error on ".concat(n(h),".").concat(p,"(): parametric iterator is directing negative position -> (index = ").concat(y,")."))}t.negative_iterator=c;function f(h,p){p===void 0&&(p="end");var y=n(h);return new r.OutOfRange("Error on ".concat(y,".Iterator.value: cannot access to the ").concat(y,".").concat(p,"().value."))}t.iterator_end_value=f;function d(h,p,y){throw new r.OutOfRange("Error on ".concat(n(h),".").concat(p,"(): unable to find the matched key -> ").concat(y))}t.key_nout_found=d})(o.ErrorGenerator||(o.ErrorGenerator={}))}(fr)),fr}var Wn;function Gl(){if(Wn)return xe;Wn=1;var o=H&&H.__extends||function(){var s=function(l,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},s(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=H&&H.__read||function(s,l){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var u=a.call(s),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=H&&H.__spreadArray||function(s,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return s.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(xe,"__esModule",{value:!0}),xe.UniqueSet=void 0;var t=Hl(),n=er(),i=function(s){o(l,s);function l(){return s!==null&&s.apply(this,arguments)||this}return l.prototype.count=function(a){return this.find(a).equals(this.end())?0:1},l.prototype.insert=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return s.prototype.insert.apply(this,r([],e(a),!1))},l.prototype._Insert_by_range=function(a,u){for(;!a.equals(u);a=a.next())this._Insert_by_key(a.value)},l.prototype.extract=function(a){return a instanceof this.end().constructor?this._Extract_by_iterator(a):this._Extract_by_val(a)},l.prototype._Extract_by_val=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"extract",a);return this._Erase_by_range(u),a},l.prototype._Extract_by_iterator=function(a){return a.equals(this.end())===!0||this.has(a.value)===!1?this.end():(this._Erase_by_range(a),a)},l.prototype._Erase_by_val=function(a){var u=this.find(a);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(a){for(var u=a.begin();!u.equals(a.end());)this.has(u.value)===!1?(this.insert(u.value),u=a.erase(u)):u=u.next()},l}(t.SetContainer);return xe.UniqueSet=i,xe}var dr={},hr={},Yn;function Jl(){return Yn||(Yn=1,function(o){var e=H&&H.__read||function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),l,a=[],u;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)a.push(l.value)}catch(c){u={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return a},r=H&&H.__spreadArray||function(t,n,i){if(i||arguments.length===2)for(var s=0,l=n.length,a;s<l;s++)(a||!(s in n))&&(a||(a=Array.prototype.slice.call(n,0,s)),a[s]=n[s]);return t.concat(a||Array.prototype.slice.call(n))};Object.defineProperty(o,"__esModule",{value:!0}),o.IAssociativeContainer=void 0,function(t){function n(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var a,u;return s.length>=1&&s[0]instanceof Array?(a=function(){var c=s[0];i.push.apply(i,r([],e(c),!1))},u=s.slice(1)):s.length>=2&&s[0].next instanceof Function&&s[1].next instanceof Function?(a=function(){var c=s[0],f=s[1];i.assign(c,f)},u=s.slice(2)):(a=null,u=s),{ramda:a,tail:u}}t.construct=n}(o.IAssociativeContainer||(o.IAssociativeContainer={}))}(hr)),hr}var lt={},ut={},ct={},Xn;function zl(){if(Xn)return ct;Xn=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct._Get_root=void 0;var o=Ct;function e(){return r===null&&(r=(0,o.is_node)()?H:self,r.__s_iUID===void 0&&(r.__s_iUID=0)),r}ct._Get_root=e;var r=null;return ct}var Zn;function Zi(){if(Zn)return ut;Zn=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.get_uid=void 0;var o=zl();function e(r){if(r instanceof Object){if(r.hasOwnProperty("__get_m_iUID")===!1){var t=++(0,o._Get_root)().__s_iUID;Object.defineProperty(r,"__get_m_iUID",{value:function(){return t}})}return r.__get_m_iUID()}else return r===void 0?-1:0}return ut.get_uid=e,ut}var xn;function jr(){if(xn)return lt;xn=1;var o=H&&H.__values||function(a){var u=typeof Symbol=="function"&&Symbol.iterator,c=u&&a[u],f=0;if(c)return c.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&f>=a.length&&(a=void 0),{value:a&&a[f++],done:!a}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lt,"__esModule",{value:!0}),lt.hash=void 0;var e=Zi();function r(){for(var a,u,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=s;try{for(var h=o(c),p=h.next();!p.done;p=h.next()){var y=p.value;y=y&&y.valueOf();var b=typeof y;if(b==="boolean")d=t(y,d);else if(b==="number"||b==="bigint")d=n(y,d);else if(b==="string")d=i(y,d);else if(y instanceof Object&&y.hashCode instanceof Function){var E=y.hashCode();if(c.length===1)return E;d=d^E,d*=l}else d=n((0,e.get_uid)(y),d)}}catch(S){a={error:S}}finally{try{p&&!p.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}return Math.abs(d)}lt.hash=r;function t(a,u){return u^=a?1:0,u*=l,u}function n(a,u){return i(a.toString(),u)}function i(a,u){for(var c=0;c<a.length;++c)u^=a.charCodeAt(c),u*=l;return Math.abs(u)}var s=2166136261,l=16777619;return lt}var ge={},eo;function Ur(){if(eo)return ge;eo=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.greater_equal=ge.greater=ge.less_equal=ge.less=ge.not_equal_to=ge.equal_to=void 0;var o=Zi();function e(l,a){return l=l&&l.valueOf(),a=a&&a.valueOf(),l instanceof Object&&l.equals instanceof Function?l.equals(a):l===a}ge.equal_to=e;function r(l,a){return!e(l,a)}ge.not_equal_to=r;function t(l,a){return l=l.valueOf(),a=a.valueOf(),l instanceof Object?l.less instanceof Function?l.less(a):(0,o.get_uid)(l)<(0,o.get_uid)(a):l<a}ge.less=t;function n(l,a){return t(l,a)||e(l,a)}ge.less_equal=n;function i(l,a){return!n(l,a)}ge.greater=i;function s(l,a){return!t(l,a)}return ge.greater_equal=s,ge}var to;function xi(){return to||(to=1,function(o){var e=H&&H.__read||function(s,l){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var u=a.call(s),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=H&&H.__spreadArray||function(s,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return s.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(o,"__esModule",{value:!0}),o.IHashContainer=void 0;var t=Jl(),n=jr(),i=Ur();(function(s){function l(a,u,c){for(var f=[],d=3;d<arguments.length;d++)f[d-3]=arguments[d];var h=null,p=n.hash,y=i.equal_to;if(f.length===1&&f[0]instanceof u){var b=f[0];p=b.hash_function(),y=b.key_eq(),h=function(){var S=b.begin(),q=b.end();a.assign(S,q)}}else{var E=t.IAssociativeContainer.construct.apply(t.IAssociativeContainer,r([a],e(f),!1));h=E.ramda,E.tail.length>=1&&(p=E.tail[0]),E.tail.length>=2&&(y=E.tail[1])}c(p,y),h!==null&&h()}s.construct=l})(o.IHashContainer||(o.IHashContainer={}))}(dr)),dr}var _r={},ft={},dt={},ro;function Vr(){if(ro)return dt;ro=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.ListIterator=void 0;var o=er(),e=function(){function r(t,n,i){this.prev_=t,this.next_=n,this.value_=i}return r._Set_prev=function(t,n){t.prev_=n},r._Set_next=function(t,n){t.next_=n},r.prototype.prev=function(){return this.prev_},r.prototype.next=function(){return this.next_},Object.defineProperty(r.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),r.prototype._Try_value=function(){if(this.value_===void 0&&this.equals(this.source().end())===!0)throw o.ErrorGenerator.iterator_end_value(this.source())},r.prototype.equals=function(t){return this===t},r}();return dt.ListIterator=e,dt}var ht={},no;function Wl(){if(no)return ht;no=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Repeater=void 0;var o=function(){function e(r,t){this.index_=r,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(r){return this.index_===r.index_},e}();return ht.Repeater=o,ht}var ke={},oo;function Yl(){if(oo)return ke;oo=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.next=ke.prev=ke.advance=ke.distance=ke.size=ke.empty=void 0;var o=Xi();function e(a){return a instanceof Array?a.length!==0:a.empty()}ke.empty=e;function r(a){return a instanceof Array?a.length:a.size()}ke.size=r;function t(a,u){if(a.index instanceof Function)return n(a,u);for(var c=0;!a.equals(u);a=a.next())++c;return c}ke.distance=t;function n(a,u){var c=a.index(),f=u.index();return a.base instanceof Function?c-f:f-c}function i(a,u){if(u===0)return a;if(a.advance instanceof Function)return a.advance(u);var c;if(u<0){if(!(a.prev instanceof Function))throw new o.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");c=function(f){return f.prev()},u=-u}else c=function(f){return f.next()};for(;u-- >0;)a=c(a);return a}ke.advance=i;function s(a,u){return u===void 0&&(u=1),u===1?a.prev():i(a,-u)}ke.prev=s;function l(a,u){return u===void 0&&(u=1),u===1?a.next():i(a,u)}return ke.next=l,ke}var io;function es(){if(io)return ft;io=1;var o=H&&H.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(d[p]=h[p])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),e=H&&H.__read||function(u,c){var f=typeof Symbol=="function"&&u[Symbol.iterator];if(!f)return u;var d=f.call(u),h,p=[],y;try{for(;(c===void 0||c-- >0)&&!(h=d.next()).done;)p.push(h.value)}catch(b){y={error:b}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(y)throw y.error}}return p};Object.defineProperty(ft,"__esModule",{value:!0}),ft.ListContainer=void 0;var r=Ar(),t=Vr(),n=Wl(),i=Nr(),s=Yl(),l=er(),a=function(u){o(c,u);function c(){var f=u.call(this)||this;return f.end_=f._Create_iterator(null,null),f.clear(),f}return c.prototype.assign=function(f,d){this.clear(),this.insert(this.end(),f,d)},c.prototype.clear=function(){t.ListIterator._Set_prev(this.end_,this.end_),t.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},c.prototype.resize=function(f){var d=f-this.size();d>0?this.insert(this.end(),d,void 0):d<0&&this.erase((0,s.advance)(this.end(),-d),this.end())},c.prototype.begin=function(){return this.begin_},c.prototype.end=function(){return this.end_},c.prototype.size=function(){return this.size_},c.prototype.push_front=function(f){this.insert(this.begin_,f)},c.prototype.push_back=function(f){this.insert(this.end_,f)},c.prototype.pop_front=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},c.prototype.pop_back=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},c.prototype.push=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];if(f.length===0)return this.size();var h=new i.NativeArrayIterator(f,0),p=new i.NativeArrayIterator(f,f.length);return this._Insert_by_range(this.end(),h,p),this.size()},c.prototype.insert=function(f){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return d.length===1?this._Insert_by_repeating_val(f,1,d[0]):d.length===2&&typeof d[0]=="number"?this._Insert_by_repeating_val(f,d[0],d[1]):this._Insert_by_range(f,d[0],d[1])},c.prototype._Insert_by_repeating_val=function(f,d,h){var p=new n.Repeater(0,h),y=new n.Repeater(d);return this._Insert_by_range(f,p,y)},c.prototype._Insert_by_range=function(f,d,h){for(var p=f.prev(),y=null,b=0,E=d;E.equals(h)===!1;E=E.next()){var S=this._Create_iterator(p,null,E.value);b===0&&(y=S),t.ListIterator._Set_next(p,S),p=S,++b}return f.equals(this.begin())===!0&&(this.begin_=y),t.ListIterator._Set_next(p,f),t.ListIterator._Set_prev(f,p),this.size_+=b,y},c.prototype.erase=function(f,d){return d===void 0&&(d=f.next()),this._Erase_by_range(f,d)},c.prototype._Erase_by_range=function(f,d){if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(f.equals(this.end_))return this.end_;var h=f.prev();t.ListIterator._Set_next(h,d),t.ListIterator._Set_prev(d,h);for(var p=f;!p.equals(d);p=p.next())p.erased_=!0,--this.size_;return f.equals(this.begin_)&&(this.begin_=d),d},c.prototype.swap=function(f){var d,h,p;d=e([f.begin_,this.begin_],2),this.begin_=d[0],f.begin_=d[1],h=e([f.end_,this.end_],2),this.end_=h[0],f.end_=h[1],p=e([f.size_,this.size_],2),this.size_=p[0],f.size_=p[1]},c}(r.Container);return ft.ListContainer=a,ft}var _t={},so;function ts(){if(so)return _t;so=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.ReverseIterator=void 0;var o=function(){function e(r){this.base_=r.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(r){return this.base_.equals(r.base_)},e}();return _t.ReverseIterator=o,_t}var ao;function Xl(){return ao||(ao=1,function(o){var e=H&&H.__extends||function(){var l=function(a,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(a,u);function c(){this.constructor=a}a.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=H&&H.__read||function(l,a){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(a===void 0||a-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(o,"__esModule",{value:!0}),o.SetElementList=void 0;var t=es(),n=Vr(),i=ts(),s=function(l){e(a,l);function a(u){var c=l.call(this)||this;return c.associative_=u,c}return a.prototype._Create_iterator=function(u,c,f){return a.Iterator.create(this,u,c,f)},a._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},a.prototype.associative=function(){return this.associative_},a}(t.ListContainer);o.SetElementList=s,function(l){var a=function(c){e(f,c);function f(d,h,p,y){var b=c.call(this,h,p,y)||this;return b.source_=d,b}return f.create=function(d,h,p,y){return new f(d,h,p,y)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.source_.associative()},f}(n.ListIterator);l.Iterator=a;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},f}(i.ReverseIterator);l.ReverseIterator=u}(s=o.SetElementList||(o.SetElementList={})),o.SetElementList=s}(_r)),_r}var pt={},vt={},lo;function rs(){if(lo)return vt;lo=1;var o=H&&H.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],l=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&l>=n.length&&(n=void 0),{value:n&&n[l++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vt,"__esModule",{value:!0}),vt.HashBuckets=void 0;var e=function(){function n(i,s){this.fetcher_=i,this.hasher_=s,this.max_load_factor_=t,this.data_=[],this.size_=0,this.initialize()}return n.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},n.prototype.rehash=function(i){var s,l,a,u;i=Math.max(i,r);for(var c=[],f=0;f<i;++f)c.push([]);try{for(var d=o(this.data_),h=d.next();!h.done;h=d.next()){var p=h.value;try{for(var y=(a=void 0,o(p)),b=y.next();!b.done;b=y.next()){var E=b.value,S=this.hasher_(this.fetcher_(E))%c.length;c[S].push(E)}}catch(q){a={error:q}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}}}catch(q){s={error:q}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}this.data_=c},n.prototype.reserve=function(i){i>this.capacity()&&(i=Math.floor(i/this.max_load_factor_),this.rehash(i))},n.prototype.initialize=function(){for(var i=0;i<r;++i)this.data_.push([])},n.prototype.length=function(){return this.data_.length},n.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},n.prototype.at=function(i){return this.data_[i]},n.prototype.load_factor=function(){return this.size_/this.length()},n.prototype.max_load_factor=function(i){if(i===void 0&&(i=null),i===null)return this.max_load_factor_;this.max_load_factor_=i},n.prototype.hash_function=function(){return this.hasher_},n.prototype.index=function(i){return this.hasher_(this.fetcher_(i))%this.length()},n.prototype.insert=function(i){var s=this.capacity();++this.size_>s&&this.reserve(s*2);var l=this.index(i);this.data_[l].push(i)},n.prototype.erase=function(i){for(var s=this.index(i),l=this.data_[s],a=0;a<l.length;++a)if(l[a]===i){l.splice(a,1),--this.size_;break}},n}();vt.HashBuckets=e;var r=10,t=1;return vt}var uo;function Zl(){if(uo)return pt;uo=1;var o=H&&H.__extends||function(){var s=function(l,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},s(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=H&&H.__read||function(s,l){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var u=a.call(s),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=H&&H.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&s[l],u=0;if(a)return a.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pt,"__esModule",{value:!0}),pt.SetHashBuckets=void 0;var t=rs(),n=function(s){o(l,s);function l(a,u,c){var f=s.call(this,i,u)||this;return f.source_=a,f.key_eq_=c,f}return l._Swap_source=function(a,u){var c;c=e([u.source_,a.source_],2),a.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(a){var u,c,f=this.hash_function()(a)%this.length(),d=this.at(f);try{for(var h=r(d),p=h.next();!p.done;p=h.next()){var y=p.value;if(this.key_eq_(y.value,a))return y}}catch(b){u={error:b}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);pt.SetHashBuckets=n;function i(s){return s.value}return pt}var He={},co;function ns(){if(co)return He;co=1,Object.defineProperty(He,"__esModule",{value:!0}),He.make_pair=He.Pair=void 0;var o=jr(),e=Ur(),r=function(){function n(i,s){this.first=i,this.second=s}return n.prototype.equals=function(i){return(0,e.equal_to)(this.first,i.first)&&(0,e.equal_to)(this.second,i.second)},n.prototype.less=function(i){return(0,e.equal_to)(this.first,i.first)===!1?(0,e.less)(this.first,i.first):(0,e.less)(this.second,i.second)},n.prototype.hashCode=function(){return(0,o.hash)(this.first,this.second)},n}();He.Pair=r;function t(n,i){return new r(n,i)}return He.make_pair=t,He}var fo;function xl(){return fo||(fo=1,function(o){var e=H&&H.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(h[y]=p[y])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function h(){this.constructor=f}f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),r=H&&H.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h=d.call(c),p,y=[],b;try{for(;(f===void 0||f-- >0)&&!(p=h.next()).done;)y.push(p.value)}catch(E){b={error:E}}finally{try{p&&!p.done&&(d=h.return)&&d.call(h)}finally{if(b)throw b.error}}return y},t=H&&H.__spreadArray||function(c,f,d){if(d||arguments.length===2)for(var h=0,p=f.length,y;h<p;h++)(y||!(h in f))&&(y||(y=Array.prototype.slice.call(f,0,h)),y[h]=f[h]);return c.concat(y||Array.prototype.slice.call(f))};Object.defineProperty(o,"__esModule",{value:!0}),o.HashSet=void 0;var n=Gl(),i=xi(),s=Xl(),l=Zl(),a=ns(),u=function(c){e(f,c);function f(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var p=c.call(this,function(y){return new s.SetElementList(y)})||this;return i.IHashContainer.construct.apply(i.IHashContainer,t([p,f,function(y,b){p.buckets_=new l.SetHashBuckets(p,y,b)}],r(d),!1)),p}return f.prototype.clear=function(){this.buckets_.clear(),c.prototype.clear.call(this)},f.prototype.swap=function(d){var h,p;h=r([d.data_,this.data_],2),this.data_=h[0],d.data_=h[1],s.SetElementList._Swap_associative(this.data_,d.data_),l.SetHashBuckets._Swap_source(this.buckets_,d.buckets_),p=r([d.buckets_,this.buckets_],2),this.buckets_=p[0],d.buckets_=p[1]},f.prototype.find=function(d){return this.buckets_.find(d)},f.prototype.begin=function(d){return d===void 0&&(d=null),d===null?c.prototype.begin.call(this):this.buckets_.at(d)[0]},f.prototype.end=function(d){if(d===void 0&&(d=null),d===null)return c.prototype.end.call(this);var h=this.buckets_.at(d);return h[h.length-1].next()},f.prototype.rbegin=function(d){return d===void 0&&(d=null),this.end(d).reverse()},f.prototype.rend=function(d){return d===void 0&&(d=null),this.begin(d).reverse()},f.prototype.bucket_count=function(){return this.buckets_.length()},f.prototype.bucket_size=function(d){return this.buckets_.at(d).length},f.prototype.load_factor=function(){return this.buckets_.load_factor()},f.prototype.hash_function=function(){return this.buckets_.hash_function()},f.prototype.key_eq=function(){return this.buckets_.key_eq()},f.prototype.bucket=function(d){return this.hash_function()(d)%this.buckets_.length()},f.prototype.max_load_factor=function(d){return d===void 0&&(d=null),this.buckets_.max_load_factor(d)},f.prototype.reserve=function(d){this.buckets_.reserve(d)},f.prototype.rehash=function(d){this.buckets_.rehash(d)},f.prototype._Insert_by_key=function(d){var h=this.find(d);return h.equals(this.end())===!1?new a.Pair(h,!1):(this.data_.push(d),h=h.prev(),this._Handle_insert(h,h.next()),new a.Pair(h,!0))},f.prototype._Insert_by_hint=function(d,h){var p=this.find(h);return p.equals(this.end())===!0&&(p=this.data_.insert(d,h),this._Handle_insert(p,p.next())),p},f.prototype._Handle_insert=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.insert(d)},f.prototype._Handle_erase=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.erase(d)},f}(n.UniqueSet);o.HashSet=u,function(c){c.Iterator=s.SetElementList.Iterator,c.ReverseIterator=s.SetElementList.ReverseIterator}(u=o.HashSet||(o.HashSet={})),o.HashSet=u}(cr)),cr}var pr={},mt={},yt={},ho;function eu(){if(ho)return yt;ho=1;var o=H&&H.__extends||function(){var n=function(i,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},n(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");n(i,s);function l(){this.constructor=i}i.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}();Object.defineProperty(yt,"__esModule",{value:!0}),yt.MapContainer=void 0;var e=Ar(),r=Nr(),t=function(n){o(i,n);function i(s){var l=n.call(this)||this;return l.data_=s(l),l}return i.prototype.assign=function(s,l){this.clear(),this.insert(s,l)},i.prototype.clear=function(){this.data_.clear()},i.prototype.begin=function(){return this.data_.begin()},i.prototype.end=function(){return this.data_.end()},i.prototype.has=function(s){return!this.find(s).equals(this.end())},i.prototype.size=function(){return this.data_.size()},i.prototype.push=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var a=new r.NativeArrayIterator(s,0),u=new r.NativeArrayIterator(s,s.length);return this.insert(a,u),this.size()},i.prototype.insert=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return s.length===1?this.emplace(s[0].first,s[0].second):s[0].next instanceof Function&&s[1].next instanceof Function?this._Insert_by_range(s[0],s[1]):this.emplace_hint(s[0],s[1].first,s[1].second)},i.prototype.erase=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return s.length===1&&(!(s[0]instanceof this.end().constructor)||s[0].source()!==this)?this._Erase_by_key(s[0]):s.length===1?this._Erase_by_range(s[0]):this._Erase_by_range(s[0],s[1])},i.prototype._Erase_by_range=function(s,l){l===void 0&&(l=s.next());var a=this.data_.erase(s,l);return this._Handle_erase(s,l),a},i}(e.Container);return yt.MapContainer=t,yt}var _o;function tu(){if(_o)return mt;_o=1;var o=H&&H.__extends||function(){var s=function(l,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},s(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=H&&H.__read||function(s,l){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var u=a.call(s),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=H&&H.__spreadArray||function(s,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return s.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(mt,"__esModule",{value:!0}),mt.UniqueMap=void 0;var t=eu(),n=er(),i=function(s){o(l,s);function l(){return s!==null&&s.apply(this,arguments)||this}return l.prototype.count=function(a){return this.find(a).equals(this.end())?0:1},l.prototype.get=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"get",a);return u.second},l.prototype.take=function(a,u){var c=this.find(a);return c.equals(this.end())?this.emplace(a,u()).first.second:c.second},l.prototype.set=function(a,u){this.insert_or_assign(a,u)},l.prototype.insert=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return s.prototype.insert.apply(this,r([],e(a),!1))},l.prototype._Insert_by_range=function(a,u){for(var c=a;!c.equals(u);c=c.next())this.emplace(c.value.first,c.value.second)},l.prototype.insert_or_assign=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(a.length===2)return this._Insert_or_assign_with_key_value(a[0],a[1]);if(a.length===3)return this._Insert_or_assign_with_hint(a[0],a[1],a[2])},l.prototype._Insert_or_assign_with_key_value=function(a,u){var c=this.emplace(a,u);return c.second===!1&&(c.first.second=u),c},l.prototype._Insert_or_assign_with_hint=function(a,u,c){var f=this.emplace_hint(a,u,c);return f.second!==c&&(f.second=c),f},l.prototype.extract=function(a){return a instanceof this.end().constructor?this._Extract_by_iterator(a):this._Extract_by_key(a)},l.prototype._Extract_by_key=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"extract",a);var c=u.value;return this._Erase_by_range(u),c},l.prototype._Extract_by_iterator=function(a){return a.equals(this.end())===!0?this.end():(this._Erase_by_range(a),a)},l.prototype._Erase_by_key=function(a){var u=this.find(a);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(a){for(var u=a.begin();!u.equals(a.end());)this.has(u.first)===!1?(this.insert(u.value),u=a.erase(u)):u=u.next()},l}(t.MapContainer);return mt.UniqueMap=i,mt}var vr={},po;function ru(){return po||(po=1,function(o){var e=H&&H.__extends||function(){var l=function(a,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(a,u);function c(){this.constructor=a}a.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=H&&H.__read||function(l,a){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(a===void 0||a-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(o,"__esModule",{value:!0}),o.MapElementList=void 0;var t=es(),n=Vr(),i=ts(),s=function(l){e(a,l);function a(u){var c=l.call(this)||this;return c.associative_=u,c}return a.prototype._Create_iterator=function(u,c,f){return a.Iterator.create(this,u,c,f)},a._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},a.prototype.associative=function(){return this.associative_},a}(t.ListContainer);o.MapElementList=s,function(l){var a=function(c){e(f,c);function f(d,h,p,y){var b=c.call(this,h,p,y)||this;return b.list_=d,b}return f.create=function(d,h,p,y){return new f(d,h,p,y)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.list_.associative()},Object.defineProperty(f.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.value.second},set:function(d){this.value.second=d},enumerable:!1,configurable:!0}),f}(n.ListIterator);l.Iterator=a;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},Object.defineProperty(f.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.base_.second},set:function(d){this.base_.second=d},enumerable:!1,configurable:!0}),f}(i.ReverseIterator);l.ReverseIterator=u}(s=o.MapElementList||(o.MapElementList={})),o.MapElementList=s}(vr)),vr}var bt={},vo;function nu(){if(vo)return bt;vo=1;var o=H&&H.__extends||function(){var s=function(l,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},s(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=H&&H.__read||function(s,l){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var u=a.call(s),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=H&&H.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&s[l],u=0;if(a)return a.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bt,"__esModule",{value:!0}),bt.MapHashBuckets=void 0;var t=rs(),n=function(s){o(l,s);function l(a,u,c){var f=s.call(this,i,u)||this;return f.source_=a,f.key_eq_=c,f}return l._Swap_source=function(a,u){var c;c=e([u.source_,a.source_],2),a.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(a){var u,c,f=this.hash_function()(a)%this.length(),d=this.at(f);try{for(var h=r(d),p=h.next();!p.done;p=h.next()){var y=p.value;if(this.key_eq_(y.first,a))return y}}catch(b){u={error:b}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);bt.MapHashBuckets=n;function i(s){return s.first}return bt}var gt={},mo;function ou(){if(mo)return gt;mo=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.Entry=void 0;var o=jr(),e=Ur(),r=function(){function t(n,i){this.first=n,this.second=i}return t.prototype.equals=function(n){return(0,e.equal_to)(this.first,n.first)},t.prototype.less=function(n){return(0,e.less)(this.first,n.first)},t.prototype.hashCode=function(){return(0,o.hash)(this.first)},t}();return gt.Entry=r,gt}var yo;function iu(){return yo||(yo=1,function(o){var e=H&&H.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])},f(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(d,h);function p(){this.constructor=d}d.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),r=H&&H.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var p=h.call(f),y,b=[],E;try{for(;(d===void 0||d-- >0)&&!(y=p.next()).done;)b.push(y.value)}catch(S){E={error:S}}finally{try{y&&!y.done&&(h=p.return)&&h.call(p)}finally{if(E)throw E.error}}return b},t=H&&H.__spreadArray||function(f,d,h){if(h||arguments.length===2)for(var p=0,y=d.length,b;p<y;p++)(b||!(p in d))&&(b||(b=Array.prototype.slice.call(d,0,p)),b[p]=d[p]);return f.concat(b||Array.prototype.slice.call(d))};Object.defineProperty(o,"__esModule",{value:!0}),o.HashMap=void 0;var n=tu(),i=xi(),s=ru(),l=nu(),a=ou(),u=ns(),c=function(f){e(d,f);function d(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var y=f.call(this,function(b){return new s.MapElementList(b)})||this;return i.IHashContainer.construct.apply(i.IHashContainer,t([y,d,function(b,E){y.buckets_=new l.MapHashBuckets(y,b,E)}],r(h),!1)),y}return d.prototype.clear=function(){this.buckets_.clear(),f.prototype.clear.call(this)},d.prototype.swap=function(h){var p,y;p=r([h.data_,this.data_],2),this.data_=p[0],h.data_=p[1],s.MapElementList._Swap_associative(this.data_,h.data_),l.MapHashBuckets._Swap_source(this.buckets_,h.buckets_),y=r([h.buckets_,this.buckets_],2),this.buckets_=y[0],h.buckets_=y[1]},d.prototype.find=function(h){return this.buckets_.find(h)},d.prototype.begin=function(h){return h===void 0&&(h=null),h===null?f.prototype.begin.call(this):this.buckets_.at(h)[0]},d.prototype.end=function(h){if(h===void 0&&(h=null),h===null)return f.prototype.end.call(this);var p=this.buckets_.at(h);return p[p.length-1].next()},d.prototype.rbegin=function(h){return h===void 0&&(h=null),this.end(h).reverse()},d.prototype.rend=function(h){return h===void 0&&(h=null),this.begin(h).reverse()},d.prototype.bucket_count=function(){return this.buckets_.length()},d.prototype.bucket_size=function(h){return this.buckets_.at(h).length},d.prototype.load_factor=function(){return this.buckets_.load_factor()},d.prototype.hash_function=function(){return this.buckets_.hash_function()},d.prototype.key_eq=function(){return this.buckets_.key_eq()},d.prototype.bucket=function(h){return this.hash_function()(h)%this.buckets_.length()},d.prototype.max_load_factor=function(h){return h===void 0&&(h=null),this.buckets_.max_load_factor(h)},d.prototype.reserve=function(h){this.buckets_.reserve(h)},d.prototype.rehash=function(h){this.buckets_.rehash(h)},d.prototype.emplace=function(h,p){var y=this.find(h);return y.equals(this.end())===!1?new u.Pair(y,!1):(this.data_.push(new a.Entry(h,p)),y=y.prev(),this._Handle_insert(y,y.next()),new u.Pair(y,!0))},d.prototype.emplace_hint=function(h,p,y){var b=this.find(p);return b.equals(this.end())===!0&&(b=this.data_.insert(h,new a.Entry(p,y)),this._Handle_insert(b,b.next())),b},d.prototype._Handle_insert=function(h,p){for(;!h.equals(p);h=h.next())this.buckets_.insert(h)},d.prototype._Handle_erase=function(h,p){for(;!h.equals(p);h=h.next())this.buckets_.erase(h)},d}(n.UniqueMap);o.HashMap=c,function(f){f.Iterator=s.MapElementList.Iterator,f.ReverseIterator=s.MapElementList.ReverseIterator}(c=o.HashMap||(o.HashMap={})),o.HashMap=c}(pr)),pr}var bo;function su(){if(bo)return Lt;bo=1;var o=H&&H.__values||function(n){var i=typeof Symbol=="function"&&n[Symbol.iterator],s=0;return i?i.call(n):{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}}};Object.defineProperty(Lt,"__esModule",{value:!0});var e=xl(),r=iu(),t=function(){function n(){this.listeners_=new r.HashMap,this.created_at_=new Date}return n.prototype.dispatchEvent=function(i){var s,l,a=this.listeners_.find(i.type);if(!a.equals(this.listeners_.end())){i.target=this,i.timeStamp=new Date().getTime()-this.created_at_.getTime();try{for(var u=o(a.second),c=u.next();!c.done;c=u.next()){var f=c.value;f(i)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}}},n.prototype.addEventListener=function(i,s){var l=this.listeners_.find(i);l.equals(this.listeners_.end())&&(l=this.listeners_.emplace(i,new e.HashSet).first),l.second.insert(s)},n.prototype.removeEventListener=function(i,s){var l=this.listeners_.find(i);l.equals(this.listeners_.end())||(l.second.erase(s),l.second.empty()&&this.listeners_.erase(l))},n}();return Lt.EventTarget=t,Lt}var At={},go;function tr(){if(go)return At;go=1,Object.defineProperty(At,"__esModule",{value:!0});var o=function(){function e(r,t){this.type=r,t&&Object.assign(this,t)}return e}();return At.Event=o,At}var Nt={},ko;function au(){if(ko)return Nt;ko=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)l.hasOwnProperty(a)&&(s[a]=l[a])},t(n,i)};return function(n,i){t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(Nt,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(i,s){return t.call(this,i,s)||this}return n}(e.Event);return Nt.CloseEvent=r,Nt}var jt={},wo;function lu(){if(wo)return jt;wo=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)l.hasOwnProperty(a)&&(s[a]=l[a])},t(n,i)};return function(n,i){t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(jt,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(i,s){return t.call(this,i,s)||this}return n}(e.Event);return jt.MessageEvent=r,jt}var Ut={},Eo;function uu(){if(Eo)return Ut;Eo=1;var o=H&&H.__extends||function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var a in l)l.hasOwnProperty(a)&&(s[a]=l[a])},t(n,i)};return function(n,i){t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(Ut,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(i,s){return t.call(this,i,s)||this}return n}(e.Event);return Ut.ErrorEvent=r,Ut}var Oo;function cu(){return Oo||(Oo=1,function(o){var e=H&&H.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)y.hasOwnProperty(b)&&(p[b]=y[b])},f(d,h)};return function(d,h){f(d,h);function p(){this.constructor=d}d.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),r=H&&H.__assign||function(){return r=Object.assign||function(f){for(var d,h=1,p=arguments.length;h<p;h++){d=arguments[h];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},r.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var t=$l(),n=su(),i=tr(),s=au(),l=lu(),a=uu(),u=function(f){e(d,f);function d(h,p){var y=f.call(this)||this;return y.on_={},y.state_=d.CONNECTING,y.client_=new t.client,y.client_.on("connect",y._Handle_connect.bind(y)),y.client_.on("connectFailed",y._Handle_error.bind(y)),typeof p=="string"&&(p=[p]),y.client_.connect(h,p),y}return d.prototype.close=function(h,p){this.state_=d.CLOSING,h===void 0?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(h,p,!0)},d.prototype.send=function(h){if(typeof h.valueOf()=="string")this.connection_.sendUTF(h);else{var p=void 0;h instanceof Buffer?p=h:h instanceof Blob?p=new Buffer(h,"blob"):h.buffer?p=new Buffer(h.buffer):p=new Buffer(h),this.connection_.sendBytes(p)}},Object.defineProperty(d.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onopen",{get:function(){return this.on_.open},set:function(h){this._Set_on("open",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onclose",{get:function(){return this.on_.close},set:function(h){this._Set_on("close",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onmessage",{get:function(){return this.on_.message},set:function(h){this._Set_on("message",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onerror",{get:function(){return this.on_.error},set:function(h){this._Set_on("error",h)},enumerable:!0,configurable:!0}),d.prototype._Set_on=function(h,p){this.on_[h]&&this.removeEventListener(h,this.on_[h]),this.addEventListener(h,p),this.on_[h]=p},d.prototype._Handle_connect=function(h){this.connection_=h,this.state_=d.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var p=new i.Event("open",c);this.dispatchEvent(p)},d.prototype._Handle_close=function(h,p){var y=new s.CloseEvent("close",r({},c,{code:h,reason:p}));this.state_=d.CLOSED,this.dispatchEvent(y)},d.prototype._Handle_message=function(h){var p=new l.MessageEvent("message",r({},c,{data:h.binaryData?h.binaryData:h.utf8Data}));this.dispatchEvent(p)},d.prototype._Handle_error=function(h){var p=new a.ErrorEvent("error",r({},c,{error:h,message:h.message}));this.state_===d.CONNECTING&&(this.state_=d.CLOSED),this.dispatchEvent(p)},d}(n.EventTarget);o.WebSocket=u,function(f){f.CONNECTING=0,f.OPEN=1,f.CLOSING=2,f.CLOSED=3}(u=o.WebSocket||(o.WebSocket={})),o.WebSocket=u;var c={bubbles:!1,cancelable:!1}}(sr)),sr}var fu=Ct;fu.is_node()&&(H.WebSocket=cu().WebSocket);async function Io(o,e){const r=new URL(o),t=r.origin+r.pathname,n=du(t),i=await caches.open("user-icon-cache-v1"),s=await i.match(`${e}/usericon/${n}`);if(s){const l=await s.blob();return URL.createObjectURL(l)}else try{const l=await fetch(t);if(l.ok){i.put(`${e}/usericon/${n}`,l.clone());const a=await l.blob();return URL.createObjectURL(a)}else return t}catch{return t}}function du(o){const e=hu(o),r=_u(o);return`image-${e}.${r}`}function hu(o){let e=0;for(let r=0;r<o.length;r++){const t=o.charCodeAt(r);e=(e<<5)-e+t,e|=0}return e}function _u(o){const e=o.split(".");return e[e.length-1]}function So(o){let e,r,t,n,i=JSON.parse(o[1][0].value.metadata.content).picture,s,l,a,u,c,f,d,h,p,y,b=JSON.parse(o[1][0].value.metadata.content).about+"",E,S,q,T,K,P,A,M=JSON.stringify(o[1][0].value.metadata,void 0,4)+"",R,J,X,G,ne,de,D,$,F,Z,re,oe,z,ee,te,pe=o[0].buttonTextCancel+"",be,Ne,$e,he=i&&Co(o);return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("div"),he&&he.c(),s=j(),l=g("div"),a=g("img"),c=j(),f=g("div"),d=g("div"),h=O("about"),p=j(),y=g("div"),E=O(b),S=j(),q=g("div"),T=g("div"),K=O("profileJSON"),P=j(),A=g("div"),R=O(M),J=j(),X=g("div"),G=g("div"),ne=g("button"),de=O("copy pubKey"),D=j(),$=g("button"),F=O("copy hexKey"),Z=j(),re=g("div"),oe=g("button"),z=O("Open in external app"),ee=j(),te=g("button"),be=O(pe),this.h()},l(Se){e=k(Se,"DIV",{class:!0});var B=w(e);r=k(B,"DIV",{class:!0});var ve=w(r);t=k(ve,"DIV",{class:!0});var Be=w(t);n=k(Be,"DIV",{class:!0});var $r=w(n);he&&he.l($r),$r.forEach(_),s=U(Be),l=k(Be,"DIV",{});var Br=w(l);a=k(Br,"IMG",{class:!0,src:!0,alt:!0}),Br.forEach(_),Be.forEach(_),c=U(ve),f=k(ve,"DIV",{class:!0});var Pt=w(f);d=k(Pt,"DIV",{class:!0});var Hr=w(d);h=I(Hr,"about"),Hr.forEach(_),p=U(Pt),y=k(Pt,"DIV",{class:!0});var Qr=w(y);E=I(Qr,b),Qr.forEach(_),Pt.forEach(_),S=U(ve),q=k(ve,"DIV",{class:!0});var qt=w(q);T=k(qt,"DIV",{class:!0});var Kr=w(T);K=I(Kr,"profileJSON"),Kr.forEach(_),P=U(qt),A=k(qt,"DIV",{class:!0});var Gr=w(A);R=I(Gr,M),Gr.forEach(_),qt.forEach(_),ve.forEach(_),J=U(B),X=k(B,"DIV",{class:!0});var Dt=w(X);G=k(Dt,"DIV",{class:!0});var Rt=w(G);ne=k(Rt,"BUTTON",{type:!0,class:!0});var Jr=w(ne);de=I(Jr,"copy pubKey"),Jr.forEach(_),D=U(Rt),$=k(Rt,"BUTTON",{type:!0,class:!0});var zr=w($);F=I(zr,"copy hexKey"),zr.forEach(_),Rt.forEach(_),Z=U(Dt),re=k(Dt,"DIV",{class:!0});var Tt=w(re);oe=k(Tt,"BUTTON",{type:!0,class:!0});var Wr=w(oe);z=I(Wr,"Open in external app"),Wr.forEach(_),ee=U(Tt),te=k(Tt,"BUTTON",{type:!0,class:!0});var Yr=w(te);be=I(Yr,pe),Yr.forEach(_),Tt.forEach(_),Dt.forEach(_),B.forEach(_),this.h()},h(){m(n,"class","w-16 h-16 rounded-lg flex justify-center overflow-hidden bg-surface-500/25"),m(a,"class",""),fe(a.src,u=JSON.parse(o[1][0].value.metadata.content).banner)||m(a,"src",u),m(a,"alt",""),m(t,"class","grid grid-cols-[auto_1fr] gap-2 max-w-md"),m(d,"class","font-bold"),m(y,"class","break-all whitespace-pre-wrap text-sm max-h-32 overflow-auto"),m(f,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(T,"class","font-bold"),m(A,"class","break-all whitespace-pre-wrap text-sm max-h-24 overflow-auto"),m(q,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(r,"class","grid grid-row-[auto_auto_auto] gap-1 max-w-md"),m(ne,"type","button"),m(ne,"class","btn variant-filled-secondary p-1"),m($,"type","button"),m($,"class","btn variant-filled-secondary p-1"),m(G,"class","grid grid-row-[auto_auto] gap-2"),m(oe,"type","button"),m(oe,"class","btn variant-filled-surface p-2"),m(te,"type","button"),m(te,"class","btn variant-filled-surface p-2"),m(re,"class","grid grid-row-[auto_auto] gap-2"),m(X,"class","grid grid-cols-[auto_auto] gap-2"),m(e,"class","modal-example-form "+bu+" svelte-1wtdwek")},m(Se,B){C(Se,e,B),v(e,r),v(r,t),v(t,n),he&&he.m(n,null),v(t,s),v(t,l),v(l,a),v(r,c),v(r,f),v(f,d),v(d,h),v(f,p),v(f,y),v(y,E),v(r,S),v(r,q),v(q,T),v(T,K),v(q,P),v(q,A),v(A,R),v(e,J),v(e,X),v(X,G),v(G,ne),v(ne,de),v(G,D),v(G,$),v($,F),v(X,Z),v(X,re),v(re,oe),v(oe,z),v(re,ee),v(re,te),v(te,be),Ne||($e=[W(ne,"click",o[3]),W($,"click",o[4]),W(oe,"click",o[5]),W(te,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],Ne=!0)},p(Se,B){o=Se,B&2&&(i=JSON.parse(o[1][0].value.metadata.content).picture),i?he?he.p(o,B):(he=Co(o),he.c(),he.m(n,null)):he&&(he.d(1),he=null),B&2&&!fe(a.src,u=JSON.parse(o[1][0].value.metadata.content).banner)&&m(a,"src",u),B&2&&b!==(b=JSON.parse(o[1][0].value.metadata.content).about+"")&&N(E,b),B&2&&M!==(M=JSON.stringify(o[1][0].value.metadata,void 0,4)+"")&&N(R,M),B&1&&pe!==(pe=o[0].buttonTextCancel+"")&&N(be,pe)},d(Se){Se&&_(e),he&&he.d(),Ne=!1,Te($e)}}}function Co(o){let e,r,t={ctx:o,current:null,token:null,hasCatch:!1,pending:mu,then:vu,catch:pu,value:6};return Ve(r=Io(JSON.parse(o[1][0].value.metadata.content).picture),t),{c(){e=Y(),t.block.c()},l(n){e=Y(),t.block.l(n)},m(n,i){C(n,e,i),t.block.m(n,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e},p(n,i){o=n,t.ctx=o,i&2&&r!==(r=Io(JSON.parse(o[1][0].value.metadata.content).picture))&&Ve(r,t)||Yt(t,o,i)},d(n){n&&_(e),t.block.d(n),t.token=null,t=null}}}function pu(o){return{c:Q,l:Q,m:Q,p:Q,d:Q}}function vu(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","w-16 object-contain justify-center"),fe(e.src,r=o[6])||m(e,"src",r),m(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n&2&&!fe(e.src,r=t[6])&&m(e,"src",r)},d(t){t&&_(e)}}}function mu(o){return{c:Q,l:Q,m:Q,p:Q,d:Q}}function yu(o){let e,r=o[1][0]&&So(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=So(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&_(e)}}}const bu="card p-4  shadow-xl space-y-4 break-all";function gu(o,e,r){let t;Ee(o,ye,u=>r(1,t=u));let{parent:n}=e;function i(u){var f,d;const c=u==="npub"?x.npubEncode((f=t[0])==null?void 0:f.value.pubkey):(d=t[0])==null?void 0:d.value.pubkey;navigator.clipboard.writeText(c).then(()=>{console.log(`copied: ${c.slice(0,15)}...`);const h={message:`copied: ${c.slice(0,15)}...`,timeout:3e3};Ht.trigger(h)},()=>{console.log("");const h={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};Ht.trigger(h)}),n.onClose()}const s=()=>i("npub"),l=()=>i("hex"),a=()=>{var u;window.open("https://nostr.com/"+x.npubEncode((u=t[0])==null?void 0:u.value.pubkey),"_blank"),n.onClose()};return o.$$set=u=>{"parent"in u&&r(0,n=u.parent)},[n,t,i,s,l,a]}class Fr extends Oe{constructor(e){super(),Ie(this,e,gu,yu,we,{parent:0})}}function Po(o){let e,r,t=(o[1][0].title??"(title missing)")+"",n,i,s,l=JSON.stringify(o[1][0].value.note,void 0,4)+"",a,u,c,f,d,h,p,y,b,E,S,q=o[0].buttonTextCancel+"",T,K,P,A;return{c(){e=g("div"),r=g("header"),n=O(t),i=j(),s=g("div"),a=O(l),u=j(),c=g("footer"),f=g("div"),d=g("button"),h=O("copy noteID"),p=j(),y=g("button"),b=O("copy hexID"),E=j(),S=g("button"),T=O(q),this.h()},l(M){e=k(M,"DIV",{class:!0});var R=w(e);r=k(R,"HEADER",{class:!0});var J=w(r);n=I(J,t),J.forEach(_),i=U(R),s=k(R,"DIV",{class:!0});var X=w(s);a=I(X,l),X.forEach(_),u=U(R),c=k(R,"FOOTER",{class:!0});var G=w(c);f=k(G,"DIV",{class:!0});var ne=w(f);d=k(ne,"BUTTON",{type:!0,class:!0});var de=w(d);h=I(de,"copy noteID"),de.forEach(_),p=U(ne),y=k(ne,"BUTTON",{type:!0,class:!0});var D=w(y);b=I(D,"copy hexID"),D.forEach(_),E=U(ne),S=k(ne,"BUTTON",{type:!0,class:!0});var $=w(S);T=I($,q),$.forEach(_),ne.forEach(_),G.forEach(_),R.forEach(_),this.h()},h(){m(r,"class",Eu),m(s,"class","bg-surface-50-900-token break-words whitespace-pre-wrap max-h-60 overflow-auto"),m(d,"type","button"),m(d,"class","btn variant-filled-secondary p-1"),m(y,"type","button"),m(y,"class","btn variant-filled-secondary p-1"),m(S,"type","button"),m(S,"class","btn variant-filled-surface p-2"),m(f,"class","flex flex-wrap gap-2"),m(c,"class",K="modal-footer "+o[0].regionFooter),m(e,"class","modal-example-form "+wu+" bg-surface-200-700-token")},m(M,R){C(M,e,R),v(e,r),v(r,n),v(e,i),v(e,s),v(s,a),v(e,u),v(e,c),v(c,f),v(f,d),v(d,h),v(f,p),v(f,y),v(y,b),v(f,E),v(f,S),v(S,T),P||(A=[W(d,"click",o[3]),W(y,"click",o[4]),W(S,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],P=!0)},p(M,R){o=M,R&2&&t!==(t=(o[1][0].title??"(title missing)")+"")&&N(n,t),R&2&&l!==(l=JSON.stringify(o[1][0].value.note,void 0,4)+"")&&N(a,l),R&1&&q!==(q=o[0].buttonTextCancel+"")&&N(T,q),R&1&&K!==(K="modal-footer "+o[0].regionFooter)&&m(c,"class",K)},d(M){M&&_(e),P=!1,Te(A)}}}function ku(o){let e,r=o[1][0]&&Po(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=Po(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&_(e)}}}const wu="card p-4  shadow-xl space-y-4 break-all",Eu="text-2xl font-bold";function Ou(o,e,r){let t;Ee(o,ye,a=>r(1,t=a));let{parent:n}=e;function i(a){var c,f;const u=a==="note"?x.noteEncode((c=t[0])==null?void 0:c.value.note.id):(f=t[0])==null?void 0:f.value.note.id;navigator.clipboard.writeText(u).then(()=>{console.log(`copied: ${u.slice(0,15)}...`);const d={message:`copied: ${u.slice(0,15)}...`,timeout:3e3};Ht.trigger(d)},()=>{console.log("");const d={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};Ht.trigger(d)}),n.onClose()}const s=()=>i("note"),l=()=>i("hex");return o.$$set=a=>{"parent"in a&&r(0,n=a.parent)},[n,t,i,s,l]}class os extends Oe{constructor(e){super(),Ie(this,e,Ou,ku,we,{parent:0})}}const qo=/(:[^:\s]+:)/,Do=/(https?:\/\/+[^\s"'<`\]\)]+[^\s"'<`:\].\)]+)/,Ro=/\.(?:jpg|jpeg|png|gif|webp)$/i,To=/(nostr:[A-Za-z0-9]+)/,Mo=/(#\[\d+\])/i,Lo=/(\B#[^\s#.?:/()]+)/gi;async function Iu(o,e){var a;const r=e.filter(u=>u[0]==="emoji"),t=e.filter(u=>u[0]==="t");t.sort((u,c)=>c[1].length-u[1].length),t.map(u=>u[1]).join("|");let n=[];r.length>0&&n.push(qo.source),t.length>0&&n.push(Lo.source),n.push(To.source),n.push(Do.source),n.push(Ro.source),n.push(Mo.source);const i=new RegExp(n.join("|"),"g"),s=o.split(i),l=[];for(let u of s)if(u!==void 0)if(u.match(To)){const c=u.indexOf("nostr:"),f=u.slice(0,c),d=u.slice(c);l.push({content:f,type:"text"}),l.push({content:d,type:"nostr",url:d.slice(6)})}else if(r.length>0&&u.match(qo)){const c=(a=r.find(f=>`:${f[1]}:`===u))==null?void 0:a[2];c?l.push({content:u,type:"emoji",url:c}):l.push({content:u,type:"text"})}else Su(u)?u.match(Do)?u.match(Ro)?l.push({content:u,type:"image"}):l.push({content:u,type:"url"}):l.push({content:u,type:"url"}):u.match(Mo)?parseInt(u.slice(2,-1))<e.length?l.push({content:u,type:"quote",number:parseInt(u.slice(2,-1))}):l.push({content:u,type:"text"}):t.length>0&&u.match(Lo)?t.find(f=>new RegExp(`${f[1]}`,"i").test(u))?l.push({content:u,type:"hashtag"}):l.push({content:u,type:"text"}):l.push({content:u,type:"text"});return l}function Su(o){const e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;try{return new URL(o),e.test(o)}catch{return!1}}function Ao(o){let e,r,t,n,i,s,l=o[0].buttonTextCancel+"",a,u,c,f,d;return{c(){e=g("div"),r=g("img"),n=j(),i=g("footer"),s=g("button"),a=O(l),this.h()},l(h){e=k(h,"DIV",{class:!0});var p=w(e);r=k(p,"IMG",{src:!0,alt:!0,class:!0}),n=U(p),i=k(p,"FOOTER",{class:!0});var y=w(i);s=k(y,"BUTTON",{class:!0});var b=w(s);a=I(b,l),b.forEach(_),y.forEach(_),p.forEach(_),this.h()},h(){var h;fe(r.src,t=(h=o[1][0])==null?void 0:h.image)||m(r,"src",t),m(r,"alt",""),m(r,"class","svelte-1scgpoe"),m(s,"class",u="btn "+o[0].buttonNeutral),m(i,"class",c="modal-footer "+o[0].regionFooter),m(e,"class","modal-example-form "+Pu)},m(h,p){C(h,e,p),v(e,r),v(e,n),v(e,i),v(i,s),v(s,a),f||(d=[W(r,"click",o[2]),W(s,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],f=!0)},p(h,p){var y;o=h,p&2&&!fe(r.src,t=(y=o[1][0])==null?void 0:y.image)&&m(r,"src",t),p&1&&l!==(l=o[0].buttonTextCancel+"")&&N(a,l),p&1&&u!==(u="btn "+o[0].buttonNeutral)&&m(s,"class",u),p&1&&c!==(c="modal-footer "+o[0].regionFooter)&&m(i,"class",c)},d(h){h&&_(e),f=!1,Te(d)}}}function Cu(o){let e,r=o[1][0]&&Ao(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=Ao(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&_(e)}}}const Pu="card p-4  shadow-xl space-y-4 break-all";function qu(o,e,r){let t;Ee(o,ye,s=>r(1,t=s));let{parent:n}=e;function i(){var s;window.open((s=t[0])==null?void 0:s.image,"_blank")}return o.$$set=s=>{"parent"in s&&r(0,n=s.parent)},[n,t,i]}class Du extends Oe{constructor(e){super(),Ie(this,e,qu,Cu,we,{parent:0})}}function No(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain object-contain max-h-[6rem]"),fe(e.src,r=o[0].image)||m(e,"src",r),m(e,"alt","")},m(t,n){C(t,e,n)},p(t,n){n&1&&!fe(e.src,r=t[0].image)&&m(e,"src",r)},d(t){t&&_(e)}}}function jo(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain w-5 pl-0.5 pr-0.5"),fe(e.src,r=o[0].favicon)||m(e,"src",r),m(e,"alt","")},m(t,n){C(t,e,n)},p(t,n){n&1&&!fe(e.src,r=t[0].favicon)&&m(e,"src",r)},d(t){t&&_(e)}}}function Ru(o){let e,r,t,n,i,s,l,a,u=o[0].title+"",c,f,d,h=o[0].description+"",p,y,b,E,S,q=new URL(o[1]).hostname+"",T,K=o[0].image&&No(o),P=o[0].favicon!==""&&jo(o);return{c(){e=g("div"),r=g("a"),t=g("div"),n=g("div"),i=g("div"),K&&K.c(),s=j(),l=g("div"),a=g("div"),c=O(u),f=j(),d=g("div"),p=O(h),y=j(),b=g("div"),P&&P.c(),E=j(),S=g("div"),T=O(q),this.h()},l(A){e=k(A,"DIV",{class:!0});var M=w(e);r=k(M,"A",{class:!0,href:!0,target:!0});var R=w(r);t=k(R,"DIV",{class:!0});var J=w(t);n=k(J,"DIV",{class:!0});var X=w(n);i=k(X,"DIV",{class:!0});var G=w(i);K&&K.l(G),G.forEach(_),s=U(X),l=k(X,"DIV",{class:!0});var ne=w(l);a=k(ne,"DIV",{class:!0});var de=w(a);c=I(de,u),de.forEach(_),f=U(ne),d=k(ne,"DIV",{class:!0});var D=w(d);p=I(D,h),D.forEach(_),ne.forEach(_),X.forEach(_),y=U(J),b=k(J,"DIV",{class:!0});var $=w(b);P&&P.l($),E=U($),S=k($,"DIV",{class:!0});var F=w(S);T=I(F,q),F.forEach(_),$.forEach(_),J.forEach(_),R.forEach(_),M.forEach(_),this.h()},h(){m(i,"class","overflow-hidden relative rounded-xl max-h-[6rem]"),m(a,"class","line-clamp-2 text-sm font-bold text-primary-800 underline decoration-primary-600 dark:text-primary-300"),m(d,"class","line-clamp-4 text-xs text-primary-500 dark:text-primary-400"),m(l,"class","p-0.5 grid grid-rows-[auto_1fr] z-10 min-w-[12em]"),m(n,"class","grid grid-cols-[auto_1fr] gap-0.5"),m(S,"class","text-xs text-purple-900/50 dark:text-purple-50/50"),m(b,"class","flex flex-row-reverse ... -my-1"),m(t,"class","grid grid-rows-[auto_1fr]"),m(r,"class",""),m(r,"href",o[1]),m(r,"target","_blank"),m(e,"class","drop-shadow-md rounded-2xl m-0 p-1 border-2 border-primary-500 hover:drop-shadow-xl z-20 break-all bg-primary-200 dark:bg-primary-700 dark:hover:border-primary-400")},m(A,M){C(A,e,M),v(e,r),v(r,t),v(t,n),v(n,i),K&&K.m(i,null),v(n,s),v(n,l),v(l,a),v(a,c),v(l,f),v(l,d),v(d,p),v(t,y),v(t,b),P&&P.m(b,null),v(b,E),v(b,S),v(S,T)},p(A,[M]){A[0].image?K?K.p(A,M):(K=No(A),K.c(),K.m(i,null)):K&&(K.d(1),K=null),M&1&&u!==(u=A[0].title+"")&&N(c,u),M&1&&h!==(h=A[0].description+"")&&N(p,h),A[0].favicon!==""?P?P.p(A,M):(P=jo(A),P.c(),P.m(b,E)):P&&(P.d(1),P=null),M&2&&q!==(q=new URL(A[1]).hostname+"")&&N(T,q),M&2&&m(r,"href",A[1])},i:Q,o:Q,d(A){A&&_(e),K&&K.d(),P&&P.d()}}}function Tu(o,e,r){let{ogp:t}=e,{url:n}=e;return o.$$set=i=>{"ogp"in i&&r(0,t=i.ogp),"url"in i&&r(1,n=i.url)},[t,n]}class Mu extends Oe{constructor(e){super(),Ie(this,e,Tu,Ru,we,{ogp:0,url:1})}}const Ze=`<svg
xmlns="http://www.w3.org/2000/svg"
width="24"
height="24"
viewBox="0 0 24 24"
fill="none"
stroke="currentColor"
stroke-width="2"
stroke-linecap="round"
stroke-linejoin="round"
>
<circle cx="9" cy="9" r="6" />

<line x1="12.5" y1="12.5" x2="20" y2="20" />
</svg>`,id=`<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <circle cx="18" cy="5" r="3" />
    <circle cx="6" cy="12" r="3" />
    <circle cx="18" cy="19" r="3" />
    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
  </svg>`,sd=`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect
    x="3"
    y="16"
    width="18"
    height="4"
    rx="2"
    ry="2"
  />
  <line x1="12" y1="5" x2="12" y2="15" />
  <line x1="8" y1="10" x2="12" y2="5" />
  <line x1="16" y1="10" x2="12" y2="5" />
</svg>`,ad=`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="orange"
  stroke-width="3"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
</svg>`,ld=`<svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
              transform="rotate(-45)"
            >
              <path d="M9 5l7 7-7 7" />
              <path d="M5 12h14" />
            </svg>`,ud=`<svg
xmlns="http://www.w3.org/2000/svg"
width="24"
height="24"
viewBox="0 0 24 24"
fill="none"
stroke="currentColor"
stroke-width="2"
stroke-linecap="round"
stroke-linejoin="round"
>
<line x1="3" y1="12" x2="21" y2="12" />
<line x1="3" y1="6" x2="21" y2="6" />
<line x1="3" y1="18" x2="21" y2="18" />
</svg>`,cd=`  <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="4"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 5v14M5 12h14" />
            </svg>`,fd=`<svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
          <line x1="12" y1="6" x2="12" y2="12" />
          <line x1="8" y1="6" x2="8" y2="12" />
          <line x1="16" y1="6" x2="16" y2="12" />
          <line x1="3" y1="16" x2="21" y2="16" />
        </svg>`,dd=`<svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M1 12h4M20 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"
          />
        </svg>`,hd=`<svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M12 2L3.5 20.5H20.5L12 2Z" fill="#FDD835" />
            <path
              d="M12 15V17"
              stroke="black"
              stroke-width="2"
              stroke-linecap="round"
            />
            <circle cx="12" cy="11" r="1.5" fill="black" />
          </svg>`,_d=`<svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="11" fill="#42B983" />
            <path
              d="M6 18L18 6"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>`;function Uo(o,e,r){const t=o.slice();return t[18]=e[r],t}function Vo(o,e,r){const t=o.slice();return t[21]=e[r],t[23]=r,t}function Fo(o){let e,r,t,n=(o[6][0].title??"(title missing)")+"",i,s,l,a,u=(o[6][0].body??"(body missing)")+"",c,f,d,h,p,y,b,E,S,q,T,K,P,A,M=o[0].buttonTextCancel+"",R,J,X,G,ne,de,D=o[5]&&$o(),$=o[7],F=[];for(let z=0;z<$.length;z+=1)F[z]=Bo(Vo(o,$,z));let Z=o[6][0].value.isPageOwner&&o[3].sig!==""&&Ho(o),re=o[3].sig!==""&&Qo(o),oe=o[2].length>0&&Ko(o);return{c(){e=g("div"),r=g("div"),t=g("header"),i=O(n),s=j(),D&&D.c(),l=j(),a=g("article"),c=O(u),f=j(),d=g("div");for(let z=0;z<F.length;z+=1)F[z].c();h=j(),p=g("button"),y=O("search"),E=j(),Z&&Z.c(),S=j(),re&&re.c(),q=j(),oe&&oe.c(),T=j(),K=g("label"),P=g("footer"),A=g("button"),R=O(M),this.h()},l(z){e=k(z,"DIV",{class:!0});var ee=w(e);r=k(ee,"DIV",{class:!0});var te=w(r);t=k(te,"HEADER",{class:!0});var pe=w(t);i=I(pe,n),pe.forEach(_),s=U(te),D&&D.l(te),te.forEach(_),l=U(ee),a=k(ee,"ARTICLE",{class:!0});var be=w(a);c=I(be,u),be.forEach(_),f=U(ee),d=k(ee,"DIV",{class:!0});var Ne=w(d);for(let ve=0;ve<F.length;ve+=1)F[ve].l(Ne);Ne.forEach(_),h=U(ee),p=k(ee,"BUTTON",{class:!0});var $e=w(p);y=I($e,"search"),$e.forEach(_),E=U(ee),Z&&Z.l(ee),S=U(ee),re&&re.l(ee),q=U(ee),oe&&oe.l(ee),T=U(ee),K=k(ee,"LABEL",{class:!0});var he=w(K);P=k(he,"FOOTER",{class:!0});var Se=w(P);A=k(Se,"BUTTON",{class:!0});var B=w(A);R=I(B,M),B.forEach(_),Se.forEach(_),he.forEach(_),ee.forEach(_),this.h()},h(){m(t,"class",Nu),m(r,"class","grid grid-cols-[1fr_auto]"),m(a,"class","body break-all whitespace-pre-wrap"),m(d,"class","break-all text-sm grid grid-cols-[0.5fr_0.5fr]"),m(p,"class",b="btn "+o[0].buttonNeutral),m(A,"class",J="btn "+o[0].buttonNeutral),m(P,"class",X="modal-footer "+o[0].regionFooter),m(K,"class","label break-all whitespace-pre-wrap"),m(e,"class","modal-example-form "+Au+" overflow-h-auto")},m(z,ee){C(z,e,ee),v(e,r),v(r,t),v(t,i),v(r,s),D&&D.m(r,null),v(e,l),v(e,a),v(a,c),v(e,f),v(e,d);for(let te=0;te<F.length;te+=1)F[te]&&F[te].m(d,null);v(e,h),v(e,p),v(p,y),v(e,E),Z&&Z.m(e,null),v(e,S),re&&re.m(e,null),v(e,q),oe&&oe.m(e,null),v(e,T),v(e,K),v(K,P),v(P,A),v(A,R),G=!0,ne||(de=[W(p,"click",o[8]),W(A,"click",o[11])],ne=!0)},p(z,ee){if((!G||ee&64)&&n!==(n=(z[6][0].title??"(title missing)")+"")&&N(i,n),z[5]?D?ee&32&&L(D,1):(D=$o(),D.c(),L(D,1),D.m(r,null)):D&&(ue(),V(D,1,1,()=>{D=null}),ce()),(!G||ee&64)&&u!==(u=(z[6][0].body??"(body missing)")+"")&&N(c,u),ee&130){$=z[7];let te;for(te=0;te<$.length;te+=1){const pe=Vo(z,$,te);F[te]?F[te].p(pe,ee):(F[te]=Bo(pe),F[te].c(),F[te].m(d,null))}for(;te<F.length;te+=1)F[te].d(1);F.length=$.length}(!G||ee&1&&b!==(b="btn "+z[0].buttonNeutral))&&m(p,"class",b),z[6][0].value.isPageOwner&&z[3].sig!==""?Z?Z.p(z,ee):(Z=Ho(z),Z.c(),Z.m(e,S)):Z&&(Z.d(1),Z=null),z[3].sig!==""?re?re.p(z,ee):(re=Qo(z),re.c(),re.m(e,q)):re&&(re.d(1),re=null),z[2].length>0?oe?oe.p(z,ee):(oe=Ko(z),oe.c(),oe.m(e,T)):oe&&(oe.d(1),oe=null),(!G||ee&1)&&M!==(M=z[0].buttonTextCancel+"")&&N(R,M),(!G||ee&1&&J!==(J="btn "+z[0].buttonNeutral))&&m(A,"class",J),(!G||ee&1&&X!==(X="modal-footer "+z[0].regionFooter))&&m(P,"class",X)},i(z){G||(L(D),G=!0)},o(z){V(D),G=!1},d(z){z&&_(e),D&&D.d(),Xe(F,z),Z&&Z.d(),re&&re.d(),oe&&oe.d(),ne=!1,Te(de)}}}function $o(o){let e,r;return e=new bs({props:{"...":!0,stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30",width:"w-12"}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Bo(o){let e,r,t,n,i=o[21]+"",s,l;return{c(){e=g("div"),r=g("span"),n=j(),s=O(i),l=j(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=w(e);r=k(u,"SPAN",{class:!0}),w(r).forEach(_),n=U(u),s=I(u,i),l=U(u),u.forEach(_),this.h()},h(){m(r,"class",t=Jo(o[1][o[21]])),m(e,"class","card m-0 p-0 text-sm bg-grey")},m(a,u){C(a,e,u),v(e,r),v(e,n),v(e,s),v(e,l)},p(a,u){u&2&&t!==(t=Jo(a[1][a[21]]))&&m(r,"class",t)},d(a){a&&_(e)}}}function Ho(o){let e,r,t,n,i;return{c(){e=g("button"),r=O("duplicate"),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var l=w(e);r=I(l,"duplicate"),l.forEach(_),this.h()},h(){m(e,"class",t="btn "+o[0].buttonNeutral)},m(s,l){C(s,e,l),v(e,r),n||(i=W(e,"click",o[10]),n=!0)},p(s,l){l&1&&t!==(t="btn "+s[0].buttonNeutral)&&m(e,"class",t)},d(s){s&&_(e),n=!1,i()}}}function Qo(o){let e,r,t,n,i=JSON.stringify(o[3],null,2)+"",s;return{c(){e=g("div"),r=O("Event"),t=j(),n=g("div"),s=O(i),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);r=I(a,"Event"),a.forEach(_),t=U(l),n=k(l,"DIV",{class:!0});var u=w(n);s=I(u,i),u.forEach(_),this.h()},h(){m(e,"class","border"),m(n,"class","break-all whitespace-pre-wrap max-h-[8rem] overflow-y-auto")},m(l,a){C(l,e,a),v(e,r),C(l,t,a),C(l,n,a),v(n,s)},p(l,a){a&8&&i!==(i=JSON.stringify(l[3],null,2)+"")&&N(s,i)},d(l){l&&_(e),l&&_(t),l&&_(n)}}}function Ko(o){let e,r,t,n,i=o[2],s=[];for(let l=0;l<i.length;l+=1)s[l]=Go(Uo(o,i,l));return{c(){e=g("div"),r=O("Log"),t=j(),n=g("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);r=I(a,"Log"),a.forEach(_),t=U(l),n=k(l,"DIV",{class:!0});var u=w(n);for(let c=0;c<s.length;c+=1)s[c].l(u);u.forEach(_),this.h()},h(){m(e,"class","border"),m(n,"class","break-all whitespace-pre-wrap max-h-[8rem] overflow-y-auto")},m(l,a){C(l,e,a),v(e,r),C(l,t,a),C(l,n,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null)},p(l,a){if(a&4){i=l[2];let u;for(u=0;u<i.length;u+=1){const c=Uo(l,i,u);s[u]?s[u].p(c,a):(s[u]=Go(c),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},d(l){l&&_(e),l&&_(t),l&&_(n),Xe(s,l)}}}function Go(o){let e,r=o[18]+"";return{c(){e=g("div"),this.h()},l(t){e=k(t,"DIV",{class:!0});var n=w(e);n.forEach(_),this.h()},h(){m(e,"class","break-all whitespace-pre-wrap")},m(t,n){C(t,e,n),e.innerHTML=r},p(t,n){n&4&&r!==(r=t[18]+"")&&(e.innerHTML=r)},d(t){t&&_(e)}}}function Lu(o){let e,r,t=o[6][0]&&Fo(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,i){t&&t.m(n,i),C(n,e,i),r=!0},p(n,[i]){n[6][0]?t?(t.p(n,i),i&64&&L(t,1)):(t=Fo(n),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(ue(),V(t,1,1,()=>{t=null}),ce())},i(n){r||(L(t),r=!0)},o(n){V(t),r=!1},d(n){t&&t.d(n),n&&_(e)}}}const Au="card p-4 w-modal shadow-xl space-y-4",Nu="text-2xl font-bold";function Jo(o){switch(o){case 1:return"badge bg-surface-400";case 2:return"badge bg-warning-400";case 3:return"badge bg-error-400";case 4:return"badge bg-success-500";default:return"badge bg-surface-300"}}function ju(o,e,r){let t,n;Ee(o,ys,q=>r(12,t=q)),Ee(o,ye,q=>r(6,n=q));let{parent:i}=e;var s=(q=>(q[q.Preparing=0]="Preparing",q[q.Connecting=1]="Connecting",q[q.Not_exist=2]="Not_exist",q[q.Error=3]="Error",q[q.Exist=4]="Exist",q))(s||{});const l=["wss://nos.lol","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://relay.nostr.band","wss://yabu.me","wss://relay-jp.nostr.wirednet.jp","wss://nostr-relay.nokotaro.com","wss://nostr.wine","wss://nostr.bitcoiner.social","wss://nostr-pub.wellorder.net","wss://relay.nostr.bg","wss://nostr.mom","wss://relay.orangepill.dev","wss://relay.nostr.com.au","wss://offchain.pub","wss://nostr.fmt.wiz.biz","wss://nostr.mutinywallet.com","wss://e.nos.lol","wss://relayable.org","wss://relay.mostr.pub"];let a={};l.forEach(q=>{r(1,a[q]=0,a)});const u={id:"",pubkey:"",created_at:0,kind:1,tags:[],content:"",sig:""};let c={id:"",pubkey:"",created_at:0,kind:1,tags:[],content:"",sig:""},f,d=[],h=!1;const p=_i();p.setRelays(l);function y(){if(f&&!f.closed)return;r(5,h=!0),r(2,d=[]),r(3,c=u),console.log(n[0].value.id);const q=[{ids:[n[0].value.id]}],T=di({filters:q});l.forEach(M=>{r(1,a[M]=1,a)});const K=p.use(T).pipe(),P={next:M=>{console.log(M),r(1,a[M.from]=4,a),r(3,c=M.event)},error:M=>{console.error("Error occurred:",M)},complete:()=>{console.log("Subscription completed"),r(5,h=!1)}};r(4,f=K.subscribe(P));const A=p.createAllErrorObservable().subscribe(M=>{console.error("Error occurred globally:",M),r(1,a[M.from]=3,a)});setTimeout(()=>{f.unsubscribe(),r(5,h=!1),c.sig===""&&d.push("failed to get Event"),A.unsubscribe()},5*1e3)}let b=[];async function E(){r(5,h=!0),f.closed||f.unsubscribe();for(let q=0;q<t.length;q++){const T=new WebSocket(t[q]);b.push(T),T.onopen=()=>{d.push(`Connected to ${t[q]}`),r(2,d),T.send(JSON.stringify(["EVENT",c]))},T.onmessage=K=>{console.log(K);const P=JSON.parse(K.data);d.push(`message from ${t[q]}: ${K.data}`),r(2,d),P[2]?(d.push(`<span class="font-bold">Success: ${t[q]}</span>`),r(2,d)):(d.push(`<span class="font-bold">Failed: ${t[1]}</span> (reason:  ${P[3]})`),r(2,d)),T.close(),r(5,h=!1)}}}const S=()=>{f&&!f.closed&&f.unsubscribe(),b.forEach(q=>{q.OPEN&&q.close()}),i.onClose()};return o.$$set=q=>{"parent"in q&&r(0,i=q.parent)},o.$$.update=()=>{o.$$.dirty&2&&r(1,a),o.$$.dirty&4&&r(2,d)},[i,a,d,c,f,h,n,l,y,b,E,S]}class is extends Oe{constructor(e){super(),Ie(this,e,ju,Lu,we,{parent:0})}}function zo(o,e,r){const t=o.slice();return t[30]=e[r],t}function Wo(o,e,r){const t=o.slice();return t[30]=e[r],t}function Uu(o){let e,r,t,n,i;r=new Le({props:{queryKey:["metadata",x.decode(o[0]).data.pubkey],pubkey:x.decode(o[0]).data.pubkey,$$slots:{nodata:[Ku,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],error:[Qu,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],loading:[Hu,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],default:[Bu,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]]},$$scope:{ctx:o}}});let s={ctx:o,current:null,token:null,hasCatch:!1,pending:xu,then:Ju,catch:Gu,value:28,blocks:[,,,]};return Ve(n=o[6](o[0]),s),{c(){e=g("div"),ie(r.$$.fragment),t=j(),s.block.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);le(r.$$.fragment,a),t=U(a),s.block.l(a),a.forEach(_),this.h()},h(){m(e,"class","card border border-surface-400 px-3 py-2")},m(l,a){C(l,e,a),se(r,e,null),v(e,t),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,i=!0},p(l,a){o=l;const u={};a[0]&1&&(u.queryKey=["metadata",x.decode(o[0]).data.pubkey]),a[0]&1&&(u.pubkey=x.decode(o[0]).data.pubkey),a[0]&536870913|a[1]&16&&(u.$$scope={dirty:a,ctx:o}),r.$set(u),s.ctx=o,a[0]&1&&n!==(n=o[6](o[0]))&&Ve(n,s)||Yt(s,o,a)},i(l){i||(L(r.$$.fragment,l),L(s.block),i=!0)},o(l){V(r.$$.fragment,l);for(let a=0;a<3;a+=1){const u=s.blocks[a];V(u)}i=!1},d(l){l&&_(e),ae(r),s.block.d(),s.token=null,s=null}}}function Vu(o){let e,r;return e=new Le({props:{queryKey:["metadata",x.decode(o[0]).data.pubkey],pubkey:x.decode(o[0]).data.pubkey,$$slots:{nodata:[nc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[rc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[tc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[ec,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&1&&(i.queryKey=["metadata",x.decode(t[0]).data.pubkey]),n[0]&1&&(i.pubkey=x.decode(t[0]).data.pubkey),n[0]&536870913|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Fu(o){let e,r;return e=new Le({props:{queryKey:["metadata",x.decode(o[0]).data],pubkey:x.decode(o[0]).data,$$slots:{nodata:[ac,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[sc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[ic,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[oc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&1&&(i.queryKey=["metadata",x.decode(t[0]).data]),n[0]&1&&(i.pubkey=x.decode(t[0]).data),n[0]&536870913|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function $u(o){let e,r,t,n;return t=new St({props:{queryKey:[o[7](o[0])],id:o[7](o[0]),$$slots:{nodata:[Pc,({text:i})=>({28:i}),({text:i})=>[i?268435456:0]],error:[Cc,({text:i})=>({28:i}),({text:i})=>[i?268435456:0]],loading:[Sc,({text:i})=>({28:i}),({text:i})=>[i?268435456:0]],default:[Ic,({text:i})=>({28:i}),({text:i})=>[i?268435456:0]]},$$scope:{ctx:o}}}),{c(){e=g("div"),r=g("div"),ie(t.$$.fragment),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);le(t.$$.fragment,l),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(i,s){C(i,e,s),v(e,r),se(t,r,null),n=!0},p(i,s){const l={};s[0]&1&&(l.queryKey=[i[7](i[0])]),s[0]&1&&(l.id=i[7](i[0])),s[0]&268435471|s[1]&16&&(l.$$scope={dirty:s,ctx:i}),t.$set(l)},i(i){n||(L(t.$$.fragment,i),n=!0)},o(i){V(t.$$.fragment,i),n=!1},d(i){i&&_(e),ae(t)}}}function Bu(o){let e,r,t,n=JSON.parse(o[29].content).name+"",i,s,l;function a(){return o[20](o[29])}return{c(){e=g("button"),r=O("@"),t=g("u"),i=O(n),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=I(c,"@"),t=k(c,"U",{});var f=w(t);i=I(f,n),f.forEach(_),c.forEach(_),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80 dark:text-white/80")},m(u,c){C(u,e,c),v(e,r),v(e,t),v(t,i),s||(l=W(e,"click",a),s=!0)},p(u,c){o=u,c[0]&536870912&&n!==(n=JSON.parse(o[29].content).name+"")&&N(i,n)},d(u){u&&_(e),s=!1,l()}}}function Hu(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function Qu(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function Ku(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function Gu(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function Ju(o){let e,r,t=o[28]&&Yo(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,i){t&&t.m(n,i),C(n,e,i),r=!0},p(n,i){n[28]?t?(t.p(n,i),i[0]&1&&L(t,1)):(t=Yo(n),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(ue(),V(t,1,1,()=>{t=null}),ce())},i(n){r||(L(t),r=!0)},o(n){V(t),r=!1},d(n){t&&t.d(n),n&&_(e)}}}function Yo(o){let e,r=new Date(o[28].created_at*1e3).toLocaleString()+"",t,n,i,s,l,a,u,c,f;function d(){return o[21](o[28])}let h=o[28].tags.length>0&&Xo(o);return a=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("button"),t=O(r),n=j(),i=g("div"),h&&h.c(),s=j(),l=g("div"),ie(a.$$.fragment),this.h()},l(p){e=k(p,"BUTTON",{class:!0});var y=w(e);t=I(y,r),y.forEach(_),n=U(p),i=k(p,"DIV",{class:!0});var b=w(i);h&&h.l(b),s=U(b),l=k(b,"DIV",{class:!0});var E=w(l);le(a.$$.fragment,E),E.forEach(_),b.forEach(_),this.h()},h(){m(e,"class","-mt-0.5 ml-2 text-xs underline decoration-secondary-500"),m(l,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(i,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix")},m(p,y){C(p,e,y),v(e,t),C(p,n,y),C(p,i,y),h&&h.m(i,null),v(i,s),v(i,l),se(a,l,null),u=!0,c||(f=W(e,"click",d),c=!0)},p(p,y){o=p,(!u||y[0]&1)&&r!==(r=new Date(o[28].created_at*1e3).toLocaleString()+"")&&N(t,r),o[28].tags.length>0?h?(h.p(o,y),y[0]&1&&L(h,1)):(h=Xo(o),h.c(),L(h,1),h.m(i,s)):h&&(ue(),V(h,1,1,()=>{h=null}),ce());const b={};y[0]&1&&(b.text=o[28].content),y[0]&1&&(b.tag=o[28].tags),y[0]&1&&(b.id=o[28].id),y[0]&8&&(b.view=o[3]),y[0]&2&&(b.URLPreview=o[1]),y[0]&4&&(b.isPageOwner=o[2]),a.$set(b)},i(p){u||(L(h),L(a.$$.fragment,p),u=!0)},o(p){V(h),V(a.$$.fragment,p),u=!1},d(p){p&&_(e),p&&_(n),p&&_(i),h&&h.d(),ae(a),c=!1,f()}}}function Xo(o){let e,r,t=o[28].tags,n=[];for(let s=0;s<t.length;s+=1)n[s]=Zo(zo(o,t,s));const i=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(_),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(s,l){C(s,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(s,l){if(l[0]&805306481){t=s[28].tags;let a;for(a=0;a<t.length;a+=1){const u=zo(s,t,a);n[a]?(n[a].p(u,l),L(n[a],1)):(n[a]=Zo(u),n[a].c(),L(n[a],1),n[a].m(e,null))}for(ue(),a=t.length;a<n.length;a+=1)i(a);ce()}},i(s){if(!r){for(let l=0;l<t.length;l+=1)L(n[l]);r=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)V(n[l]);r=!1},d(s){s&&_(e),Xe(n,s)}}}function zu(o){let e,r,t=o[30][0]+"",n,i,s=o[30][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),i=O(`]
                    `),l=O(s),a=j(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),i=I(c,`]
                    `),l=I(c,s),a=U(c),c.forEach(_),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,i),v(e,l),v(e,a)},p(u,c){c[0]&1&&t!==(t=u[30][0]+"")&&N(n,t),c[0]&1&&s!==(s=u[30][1]+"")&&N(l,s)},i:Q,o:Q,d(u){u&&_(e)}}}function Wu(o){let e,r;return e=new St({props:{queryKey:[o[30][1]],id:o[30][1],$$slots:{default:[Xu,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&1&&(i.queryKey=[t[30][1]]),n[0]&1&&(i.id=t[30][1]),n[0]&268435456|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Yu(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[30][1]],pubkey:o[30][1],$$slots:{default:[Zu,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&1&&(i.queryKey=["metadata",t[30][1]]),n[0]&1&&(i.pubkey=t[30][1]),n[0]&536870913|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Xu(o){let e,r,t,n=o[28].content+"",i,s,l,a;function u(){return o[23](o[28])}return{c(){e=g("div"),r=O("[e] "),t=g("button"),i=O(n),s=j(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=w(e);r=I(f,"[e] "),t=k(f,"BUTTON",{class:!0});var d=w(t);i=I(d,n),d.forEach(_),f.forEach(_),s=U(c),this.h()},h(){m(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(c,f){C(c,e,f),v(e,r),v(e,t),v(t,i),C(c,s,f),l||(a=W(t,"click",u),l=!0)},p(c,f){o=c,f[0]&268435456&&n!==(n=o[28].content+"")&&N(i,n)},d(c){c&&_(e),c&&_(s),l=!1,a()}}}function Zu(o){let e,r,t,n,i,s=JSON.parse(o[29].content).name+"",l,a,u,c;function f(){return o[22](o[29],o[30])}return{c(){e=g("div"),r=O("to "),t=g("button"),n=O("@"),i=g("u"),l=O(s),a=j(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=I(h,"to "),t=k(h,"BUTTON",{class:!0});var p=w(t);n=I(p,"@"),i=k(p,"U",{});var y=w(i);l=I(y,s),y.forEach(_),p.forEach(_),h.forEach(_),a=U(d),this.h()},h(){m(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){C(d,e,h),v(e,r),v(e,t),v(t,n),v(t,i),v(i,l),C(d,a,h),u||(c=W(t,"click",f),u=!0)},p(d,h){o=d,h[0]&536870912&&s!==(s=JSON.parse(o[29].content).name+"")&&N(l,s)},d(d){d&&_(e),d&&_(a),u=!1,c()}}}function Zo(o){let e,r,t,n;const i=[Yu,Wu,zu],s=[];function l(a,u){return a[30][0]==="p"?0:a[30][0]==="e"||a[30][0]==="q"?1:a[30][0]!=="emoji"&&a[30][0]!=="r"&&a[30][0]!=="t"?2:-1}return~(e=l(o))&&(r=s[e]=i[e](o)),{c(){r&&r.c(),t=Y()},l(a){r&&r.l(a),t=Y()},m(a,u){~e&&s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?~e&&s[e].p(a,u):(r&&(ue(),V(s[c],1,1,()=>{s[c]=null}),ce()),~e?(r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t)):r=null)},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){~e&&s[e].d(a),a&&_(t)}}}function xu(o){let e,r;return{c(){e=g("div"),r=O(o[0]),this.h()},l(t){e=k(t,"DIV",{class:!0});var n=w(e);r=I(n,o[0]),n.forEach(_),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(t,n){C(t,e,n),v(e,r)},p(t,n){n[0]&1&&N(r,t[0])},i:Q,o:Q,d(t){t&&_(e)}}}function ec(o){let e,r,t,n=JSON.parse(o[29].content).name+"",i,s,l;function a(){return o[19](o[29])}return{c(){e=g("button"),r=O("@"),t=g("u"),i=O(n),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=I(c,"@"),t=k(c,"U",{});var f=w(t);i=I(f,n),f.forEach(_),c.forEach(_),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80 dark:text-white/80")},m(u,c){C(u,e,c),v(e,r),v(e,t),v(t,i),s||(l=W(e,"click",a),s=!0)},p(u,c){o=u,c[0]&536870912&&n!==(n=JSON.parse(o[29].content).name+"")&&N(i,n)},d(u){u&&_(e),s=!1,l()}}}function tc(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","loading")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function rc(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","error")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function nc(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","nodata")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data.pubkey+"")&&N(n,t)},d(i){i&&_(e)}}}function oc(o){let e,r,t,n=JSON.parse(o[29].content).name+"",i,s,l;function a(){return o[18](o[29])}return{c(){e=g("button"),r=O("@"),t=g("u"),i=O(n),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=I(c,"@"),t=k(c,"U",{});var f=w(t);i=I(f,n),f.forEach(_),c.forEach(_),this.h()},h(){m(e,"class","inline-flex text-sm text-black/80 dark:text-white/80")},m(u,c){C(u,e,c),v(e,r),v(e,t),v(t,i),s||(l=W(e,"click",a),s=!0)},p(u,c){o=u,c[0]&536870912&&n!==(n=JSON.parse(o[29].content).name+"")&&N(i,n)},d(u){u&&_(e),s=!1,l()}}}function ic(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data+"")&&N(n,t)},d(i){i&&_(e)}}}function sc(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data+"")&&N(n,t)},d(i){i&&_(e)}}}function ac(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,s){C(i,e,s),v(e,r),v(r,n)},p(i,s){s[0]&1&&t!==(t=x.decode(i[0]).data+"")&&N(n,t)},d(i){i&&_(e)}}}function xo(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),fe(e.src,r=JSON.parse(o[29].content).picture)||m(e,"src",r),m(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n[0]&536870912&&!fe(e.src,r=JSON.parse(t[29].content).picture)&&m(e,"src",r)},d(t){t&&_(e)}}}function ei(o){let e,r,t=Fe(o[28].tags),n=[];for(let s=0;s<t.length;s+=1)n[s]=ti(Wo(o,t,s));const i=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(_),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25 dark:border-s-rose-100/25")},m(s,l){C(s,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(s,l){if(l[0]&805306424){t=Fe(s[28].tags);let a;for(a=0;a<t.length;a+=1){const u=Wo(s,t,a);n[a]?(n[a].p(u,l),L(n[a],1)):(n[a]=ti(u),n[a].c(),L(n[a],1),n[a].m(e,null))}for(ue(),a=t.length;a<n.length;a+=1)i(a);ce()}},i(s){if(!r){for(let l=0;l<t.length;l+=1)L(n[l]);r=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)V(n[l]);r=!1},d(s){s&&_(e),Xe(n,s)}}}function lc(o){let e,r,t=o[30][0]+"",n,i,s=o[30][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),i=O(`]
                    `),l=O(s),a=j(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),i=I(c,`]
                    `),l=I(c,s),a=U(c),c.forEach(_),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,i),v(e,l),v(e,a)},p(u,c){c[0]&268435456&&t!==(t=u[30][0]+"")&&N(n,t),c[0]&268435456&&s!==(s=u[30][1]+"")&&N(l,s)},i:Q,o:Q,d(u){u&&_(e)}}}function uc(o){let e,r;return e=new St({props:{queryKey:[o[30][1]],id:o[30][1],$$slots:{nodata:[vc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],error:[pc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],loading:[_c,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],default:[hc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&268435456&&(i.queryKey=[t[30][1]]),n[0]&268435456&&(i.id=t[30][1]),n[0]&268435464|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function cc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[30][1]],pubkey:o[30][1],$$slots:{nodata:[gc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[bc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[yc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[mc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&268435456&&(i.queryKey=["metadata",t[30][1]]),n[0]&268435456&&(i.pubkey=t[30][1]),n[0]&805306368|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function fc(o){let e=o[28].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n[0]&268435456&&e!==(e=t[28].content+"")&&N(r,e)},d(t){t&&_(r)}}}function dc(o){let e="<content-warning>",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p:Q,d(t){t&&_(r)}}}function hc(o){let e,r,t=o[30][0]+"",n,i,s,l,a,u,c;function f(y,b){return b[0]&268435464&&(l=null),l==null&&(l=!!(y[28].tags.some(Dc)&&y[3]==!1)),l?dc:fc}let d=f(o,[-1,-1]),h=d(o);function p(){return o[17](o[28])}return{c(){e=g("div"),r=O("["),n=O(t),i=O(`]
                      `),s=g("button"),h.c(),a=j(),this.h()},l(y){e=k(y,"DIV",{class:!0});var b=w(e);r=I(b,"["),n=I(b,t),i=I(b,`]
                      `),s=k(b,"BUTTON",{class:!0});var E=w(s);h.l(E),E.forEach(_),b.forEach(_),a=U(y),this.h()},h(){m(s,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(y,b){C(y,e,b),v(e,r),v(e,n),v(e,i),v(e,s),h.m(s,null),C(y,a,b),u||(c=W(s,"click",p),u=!0)},p(y,b){o=y,b[0]&268435456&&t!==(t=o[30][0]+"")&&N(n,t),d===(d=f(o,b))&&h?h.p(o,b):(h.d(1),h=d(o),h&&(h.c(),h.m(s,null)))},d(y){y&&_(e),h.d(),y&&_(a),u=!1,c()}}}function _c(o){let e,r,t,n=o[30][0]+"",i,s,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),i=O(n),s=O("] "),a=O(l),u=j(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),i=I(d,n),s=I(d,"] "),a=I(d,l),d.forEach(_),u=U(f),f.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,i),v(r,s),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&N(i,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&N(a,l)},d(c){c&&_(e)}}}function pc(o){let e,r,t,n=o[30][0]+"",i,s,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),i=O(n),s=O("] "),a=O(l),u=j(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),i=I(d,n),s=I(d,"] "),a=I(d,l),d.forEach(_),u=U(f),f.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,i),v(r,s),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&N(i,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&N(a,l)},d(c){c&&_(e)}}}function vc(o){let e,r,t,n=o[30][0]+"",i,s,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),i=O(n),s=O("] "),a=O(l),u=j(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),i=I(d,n),s=I(d,"] "),a=I(d,l),d.forEach(_),u=U(f),f.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,i),v(r,s),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&N(i,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&N(a,l)},d(c){c&&_(e)}}}function mc(o){let e,r,t,n,i,s=JSON.parse(o[29].content).name+"",l,a,u,c;function f(){return o[16](o[29],o[30])}return{c(){e=g("div"),r=O("to[p] "),t=g("button"),n=O("@"),i=g("u"),l=O(s),a=j(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=I(h,"to[p] "),t=k(h,"BUTTON",{class:!0});var p=w(t);n=I(p,"@"),i=k(p,"U",{});var y=w(i);l=I(y,s),y.forEach(_),p.forEach(_),h.forEach(_),a=U(d),this.h()},h(){m(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){C(d,e,h),v(e,r),v(e,t),v(t,n),v(t,i),v(i,l),C(d,a,h),u||(c=W(t,"click",f),u=!0)},p(d,h){o=d,h[0]&536870912&&s!==(s=JSON.parse(o[29].content).name+"")&&N(l,s)},d(d){d&&_(e),d&&_(a),u=!1,c()}}}function yc(o){let e,r,t,n=o[30][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a[0]&268435456&&n!==(n=l[30][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function bc(o){let e,r,t,n=o[30][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a[0]&268435456&&n!==(n=l[30][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function gc(o){let e,r,t,n=o[30][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a[0]&268435456&&n!==(n=l[30][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function ti(o){let e,r,t,n;const i=[cc,uc,lc],s=[];function l(a,u){return a[30][0]==="p"?0:a[30][0]==="e"||a[30][0]==="q"?1:2}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function kc(o){let e,r,t=JSON.parse(o[29].content).picture,n,i,s=JSON.parse(o[29].content).display_name+"",l,a,u,c,f,d,h=JSON.parse(o[29].content).name+"",p,y,b,E,S=new Date(o[28].created_at*1e3).toLocaleString()+"",q,T,K=o[28].tags&&Fe(o[28].tags).length>0,P,A,M,R,J,X,G=t&&xo(o);function ne(){return o[14](o[29],o[28])}function de(){return o[15](o[28])}let D=K&&ei(o);return M=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),G&&G.c(),n=j(),i=g("div"),l=O(s),a=j(),u=g("div"),c=g("button"),f=O("@"),d=g("u"),p=O(h),y=j(),b=g("div"),E=g("button"),q=O(S),T=j(),D&&D.c(),P=j(),A=g("div"),ie(M.$$.fragment),this.h()},l($){e=k($,"DIV",{class:!0});var F=w(e);r=k(F,"DIV",{});var Z=w(r);G&&G.l(Z),Z.forEach(_),n=U(F),i=k(F,"DIV",{class:!0});var re=w(i);l=I(re,s),re.forEach(_),a=U(F),u=k(F,"DIV",{class:!0});var oe=w(u);c=k(oe,"BUTTON",{class:!0});var z=w(c);f=I(z,"@"),d=k(z,"U",{});var ee=w(d);p=I(ee,h),ee.forEach(_),z.forEach(_),oe.forEach(_),y=U(F),b=k(F,"DIV",{class:!0});var te=w(b);E=k(te,"BUTTON",{class:!0});var pe=w(E);q=I(pe,S),pe.forEach(_),te.forEach(_),F.forEach(_),T=U($),D&&D.l($),P=U($),A=k($,"DIV",{class:!0});var be=w(A);le(M.$$.fragment,be),be.forEach(_),this.h()},h(){m(i,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 dark:text-blue-500/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(E,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(A,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m($,F){C($,e,F),v(e,r),G&&G.m(r,null),v(e,n),v(e,i),v(i,l),v(e,a),v(e,u),v(u,c),v(c,f),v(c,d),v(d,p),v(e,y),v(e,b),v(b,E),v(E,q),C($,T,F),D&&D.m($,F),C($,P,F),C($,A,F),se(M,A,null),R=!0,J||(X=[W(c,"click",ne),W(E,"click",de)],J=!0)},p($,F){o=$,F[0]&536870912&&(t=JSON.parse(o[29].content).picture),t?G?G.p(o,F):(G=xo(o),G.c(),G.m(r,null)):G&&(G.d(1),G=null),(!R||F[0]&536870912)&&s!==(s=JSON.parse(o[29].content).display_name+"")&&N(l,s),(!R||F[0]&536870912)&&h!==(h=JSON.parse(o[29].content).name+"")&&N(p,h),(!R||F[0]&268435456)&&S!==(S=new Date(o[28].created_at*1e3).toLocaleString()+"")&&N(q,S),F[0]&268435456&&(K=o[28].tags&&Fe(o[28].tags).length>0),K?D?(D.p(o,F),F[0]&268435456&&L(D,1)):(D=ei(o),D.c(),L(D,1),D.m(P.parentNode,P)):D&&(ue(),V(D,1,1,()=>{D=null}),ce());const Z={};F[0]&268435456&&(Z.text=o[28].content),F[0]&268435456&&(Z.tag=o[28].tags),F[0]&268435456&&(Z.id=o[28].id),F[0]&8&&(Z.view=o[3]),F[0]&2&&(Z.URLPreview=o[1]),F[0]&4&&(Z.isPageOwner=o[2]),M.$set(Z)},i($){R||(L(D),L(M.$$.fragment,$),R=!0)},o($){V(D),V(M.$$.fragment,$),R=!1},d($){$&&_(e),G&&G.d(),$&&_(T),D&&D.d($),$&&_(P),$&&_(A),ae(M),J=!1,Te(X)}}}function wc(o){let e,r,t=o[28].pubkey+"",n,i,s,l,a=new Date(o[28].created_at*1e3).toLocaleString()+"",u,c,f,d,h,p;function y(){return o[13](o[28])}return f=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("div"),l=g("button"),u=O(a),c=j(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),S.forEach(_),i=U(E),s=k(E,"DIV",{class:!0});var q=w(s);l=k(q,"BUTTON",{class:!0});var T=w(l);u=I(T,a),T.forEach(_),c=U(q),le(f.$$.fragment,q),q.forEach(_),E.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(s,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(e,i),v(e,s),v(s,l),v(l,u),v(s,c),se(f,s,null),d=!0,h||(p=W(l,"click",y),h=!0)},p(b,E){o=b,(!d||E[0]&268435456)&&t!==(t=o[28].pubkey+"")&&N(n,t),(!d||E[0]&268435456)&&a!==(a=new Date(o[28].created_at*1e3).toLocaleString()+"")&&N(u,a);const S={};E[0]&268435456&&(S.text=o[28].content),E[0]&268435456&&(S.tag=o[28].tags),E[0]&268435456&&(S.id=o[28].id),E[0]&8&&(S.view=o[3]),E[0]&2&&(S.URLPreview=o[1]),E[0]&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(L(f.$$.fragment,b),d=!0)},o(b){V(f.$$.fragment,b),d=!1},d(b){b&&_(e),ae(f),h=!1,p()}}}function Ec(o){let e,r,t=o[28].pubkey+"",n,i,s,l=new Date(o[28].created_at*1e3).toLocaleString()+"",a,u,c,f,d,h,p;function y(){return o[12](o[28])}return f=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("button"),a=O(l),u=j(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),i=U(S),s=k(S,"BUTTON",{class:!0});var q=w(s);a=I(q,l),q.forEach(_),S.forEach(_),u=U(E),c=k(E,"DIV",{class:!0});var T=w(c);le(f.$$.fragment,T),T.forEach(_),E.forEach(_),this.h()},h(){m(s,"class","text-xs underline decoration-secondary-500"),m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(r,i),v(r,s),v(s,a),v(e,u),v(e,c),se(f,c,null),d=!0,h||(p=W(s,"click",y),h=!0)},p(b,E){o=b,(!d||E[0]&268435456)&&t!==(t=o[28].pubkey+"")&&N(n,t),(!d||E[0]&268435456)&&l!==(l=new Date(o[28].created_at*1e3).toLocaleString()+"")&&N(a,l);const S={};E[0]&268435456&&(S.text=o[28].content),E[0]&268435456&&(S.tag=o[28].tags),E[0]&268435456&&(S.id=o[28].id),E[0]&8&&(S.view=o[3]),E[0]&2&&(S.URLPreview=o[1]),E[0]&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(L(f.$$.fragment,b),d=!0)},o(b){V(f.$$.fragment,b),d=!1},d(b){b&&_(e),ae(f),h=!1,p()}}}function Oc(o){let e,r,t=o[28].pubkey+"",n,i,s,l,a;return l=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),f.forEach(_),i=U(c),s=k(c,"DIV",{class:!0});var d=w(s);le(l.$$.fragment,d),d.forEach(_),c.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(s,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,i),v(e,s),se(l,s,null),a=!0},p(u,c){(!a||c[0]&268435456)&&t!==(t=u[28].pubkey+"")&&N(n,t);const f={};c[0]&268435456&&(f.text=u[28].content),c[0]&268435456&&(f.tag=u[28].tags),c[0]&268435456&&(f.id=u[28].id),c[0]&8&&(f.view=u[3]),c[0]&2&&(f.URLPreview=u[1]),c[0]&4&&(f.isPageOwner=u[2]),l.$set(f)},i(u){a||(L(l.$$.fragment,u),a=!0)},o(u){V(l.$$.fragment,u),a=!1},d(u){u&&_(e),ae(l)}}}function Ic(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[28].pubkey],pubkey:o[28].pubkey,$$slots:{nodata:[Oc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[Ec,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[wc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[kc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n[0]&268435456&&(i.queryKey=["metadata",t[28].pubkey]),n[0]&268435456&&(i.pubkey=t[28].pubkey),n[0]&805306382|n[1]&16&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Sc(o){let e,r,t,n,i,s,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Loading note... ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var p=w(e);r=k(p,"DIV",{class:!0});var y=w(r);t=k(y,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(_),b.forEach(_),i=U(y),s=k(y,"DIV",{class:!0});var S=w(s);l=I(S,"Loading note... ("),u=I(S,a),c=I(S,")"),S.forEach(_),y.forEach(_),p.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","loading")},m(h,p){C(h,e,p),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,u),v(s,c),f||(d=W(n,"click",o[11]),f=!0)},p(h,p){p[0]&1&&a!==(a=h[7](h[0])+"")&&N(u,a)},d(h){h&&_(e),f=!1,d()}}}function Cc(o){let e,r,t,n,i,s,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Failed to get note ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var p=w(e);r=k(p,"DIV",{class:!0});var y=w(r);t=k(y,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(_),b.forEach(_),i=U(y),s=k(y,"DIV",{class:!0});var S=w(s);l=I(S,"Failed to get note ("),u=I(S,a),c=I(S,")"),S.forEach(_),y.forEach(_),p.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","error")},m(h,p){C(h,e,p),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,u),v(s,c),f||(d=W(n,"click",o[10]),f=!0)},p(h,p){p[0]&1&&a!==(a=h[7](h[0])+"")&&N(u,a)},d(h){h&&_(e),f=!1,d()}}}function Pc(o){let e,r,t,n,i,s,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Note not found ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var p=w(e);r=k(p,"DIV",{class:!0});var y=w(r);t=k(y,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(_),b.forEach(_),i=U(y),s=k(y,"DIV",{class:!0});var S=w(s);l=I(S,"Note not found ("),u=I(S,a),c=I(S,")"),S.forEach(_),y.forEach(_),p.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","nodata")},m(h,p){C(h,e,p),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,u),v(s,c),f||(d=W(n,"click",o[9]),f=!0)},p(h,p){p[0]&1&&a!==(a=h[7](h[0])+"")&&N(u,a)},d(h){h&&_(e),f=!1,d()}}}function qc(o){let e,r,t,n,i,s,l,a;const u=[$u,Fu,Vu,Uu],c=[];function f(d,h){return h[0]&1&&(e=null),h[0]&1&&(r=null),h[0]&1&&(t=null),h[0]&1&&(n=null),e==null&&(e=x.decode(d[0]).type==="note"||x.decode(d[0]).type==="nevent"),e?0:(r==null&&(r=x.decode(d[0]).type==="npub"),r?1:(t==null&&(t=x.decode(d[0]).type==="nprofile"),t?2:(n==null&&(n=x.decode(d[0]).type==="naddr"),n?3:-1)))}return~(i=f(o,[-1,-1]))&&(s=c[i]=u[i](o)),{c(){s&&s.c(),l=Y()},l(d){s&&s.l(d),l=Y()},m(d,h){~i&&c[i].m(d,h),C(d,l,h),a=!0},p(d,h){let p=i;i=f(d,h),i===p?~i&&c[i].p(d,h):(s&&(ue(),V(c[p],1,1,()=>{c[p]=null}),ce()),~i?(s=c[i],s?s.p(d,h):(s=c[i]=u[i](d),s.c()),L(s,1),s.m(l.parentNode,l)):s=null)},i(d){a||(L(s),a=!0)},o(d){V(s),a=!1},d(d){~i&&c[i].d(d),d&&_(l)}}}const Dc=o=>o[0]==="content-warning";function Rc(o,e,r){let t,n;Ee(o,nn,D=>r(24,t=D)),Ee(o,pi,D=>r(3,n=D));let{encodedId:i}=e,{URLPreview:s}=e,{isPageOwner:l}=e;const a={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function u(D,$){console.log(D);const F={type:"component",value:{metadata:D,pubkey:$},component:a};ye.trigger(F)}const c={ref:os,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function f(D){console.log("click");const $={type:"component",title:"Event Json",value:{note:D},component:c};ye.trigger($)}async function d(D){const $=x.decode(D).data;if(console.log(t),!(D in t)){const F=$.relays&&$.relays.length>0?$.relays:gs,Z=[{authors:[$.pubkey],"#d":[$.identifier],kinds:[$.kind]}],re=await ks(F,Z);return re.length>0&&(re.sort((oe,z)=>z.created_at-oe.created_at),ze(nn,t[D]=re[0],t)),re[0]}return t[D]}const h=D=>x.decode(D).type==="note"?x.decode(D).data:x.decode(D).data.id,p={ref:is,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function y(D){console.log("search");const $={type:"component",component:p,title:"Search",body:"",value:{id:h(D),isPageOwner:l},response:async F=>{console.log(F)}};ye.trigger($)}const b=()=>{console.log("test"),y(i)},E=()=>{console.log("test"),y(i)},S=()=>{console.log("test"),y(i)},q=D=>{f(D)},T=D=>{f(D)},K=(D,$)=>{u(D,$.pubkey)},P=D=>{f(D)},A=(D,$)=>{u(D,$[1])},M=D=>{f(D)},R=D=>{u(D,x.decode(i).data)},J=D=>{u(D,x.decode(i).data.pubkey)},X=D=>{u(D,x.decode(i).data.pubkey)},G=D=>{f(D)},ne=(D,$)=>{u(D,$[1])},de=D=>{f(D)};return o.$$set=D=>{"encodedId"in D&&r(0,i=D.encodedId),"URLPreview"in D&&r(1,s=D.URLPreview),"isPageOwner"in D&&r(2,l=D.isPageOwner)},[i,s,l,n,u,f,d,h,y,b,E,S,q,T,K,P,A,M,R,J,X,G,ne,de]}class Tc extends Oe{constructor(e){super(),Ie(this,e,Rc,qc,we,{encodedId:0,URLPreview:1,isPageOwner:2},null,[-1,-1])}}function ri(o,e,r){const t=o.slice();return t[21]=e[r],t}function ni(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),fe(e.src,r=JSON.parse(o[20].content).picture)||m(e,"src",r),m(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n&1048576&&!fe(e.src,r=JSON.parse(t[20].content).picture)&&m(e,"src",r)},d(t){t&&_(e)}}}function oi(o){let e,r,t=Fe(o[19].tags),n=[];for(let s=0;s<t.length;s+=1)n[s]=ii(ri(o,t,s));const i=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(_),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25 dark:border-s-rose-100/25")},m(s,l){C(s,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(s,l){if(l&1572920){t=Fe(s[19].tags);let a;for(a=0;a<t.length;a+=1){const u=ri(s,t,a);n[a]?(n[a].p(u,l),L(n[a],1)):(n[a]=ii(u),n[a].c(),L(n[a],1),n[a].m(e,null))}for(ue(),a=t.length;a<n.length;a+=1)i(a);ce()}},i(s){if(!r){for(let l=0;l<t.length;l+=1)L(n[l]);r=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)V(n[l]);r=!1},d(s){s&&_(e),Xe(n,s)}}}function Mc(o){let e,r,t=o[21][0]+"",n,i,s=o[21][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),i=O(`]
                  `),l=O(s),a=j(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),i=I(c,`]
                  `),l=I(c,s),a=U(c),c.forEach(_),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,i),v(e,l),v(e,a)},p(u,c){c&524288&&t!==(t=u[21][0]+"")&&N(n,t),c&524288&&s!==(s=u[21][1]+"")&&N(l,s)},i:Q,o:Q,d(u){u&&_(e)}}}function Lc(o){let e,r;return e=new St({props:{queryKey:[o[21][1]],id:o[21][1],$$slots:{nodata:[$c,({text:t})=>({19:t}),({text:t})=>t?524288:0],error:[Fc,({text:t})=>({19:t}),({text:t})=>t?524288:0],loading:[Vc,({text:t})=>({19:t}),({text:t})=>t?524288:0],default:[Uc,({text:t})=>({19:t}),({text:t})=>t?524288:0]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&524288&&(i.queryKey=[t[21][1]]),n&524288&&(i.id=t[21][1]),n&17301512&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Ac(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[21][1]],pubkey:o[21][1],$$slots:{nodata:[Kc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],error:[Qc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],loading:[Hc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],default:[Bc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&524288&&(i.queryKey=["metadata",t[21][1]]),n&524288&&(i.pubkey=t[21][1]),n&18350080&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Nc(o){let e=o[19].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&524288&&e!==(e=t[19].content+"")&&N(r,e)},d(t){t&&_(r)}}}function jc(o){let e="<content-warning>",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p:Q,d(t){t&&_(r)}}}function Uc(o){let e,r,t,n,i,s,l;function a(d,h){return h&524296&&(n=null),n==null&&(n=!!(d[19].tags.some(tf)&&d[3]==!1)),n?jc:Nc}let u=a(o,-1),c=u(o);function f(){return o[15](o[19])}return{c(){e=g("div"),r=O("[e] "),t=g("button"),c.c(),i=j(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=I(h,"[e] "),t=k(h,"BUTTON",{class:!0});var p=w(t);c.l(p),p.forEach(_),h.forEach(_),i=U(d),this.h()},h(){m(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){C(d,e,h),v(e,r),v(e,t),c.m(t,null),C(d,i,h),s||(l=W(t,"click",f),s=!0)},p(d,h){o=d,u===(u=a(o,h))&&c?c.p(o,h):(c.d(1),c=u(o),c&&(c.c(),c.m(t,null)))},d(d){d&&_(e),c.d(),d&&_(i),s=!1,l()}}}function Vc(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("[e] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function Fc(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("[e] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function $c(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("[e] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function Bc(o){let e,r,t,n,i,s=JSON.parse(o[20].content).name+"",l,a,u,c;function f(){return o[14](o[20],o[21])}return{c(){e=g("div"),r=O("to[p] "),t=g("button"),n=O("@"),i=g("u"),l=O(s),a=j(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=I(h,"to[p] "),t=k(h,"BUTTON",{class:!0});var p=w(t);n=I(p,"@"),i=k(p,"U",{});var y=w(i);l=I(y,s),y.forEach(_),p.forEach(_),h.forEach(_),a=U(d),this.h()},h(){m(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){C(d,e,h),v(e,r),v(e,t),v(t,n),v(t,i),v(i,l),C(d,a,h),u||(c=W(t,"click",f),u=!0)},p(d,h){o=d,h&1048576&&s!==(s=JSON.parse(o[20].content).name+"")&&N(l,s)},d(d){d&&_(e),d&&_(a),u=!1,c()}}}function Hc(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function Qc(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function Kc(o){let e,r,t,n=o[21][1]+"",i,s;return{c(){e=g("div"),r=g("div"),t=O("to[p] "),i=O(n),s=j(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"to[p] "),i=I(u,n),u.forEach(_),s=U(a),a.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,i),v(e,s)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&N(i,n)},d(l){l&&_(e)}}}function ii(o){let e,r,t,n;const i=[Ac,Lc,Mc],s=[];function l(a,u){return a[21][0]==="p"?0:a[21][0]==="e"||a[21][0]==="q"?1:2}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function Gc(o){let e,r,t=JSON.parse(o[20].content).picture,n,i,s=JSON.parse(o[20].content).display_name+"",l,a,u,c,f,d,h=JSON.parse(o[20].content).name+"",p,y,b,E,S=new Date(o[19].created_at*1e3).toLocaleString()+"",q,T,K=o[19].tags&&Fe(o[19].tags).length>0,P,A,M,R,J,X,G=t&&ni(o);function ne(){return o[12](o[20],o[19])}function de(){return o[13](o[19])}let D=K&&oi(o);return M=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),G&&G.c(),n=j(),i=g("div"),l=O(s),a=j(),u=g("div"),c=g("button"),f=O("@"),d=g("u"),p=O(h),y=j(),b=g("div"),E=g("button"),q=O(S),T=j(),D&&D.c(),P=j(),A=g("div"),ie(M.$$.fragment),this.h()},l($){e=k($,"DIV",{class:!0});var F=w(e);r=k(F,"DIV",{});var Z=w(r);G&&G.l(Z),Z.forEach(_),n=U(F),i=k(F,"DIV",{class:!0});var re=w(i);l=I(re,s),re.forEach(_),a=U(F),u=k(F,"DIV",{class:!0});var oe=w(u);c=k(oe,"BUTTON",{class:!0});var z=w(c);f=I(z,"@"),d=k(z,"U",{});var ee=w(d);p=I(ee,h),ee.forEach(_),z.forEach(_),oe.forEach(_),y=U(F),b=k(F,"DIV",{class:!0});var te=w(b);E=k(te,"BUTTON",{class:!0});var pe=w(E);q=I(pe,S),pe.forEach(_),te.forEach(_),F.forEach(_),T=U($),D&&D.l($),P=U($),A=k($,"DIV",{class:!0});var be=w(A);le(M.$$.fragment,be),be.forEach(_),this.h()},h(){m(i,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 dark:text-blue-500/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(E,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(A,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m($,F){C($,e,F),v(e,r),G&&G.m(r,null),v(e,n),v(e,i),v(i,l),v(e,a),v(e,u),v(u,c),v(c,f),v(c,d),v(d,p),v(e,y),v(e,b),v(b,E),v(E,q),C($,T,F),D&&D.m($,F),C($,P,F),C($,A,F),se(M,A,null),R=!0,J||(X=[W(c,"click",ne),W(E,"click",de)],J=!0)},p($,F){o=$,F&1048576&&(t=JSON.parse(o[20].content).picture),t?G?G.p(o,F):(G=ni(o),G.c(),G.m(r,null)):G&&(G.d(1),G=null),(!R||F&1048576)&&s!==(s=JSON.parse(o[20].content).display_name+"")&&N(l,s),(!R||F&1048576)&&h!==(h=JSON.parse(o[20].content).name+"")&&N(p,h),(!R||F&524288)&&S!==(S=new Date(o[19].created_at*1e3).toLocaleString()+"")&&N(q,S),F&524288&&(K=o[19].tags&&Fe(o[19].tags).length>0),K?D?(D.p(o,F),F&524288&&L(D,1)):(D=oi(o),D.c(),L(D,1),D.m(P.parentNode,P)):D&&(ue(),V(D,1,1,()=>{D=null}),ce());const Z={};F&524288&&(Z.text=o[19].content),F&524288&&(Z.tag=o[19].tags),F&524288&&(Z.id=o[19].id),F&8&&(Z.view=o[3]),F&2&&(Z.URLPreview=o[1]),F&4&&(Z.isPageOwner=o[2]),M.$set(Z)},i($){R||(L(D),L(M.$$.fragment,$),R=!0)},o($){V(D),V(M.$$.fragment,$),R=!1},d($){$&&_(e),G&&G.d(),$&&_(T),D&&D.d($),$&&_(P),$&&_(A),ae(M),J=!1,Te(X)}}}function Jc(o){let e,r,t=o[19].pubkey+"",n,i,s,l,a=new Date(o[19].created_at*1e3).toLocaleString()+"",u,c,f,d,h,p;function y(){return o[11](o[19])}return f=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("div"),l=g("button"),u=O(a),c=j(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),S.forEach(_),i=U(E),s=k(E,"DIV",{class:!0});var q=w(s);l=k(q,"BUTTON",{class:!0});var T=w(l);u=I(T,a),T.forEach(_),c=U(q),le(f.$$.fragment,q),q.forEach(_),E.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(s,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(e,i),v(e,s),v(s,l),v(l,u),v(s,c),se(f,s,null),d=!0,h||(p=W(l,"click",y),h=!0)},p(b,E){o=b,(!d||E&524288)&&t!==(t=o[19].pubkey+"")&&N(n,t),(!d||E&524288)&&a!==(a=new Date(o[19].created_at*1e3).toLocaleString()+"")&&N(u,a);const S={};E&524288&&(S.text=o[19].content),E&524288&&(S.tag=o[19].tags),E&524288&&(S.id=o[19].id),E&8&&(S.view=o[3]),E&2&&(S.URLPreview=o[1]),E&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(L(f.$$.fragment,b),d=!0)},o(b){V(f.$$.fragment,b),d=!1},d(b){b&&_(e),ae(f),h=!1,p()}}}function zc(o){let e,r,t=o[19].pubkey+"",n,i,s,l=new Date(o[19].created_at*1e3).toLocaleString()+"",a,u,c,f,d,h,p;function y(){return o[10](o[19])}return f=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("button"),a=O(l),u=j(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),i=U(S),s=k(S,"BUTTON",{class:!0});var q=w(s);a=I(q,l),q.forEach(_),S.forEach(_),u=U(E),c=k(E,"DIV",{class:!0});var T=w(c);le(f.$$.fragment,T),T.forEach(_),E.forEach(_),this.h()},h(){m(s,"class","text-xs underline decoration-secondary-500"),m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(r,i),v(r,s),v(s,a),v(e,u),v(e,c),se(f,c,null),d=!0,h||(p=W(s,"click",y),h=!0)},p(b,E){o=b,(!d||E&524288)&&t!==(t=o[19].pubkey+"")&&N(n,t),(!d||E&524288)&&l!==(l=new Date(o[19].created_at*1e3).toLocaleString()+"")&&N(a,l);const S={};E&524288&&(S.text=o[19].content),E&524288&&(S.tag=o[19].tags),E&524288&&(S.id=o[19].id),E&8&&(S.view=o[3]),E&2&&(S.URLPreview=o[1]),E&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(L(f.$$.fragment,b),d=!0)},o(b){V(f.$$.fragment,b),d=!1},d(b){b&&_(e),ae(f),h=!1,p()}}}function Wc(o){let e,r,t=o[19].pubkey+"",n,i,s,l,a;return l=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),i=j(),s=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),f.forEach(_),i=U(c),s=k(c,"DIV",{class:!0});var d=w(s);le(l.$$.fragment,d),d.forEach(_),c.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(s,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,i),v(e,s),se(l,s,null),a=!0},p(u,c){(!a||c&524288)&&t!==(t=u[19].pubkey+"")&&N(n,t);const f={};c&524288&&(f.text=u[19].content),c&524288&&(f.tag=u[19].tags),c&524288&&(f.id=u[19].id),c&8&&(f.view=u[3]),c&2&&(f.URLPreview=u[1]),c&4&&(f.isPageOwner=u[2]),l.$set(f)},i(u){a||(L(l.$$.fragment,u),a=!0)},o(u){V(l.$$.fragment,u),a=!1},d(u){u&&_(e),ae(l)}}}function Yc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[19].pubkey],pubkey:o[19].pubkey,$$slots:{nodata:[Wc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],error:[zc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],loading:[Jc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],default:[Gc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&524288&&(i.queryKey=["metadata",t[19].pubkey]),n&524288&&(i.pubkey=t[19].pubkey),n&18350094&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Xc(o){let e,r,t,n,i,s,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var p=w(r);t=k(p,"DIV",{class:!0});var y=w(t);n=k(y,"BUTTON",{class:!0});var b=w(n);b.forEach(_),y.forEach(_),i=U(p),s=k(p,"DIV",{class:!0});var E=w(s);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(_),p.forEach(_),h.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","loading")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,a),v(s,u),c||(f=W(n,"click",o[9]),c=!0)},p(d,h){h&1&&N(a,d[0])},d(d){d&&_(e),c=!1,f()}}}function Zc(o){let e,r,t,n,i,s,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var p=w(r);t=k(p,"DIV",{class:!0});var y=w(t);n=k(y,"BUTTON",{class:!0});var b=w(n);b.forEach(_),y.forEach(_),i=U(p),s=k(p,"DIV",{class:!0});var E=w(s);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(_),p.forEach(_),h.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","error")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,a),v(s,u),c||(f=W(n,"click",o[8]),c=!0)},p(d,h){h&1&&N(a,d[0])},d(d){d&&_(e),c=!1,f()}}}function xc(o){let e,r,t,n,i,s,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),i=j(),s=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var p=w(r);t=k(p,"DIV",{class:!0});var y=w(t);n=k(y,"BUTTON",{class:!0});var b=w(n);b.forEach(_),y.forEach(_),i=U(p),s=k(p,"DIV",{class:!0});var E=w(s);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(_),p.forEach(_),h.forEach(_),this.h()},h(){m(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),m(t,"class","flex justify-center items-center h-auto"),m(s,"class","text-sm break-all overflow-hidden"),m(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),m(e,"slot","nodata")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,i),v(r,s),v(s,l),v(s,a),v(s,u),c||(f=W(n,"click",o[7]),c=!0)},p(d,h){h&1&&N(a,d[0])},d(d){d&&_(e),c=!1,f()}}}function ef(o){let e,r,t,n;return t=new St({props:{queryKey:[o[0]],id:o[0],$$slots:{nodata:[xc,({text:i})=>({19:i}),({text:i})=>i?524288:0],error:[Zc,({text:i})=>({19:i}),({text:i})=>i?524288:0],loading:[Xc,({text:i})=>({19:i}),({text:i})=>i?524288:0],default:[Yc,({text:i})=>({19:i}),({text:i})=>i?524288:0]},$$scope:{ctx:o}}}),{c(){e=g("div"),r=g("div"),ie(t.$$.fragment),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=w(e);r=k(s,"DIV",{class:!0});var l=w(r);le(t.$$.fragment,l),l.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(i,s){C(i,e,s),v(e,r),se(t,r,null),n=!0},p(i,[s]){const l={};s&1&&(l.queryKey=[i[0]]),s&1&&(l.id=i[0]),s&17301519&&(l.$$scope={dirty:s,ctx:i}),t.$set(l)},i(i){n||(L(t.$$.fragment,i),n=!0)},o(i){V(t.$$.fragment,i),n=!1},d(i){i&&_(e),ae(t)}}}const tf=o=>o[0]==="content-warning";function rf(o,e,r){let t;Ee(o,pi,P=>r(3,t=P));let{id:n}=e,{URLPreview:i}=e,{isPageOwner:s}=e;const l={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function a(P,A){console.log(P);const M={type:"component",value:{metadata:P,pubkey:A},component:l};ye.trigger(M)}const u={ref:os,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function c(P){console.log("click");const A={type:"component",title:"Event Json",value:{note:P},component:u};ye.trigger(A)}const f={ref:is,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function d(P){console.log("search");const A={type:"component",component:f,title:"Search",body:"",value:{id:P,isPageOwner:s},response:async M=>{console.log(M)}};ye.trigger(A)}const h=()=>{d(n)},p=()=>{d(n)},y=()=>{d(n)},b=P=>{c(P)},E=P=>{c(P)},S=(P,A)=>{a(P,A.pubkey)},q=P=>{c(P)},T=(P,A)=>{a(P,A[1])},K=P=>{c(P)};return o.$$set=P=>{"id"in P&&r(0,n=P.id),"URLPreview"in P&&r(1,i=P.URLPreview),"isPageOwner"in P&&r(2,s=P.isPageOwner)},[n,i,s,t,a,c,d,h,p,y,b,E,S,q,T,K]}class nf extends Oe{constructor(e){super(),Ie(this,e,rf,ef,we,{id:0,URLPreview:1,isPageOwner:2})}}function si(o,e,r){const t=o.slice();return t[23]=e[r],t[25]=r,t}function of(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:Jf,then:lf,catch:af,value:22,blocks:[,,,]};return Ve(r=o[11](o[1],o[2]),n),{c(){e=Y(),n.block.c()},l(i){e=Y(),n.block.l(i)},m(i,s){C(i,e,s),n.block.m(i,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,s){o=i,n.ctx=o,s&6&&r!==(r=o[11](o[1],o[2]))&&Ve(r,n)||Yt(n,o,s)},i(i){t||(L(n.block),t=!0)},o(i){for(let s=0;s<3;s+=1){const l=n.blocks[s];V(l)}t=!1},d(i){i&&_(e),n.block.d(i),n.token=null,n=null}}}function sf(o){let e,r,t,n,i=o[2][o[2].findIndex(ui)][1]+"",s,l,a;return{c(){e=g("button"),r=O("content-warning"),t=g("br"),n=j(),s=O(i),this.h()},l(u){e=k(u,"BUTTON",{type:!0,class:!0});var c=w(e);r=I(c,"content-warning"),t=k(c,"BR",{}),n=U(c),s=I(c,i),c.forEach(_),this.h()},h(){m(e,"type","button"),m(e,"class","btn variant-filled-warning m-0")},m(u,c){C(u,e,c),v(e,r),v(e,t),v(e,n),v(e,s),l||(a=W(e,"click",o[12]),l=!0)},p(u,c){c&4&&i!==(i=u[2][u[2].findIndex(ui)][1]+"")&&N(s,i)},i:Q,o:Q,d(u){u&&_(e),l=!1,a()}}}function af(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function lf(o){let e,r,t=o[22],n=[];for(let s=0;s<t.length;s+=1)n[s]=li(si(o,t,s));const i=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=g("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(_),this.h()},h(){m(e,"class","parent-container break-all whitespace-pre-wrap")},m(s,l){C(s,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(s,l){if(l&134221822){t=s[22];let a;for(a=0;a<t.length;a+=1){const u=si(s,t,a);n[a]?(n[a].p(u,l),L(n[a],1)):(n[a]=li(u),n[a].c(),L(n[a],1),n[a].m(e,null))}for(ue(),a=t.length;a<n.length;a+=1)i(a);ce()}},i(s){if(!r){for(let l=0;l<t.length;l+=1)L(n[l]);r=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)V(n[l]);r=!1},d(s){s&&_(e),Xe(n,s)}}}function ai(o){let e,r,t,n;const i=[pf,_f,hf,df,ff,cf,uf],s=[];function l(a,u){return a[23].type==="emoji"?0:a[23].type==="url"?1:a[23].type==="image"?2:a[23].type==="nostr"&&a[23].url?3:a[23].type==="quote"&&a[23].number!==void 0?4:a[23].type==="hashtag"?5:a[23].content.length>0?6:-1}return~(e=l(o))&&(r=s[e]=i[e](o)),{c(){r&&r.c(),t=Y()},l(a){r&&r.l(a),t=Y()},m(a,u){~e&&s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?~e&&s[e].p(a,u):(r&&(ue(),V(s[c],1,1,()=>{s[c]=null}),ce()),~e?(r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t)):r=null)},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){~e&&s[e].d(a),a&&_(t)}}}function uf(o){let e,r=o[23].content+"",t;return{c(){e=g("span"),t=O(r)},l(n){e=k(n,"SPAN",{});var i=w(e);t=I(i,r),i.forEach(_)},m(n,i){C(n,e,i),v(e,t)},p(n,i){i&6&&r!==(r=n[23].content+"")&&N(t,r)},i:Q,o:Q,d(n){n&&_(e)}}}function cf(o){let e,r,t=o[23].content+"",n,i,s,l;function a(){return o[18](o[23])}return{c(){e=g("span"),r=g("button"),n=O(t),i=j(),this.h()},l(u){e=k(u,"SPAN",{class:!0});var c=w(e);r=k(c,"BUTTON",{class:!0});var f=w(r);n=I(f,t),f.forEach(_),i=U(c),c.forEach(_),this.h()},h(){m(r,"class","anchor"),m(e,"class","break-all whitespace-pre-wrap")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,i),s||(l=W(r,"click",a),s=!0)},p(u,c){o=u,c&6&&t!==(t=o[23].content+"")&&N(n,t)},i:Q,o:Q,d(u){u&&_(e),s=!1,l()}}}function ff(o){let e,r,t,n;const i=[bf,yf,mf,vf],s=[];function l(a,u){return a[2][a[23].number][0]==="p"?0:a[2][a[23].number][0]==="e"||a[2][a[23].number][0]==="q"?1:a[2][a[23].number][0]==="t"?2:3}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function df(o){let e,r,t,n,i;const s=[If,Of],l=[];function a(u,c){return c&6&&(e=null),e==null&&(e=!!u[7](u[23].url)),e?0:1}return r=a(o,-1),t=l[r]=s[r](o),{c(){t.c(),n=Y()},l(u){t.l(u),n=Y()},m(u,c){l[r].m(u,c),C(u,n,c),i=!0},p(u,c){let f=r;r=a(u,c),r===f?l[r].p(u,c):(ue(),V(l[f],1,1,()=>{l[f]=null}),ce(),t=l[r],t?t.p(u,c):(t=l[r]=s[r](u),t.c()),L(t,1),t.m(n.parentNode,n))},i(u){i||(L(t),i=!0)},o(u){V(t),i=!1},d(u){l[r].d(u),u&&_(n)}}}function hf(o){let e;function r(i,s){return i[3]?Cf:Sf}let t=r(o),n=t(o);return{c(){n.c(),e=Y()},l(i){n.l(i),e=Y()},m(i,s){n.m(i,s),C(i,e,s)},p(i,s){t===(t=r(i))&&n?n.p(i,s):(n.d(1),n=t(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(i){n.d(i),i&&_(e)}}}function _f(o){let e,r,t,n;const i=[Rf,Df],s=[];function l(a,u){return a[3]?0:1}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function pf(o){let e,r,t,n,i,s;function l(){return o[14](o[23])}return{c(){e=g("span"),r=g("img"),n=j(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0}),n=U(u),u.forEach(_),this.h()},h(){m(r,"class","max-h-[1.5em] object-contain"),fe(r.src,t=o[23].url)||m(r,"src",t),m(r,"alt",""),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(a,u){C(a,e,u),v(e,r),v(e,n),i||(s=W(r,"click",l),i=!0)},p(a,u){o=a,u&6&&!fe(r.src,t=o[23].url)&&m(r,"src",t)},i:Q,o:Q,d(a){a&&_(e),i=!1,s()}}}function vf(o){let e=o[2][o[23].number][1]+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[2][t[23].number][1]+"")&&N(r,e)},i:Q,o:Q,d(t){t&&_(r)}}}function mf(o){let e,r,t=o[2][o[23].number][1]+"",n,i,s;function l(){return o[17](o[23])}return{c(){e=g("button"),r=O("#"),n=O(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var u=w(e);r=I(u,"#"),n=I(u,t),u.forEach(_),this.h()},h(){m(e,"class","anchor")},m(a,u){C(a,e,u),v(e,r),v(e,n),i||(s=W(e,"click",l),i=!0)},p(a,u){o=a,u&6&&t!==(t=o[2][o[23].number][1]+"")&&N(n,t)},i:Q,o:Q,d(a){a&&_(e),i=!1,s()}}}function yf(o){let e,r;return e=new nf({props:{id:o[2][o[23].number][1],URLPreview:o[3],isPageOwner:o[4]}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&6&&(i.id=t[2][t[23].number][1]),n&8&&(i.URLPreview=t[3]),n&16&&(i.isPageOwner=t[4]),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function bf(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[2][o[23].number][1]],pubkey:o[2][o[23].number][1],$$slots:{nodata:[Ef,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],error:[wf,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],loading:[kf,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],default:[gf,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0]},$$scope:{ctx:o}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&6&&(i.queryKey=["metadata",t[2][t[23].number][1]]),n&6&&(i.pubkey=t[2][t[23].number][1]),n&402653190&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function gf(o){let e,r,t,n=JSON.parse(o[27].content).name+"",i,s,l,a;function u(){return o[16](o[23],o[27])}return{c(){e=g("button"),r=O("@"),t=g("u"),i=O(n),s=j(),this.h()},l(c){e=k(c,"BUTTON",{class:!0});var f=w(e);r=I(f,"@"),t=k(f,"U",{});var d=w(t);i=I(d,n),d.forEach(_),f.forEach(_),s=U(c),this.h()},h(){m(e,"class","flex inline-flex text-sm text-black/80 dark:text-white/80")},m(c,f){C(c,e,f),v(e,r),v(e,t),v(t,i),C(c,s,f),l||(a=W(e,"click",u),l=!0)},p(c,f){o=c,f&134217728&&n!==(n=JSON.parse(o[27].content).name+"")&&N(i,n)},d(c){c&&_(e),c&&_(s),l=!1,a()}}}function kf(o){let e,r,t=o[2][o[23].number][1]+"",n,i;return{c(){e=g("div"),r=g("div"),n=O(t),i=j(),this.h()},l(s){e=k(s,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(_),i=U(l),l.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(s,l){C(s,e,l),v(e,r),v(r,n),v(e,i)},p(s,l){l&6&&t!==(t=s[2][s[23].number][1]+"")&&N(n,t)},d(s){s&&_(e)}}}function wf(o){let e,r,t=o[2][o[23].number][1]+"",n,i;return{c(){e=g("div"),r=g("div"),n=O(t),i=j(),this.h()},l(s){e=k(s,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(_),i=U(l),l.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(s,l){C(s,e,l),v(e,r),v(r,n),v(e,i)},p(s,l){l&6&&t!==(t=s[2][s[23].number][1]+"")&&N(n,t)},d(s){s&&_(e)}}}function Ef(o){let e,r,t=o[2][o[23].number][1]+"",n,i;return{c(){e=g("div"),r=g("div"),n=O(t),i=j(),this.h()},l(s){e=k(s,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(_),i=U(l),l.forEach(_),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(s,l){C(s,e,l),v(e,r),v(r,n),v(e,i)},p(s,l){l&6&&t!==(t=s[2][s[23].number][1]+"")&&N(n,t)},d(s){s&&_(e)}}}function Of(o){let e,r=o[23].content+"",t;return{c(){e=g("span"),t=O(r)},l(n){e=k(n,"SPAN",{});var i=w(e);t=I(i,r),i.forEach(_)},m(n,i){C(n,e,i),v(e,t)},p(n,i){i&6&&r!==(r=n[23].content+"")&&N(t,r)},i:Q,o:Q,d(n){n&&_(e)}}}function If(o){let e,r;return e=new Tc({props:{encodedId:o[23].url,URLPreview:o[3],isPageOwner:o[4]}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&6&&(i.encodedId=t[23].url),n&8&&(i.URLPreview=t[3]),n&16&&(i.isPageOwner=t[4]),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Sf(o){let e,r,t,n;function i(a,u){return a[23].content.length>80?qf:Pf}let s=i(o),l=s(o);return{c(){e=g("span"),r=g("a"),l.c(),n=j(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(_),n=U(u),u.forEach(_),this.h()},h(){m(r,"class","anchor example svelte-zj6vf6"),m(r,"href",t=o[23].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),v(e,n)},p(a,u){s===(s=i(a))&&l?l.p(a,u):(l.d(1),l=s(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&m(r,"href",t)},d(a){a&&_(e),l.d()}}}function Cf(o){let e,r,t,n,i,s;function l(){return o[15](o[23])}return{c(){e=g("span"),r=g("img"),n=j(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),n=U(u),u.forEach(_),this.h()},h(){m(r,"class","max-h-[10em] object-contain"),fe(r.src,t=o[23].content)||m(r,"src",t),m(r,"alt",""),m(r,"loading","lazy"),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(a,u){C(a,e,u),v(e,r),v(e,n),i||(s=W(r,"click",l),i=!0)},p(a,u){o=a,u&6&&!fe(r.src,t=o[23].content)&&m(r,"src",t)},d(a){a&&_(e),i=!1,s()}}}function Pf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&N(r,e)},d(t){t&&_(r)}}}function qf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,i){C(n,r,i),C(n,t,i)},p(n,i){i&6&&e!==(e=n[23].content.slice(0,75)+"")&&N(r,e)},d(n){n&&_(r),n&&_(t)}}}function Df(o){let e,r,t,n;function i(a,u){return a[23].content.length>80?Mf:Tf}let s=i(o),l=s(o);return{c(){e=g("span"),r=g("a"),l.c(),n=j(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(_),n=U(u),u.forEach(_),this.h()},h(){m(r,"class","anchor example svelte-zj6vf6"),m(r,"href",t=o[23].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),v(e,n)},p(a,u){s===(s=i(a))&&l?l.p(a,u):(l.d(1),l=s(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&m(r,"href",t)},i:Q,o:Q,d(a){a&&_(e),l.d()}}}function Rf(o){let e,r,t,n,i,s,l;const a=[jf,Nf,Af,Lf],u=[];function c(f,d){var h;return d&6&&(e=null),d&6&&(r=null),d&6&&(t=null),e==null&&(e=!!new URL(f[23].content).hostname.endsWith("twitter.com")),e?0:(r==null&&(r=new URL(f[23].content).hostname==="www.youtube.com"||new URL(f[23].content).hostname==="m.youtube.com"||new URL(f[23].content).hostname==="youtu.be"),r?1:(t==null&&(t=!!((h=f[23].content)!=null&&h.endsWith(".mp4"))),t?2:3))}return n=c(o,-1),i=u[n]=a[n](o),{c(){i.c(),s=Y()},l(f){i.l(f),s=Y()},m(f,d){u[n].m(f,d),C(f,s,d),l=!0},p(f,d){let h=n;n=c(f,d),n===h?u[n].p(f,d):(ue(),V(u[h],1,1,()=>{u[h]=null}),ce(),i=u[n],i?i.p(f,d):(i=u[n]=a[n](f),i.c()),L(i,1),i.m(s.parentNode,s))},i(f){l||(L(i),l=!0)},o(f){V(i),l=!1},d(f){u[n].d(f),f&&_(s)}}}function Tf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&N(r,e)},d(t){t&&_(r)}}}function Mf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,i){C(n,r,i),C(n,t,i)},p(n,i){i&6&&e!==(e=n[23].content.slice(0,75)+"")&&N(r,e)},d(n){n&&_(r),n&&_(t)}}}function Lf(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:Qf,then:Vf,catch:Uf,value:26,blocks:[,,,]};return Ve(r=o[8](o[23].content),n),{c(){e=Y(),n.block.c()},l(i){e=Y(),n.block.l(i)},m(i,s){C(i,e,s),n.block.m(i,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,s){o=i,n.ctx=o,s&6&&r!==(r=o[8](o[23].content))&&Ve(r,n)||Yt(n,o,s)},i(i){t||(L(n.block),t=!0)},o(i){for(let s=0;s<3;s+=1){const l=n.blocks[s];V(l)}t=!1},d(i){i&&_(e),n.block.d(i),n.token=null,n=null}}}function Af(o){let e,r,t,n,i,s;return{c(){e=g("video"),r=g("source"),n=g("track"),s=O(`
                  Your browser does not support the video tag.
                `),this.h()},l(l){e=k(l,"VIDEO",{class:!0});var a=w(e);r=k(a,"SOURCE",{src:!0,type:!0}),n=k(a,"TRACK",{kind:!0,src:!0,label:!0}),s=I(a,`
                  Your browser does not support the video tag.
                `),a.forEach(_),this.h()},h(){fe(r.src,t=o[23].content)||m(r,"src",t),m(r,"type","video/mp4"),m(n,"kind","captions"),fe(n.src,i="")||m(n,"src",i),m(n,"label","English"),n.default=!0,e.controls=!0,m(e,"class","max-h-[20em]")},m(l,a){C(l,e,a),v(e,r),v(e,n),v(e,s)},p(l,a){a&6&&!fe(r.src,t=l[23].content)&&m(r,"src",t)},i:Q,o:Q,d(l){l&&_(e)}}}function Nf(o){let e,r;return{c(){e=g("iframe"),this.h()},l(t){e=k(t,"IFRAME",{class:!0,width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),w(e).forEach(_),this.h()},h(){m(e,"class","rounded"),m(e,"width","320"),m(e,"height","180"),fe(e.src,r=`https://www.youtube.com/embed/${o[9](o[23].content)}`)||m(e,"src",r),m(e,"title","YouTube video player"),m(e,"frameborder","0"),m(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.allowFullscreen=!0},m(t,n){C(t,e,n)},p(t,n){n&6&&!fe(e.src,r=`https://www.youtube.com/embed/${t[9](t[23].content)}`)&&m(e,"src",r)},i:Q,o:Q,d(t){t&&_(e)}}}function jf(o){let e,r,t,n,i=o[23].content+"",s,l,a,u,c,f;return{c(){e=g("div"),r=g("blockquote"),t=g("p"),n=g("a"),s=O(i),a=j(),u=g("script"),f=j(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=k(h,"BLOCKQUOTE",{class:!0});var p=w(r);t=k(p,"P",{lang:!0,dir:!0});var y=w(t);n=k(y,"A",{class:!0,href:!0});var b=w(n);s=I(b,i),b.forEach(_),y.forEach(_),p.forEach(_),a=U(h),u=k(h,"SCRIPT",{src:!0,charset:!0});var E=w(u);E.forEach(_),f=U(h),h.forEach(_),this.h()},h(){m(n,"class","anchor example svelte-zj6vf6"),m(n,"href",l=o[23].content),m(t,"lang","ja"),m(t,"dir","ltr"),m(r,"class","twitter-tweet"),u.async=!0,fe(u.src,c="https://platform.twitter.com/widgets.js")||m(u,"src",c),m(u,"charset","utf-8"),m(e,"class","max-h-[24rem] max-w-[36rem] overflow-auto")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),v(n,s),v(e,a),v(e,u),v(e,f)},p(d,h){h&6&&i!==(i=d[23].content+"")&&N(s,i),h&6&&l!==(l=d[23].content)&&m(n,"href",l)},i:Q,o:Q,d(d){d&&_(e)}}}function Uf(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function Vf(o){let e,r,t,n;const i=[$f,Ff],s=[];function l(a,u){return a[5][a[23].content].title!==""?0:1}return e=l(o),r=s[e]=i[e](o),{c(){r.c(),t=j()},l(a){r.l(a),t=U(a)},m(a,u){s[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ue(),V(s[c],1,1,()=>{s[c]=null}),ce(),r=s[e],r?r.p(a,u):(r=s[e]=i[e](a),r.c()),L(r,1),r.m(t.parentNode,t))},i(a){n||(L(r),n=!0)},o(a){V(r),n=!1},d(a){s[e].d(a),a&&_(t)}}}function Ff(o){let e,r,t;function n(l,a){return l[23].content.length>80?Hf:Bf}let i=n(o),s=i(o);return{c(){e=g("span"),r=g("a"),s.c(),this.h()},l(l){e=k(l,"SPAN",{class:!0});var a=w(e);r=k(a,"A",{class:!0,href:!0,target:!0});var u=w(r);s.l(u),u.forEach(_),a.forEach(_),this.h()},h(){m(r,"class","anchor example svelte-zj6vf6"),m(r,"href",t=o[23].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(l,a){C(l,e,a),v(e,r),s.m(r,null)},p(l,a){i===(i=n(l))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(r,null))),a&6&&t!==(t=l[23].content)&&m(r,"href",t)},i:Q,o:Q,d(l){l&&_(e),s.d()}}}function $f(o){let e,r;return e=new Mu({props:{ogp:o[5][o[23].content],url:o[23].content}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,n){se(e,t,n),r=!0},p(t,n){const i={};n&38&&(i.ogp=t[5][t[23].content]),n&6&&(i.url=t[23].content),e.$set(i)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Bf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&N(r,e)},d(t){t&&_(r)}}}function Hf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,i){C(n,r,i),C(n,t,i)},p(n,i){i&6&&e!==(e=n[23].content.slice(0,75)+"")&&N(r,e)},d(n){n&&_(r),n&&_(t)}}}function Qf(o){let e,r,t,n;function i(a,u){return a[23].content.length>80?Gf:Kf}let s=i(o),l=s(o);return{c(){e=g("span"),r=g("a"),l.c(),n=j(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(_),u.forEach(_),n=U(a),this.h()},h(){m(r,"class","anchor example svelte-zj6vf6"),m(r,"href",t=o[23].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),C(a,n,u)},p(a,u){s===(s=i(a))&&l?l.p(a,u):(l.d(1),l=s(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&m(r,"href",t)},i:Q,o:Q,d(a){a&&_(e),l.d(),a&&_(n)}}}function Kf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&N(r,e)},d(t){t&&_(r)}}}function Gf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,i){C(n,r,i),C(n,t,i)},p(n,i){i&6&&e!==(e=n[23].content.slice(0,75)+"")&&N(r,e)},d(n){n&&_(r),n&&_(t)}}}function li(o){let e,r,t=o[23].content.length>0&&ai(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,i){t&&t.m(n,i),C(n,e,i),r=!0},p(n,i){n[23].content.length>0?t?(t.p(n,i),i&6&&L(t,1)):(t=ai(n),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(ue(),V(t,1,1,()=>{t=null}),ce())},i(n){r||(L(t),r=!0)},o(n){V(t),r=!1},d(n){t&&t.d(n),n&&_(e)}}}function Jf(o){let e;return{c(){e=O(o[1])},l(r){e=I(r,o[1])},m(r,t){C(r,e,t)},p(r,t){t&2&&N(e,r[1])},i:Q,o:Q,d(r){r&&_(e)}}}function zf(o){let e,r,t,n,i;const s=[sf,of],l=[];function a(u,c){return c&5&&(e=null),e==null&&(e=!!(u[2].some(Yf)&&u[0]==!1)),e?0:1}return r=a(o,-1),t=l[r]=s[r](o),{c(){t.c(),n=Y()},l(u){t.l(u),n=Y()},m(u,c){l[r].m(u,c),C(u,n,c),i=!0},p(u,[c]){let f=r;r=a(u,c),r===f?l[r].p(u,c):(ue(),V(l[f],1,1,()=>{l[f]=null}),ce(),t=l[r],t?t.p(u,c):(t=l[r]=s[r](u),t.c()),L(t,1),t.m(n.parentNode,n))},i(u){i||(L(t),i=!0)},o(u){V(t),i=!1},d(u){l[r].d(u),u&&_(n)}}}function Wf(o,e){e||(e=window.location.href),o=o.replace(/[\[\]]/g,"\\$&");const t=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)").exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}const Yf=o=>o[0]==="content-warning",ui=o=>o[0]==="content-warning";function Xf(o,e,r){let t,n;Ee(o,on,R=>r(19,t=R)),Ee(o,Je,R=>r(5,n=R));let{id:i}=e,{text:s}=e,{tag:l}=e,{URLPreview:a}=e,{isPageOwner:u}=e;const c={ref:Du,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function f(R){if(typeof R=="string"){const J={type:"component",image:R,component:c};ye.trigger(J)}}function d(R){try{return x.decode(R),!0}catch{return!1}}async function h(R){if(!n[R]||n[R].title==="")try{const J=await ws(R);Je.update(X=>({...X,[R]:J}))}catch(J){console.log(J),ze(Je,n[R].title="",n),ze(Je,n[R].image="",n),ze(Je,n[R].description="",n),ze(Je,n[R].favicon="",n)}}const p=R=>{const J=new URL(R);if(J.hostname==="youtu.be")return J.pathname.substring(1);if(J.hostname==="www.youtube.com"||J.hostname==="m.youtube.com")return J.pathname.startsWith("/shorts/")?J.pathname.replace("/shorts/",""):Wf("v",R)},y={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function b(R,J){console.log(R);const X={type:"component",value:{metadata:R,pubkey:J},component:y};ye.trigger(X)}async function E(R,J){if(i in t)return t[i];{const X=await Iu(R,J);return ze(on,t[i]=X,t),X}}let{view:S=!1}=e;function q(){r(0,S=!0)}const T=R=>f(R.url),K=R=>f(R.content),P=(R,J)=>{const X=R.number===void 0?0:R.number;b(J,l[X][1])},A=R=>{console.log(R.number),R.number!==void 0&&sn(`../t/${l[R.number][1]}`)},M=R=>{sn(`../t/${R.content.slice(1)}`)};return o.$$set=R=>{"id"in R&&r(13,i=R.id),"text"in R&&r(1,s=R.text),"tag"in R&&r(2,l=R.tag),"URLPreview"in R&&r(3,a=R.URLPreview),"isPageOwner"in R&&r(4,u=R.isPageOwner),"view"in R&&r(0,S=R.view)},[S,s,l,a,u,n,f,d,h,p,b,E,q,i,T,K,P,A,M]}class Ae extends Oe{constructor(e){super(),Ie(this,e,Xf,zf,we,{id:13,text:1,tag:2,URLPreview:3,isPageOwner:4,view:0})}}export{Ae as C,nd as M,od as N,is as S,St as T,Ze as a,_d as b,Fr as c,os as d,Le as e,ld as f,Io as g,ad as h,cd as i,fd as j,Wi as k,ba as l,ye as m,Cr as n,sd as o,Xt as p,id as s,ud as t,dd as u,hd as w};
