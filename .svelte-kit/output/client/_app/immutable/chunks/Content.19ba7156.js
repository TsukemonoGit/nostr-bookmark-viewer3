import{S as Ee,i as Oe,s as we,e as Y,b as C,O as W,g as M,v as ce,d as F,f as fe,h as p,L as ke,a3 as ls,Q as $t,R as Xr,K as Q,k as g,l as k,m as w,n as y,F as v,Y as us,a5 as mr,a6 as We,P as Te,U as Zr,x as xr,y as se,z as ue,A as ae,ab as di,aq as cs,B as le,a as U,c as V,V as de,q as O,r as I,a9 as en,W as tn,u as T,H as fs,E as ds,a1 as hs,a4 as _s,C as Ce,G as Pe,I as qe,J as De,o as ps,ar as hi,a7 as Ke,ad as Ir,$ as Ve,a0 as Yt,X as Xe,T as ze}from"./index.1fa16860.js";import{D as Bt,E as rn,F as _i,G as vs,B as pi,H as ms,A as ys,I as bs,J as vi,n as x,t as Ht,s as gs,P as ks,K as nn,c as mi,R as ws,f as Es,u as Fe,L as on,M as Je,N as Os,g as sn}from"./navigation.bd521855.js";import{_ as yr,d as Qt,e as Kt,f as Sr,h as Is,j as yi,k as rr,l as Ss,n as Cs,o as B}from"./ProgressBar.svelte_svelte_type_style_lang.2ebf8e47.js";import"./singletons.dd2caadf.js";import{w as Gt,r as wt,d as Vt}from"./index.6b4ebe8d.js";import{p as Ps}from"./stores.25c82744.js";function qs(){const{subscribe:o,set:e,update:r}=Gt([]);return{subscribe:o,set:e,update:r,trigger:t=>r(n=>(n.push(t),n)),close:()=>r(t=>(t.length>0&&t.shift(),t)),clear:()=>e([])}}const ye=qs();function Ds(o,e){const r='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let t,n;function s(f){f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),n.focus())}function i(f){!f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),t.focus())}const l=f=>{if(e===!1)return;const d=Array.from(o.querySelectorAll(r));d.length&&(t=d[0],n=d[d.length-1],f||t.focus(),t.addEventListener("keydown",s),n.addEventListener("keydown",i))};l(!1);function a(){t&&t.removeEventListener("keydown",s),n&&n.removeEventListener("keydown",i)}const u=(f,d)=>(f.length&&(a(),l(!0)),d),c=new MutationObserver(u);return c.observe(o,{childList:!0,subtree:!0}),{update(f){e=f,f?l(!1):a()},destroy(){a(),c.disconnect()}}}function an(o){let e=o[12],r,t,n=dn(o);return{c(){n.c(),r=Y()},l(s){n.l(s),r=Y()},m(s,i){n.m(s,i),C(s,r,i),t=!0},p(s,i){i[0]&4096&&we(e,e=s[12])?(ce(),F(n,1,1,Q),fe(),n=dn(s),n.c(),M(n,1),n.m(r.parentNode,r)):n.p(s,i)},i(s){t||(M(n),t=!0)},o(s){F(n),t=!1},d(s){s&&p(r),n.d(s)}}}function Rs(o){var u,c;let e,r,t,n,s;const i=[(u=o[14])==null?void 0:u.props,{parent:o[15]}];var l=(c=o[14])==null?void 0:c.ref;function a(f){let d={$$slots:{default:[Ms]},$$scope:{ctx:f}};for(let h=0;h<i.length;h+=1)d=$t(d,i[h]);return{props:d}}return l&&(r=xr(l,a(o))),{c(){e=g("div"),r&&se(r.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var d=w(e);r&&ue(r.$$.fragment,d),d.forEach(p),this.h()},h(){var f;y(e,"class",t="modal contents "+(((f=o[12][0])==null?void 0:f.modalClasses)??"")),y(e,"data-testid","modal-component"),y(e,"role","dialog"),y(e,"aria-modal","true"),y(e,"aria-label",n=o[12][0].title??"")},m(f,d){C(f,e,d),r&&ae(r,e,null),s=!0},p(f,d){var _,m,b;const h=d[0]&49152?di(i,[d[0]&16384&&cs((_=f[14])==null?void 0:_.props),d[0]&32768&&{parent:f[15]}]):{};if(d[0]&16384|d[1]&8192&&(h.$$scope={dirty:d,ctx:f}),d[0]&16384&&l!==(l=(m=f[14])==null?void 0:m.ref)){if(r){ce();const E=r;F(E.$$.fragment,1,0,()=>{le(E,1)}),fe()}l?(r=xr(l,a(f)),se(r.$$.fragment),M(r.$$.fragment,1),ae(r,e,null)):r=null}else l&&r.$set(h);(!s||d[0]&4096&&t!==(t="modal contents "+(((b=f[12][0])==null?void 0:b.modalClasses)??"")))&&y(e,"class",t),(!s||d[0]&4096&&n!==(n=f[12][0].title??""))&&y(e,"aria-label",n)},i(f){s||(r&&M(r.$$.fragment,f),s=!0)},o(f){r&&F(r.$$.fragment,f),s=!1},d(f){f&&p(e),r&&le(r)}}}function Ts(o){var m,b,E,S;let e,r,t,n,s,i,l,a,u=((m=o[12][0])==null?void 0:m.title)&&un(o),c=((b=o[12][0])==null?void 0:b.body)&&cn(o),f=((E=o[12][0])==null?void 0:E.image)&&typeof((S=o[12][0])==null?void 0:S.image)=="string"&&fn(o);function d(q,R){if(q[12][0].type==="alert")return Ns;if(q[12][0].type==="confirm")return As;if(q[12][0].type==="prompt")return Ls}let h=d(o),_=h&&h(o);return{c(){e=g("div"),u&&u.c(),r=U(),c&&c.c(),t=U(),f&&f.c(),n=U(),_&&_.c(),this.h()},l(q){e=k(q,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var R=w(e);u&&u.l(R),r=V(R),c&&c.l(R),t=V(R),f&&f.l(R),n=V(R),_&&_.l(R),R.forEach(p),this.h()},h(){y(e,"class",s="modal "+o[16]),y(e,"data-testid","modal"),y(e,"role","dialog"),y(e,"aria-modal","true"),y(e,"aria-label",i=o[12][0].title??"")},m(q,R){C(q,e,R),u&&u.m(e,null),v(e,r),c&&c.m(e,null),v(e,t),f&&f.m(e,null),v(e,n),_&&_.m(e,null),a=!0},p(q,R){var H,P,A,j;o=q,(H=o[12][0])!=null&&H.title?u?u.p(o,R):(u=un(o),u.c(),u.m(e,r)):u&&(u.d(1),u=null),(P=o[12][0])!=null&&P.body?c?c.p(o,R):(c=cn(o),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(A=o[12][0])!=null&&A.image&&typeof((j=o[12][0])==null?void 0:j.image)=="string"?f?f.p(o,R):(f=fn(o),f.c(),f.m(e,n)):f&&(f.d(1),f=null),h===(h=d(o))&&_?_.p(o,R):(_&&_.d(1),_=h&&h(o),_&&(_.c(),_.m(e,null))),(!a||R[0]&65536&&s!==(s="modal "+o[16]))&&y(e,"class",s),(!a||R[0]&4096&&i!==(i=o[12][0].title??""))&&y(e,"aria-label",i)},i(q){a||(mr(()=>{a&&(l||(l=We(e,Bt,{duration:o[3],opacity:0,y:100},!0)),l.run(1))}),a=!0)},o(q){l||(l=We(e,Bt,{duration:o[3],opacity:0,y:100},!1)),l.run(0),a=!1},d(q){q&&p(e),u&&u.d(),c&&c.d(),f&&f.d(),_&&_.d(),q&&l&&l.end()}}}function ln(o){var n;let e,r=((n=o[14])==null?void 0:n.slot)+"",t;return{c(){e=new fs(!1),t=Y(),this.h()},l(s){e=ds(s,!1),t=Y(),this.h()},h(){e.a=t},m(s,i){e.m(r,s,i),C(s,t,i)},p(s,i){var l;i[0]&16384&&r!==(r=((l=s[14])==null?void 0:l.slot)+"")&&e.p(r)},d(s){s&&p(t),s&&e.d()}}}function Ms(o){var t;let e,r=((t=o[14])==null?void 0:t.slot)&&ln(o);return{c(){r&&r.c(),e=Y()},l(n){r&&r.l(n),e=Y()},m(n,s){r&&r.m(n,s),C(n,e,s)},p(n,s){var i;(i=n[14])!=null&&i.slot?r?r.p(n,s):(r=ln(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){r&&r.d(n),n&&p(e)}}}function un(o){let e,r=o[12][0].title+"",t;return{c(){e=g("header"),this.h()},l(n){e=k(n,"HEADER",{class:!0});var s=w(e);s.forEach(p),this.h()},h(){y(e,"class",t="modal-header "+o[9])},m(n,s){C(n,e,s),e.innerHTML=r},p(n,s){s[0]&4096&&r!==(r=n[12][0].title+"")&&(e.innerHTML=r),s[0]&512&&t!==(t="modal-header "+n[9])&&y(e,"class",t)},d(n){n&&p(e)}}}function cn(o){let e,r=o[12][0].body+"",t;return{c(){e=g("article"),this.h()},l(n){e=k(n,"ARTICLE",{class:!0});var s=w(e);s.forEach(p),this.h()},h(){y(e,"class",t="modal-body "+o[10])},m(n,s){C(n,e,s),e.innerHTML=r},p(n,s){s[0]&4096&&r!==(r=n[12][0].body+"")&&(e.innerHTML=r),s[0]&1024&&t!==(t="modal-body "+n[10])&&y(e,"class",t)},d(n){n&&p(e)}}}function fn(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var t;y(e,"class","modal-image "+$s),de(e.src,r=(t=o[12][0])==null?void 0:t.image)||y(e,"src",r),y(e,"alt","Modal")},m(t,n){C(t,e,n)},p(t,n){var s;n[0]&4096&&!de(e.src,r=(s=t[12][0])==null?void 0:s.image)&&y(e,"src",r)},d(t){t&&p(e)}}}function Ls(o){let e,r,t,n,s,i,l,a,u,c,f,d,h,_,m=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},o[12][0].valueAttr],b={};for(let E=0;E<m.length;E+=1)b=$t(b,m[E]);return{c(){e=g("form"),r=g("input"),t=U(),n=g("footer"),s=g("button"),i=O(o[0]),a=U(),u=g("button"),c=O(o[2]),this.h()},l(E){e=k(E,"FORM",{class:!0});var S=w(e);r=k(S,"INPUT",{class:!0,name:!0,type:!0}),t=V(S),n=k(S,"FOOTER",{class:!0});var q=w(n);s=k(q,"BUTTON",{type:!0,class:!0});var R=w(s);i=I(R,o[0]),R.forEach(p),a=V(q),u=k(q,"BUTTON",{type:!0,class:!0});var H=w(u);c=I(H,o[2]),H.forEach(p),q.forEach(p),S.forEach(p),this.h()},h(){en(r,b),y(s,"type","button"),y(s,"class",l="btn "+o[7]),y(u,"type","submit"),y(u,"class",f="btn "+o[8]),y(n,"class",d="modal-footer "+o[11]),y(e,"class","space-y-4")},m(E,S){C(E,e,S),v(e,r),r.autofocus&&r.focus(),tn(r,o[13]),v(e,t),v(e,n),v(n,s),v(s,i),v(n,a),v(n,u),v(u,c),h||(_=[W(r,"input",o[39]),W(s,"click",o[21]),W(e,"submit",o[23])],h=!0)},p(E,S){en(r,b=di(m,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},S[0]&4096&&E[12][0].valueAttr])),S[0]&8192&&r.value!==E[13]&&tn(r,E[13]),S[0]&1&&T(i,E[0]),S[0]&128&&l!==(l="btn "+E[7])&&y(s,"class",l),S[0]&4&&T(c,E[2]),S[0]&256&&f!==(f="btn "+E[8])&&y(u,"class",f),S[0]&2048&&d!==(d="modal-footer "+E[11])&&y(n,"class",d)},d(E){E&&p(e),h=!1,Te(_)}}}function As(o){let e,r,t,n,s,i,l,a,u,c,f;return{c(){e=g("footer"),r=g("button"),t=O(o[0]),s=U(),i=g("button"),l=O(o[1]),this.h()},l(d){e=k(d,"FOOTER",{class:!0});var h=w(e);r=k(h,"BUTTON",{type:!0,class:!0});var _=w(r);t=I(_,o[0]),_.forEach(p),s=V(h),i=k(h,"BUTTON",{type:!0,class:!0});var m=w(i);l=I(m,o[1]),m.forEach(p),h.forEach(p),this.h()},h(){y(r,"type","button"),y(r,"class",n="btn "+o[7]),y(i,"type","button"),y(i,"class",a="btn "+o[8]),y(e,"class",u="modal-footer "+o[11])},m(d,h){C(d,e,h),v(e,r),v(r,t),v(e,s),v(e,i),v(i,l),c||(f=[W(r,"click",o[21]),W(i,"click",o[22])],c=!0)},p(d,h){h[0]&1&&T(t,d[0]),h[0]&128&&n!==(n="btn "+d[7])&&y(r,"class",n),h[0]&2&&T(l,d[1]),h[0]&256&&a!==(a="btn "+d[8])&&y(i,"class",a),h[0]&2048&&u!==(u="modal-footer "+d[11])&&y(e,"class",u)},d(d){d&&p(e),c=!1,Te(f)}}}function Ns(o){let e,r,t,n,s,i,l;return{c(){e=g("footer"),r=g("button"),t=O(o[0]),this.h()},l(a){e=k(a,"FOOTER",{class:!0});var u=w(e);r=k(u,"BUTTON",{type:!0,class:!0});var c=w(r);t=I(c,o[0]),c.forEach(p),u.forEach(p),this.h()},h(){y(r,"type","button"),y(r,"class",n="btn "+o[7]),y(e,"class",s="modal-footer "+o[11])},m(a,u){C(a,e,u),v(e,r),v(r,t),i||(l=W(r,"click",o[21]),i=!0)},p(a,u){u[0]&1&&T(t,a[0]),u[0]&128&&n!==(n="btn "+a[7])&&y(r,"class",n),u[0]&2048&&s!==(s="modal-footer "+a[11])&&y(e,"class",s)},d(a){a&&p(e),i=!1,l()}}}function dn(o){let e,r,t,n,s,i,l,a,u,c,f;const d=[Ts,Rs],h=[];function _(m,b){return m[12][0].type!=="component"?0:1}return t=_(o),n=h[t]=d[t](o),{c(){e=g("div"),r=g("div"),n.c(),this.h()},l(m){e=k(m,"DIV",{class:!0,"data-testid":!0});var b=w(e);r=k(b,"DIV",{class:!0});var E=w(r);n.l(E),E.forEach(p),b.forEach(p),this.h()},h(){y(r,"class",s="modal-transition "+o[17]),y(e,"class",l="modal-backdrop "+o[18]),y(e,"data-testid","modal-backdrop")},m(m,b){C(m,e,b),v(e,r),h[t].m(r,null),u=!0,c||(f=[W(e,"mousedown",o[19]),W(e,"mouseup",o[20]),W(e,"touchstart",o[37]),W(e,"touchend",o[38]),us(Ds.call(null,e,!0))],c=!0)},p(m,b){o=m;let E=t;t=_(o),t===E?h[t].p(o,b):(ce(),F(h[E],1,1,()=>{h[E]=null}),fe(),n=h[t],n?n.p(o,b):(n=h[t]=d[t](o),n.c()),M(n,1),n.m(r,null)),(!u||b[0]&131072&&s!==(s="modal-transition "+o[17]))&&y(r,"class",s),(!u||b[0]&262144&&l!==(l="modal-backdrop "+o[18]))&&y(e,"class",l)},i(m){u||(M(n),mr(()=>{u&&(i||(i=We(r,Bt,{duration:o[3],opacity:o[4],x:o[5],y:o[6]},!0)),i.run(1))}),mr(()=>{u&&(a||(a=We(e,rn,{duration:o[3]},!0)),a.run(1))}),u=!0)},o(m){F(n),i||(i=We(r,Bt,{duration:o[3],opacity:o[4],x:o[5],y:o[6]},!1)),i.run(0),a||(a=We(e,rn,{duration:o[3]},!1)),a.run(0),u=!1},d(m){m&&p(e),h[t].d(),m&&i&&i.end(),m&&a&&a.end(),c=!1,Te(f)}}}function js(o){let e,r,t,n,s=o[12].length>0&&an(o);return{c(){s&&s.c(),e=Y()},l(i){s&&s.l(i),e=Y()},m(i,l){s&&s.m(i,l),C(i,e,l),r=!0,t||(n=W(window,"keydown",o[24]),t=!0)},p(i,l){i[12].length>0?s?(s.p(i,l),l[0]&4096&&M(s,1)):(s=an(i),s.c(),M(s,1),s.m(e.parentNode,e)):s&&(ce(),F(s,1,1,()=>{s=null}),fe())},i(i){r||(M(s),r=!0)},o(i){F(s),r=!1},d(i){s&&s.d(i),i&&p(e),t=!1,n()}}}const Us="fixed top-0 left-0 right-0 bottom-0",Vs="w-full h-full p-4 overflow-y-auto flex justify-center",Fs="block",$s="w-full h-auto";function Bs(o,e,r){let t,n,s,i,l,a;ke(o,ye,$=>r(12,a=$));const u=ls();let{position:c="items-center"}=e,{components:f={}}=e,{duration:d=150}=e,{flyOpacity:h=0}=e,{flyX:_=0}=e,{flyY:m=100}=e,{background:b="bg-surface-100-800-token"}=e,{width:E="w-modal"}=e,{height:S="h-auto"}=e,{padding:q="p-4"}=e,{spacing:R="space-y-4"}=e,{rounded:H="rounded-container-token"}=e,{shadow:P="shadow-xl"}=e,{zIndex:A="z-[999]"}=e,{buttonNeutral:j="variant-ghost-surface"}=e,{buttonPositive:N="variant-filled"}=e,{buttonTextCancel:K="Cancel"}=e,{buttonTextConfirm:Z="Confirm"}=e,{buttonTextSubmit:G="Submit"}=e,{regionBackdrop:ne="bg-surface-backdrop-token"}=e,{regionHeader:J="text-2xl font-bold"}=e,{regionBody:D="max-h-[200px] overflow-hidden"}=e,{regionFooter:L="flex justify-end space-x-2"}=e,z;const ie={buttonTextCancel:K,buttonTextConfirm:Z,buttonTextSubmit:G};let re,oe=!1;ye.subscribe($=>{$.length&&($[0].type==="prompt"&&r(13,z=$[0].value),r(0,K=$[0].buttonTextCancel||ie.buttonTextCancel),r(1,Z=$[0].buttonTextConfirm||ie.buttonTextConfirm),r(2,G=$[0].buttonTextSubmit||ie.buttonTextSubmit),r(14,re=typeof $[0].component=="string"?f[$[0].component]:$[0].component))});function X($){if(!($.target instanceof Element))return;const ve=$.target.classList;(ve.contains("modal-backdrop")||ve.contains("modal-transition"))&&(oe=!0)}function ee($){if(!($.target instanceof Element))return;const ve=$.target.classList;(ve.contains("modal-backdrop")||ve.contains("modal-transition"))&&oe&&(a[0].response&&a[0].response(void 0),ye.close(),u("backdrop",$)),oe=!1}function te(){a[0].response&&a[0].response(!1),ye.close()}function pe(){a[0].response&&a[0].response(!0),ye.close()}function Re($){$.preventDefault(),a[0].response&&a[0].response(z),ye.close()}function Ne($){a.length&&$.code==="Escape"&&te()}function $e($){Zr.call(this,o,$)}function he($){Zr.call(this,o,$)}function Ie(){z=this.value,r(13,z)}return o.$$set=$=>{r(43,e=$t($t({},e),Xr($))),"position"in $&&r(25,c=$.position),"components"in $&&r(26,f=$.components),"duration"in $&&r(3,d=$.duration),"flyOpacity"in $&&r(4,h=$.flyOpacity),"flyX"in $&&r(5,_=$.flyX),"flyY"in $&&r(6,m=$.flyY),"background"in $&&r(27,b=$.background),"width"in $&&r(28,E=$.width),"height"in $&&r(29,S=$.height),"padding"in $&&r(30,q=$.padding),"spacing"in $&&r(31,R=$.spacing),"rounded"in $&&r(32,H=$.rounded),"shadow"in $&&r(33,P=$.shadow),"zIndex"in $&&r(34,A=$.zIndex),"buttonNeutral"in $&&r(7,j=$.buttonNeutral),"buttonPositive"in $&&r(8,N=$.buttonPositive),"buttonTextCancel"in $&&r(0,K=$.buttonTextCancel),"buttonTextConfirm"in $&&r(1,Z=$.buttonTextConfirm),"buttonTextSubmit"in $&&r(2,G=$.buttonTextSubmit),"regionBackdrop"in $&&r(35,ne=$.regionBackdrop),"regionHeader"in $&&r(9,J=$.regionHeader),"regionBody"in $&&r(10,D=$.regionBody),"regionFooter"in $&&r(11,L=$.regionFooter)},o.$$.update=()=>{var $,ve,Be;o.$$.dirty[0]&33558528&&r(36,t=(($=a[0])==null?void 0:$.position)??c),r(18,n=`${Us} ${ne} ${A} ${e.class??""} ${((ve=a[0])==null?void 0:ve.backdropClasses)??""}`),o.$$.dirty[1]&32&&r(17,s=`${Vs} ${t??""}`),o.$$.dirty[0]&2013270016|o.$$.dirty[1]&7&&r(16,i=`${Fs} ${b} ${E} ${S} ${q} ${R} ${H} ${P} ${((Be=a[0])==null?void 0:Be.modalClasses)??""}`),o.$$.dirty[0]&2046824447|o.$$.dirty[1]&23&&r(15,l={position:c,duration:d,flyOpacity:h,flyX:_,flyY:m,background:b,width:E,height:S,padding:q,spacing:R,rounded:H,shadow:P,buttonNeutral:j,buttonPositive:N,buttonTextCancel:K,buttonTextConfirm:Z,buttonTextSubmit:G,regionBackdrop:ne,regionHeader:J,regionBody:D,regionFooter:L,onClose:te})},e=Xr(e),[K,Z,G,d,h,_,m,j,N,J,D,L,a,z,re,l,i,s,n,X,ee,te,pe,Re,Ne,c,f,b,E,S,q,R,H,P,A,ne,t,$e,he,Ie]}class ad extends Ee{constructor(e){super(),Oe(this,e,Bs,js,we,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */const Cr=Gt();function me(o){return typeof o=="function"}function Hs(o){var e=function(t){Error.call(t),t.stack=new Error().stack},r=o(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var nr=Hs(function(o){return function(r){o(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function hn(o,e){if(o){var r=o.indexOf(e);0<=r&&o.splice(r,1)}}var Pr=function(){function o(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return o.prototype.unsubscribe=function(){var e,r,t,n,s;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var l=yr(i),a=l.next();!a.done;a=l.next()){var u=a.value;u.remove(this)}}catch(m){e={error:m}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}else i.remove(this);var c=this.initialTeardown;if(me(c))try{c()}catch(m){s=m instanceof nr?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=yr(f),h=d.next();!h.done;h=d.next()){var _=h.value;try{_n(_)}catch(m){s=s??[],m instanceof nr?s=Qt(Qt([],Kt(s)),Kt(m.errors)):s.push(m)}}}catch(m){t={error:m}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}}if(s)throw new nr(s)}},o.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)_n(e);else{if(e instanceof o){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},o.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},o.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},o.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&hn(r,e)},o.prototype.remove=function(e){var r=this._finalizers;r&&hn(r,e),e instanceof o&&e._removeParent(this)},o.EMPTY=function(){var e=new o;return e.closed=!0,e}(),o}();Pr.EMPTY;function bi(o){return o instanceof Pr||o&&"closed"in o&&me(o.remove)&&me(o.add)&&me(o.unsubscribe)}function _n(o){me(o)?o():o.unsubscribe()}var gi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},br={setTimeout:function(o,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var n=br.delegate;return n!=null&&n.setTimeout?n.setTimeout.apply(n,Qt([o,e],Kt(r))):setTimeout.apply(void 0,Qt([o,e],Kt(r)))},clearTimeout:function(o){var e=br.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(o)},delegate:void 0};function ki(o){br.setTimeout(function(){throw o})}function pn(){}function Qs(o){o()}var qr=function(o){Sr(e,o);function e(r){var t=o.call(this)||this;return t.isStopped=!1,r?(t.destination=r,bi(r)&&r.add(t)):t.destination=zs,t}return e.create=function(r,t,n){return new gr(r,t,n)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Pr),Ks=Function.prototype.bind;function or(o,e){return Ks.call(o,e)}var Gs=function(){function o(e){this.partialObserver=e}return o.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(t){Mt(t)}},o.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(t){Mt(t)}else Mt(e)},o.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Mt(r)}},o}(),gr=function(o){Sr(e,o);function e(r,t,n){var s=o.call(this)||this,i;if(me(r)||!r)i={next:r??void 0,error:t??void 0,complete:n??void 0};else{var l;s&&gi.useDeprecatedNextContext?(l=Object.create(r),l.unsubscribe=function(){return s.unsubscribe()},i={next:r.next&&or(r.next,l),error:r.error&&or(r.error,l),complete:r.complete&&or(r.complete,l)}):i=r}return s.destination=new Gs(i),s}return e}(qr);function Mt(o){ki(o)}function Js(o){throw o}var zs={closed:!0,next:pn,error:Js,complete:pn},Dr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function wi(o){return o}function Xt(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return Ei(o)}function Ei(o){return o.length===0?wi:o.length===1?o[0]:function(r){return o.reduce(function(t,n){return n(t)},r)}}var Me=function(){function o(e){e&&(this._subscribe=e)}return o.prototype.lift=function(e){var r=new o;return r.source=this,r.operator=e,r},o.prototype.subscribe=function(e,r,t){var n=this,s=Ys(e)?e:new gr(e,r,t);return Qs(function(){var i=n,l=i.operator,a=i.source;s.add(l?l.call(s,a):a?n._subscribe(s):n._trySubscribe(s))}),s},o.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},o.prototype.forEach=function(e,r){var t=this;return r=vn(r),new r(function(n,s){var i=new gr({next:function(l){try{e(l)}catch(a){s(a),i.unsubscribe()}},error:s,complete:n});t.subscribe(i)})},o.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},o.prototype[Dr]=function(){return this},o.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ei(e)(this)},o.prototype.toPromise=function(e){var r=this;return e=vn(e),new e(function(t,n){var s;r.subscribe(function(i){return s=i},function(i){return n(i)},function(){return t(s)})})},o.create=function(e){return new o(e)},o}();function vn(o){var e;return(e=o??gi.Promise)!==null&&e!==void 0?e:Promise}function Ws(o){return o&&me(o.next)&&me(o.error)&&me(o.complete)}function Ys(o){return o&&o instanceof qr||Ws(o)&&bi(o)}function Xs(o){return me(o==null?void 0:o.lift)}function Ge(o){return function(e){if(Xs(e))return e.lift(function(r){try{return o(r,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(o,e,r,t,n){return new Zs(o,e,r,t,n)}var Zs=function(o){Sr(e,o);function e(r,t,n,s,i,l){var a=o.call(this,r)||this;return a.onFinalize=i,a.shouldUnsubscribe=l,a._next=t?function(u){try{t(u)}catch(c){r.error(c)}}:o.prototype._next,a._error=s?function(u){try{s(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:o.prototype._error,a._complete=n?function(){try{n()}catch(u){r.error(u)}finally{this.unsubscribe()}}:o.prototype._complete,a}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;o.prototype.unsubscribe.call(this),!t&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(qr);function xs(o){return o&&me(o.schedule)}function ea(o){return o[o.length-1]}function Oi(o){return xs(ea(o))?o.pop():void 0}var Ii=function(o){return o&&typeof o.length=="number"&&typeof o!="function"};function Si(o){return me(o==null?void 0:o.then)}function Ci(o){return me(o[Dr])}function Pi(o){return Symbol.asyncIterator&&me(o==null?void 0:o[Symbol.asyncIterator])}function qi(o){return new TypeError("You provided "+(o!==null&&typeof o=="object"?"an invalid object":"'"+o+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ta(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Di=ta();function Ri(o){return me(o==null?void 0:o[Di])}function Ti(o){return Is(this,arguments,function(){var r,t,n,s;return yi(this,function(i){switch(i.label){case 0:r=o.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,rr(r.read())];case 3:return t=i.sent(),n=t.value,s=t.done,s?[4,rr(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,rr(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Mi(o){return me(o==null?void 0:o.getReader)}function Ot(o){if(o instanceof Me)return o;if(o!=null){if(Ci(o))return ra(o);if(Ii(o))return na(o);if(Si(o))return oa(o);if(Pi(o))return Li(o);if(Ri(o))return ia(o);if(Mi(o))return sa(o)}throw qi(o)}function ra(o){return new Me(function(e){var r=o[Dr]();if(me(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function na(o){return new Me(function(e){for(var r=0;r<o.length&&!e.closed;r++)e.next(o[r]);e.complete()})}function oa(o){return new Me(function(e){o.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,ki)})}function ia(o){return new Me(function(e){var r,t;try{for(var n=yr(o),s=n.next();!s.done;s=n.next()){var i=s.value;if(e.next(i),e.closed)return}}catch(l){r={error:l}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}e.complete()})}function Li(o){return new Me(function(e){aa(o,e).catch(function(r){return e.error(r)})})}function sa(o){return Li(Ti(o))}function aa(o,e){var r,t,n,s;return Ss(this,void 0,void 0,function(){var i,l;return yi(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=Cs(o),a.label=1;case 1:return[4,r.next()];case 2:if(t=a.sent(),!!t.done)return[3,4];if(i=t.value,e.next(i),e.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=a.sent(),n={error:l},[3,11];case 6:return a.trys.push([6,,9,10]),t&&!t.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ue(o,e,r,t,n){t===void 0&&(t=0),n===void 0&&(n=!1);var s=e.schedule(function(){r(),n?o.add(this.schedule(null,t)):this.unsubscribe()},t);if(o.add(s),!n)return s}function Ai(o,e){return e===void 0&&(e=0),Ge(function(r,t){r.subscribe(Ye(t,function(n){return Ue(t,o,function(){return t.next(n)},e)},function(){return Ue(t,o,function(){return t.complete()},e)},function(n){return Ue(t,o,function(){return t.error(n)},e)}))})}function Ni(o,e){return e===void 0&&(e=0),Ge(function(r,t){t.add(o.schedule(function(){return r.subscribe(t)},e))})}function la(o,e){return Ot(o).pipe(Ni(e),Ai(e))}function ua(o,e){return Ot(o).pipe(Ni(e),Ai(e))}function ca(o,e){return new Me(function(r){var t=0;return e.schedule(function(){t===o.length?r.complete():(r.next(o[t++]),r.closed||this.schedule())})})}function fa(o,e){return new Me(function(r){var t;return Ue(r,e,function(){t=o[Di](),Ue(r,e,function(){var n,s,i;try{n=t.next(),s=n.value,i=n.done}catch(l){r.error(l);return}i?r.complete():r.next(s)},0,!0)}),function(){return me(t==null?void 0:t.return)&&t.return()}})}function ji(o,e){if(!o)throw new Error("Iterable cannot be null");return new Me(function(r){Ue(r,e,function(){var t=o[Symbol.asyncIterator]();Ue(r,e,function(){t.next().then(function(n){n.done?r.complete():r.next(n.value)})},0,!0)})})}function da(o,e){return ji(Ti(o),e)}function ha(o,e){if(o!=null){if(Ci(o))return la(o,e);if(Ii(o))return ca(o,e);if(Si(o))return ua(o,e);if(Pi(o))return ji(o,e);if(Ri(o))return fa(o,e);if(Mi(o))return da(o,e)}throw qi(o)}function Ui(o,e){return e?ha(o,e):Ot(o)}function Rr(o,e){return Ge(function(r,t){var n=0;r.subscribe(Ye(t,function(s){t.next(o.call(e,s,n++))}))})}function _a(o,e,r,t,n,s,i,l){var a=[],u=0,c=0,f=!1,d=function(){f&&!a.length&&!u&&e.complete()},h=function(m){return u<t?_(m):a.push(m)},_=function(m){s&&e.next(m),u++;var b=!1;Ot(r(m,c++)).subscribe(Ye(e,function(E){n==null||n(E),s?h(E):e.next(E)},function(){b=!0},void 0,function(){if(b)try{u--;for(var E=function(){var S=a.shift();i?Ue(e,i,function(){return _(S)}):_(S)};a.length&&u<t;)E();d()}catch(S){e.error(S)}}))};return o.subscribe(Ye(e,h,function(){f=!0,d()})),function(){l==null||l()}}function Vi(o,e,r){return r===void 0&&(r=1/0),me(e)?Vi(function(t,n){return Rr(function(s,i){return e(t,s,n,i)})(Ot(o(t,n)))},r):(typeof e=="number"&&(r=e),Ge(function(t,n){return _a(t,n,o,r)}))}function pa(o){return o===void 0&&(o=1/0),Vi(wi,o)}function va(){return pa(1)}function mn(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return va()(Ui(o,Oi(o)))}function Fi(o,e){return Ge(function(r,t){var n=0;r.subscribe(Ye(t,function(s){return o.call(e,s,n++)&&t.next(s)}))})}function ma(o,e,r,t,n){return function(s,i){var l=r,a=e,u=0;s.subscribe(Ye(i,function(c){var f=u++;a=l?o(a,c,f):(l=!0,c),t&&i.next(a)},n&&function(){l&&i.next(a),i.complete()}))}}function ya(o,e){return Ge(ma(o,e,arguments.length>=2,!0))}function ba(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var r=Oi(o);return Ge(function(t,n){(r?mn(o,t,r):mn(o,t)).subscribe(n)})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function ga(o){return Fi(e=>e.event.id===o)}function ka(o){return Fi(e=>e.event.pubkey===o)}function wa(){return ya((o,e)=>[...o,e],[])}function Ea(o){return Xt(wa(),Rr(e=>{const r=new Map;return e.forEach(t=>{const n=o(t),s=r.get(n);s?r.set(n,[...s,t]):r.set(n,[t])}),r}))}function Oa(o){return Xt(Ea(o),Rr(e=>Array.from(e.entries()).map(([,r])=>r.slice(-1)[0])))}class It{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Et=typeof window>"u"||"Deno"in window;function Se(){}function Ia(o,e){return typeof o=="function"?o(e):o}function kr(o){return typeof o=="number"&&o>=0&&o!==1/0}function $i(o,e){return Math.max(o+(e||0)-Date.now(),0)}function kt(o,e,r){return Zt(o)?typeof e=="function"?{...r,queryKey:o,queryFn:e}:{...e,queryKey:o}:o}function je(o,e,r){return Zt(o)?[{...e,queryKey:o},r]:[o||{},e]}function yn(o,e){const{type:r="all",exact:t,fetchStatus:n,predicate:s,queryKey:i,stale:l}=o;if(Zt(i)){if(t){if(e.queryHash!==Tr(i,e.options))return!1}else if(!Jt(e.queryKey,i))return!1}if(r!=="all"){const a=e.isActive();if(r==="active"&&!a||r==="inactive"&&a)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof n<"u"&&n!==e.state.fetchStatus||s&&!s(e))}function bn(o,e){const{exact:r,fetching:t,predicate:n,mutationKey:s}=o;if(Zt(s)){if(!e.options.mutationKey)return!1;if(r){if(Qe(e.options.mutationKey)!==Qe(s))return!1}else if(!Jt(e.options.mutationKey,s))return!1}return!(typeof t=="boolean"&&e.state.status==="loading"!==t||n&&!n(e))}function Tr(o,e){return((e==null?void 0:e.queryKeyHashFn)||Qe)(o)}function Qe(o){return JSON.stringify(o,(e,r)=>wr(r)?Object.keys(r).sort().reduce((t,n)=>(t[n]=r[n],t),{}):r)}function Jt(o,e){return Bi(o,e)}function Bi(o,e){return o===e?!0:typeof o!=typeof e?!1:o&&e&&typeof o=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Bi(o[r],e[r])):!1}function Hi(o,e){if(o===e)return o;const r=kn(o)&&kn(e);if(r||wr(o)&&wr(e)){const t=r?o.length:Object.keys(o).length,n=r?e:Object.keys(e),s=n.length,i=r?[]:{};let l=0;for(let a=0;a<s;a++){const u=r?a:n[a];i[u]=Hi(o[u],e[u]),i[u]===o[u]&&l++}return t===s&&l===t?o:i}return e}function gn(o,e){if(o&&!e||e&&!o)return!1;for(const r in o)if(o[r]!==e[r])return!1;return!0}function kn(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function wr(o){if(!wn(o))return!1;const e=o.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!wn(r)||!r.hasOwnProperty("isPrototypeOf"))}function wn(o){return Object.prototype.toString.call(o)==="[object Object]"}function Zt(o){return Array.isArray(o)}function Qi(o){return new Promise(e=>{setTimeout(e,o)})}function En(o){Qi(0).then(o)}function Sa(){if(typeof AbortController=="function")return new AbortController}function Er(o,e,r){return r.isDataEqual!=null&&r.isDataEqual(o,e)?o:typeof r.structuralSharing=="function"?r.structuralSharing(o,e):r.structuralSharing!==!1?Hi(o,e):e}class Ca extends It{constructor(){super(),this.setup=e=>{if(!Et&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const zt=new Ca,On=["online","offline"];class Pa extends It{constructor(){super(),this.setup=e=>{if(!Et&&window.addEventListener){const r=()=>e();return On.forEach(t=>{window.addEventListener(t,r,!1)}),()=>{On.forEach(t=>{window.removeEventListener(t,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setOnline(t):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Wt=new Pa;function qa(o){return Math.min(1e3*2**o,3e4)}function xt(o){return(o??"online")==="online"?Wt.isOnline():!0}class Ki{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Ft(o){return o instanceof Ki}function Gi(o){let e=!1,r=0,t=!1,n,s,i;const l=new Promise((b,E)=>{s=b,i=E}),a=b=>{t||(h(new Ki(b)),o.abort==null||o.abort())},u=()=>{e=!0},c=()=>{e=!1},f=()=>!zt.isFocused()||o.networkMode!=="always"&&!Wt.isOnline(),d=b=>{t||(t=!0,o.onSuccess==null||o.onSuccess(b),n==null||n(),s(b))},h=b=>{t||(t=!0,o.onError==null||o.onError(b),n==null||n(),i(b))},_=()=>new Promise(b=>{n=E=>{const S=t||!f();return S&&b(E),S},o.onPause==null||o.onPause()}).then(()=>{n=void 0,t||o.onContinue==null||o.onContinue()}),m=()=>{if(t)return;let b;try{b=o.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(d).catch(E=>{var S,q;if(t)return;const R=(S=o.retry)!=null?S:3,H=(q=o.retryDelay)!=null?q:qa,P=typeof H=="function"?H(r,E):H,A=R===!0||typeof R=="number"&&r<R||typeof R=="function"&&R(r,E);if(e||!A){h(E);return}r++,o.onFail==null||o.onFail(r,E),Qi(P).then(()=>{if(f())return _()}).then(()=>{e?h(E):m()})})};return xt(o.networkMode)?m():_().then(m),{promise:l,cancel:a,continue:()=>(n==null?void 0:n())?l:Promise.resolve(),cancelRetry:u,continueRetry:c}}const Mr=console;function Da(){let o=[],e=0,r=c=>{c()},t=c=>{c()};const n=c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},s=c=>{e?o.push(c):En(()=>{r(c)})},i=c=>(...f)=>{s(()=>{c(...f)})},l=()=>{const c=o;o=[],c.length&&En(()=>{t(()=>{c.forEach(f=>{r(f)})})})};return{batch:n,batchCalls:i,schedule:s,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{t=c}}}const _e=Da();class Ji{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kr(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Et?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Ra extends Ji{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Mr,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||Ta(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const t=Er(this.state.data,e,this.options);return this.dispatch({data:t,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),t}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const t=this.promise;return(r=this.retryer)==null||r.cancel(e),t?t.then(Se).catch(Se):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!$i(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(t=>t.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(t=>t.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var t,n;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(_=>_.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const i=Sa(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(i)return this.abortSignalConsumed=!0,i.signal}})};a(l);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(a(c),(t=this.options.behavior)==null||t.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((n=c.fetchOptions)==null?void 0:n.meta)){var f;this.dispatch({type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta})}const d=h=>{if(Ft(h)&&h.silent||this.dispatch({type:"error",error:h}),!Ft(h)){var _,m,b,E;(_=(m=this.cache.config).onError)==null||_.call(m,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Gi({fn:c.fetchFn,abort:i==null?void 0:i.abort.bind(i),onSuccess:h=>{var _,m,b,E;if(typeof h>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(_=(m=this.cache.config).onSuccess)==null||_.call(m,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(h,_)=>{this.dispatch({type:"failed",failureCount:h,error:_})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=t=>{var n,s;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(n=e.meta)!=null?n:null,fetchStatus:xt(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Ft(i)&&i.revert&&this.revertState?{...this.revertState}:{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function Ta(o){const e=typeof o.initialData=="function"?o.initialData():o.initialData,r=typeof e<"u",t=r?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?t??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class Ma extends It{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,t){var n;const s=r.queryKey,i=(n=r.queryHash)!=null?n:Tr(s,r);let l=this.get(i);return l||(l=new Ra({cache:this,logger:e.getLogger(),queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:t,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){_e.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[t]=je(e,r);return typeof t.exact>"u"&&(t.exact=!0),this.queries.find(n=>yn(t,n))}findAll(e,r){const[t]=je(e,r);return Object.keys(t).length>0?this.queries.filter(n=>yn(t,n)):this.queries}notify(e){_e.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){_e.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){_e.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class La extends Ji{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Mr,this.observers=[],this.state=e.state||Aa(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var A;return this.retryer=Gi({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(j,N)=>{this.dispatch({type:"failed",failureCount:j,error:N})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(A=this.options.retry)!=null?A:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var t,n,s,i,l,a,u,c;if(!r){var f,d,h,_;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(d=this.mutationCache.config).onMutate)==null?void 0:f.call(d,this.state.variables,this));const j=await((h=(_=this.options).onMutate)==null?void 0:h.call(_,this.state.variables));j!==this.state.context&&this.dispatch({type:"loading",context:j,variables:this.state.variables})}const A=await e();return await((t=(n=this.mutationCache.config).onSuccess)==null?void 0:t.call(n,A,this.state.variables,this.state.context,this)),await((s=(i=this.options).onSuccess)==null?void 0:s.call(i,A,this.state.variables,this.state.context)),await((l=(a=this.mutationCache.config).onSettled)==null?void 0:l.call(a,A,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,A,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:A}),A}catch(A){try{var m,b,E,S,q,R,H,P;throw await((m=(b=this.mutationCache.config).onError)==null?void 0:m.call(b,A,this.state.variables,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,A,this.state.variables,this.state.context)),await((q=(R=this.mutationCache.config).onSettled)==null?void 0:q.call(R,void 0,A,this.state.variables,this.state.context,this)),await((H=(P=this.options).onSettled)==null?void 0:H.call(P,void 0,A,this.state.variables,this.state.context)),A}finally{this.dispatch({type:"error",error:A})}}}dispatch(e){const r=t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!xt(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Aa(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Na extends It{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,t){const n=new La({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:t,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(n),n}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){_e.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>bn(e,r))}findAll(e){return this.mutations.filter(r=>bn(e,r))}notify(e){_e.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(t=>t.state.isPaused);return _e.batch(()=>r.reduce((t,n)=>t.then(()=>n.continue().catch(Se)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function ja(){return{onFetch:o=>{o.fetchFn=()=>{var e,r,t,n,s,i;const l=(e=o.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,a=(t=o.fetchOptions)==null||(n=t.meta)==null?void 0:n.fetchMore,u=a==null?void 0:a.pageParam,c=(a==null?void 0:a.direction)==="forward",f=(a==null?void 0:a.direction)==="backward",d=((s=o.state.data)==null?void 0:s.pages)||[],h=((i=o.state.data)==null?void 0:i.pageParams)||[];let _=h,m=!1;const b=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>{var A;if((A=o.signal)!=null&&A.aborted)m=!0;else{var j;(j=o.signal)==null||j.addEventListener("abort",()=>{m=!0})}return o.signal}})},E=o.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+o.options.queryHash+"'")),S=(P,A,j,N)=>(_=N?[A,..._]:[..._,A],N?[j,...P]:[...P,j]),q=(P,A,j,N)=>{if(m)return Promise.reject("Cancelled");if(typeof j>"u"&&!A&&P.length)return Promise.resolve(P);const K={queryKey:o.queryKey,pageParam:j,meta:o.options.meta};b(K);const Z=E(K);return Promise.resolve(Z).then(ne=>S(P,j,ne,N))};let R;if(!d.length)R=q([]);else if(c){const P=typeof u<"u",A=P?u:In(o.options,d);R=q(d,P,A)}else if(f){const P=typeof u<"u",A=P?u:Ua(o.options,d);R=q(d,P,A,!0)}else{_=[];const P=typeof o.options.getNextPageParam>"u";R=(l&&d[0]?l(d[0],0,d):!0)?q([],P,h[0]):Promise.resolve(S([],h[0],d[0]));for(let j=1;j<d.length;j++)R=R.then(N=>{if(l&&d[j]?l(d[j],j,d):!0){const Z=P?h[j]:In(o.options,N);return q(N,P,Z)}return Promise.resolve(S(N,h[j],d[j]))})}return R.then(P=>({pages:P,pageParams:_}))}}}}function In(o,e){return o.getNextPageParam==null?void 0:o.getNextPageParam(e[e.length-1],e)}function Ua(o,e){return o.getPreviousPageParam==null?void 0:o.getPreviousPageParam(e[0],e)}class zi{constructor(e={}){this.queryCache=e.queryCache||new Ma,this.mutationCache=e.mutationCache||new Na,this.logger=e.logger||Mr,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=zt.subscribe(()=>{zt.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Wt.subscribe(()=>{Wt.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[t]=je(e,r);return t.fetchStatus="fetching",this.queryCache.findAll(t).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state.data}ensureQueryData(e,r,t){const n=kt(e,r,t),s=this.getQueryData(n.queryKey);return s?Promise.resolve(s):this.fetchQuery(n)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:t})=>{const n=t.data;return[r,n]})}setQueryData(e,r,t){const n=this.queryCache.find(e),s=n==null?void 0:n.state.data,i=Ia(r,s);if(typeof i>"u")return;const l=kt(e),a=this.defaultQueryOptions(l);return this.queryCache.build(this,a).setData(i,{...t,manual:!0})}setQueriesData(e,r,t){return _e.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,r,t)]))}getQueryState(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state}removeQueries(e,r){const[t]=je(e,r),n=this.queryCache;_e.batch(()=>{n.findAll(t).forEach(s=>{n.remove(s)})})}resetQueries(e,r,t){const[n,s]=je(e,r,t),i=this.queryCache,l={type:"active",...n};return _e.batch(()=>(i.findAll(n).forEach(a=>{a.reset()}),this.refetchQueries(l,s)))}cancelQueries(e,r,t){const[n,s={}]=je(e,r,t);typeof s.revert>"u"&&(s.revert=!0);const i=_e.batch(()=>this.queryCache.findAll(n).map(l=>l.cancel(s)));return Promise.all(i).then(Se).catch(Se)}invalidateQueries(e,r,t){const[n,s]=je(e,r,t);return _e.batch(()=>{var i,l;if(this.queryCache.findAll(n).forEach(u=>{u.invalidate()}),n.refetchType==="none")return Promise.resolve();const a={...n,type:(i=(l=n.refetchType)!=null?l:n.type)!=null?i:"active"};return this.refetchQueries(a,s)})}refetchQueries(e,r,t){const[n,s]=je(e,r,t),i=_e.batch(()=>this.queryCache.findAll(n).filter(a=>!a.isDisabled()).map(a=>{var u;return a.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:n.refetchPage}})}));let l=Promise.all(i).then(Se);return s!=null&&s.throwOnError||(l=l.catch(Se)),l}fetchQuery(e,r,t){const n=kt(e,r,t),s=this.defaultQueryOptions(n);typeof s.retry>"u"&&(s.retry=!1);const i=this.queryCache.build(this,s);return i.isStaleByTime(s.staleTime)?i.fetch(s):Promise.resolve(i.state.data)}prefetchQuery(e,r,t){return this.fetchQuery(e,r,t).then(Se).catch(Se)}fetchInfiniteQuery(e,r,t){const n=kt(e,r,t);return n.behavior=ja(),this.fetchQuery(n)}prefetchInfiniteQuery(e,r,t){return this.fetchInfiniteQuery(e,r,t).then(Se).catch(Se)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const t=this.queryDefaults.find(n=>Qe(e)===Qe(n.queryKey));t?t.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(t=>Jt(e,t.queryKey));return r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const t=this.mutationDefaults.find(n=>Qe(e)===Qe(n.mutationKey));t?t.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(t=>Jt(e,t.mutationKey));return r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=Tr(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class Va extends It{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Sn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Or(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Or(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const t=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),gn(t,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=t.queryKey),this.updateQuery();const s=this.hasListeners();s&&Cn(this.currentQuery,n,this.options,t)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==n||this.options.enabled!==t.enabled||this.options.staleTime!==t.staleTime)&&this.updateStaleTimeout();const i=this.computeRefetchInterval();s&&(this.currentQuery!==n||this.options.enabled!==t.enabled||i!==this.currentRefetchInterval)&&this.updateRefetchInterval(i)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),t=this.createResult(r,e);return $a(this,t,e)&&(this.currentResult=t,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),t}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(t=>{Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(t),e[t])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),t=this.client.getQueryCache().build(this.client,r);return t.isFetchingOptimistic=!0,t.fetch().then(()=>this.createResult(t,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Se)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Et||this.currentResult.isStale||!kr(this.options.staleTime))return;const r=$i(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Et||this.options.enabled===!1||!kr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||zt.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const t=this.currentQuery,n=this.options,s=this.currentResult,i=this.currentResultState,l=this.currentResultOptions,a=e!==t,u=a?e.state:this.currentQueryInitialState,c=a?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:d,error:h,errorUpdatedAt:_,fetchStatus:m,status:b}=f,E=!1,S=!1,q;if(r._optimisticResults){const j=this.hasListeners(),N=!j&&Sn(e,r),K=j&&Cn(e,t,r,n);(N||K)&&(m=xt(e.options.networkMode)?"fetching":"paused",d||(b="loading")),r._optimisticResults==="isRestoring"&&(m="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&c!=null&&c.isSuccess&&b!=="error")q=c.data,d=c.dataUpdatedAt,b=c.status,E=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(i==null?void 0:i.data)&&r.select===this.selectFn)q=this.selectResult;else try{this.selectFn=r.select,q=r.select(f.data),q=Er(s==null?void 0:s.data,q,r),this.selectResult=q,this.selectError=null}catch(j){this.selectError=j}else q=f.data;if(typeof r.placeholderData<"u"&&typeof q>"u"&&b==="loading"){let j;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))j=s.data;else if(j=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof j<"u")try{j=r.select(j),this.selectError=null}catch(N){this.selectError=N}typeof j<"u"&&(b="success",q=Er(s==null?void 0:s.data,j,r),S=!0)}this.selectError&&(h=this.selectError,q=this.selectResult,_=Date.now(),b="error");const R=m==="fetching",H=b==="loading",P=b==="error";return{status:b,fetchStatus:m,isLoading:H,isSuccess:b==="success",isError:P,isInitialLoading:H&&R,data:q,dataUpdatedAt:d,error:h,errorUpdatedAt:_,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:R,isRefetching:R&&!H,isLoadingError:P&&f.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:S,isPreviousData:E,isRefetchError:P&&f.dataUpdatedAt!==0,isStale:Lr(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,t=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,gn(t,r))return;this.currentResult=t;const n={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!this.trackedProps.size)return!0;const a=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==r[c]&&a.has(c)})};(e==null?void 0:e.listeners)!==!1&&s()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!Ft(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){_e.batch(()=>{if(e.onSuccess){var r,t,n,s;(r=(t=this.options).onSuccess)==null||r.call(t,this.currentResult.data),(n=(s=this.options).onSettled)==null||n.call(s,this.currentResult.data,null)}else if(e.onError){var i,l,a,u;(i=(l=this.options).onError)==null||i.call(l,this.currentResult.error),(a=(u=this.options).onSettled)==null||a.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Fa(o,e){return e.enabled!==!1&&!o.state.dataUpdatedAt&&!(o.state.status==="error"&&e.retryOnMount===!1)}function Sn(o,e){return Fa(o,e)||o.state.dataUpdatedAt>0&&Or(o,e,e.refetchOnMount)}function Or(o,e,r){if(e.enabled!==!1){const t=typeof r=="function"?r(o):r;return t==="always"||t!==!1&&Lr(o,e)}return!1}function Cn(o,e,r,t){return r.enabled!==!1&&(o!==e||t.enabled===!1)&&(!r.suspense||o.state.status!=="error")&&Lr(o,r)}function Lr(o,e){return o.isStaleByTime(e.staleTime)}function $a(o,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:o.getCurrentResult()!==e}const Wi="$$_queryClient",Ba=()=>{const o=_s(Wi);if(!o)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return o},Ha=o=>{hs(Wi,o)};function Yi(){return Ba()}function Qa(o,e){const r=Yi(),t=r.defaultQueryOptions(o);t._optimisticResults="optimistic";let n=new e(r,t);t.onError&&(t.onError=_e.batchCalls(t.onError)),t.onSuccess&&(t.onSuccess=_e.batchCalls(t.onSuccess)),t.onSettled&&(t.onSettled=_e.batchCalls(t.onSettled)),wt(n).subscribe(l=>{n=l,n.setOptions(t,{listeners:!1})});const s=wt(n.getCurrentResult(),l=>n.subscribe(_e.batchCalls(l))),{subscribe:i}=Vt(s,l=>(l=n.getOptimisticResult(t),t.notifyOnChangeProps?l:n.trackResult(l)));return{subscribe:i}}function Ka(o,e,r){const t=kt(o,e,r);return Qa(t,Va)}function Ga(o){let e;const r=o[2].default,t=Ce(r,o,o[1],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,[s]){t&&t.p&&(!e||s&2)&&Pe(t,r,n,n[1],e?De(r,n[1],s,null):qe(n[1]),null)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function Ja(o,e,r){let{$$slots:t={},$$scope:n}=e,{client:s=new zi}=e;return ps(()=>{s.mount()}),Ha(s),hi(()=>{s.unmount()}),o.$$set=i=>{"client"in i&&r(0,s=i.client),"$$scope"in i&&r(1,n=i.$$scope)},[s,n,t]}class za extends Ee{constructor(e){super(),Oe(this,e,Ja,Ga,we,{client:0})}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Xi({rxNostr:o,queryKey:e,filters:r,operator:t,req:n,initData:s}){const i=Yi();if(o.getRelays().length===0)return i.setQueryData(e,s),{data:wt(s),status:wt("success"),error:wt()};let l;n?(n.emit(r),l=n):l=_i({filters:r});const a=Gt("loading"),u=Gt(void 0),c=o.use(l).pipe(t),f=Ka(e,()=>new Promise((d,h)=>{let _=!1;c.subscribe({next:m=>{_?i.setQueryData(e,m):(d(m),_=!0)},complete:()=>a.set("success"),error:m=>{console.error(m),a.set("error"),u.set(m),_||(h(m),_=!0)}})}));return{data:Vt(f,d=>d.data,s),status:Vt([f,a],([d,h])=>d.isSuccess?"success":d.isError?"error":h),error:Vt([f,u],([d,h])=>d.isError?d.error:h)}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Wa({rxNostr:o,relays:e}){if(e.length===0)return Ui([[]]);const r=e.map(t=>{const n=typeof t=="string"?t:t.url,s=o.hasRelay(n)?o.getRelayState(n):"not-started";return{from:n,state:s}});return o.createConnectionStateObservable().pipe(ba(...r),Oa(({from:t})=>t))}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Ya(o,e,r,t,n){const s=[{kinds:[t],authors:[r],limit:1}],i=Xt(ms(t),ka(r),pi(),vs());return Xi({rxNostr:o,queryKey:e,filters:s,operator:i,req:n})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Xa(o,e,r,t){const n=[{ids:[r],limit:1}],s=Xt(ga(r),ys(),pi());return Xi({rxNostr:o,queryKey:e,filters:n,operator:s,req:t})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Za(o,e,r,t){return Ya(o,e,r,bs.Kind.Metadata,t)}const xa=o=>({metadata:o&16,status:o&32}),Pn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},el=o=>({metadata:o&16,status:o&32}),qn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},tl=o=>({metadata:o&16,status:o&32}),Dn=o=>{var e;return{metadata:(e=o[4])==null?void 0:e.event,status:o[5]}},rl=o=>({error:o&8,metadata:o&16,status:o&32}),Rn=o=>{var e;return{error:o[3],metadata:(e=o[4])==null?void 0:e.event,status:o[5]}};function nl(o){let e;const r=o[12].nodata,t=Ce(r,o,o[11],Pn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,xa):qe(n[11]),Pn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function ol(o){let e;const r=o[12].loading,t=Ce(r,o,o[11],qn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,el):qe(n[11]),qn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function il(o){let e;const r=o[12].default,t=Ce(r,o,o[11],Dn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,tl):qe(n[11]),Dn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function sl(o){let e;const r=o[12].error,t=Ce(r,o,o[11],Rn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2104)&&Pe(t,r,n,n[11],e?De(r,n[11],s,rl):qe(n[11]),Rn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function al(o){let e,r,t,n;const s=[sl,il,ol,nl],i=[];function l(a,u){return a[3]?0:a[4]?1:a[5]==="loading"?2:3}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,[u]){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function ll(o,e,r){let t,n,s,i,l,a,u=Q,c=()=>(u(),u=Ke(i,P=>r(3,a=P)),i),f,d=Q,h=()=>(d(),d=Ke(n,P=>r(4,f=P)),n),_,m=Q,b=()=>(m(),m=Ke(s,P=>r(5,_=P)),s);ke(o,Cr,P=>r(10,l=P)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>m());let{$$slots:E={},$$scope:S}=e,{queryKey:q}=e,{pubkey:R}=e,{req:H=void 0}=e;return o.$$set=P=>{"queryKey"in P&&r(6,q=P.queryKey),"pubkey"in P&&r(7,R=P.pubkey),"req"in P&&r(8,H=P.req),"$$scope"in P&&r(11,S=P.$$scope)},o.$$.update=()=>{o.$$.dirty&1472&&r(9,t=Za(l.rxNostr,q,R,H)),o.$$.dirty&512&&h(r(2,n=t.data)),o.$$.dirty&512&&b(r(1,s=t.status)),o.$$.dirty&512&&c(r(0,i=t.error))},[i,s,n,a,f,_,q,R,H,t,l,S,E]}class Le extends Ee{constructor(e){super(),Oe(this,e,ll,al,we,{queryKey:6,pubkey:7,req:8})}}const ul=o=>({connections:o&4}),Tn=o=>({connections:o[2]});function cl(o){let e;const r=o[6].default,t=Ce(r,o,o[7],Tn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&132)&&Pe(t,r,n,n[7],e?De(r,n[7],s,ul):qe(n[7]),Tn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function fl(o){let e,r;return e=new za({props:{client:o[0],$$slots:{default:[cl]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.client=t[0]),n&132&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function dl(o,e,r){let t,n,s,i,l=Q,a=()=>(l(),l=Ke(t,m=>r(2,i=m)),t);o.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:c}=e,{queryClientConfig:f={}}=e,{relays:d=[]}=e;const h=vi(),_={defaultOptions:{queries:{staleTime:1e3*60,refetchInterval:1/0}}};return hi(()=>{h.dispose()}),o.$$set=m=>{"queryClientConfig"in m&&r(3,f=m.queryClientConfig),"relays"in m&&r(4,d=m.relays),"$$scope"in m&&r(7,c=m.$$scope)},o.$$.update=()=>{o.$$.dirty&16&&a(r(1,t=Wa({rxNostr:h,relays:d}))),o.$$.dirty&8&&r(5,n={..._,...f}),o.$$.dirty&32&&r(0,s=new zi(n)),o.$$.dirty&16&&(h.setRelays(d),Cr.set({rxNostr:h}))},[s,t,i,f,d,n,u,c]}class ld extends Ee{constructor(e){super(),Oe(this,e,dl,fl,we,{queryClientConfig:3,relays:4})}}const hl=o=>({text:o&16,status:o&32}),Mn=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},_l=o=>({text:o&16,status:o&32}),Ln=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},pl=o=>({text:o&16,status:o&32}),An=o=>{var e;return{text:(e=o[4])==null?void 0:e.event,status:o[5]}},vl=o=>({error:o&8,text:o&16,status:o&32}),Nn=o=>{var e;return{error:o[3],text:(e=o[4])==null?void 0:e.event,status:o[5]}};function ml(o){let e;const r=o[12].nodata,t=Ce(r,o,o[11],Mn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,hl):qe(n[11]),Mn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function yl(o){let e;const r=o[12].loading,t=Ce(r,o,o[11],Ln);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,_l):qe(n[11]),Ln)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function bl(o){let e;const r=o[12].default,t=Ce(r,o,o[11],An);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2096)&&Pe(t,r,n,n[11],e?De(r,n[11],s,pl):qe(n[11]),An)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function gl(o){let e;const r=o[12].error,t=Ce(r,o,o[11],Nn);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&2104)&&Pe(t,r,n,n[11],e?De(r,n[11],s,vl):qe(n[11]),Nn)},i(n){e||(M(t,n),e=!0)},o(n){F(t,n),e=!1},d(n){t&&t.d(n)}}}function kl(o){let e,r,t,n;const s=[gl,bl,yl,ml],i=[];function l(a,u){return a[3]?0:a[4]?1:a[5]==="loading"?2:3}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,[u]){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function wl(o,e,r){let t,n,s,i,l,a,u=Q,c=()=>(u(),u=Ke(i,P=>r(3,a=P)),i),f,d=Q,h=()=>(d(),d=Ke(n,P=>r(4,f=P)),n),_,m=Q,b=()=>(m(),m=Ke(s,P=>r(5,_=P)),s);ke(o,Cr,P=>r(10,l=P)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>m());let{$$slots:E={},$$scope:S}=e,{queryKey:q}=e,{id:R}=e,{req:H=void 0}=e;return o.$$set=P=>{"queryKey"in P&&r(6,q=P.queryKey),"id"in P&&r(7,R=P.id),"req"in P&&r(8,H=P.req),"$$scope"in P&&r(11,S=P.$$scope)},o.$$.update=()=>{o.$$.dirty&1472&&r(9,t=Xa(l.rxNostr,q,R,H)),o.$$.dirty&512&&h(r(2,n=t.data)),o.$$.dirty&512&&b(r(1,s=t.status)),o.$$.dirty&512&&c(r(0,i=t.error))},[i,s,n,a,f,_,q,R,H,t,l,S,E]}class St extends Ee{constructor(e){super(),Oe(this,e,wl,kl,we,{queryKey:6,id:7,req:8})}}var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.is_node=void 0;var ir=null;function El(){return ir===null&&(ir=typeof B=="object"&&typeof B.process=="object"&&typeof B.process.versions=="object"&&typeof B.process.versions.node<"u"),ir}Ct.is_node=El;var sr={},ar,jn;function Ol(){if(jn)return ar;jn=1;var o=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return ar=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return o()}try{return __global__||o()}finally{delete Object.prototype.__global__}}(),ar}const Il="websocket",Sl="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Cl=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Pl="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",ql=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Dl="1.0.34",Rl={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Tl="https://github.com/theturtle32/WebSocket-Node",Ml={node:">=4.0.0"},Ll={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Al={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Nl={verbose:!1},jl={test:"tape test/unit/*.js",gulp:"gulp"},Ul="index",Vl={lib:"./lib"},Fl="lib/browser.js",$l="Apache-2.0",Bl={name:Il,description:Sl,keywords:Cl,author:Pl,contributors:ql,version:Dl,repository:Rl,homepage:Tl,engines:Ml,dependencies:Ll,devDependencies:Al,config:Nl,scripts:jl,main:Ul,directories:Vl,browser:Fl,license:$l};var lr,Un;function Hl(){return Un||(Un=1,lr=Bl.version),lr}var ur,Vn;function Ql(){if(Vn)return ur;Vn=1;var o;if(typeof globalThis=="object")o=globalThis;else try{o=Ol()}catch{}finally{if(!o&&typeof window<"u"&&(o=window),!o)throw new Error("Could not determine global this")}var e=o.WebSocket||o.MozWebSocket,r=Hl();function t(n,s){var i;return s?i=new e(n,s):i=new e(n),i}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]}})}),ur={w3cwebsocket:e?t:null,version:r},ur}var Lt={},cr={},xe={},et={},tt={},rt={},Fn;function Kl(){if(Fn)return rt;Fn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.ForOfAdaptor=void 0;var o=function(){function e(r,t){this.it_=r,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var r=this.it_;return this.it_=this.it_.next(),{done:!1,value:r.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return rt.ForOfAdaptor=o,rt}var $n;function Ar(){if($n)return tt;$n=1;var o=B&&B.__values||function(t){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&t[n],i=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(tt,"__esModule",{value:!0}),tt.Container=void 0;var e=Kl(),r=function(){function t(){}return t.prototype.empty=function(){return this.size()===0},t.prototype.rbegin=function(){return this.end().reverse()},t.prototype.rend=function(){return this.begin().reverse()},t.prototype[Symbol.iterator]=function(){return new e.ForOfAdaptor(this.begin(),this.end())},t.prototype.toJSON=function(){var n,s,i=[];try{for(var l=o(this),a=l.next();!a.done;a=l.next()){var u=a.value;i.push(u)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return i},t}();return tt.Container=r,tt}var nt={},Bn;function Nr(){if(Bn)return nt;Bn=1;var o=B&&B.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var s=n.call(r),i,l=[],a;try{for(;(t===void 0||t-- >0)&&!(i=s.next()).done;)l.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return l};Object.defineProperty(nt,"__esModule",{value:!0}),nt.NativeArrayIterator=void 0;var e=function(){function r(t,n){this.data_=t,this.index_=n}return r.prototype.index=function(){return this.index_},Object.defineProperty(r.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),r.prototype.prev=function(){return--this.index_,this},r.prototype.next=function(){return++this.index_,this},r.prototype.advance=function(t){return this.index_+=t,this},r.prototype.equals=function(t){return this.data_===t.data_&&this.index_===t.index_},r.prototype.swap=function(t){var n,s;n=o([t.data_,this.data_],2),this.data_=n[0],t.data_=n[1],s=o([t.index_,this.index_],2),this.index_=s[0],t.index_=s[1]},r}();return nt.NativeArrayIterator=e,nt}var Hn;function Gl(){if(Hn)return et;Hn=1;var o=B&&B.__extends||function(){var n=function(s,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},n(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(s,i);function l(){this.constructor=s}s.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}}();Object.defineProperty(et,"__esModule",{value:!0}),et.SetContainer=void 0;var e=Ar(),r=Nr(),t=function(n){o(s,n);function s(i){var l=n.call(this)||this;return l.data_=i(l),l}return s.prototype.assign=function(i,l){this.clear(),this.insert(i,l)},s.prototype.clear=function(){this.data_.clear()},s.prototype.begin=function(){return this.data_.begin()},s.prototype.end=function(){return this.data_.end()},s.prototype.has=function(i){return!this.find(i).equals(this.end())},s.prototype.size=function(){return this.data_.size()},s.prototype.push=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(i.length===0)return this.size();var a=new r.NativeArrayIterator(i,0),u=new r.NativeArrayIterator(i,i.length);return this._Insert_by_range(a,u),this.size()},s.prototype.insert=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return i.length===1?this._Insert_by_key(i[0]):i[0].next instanceof Function&&i[1].next instanceof Function?this._Insert_by_range(i[0],i[1]):this._Insert_by_hint(i[0],i[1])},s.prototype.erase=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return i.length===1&&!(i[0]instanceof this.end().constructor&&i[0].source()===this)?this._Erase_by_val(i[0]):i.length===1?this._Erase_by_range(i[0]):this._Erase_by_range(i[0],i[1])},s.prototype._Erase_by_range=function(i,l){l===void 0&&(l=i.next());var a=this.data_.erase(i,l);return this._Handle_erase(i,l),a},s}(e.Container);return et.SetContainer=t,et}var fr={},ot={},it={},st={},Qn;function Jl(){if(Qn)return st;Qn=1;var o=B&&B.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=i[l])},r(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(st,"__esModule",{value:!0}),st.Exception=void 0;var e=function(r){o(t,r);function t(n){var s=this.constructor,i=r.call(this,n)||this,l=s.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(i,l):i.__proto__=l,i}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),t.prototype.what=function(){return this.message},t.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},t}(Error);return st.Exception=e,st}var Kn;function Zi(){if(Kn)return it;Kn=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(i[a]=l[a])},t(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(it,"__esModule",{value:!0}),it.LogicError=void 0;var e=Jl(),r=function(t){o(n,t);function n(s){return t.call(this,s)||this}return n}(e.Exception);return it.LogicError=r,it}var Gn;function xi(){if(Gn)return ot;Gn=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(i[a]=l[a])},t(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(ot,"__esModule",{value:!0}),ot.InvalidArgument=void 0;var e=Zi(),r=function(t){o(n,t);function n(s){return t.call(this,s)||this}return n}(e.LogicError);return ot.InvalidArgument=r,ot}var at={},Jn;function zl(){if(Jn)return at;Jn=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(i[a]=l[a])},t(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.OutOfRange=void 0;var e=Zi(),r=function(t){o(n,t);function n(s){return t.call(this,s)||this}return n}(e.LogicError);return at.OutOfRange=r,at}var zn;function er(){return zn||(zn=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.ErrorGenerator=void 0;var e=xi(),r=zl();(function(t){function n(h){if(typeof h=="string")return h;var _=h.constructor.name;return h.constructor.__MODULE&&(_="".concat(h.constructor.__MODULE,".").concat(_)),"std.".concat(_)}t.get_class_name=n;function s(h,_){return new r.OutOfRange("Error on ".concat(n(h),".").concat(_,"(): it's empty container."))}t.empty=s;function i(h,_,m){return new r.OutOfRange("Error on ".concat(n(h),".").concat(_,"(): parametric index is negative -> (index = ").concat(m,")."))}t.negative_index=i;function l(h,_,m,b){return new r.OutOfRange("Error on ".concat(n(h),".").concat(_,"(): parametric index is equal or greater than size -> (index = ").concat(m,", size: ").concat(b,")."))}t.excessive_index=l;function a(h,_){return new e.InvalidArgument("Error on ".concat(n(h),".").concat(_,"(): parametric iterator is not this container's own."))}t.not_my_iterator=a;function u(h,_){return new e.InvalidArgument("Error on ".concat(n(h),".").concat(_,"(): parametric iterator, it already has been erased."))}t.erased_iterator=u;function c(h,_,m){return new r.OutOfRange("Error on ".concat(n(h),".").concat(_,"(): parametric iterator is directing negative position -> (index = ").concat(m,")."))}t.negative_iterator=c;function f(h,_){_===void 0&&(_="end");var m=n(h);return new r.OutOfRange("Error on ".concat(m,".Iterator.value: cannot access to the ").concat(m,".").concat(_,"().value."))}t.iterator_end_value=f;function d(h,_,m){throw new r.OutOfRange("Error on ".concat(n(h),".").concat(_,"(): unable to find the matched key -> ").concat(m))}t.key_nout_found=d})(o.ErrorGenerator||(o.ErrorGenerator={}))}(fr)),fr}var Wn;function Wl(){if(Wn)return xe;Wn=1;var o=B&&B.__extends||function(){var i=function(l,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},i(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=B&&B.__read||function(i,l){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(i,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return i.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(xe,"__esModule",{value:!0}),xe.UniqueSet=void 0;var t=Gl(),n=er(),s=function(i){o(l,i);function l(){return i!==null&&i.apply(this,arguments)||this}return l.prototype.count=function(a){return this.find(a).equals(this.end())?0:1},l.prototype.insert=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return i.prototype.insert.apply(this,r([],e(a),!1))},l.prototype._Insert_by_range=function(a,u){for(;!a.equals(u);a=a.next())this._Insert_by_key(a.value)},l.prototype.extract=function(a){return a instanceof this.end().constructor?this._Extract_by_iterator(a):this._Extract_by_val(a)},l.prototype._Extract_by_val=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"extract",a);return this._Erase_by_range(u),a},l.prototype._Extract_by_iterator=function(a){return a.equals(this.end())===!0||this.has(a.value)===!1?this.end():(this._Erase_by_range(a),a)},l.prototype._Erase_by_val=function(a){var u=this.find(a);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(a){for(var u=a.begin();!u.equals(a.end());)this.has(u.value)===!1?(this.insert(u.value),u=a.erase(u)):u=u.next()},l}(t.SetContainer);return xe.UniqueSet=s,xe}var dr={},hr={},Yn;function Yl(){return Yn||(Yn=1,function(o){var e=B&&B.__read||function(t,n){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var i=s.call(t),l,a=[],u;try{for(;(n===void 0||n-- >0)&&!(l=i.next()).done;)a.push(l.value)}catch(c){u={error:c}}finally{try{l&&!l.done&&(s=i.return)&&s.call(i)}finally{if(u)throw u.error}}return a},r=B&&B.__spreadArray||function(t,n,s){if(s||arguments.length===2)for(var i=0,l=n.length,a;i<l;i++)(a||!(i in n))&&(a||(a=Array.prototype.slice.call(n,0,i)),a[i]=n[i]);return t.concat(a||Array.prototype.slice.call(n))};Object.defineProperty(o,"__esModule",{value:!0}),o.IAssociativeContainer=void 0,function(t){function n(s){for(var i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];var a,u;return i.length>=1&&i[0]instanceof Array?(a=function(){var c=i[0];s.push.apply(s,r([],e(c),!1))},u=i.slice(1)):i.length>=2&&i[0].next instanceof Function&&i[1].next instanceof Function?(a=function(){var c=i[0],f=i[1];s.assign(c,f)},u=i.slice(2)):(a=null,u=i),{ramda:a,tail:u}}t.construct=n}(o.IAssociativeContainer||(o.IAssociativeContainer={}))}(hr)),hr}var lt={},ut={},ct={},Xn;function Xl(){if(Xn)return ct;Xn=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct._Get_root=void 0;var o=Ct;function e(){return r===null&&(r=(0,o.is_node)()?B:self,r.__s_iUID===void 0&&(r.__s_iUID=0)),r}ct._Get_root=e;var r=null;return ct}var Zn;function es(){if(Zn)return ut;Zn=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.get_uid=void 0;var o=Xl();function e(r){if(r instanceof Object){if(r.hasOwnProperty("__get_m_iUID")===!1){var t=++(0,o._Get_root)().__s_iUID;Object.defineProperty(r,"__get_m_iUID",{value:function(){return t}})}return r.__get_m_iUID()}else return r===void 0?-1:0}return ut.get_uid=e,ut}var xn;function jr(){if(xn)return lt;xn=1;var o=B&&B.__values||function(a){var u=typeof Symbol=="function"&&Symbol.iterator,c=u&&a[u],f=0;if(c)return c.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&f>=a.length&&(a=void 0),{value:a&&a[f++],done:!a}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lt,"__esModule",{value:!0}),lt.hash=void 0;var e=es();function r(){for(var a,u,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=i;try{for(var h=o(c),_=h.next();!_.done;_=h.next()){var m=_.value;m=m&&m.valueOf();var b=typeof m;if(b==="boolean")d=t(m,d);else if(b==="number"||b==="bigint")d=n(m,d);else if(b==="string")d=s(m,d);else if(m instanceof Object&&m.hashCode instanceof Function){var E=m.hashCode();if(c.length===1)return E;d=d^E,d*=l}else d=n((0,e.get_uid)(m),d)}}catch(S){a={error:S}}finally{try{_&&!_.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}return Math.abs(d)}lt.hash=r;function t(a,u){return u^=a?1:0,u*=l,u}function n(a,u){return s(a.toString(),u)}function s(a,u){for(var c=0;c<a.length;++c)u^=a.charCodeAt(c),u*=l;return Math.abs(u)}var i=2166136261,l=16777619;return lt}var be={},eo;function Ur(){if(eo)return be;eo=1,Object.defineProperty(be,"__esModule",{value:!0}),be.greater_equal=be.greater=be.less_equal=be.less=be.not_equal_to=be.equal_to=void 0;var o=es();function e(l,a){return l=l&&l.valueOf(),a=a&&a.valueOf(),l instanceof Object&&l.equals instanceof Function?l.equals(a):l===a}be.equal_to=e;function r(l,a){return!e(l,a)}be.not_equal_to=r;function t(l,a){return l=l.valueOf(),a=a.valueOf(),l instanceof Object?l.less instanceof Function?l.less(a):(0,o.get_uid)(l)<(0,o.get_uid)(a):l<a}be.less=t;function n(l,a){return t(l,a)||e(l,a)}be.less_equal=n;function s(l,a){return!n(l,a)}be.greater=s;function i(l,a){return!t(l,a)}return be.greater_equal=i,be}var to;function ts(){return to||(to=1,function(o){var e=B&&B.__read||function(i,l){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(i,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return i.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(o,"__esModule",{value:!0}),o.IHashContainer=void 0;var t=Yl(),n=jr(),s=Ur();(function(i){function l(a,u,c){for(var f=[],d=3;d<arguments.length;d++)f[d-3]=arguments[d];var h=null,_=n.hash,m=s.equal_to;if(f.length===1&&f[0]instanceof u){var b=f[0];_=b.hash_function(),m=b.key_eq(),h=function(){var S=b.begin(),q=b.end();a.assign(S,q)}}else{var E=t.IAssociativeContainer.construct.apply(t.IAssociativeContainer,r([a],e(f),!1));h=E.ramda,E.tail.length>=1&&(_=E.tail[0]),E.tail.length>=2&&(m=E.tail[1])}c(_,m),h!==null&&h()}i.construct=l})(o.IHashContainer||(o.IHashContainer={}))}(dr)),dr}var _r={},ft={},dt={},ro;function Vr(){if(ro)return dt;ro=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.ListIterator=void 0;var o=er(),e=function(){function r(t,n,s){this.prev_=t,this.next_=n,this.value_=s}return r._Set_prev=function(t,n){t.prev_=n},r._Set_next=function(t,n){t.next_=n},r.prototype.prev=function(){return this.prev_},r.prototype.next=function(){return this.next_},Object.defineProperty(r.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),r.prototype._Try_value=function(){if(this.value_===void 0&&this.equals(this.source().end())===!0)throw o.ErrorGenerator.iterator_end_value(this.source())},r.prototype.equals=function(t){return this===t},r}();return dt.ListIterator=e,dt}var ht={},no;function Zl(){if(no)return ht;no=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Repeater=void 0;var o=function(){function e(r,t){this.index_=r,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(r){return this.index_===r.index_},e}();return ht.Repeater=o,ht}var ge={},oo;function xl(){if(oo)return ge;oo=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.next=ge.prev=ge.advance=ge.distance=ge.size=ge.empty=void 0;var o=xi();function e(a){return a instanceof Array?a.length!==0:a.empty()}ge.empty=e;function r(a){return a instanceof Array?a.length:a.size()}ge.size=r;function t(a,u){if(a.index instanceof Function)return n(a,u);for(var c=0;!a.equals(u);a=a.next())++c;return c}ge.distance=t;function n(a,u){var c=a.index(),f=u.index();return a.base instanceof Function?c-f:f-c}function s(a,u){if(u===0)return a;if(a.advance instanceof Function)return a.advance(u);var c;if(u<0){if(!(a.prev instanceof Function))throw new o.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");c=function(f){return f.prev()},u=-u}else c=function(f){return f.next()};for(;u-- >0;)a=c(a);return a}ge.advance=s;function i(a,u){return u===void 0&&(u=1),u===1?a.prev():s(a,-u)}ge.prev=i;function l(a,u){return u===void 0&&(u=1),u===1?a.next():s(a,u)}return ge.next=l,ge}var io;function rs(){if(io)return ft;io=1;var o=B&&B.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(d[_]=h[_])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),e=B&&B.__read||function(u,c){var f=typeof Symbol=="function"&&u[Symbol.iterator];if(!f)return u;var d=f.call(u),h,_=[],m;try{for(;(c===void 0||c-- >0)&&!(h=d.next()).done;)_.push(h.value)}catch(b){m={error:b}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(m)throw m.error}}return _};Object.defineProperty(ft,"__esModule",{value:!0}),ft.ListContainer=void 0;var r=Ar(),t=Vr(),n=Zl(),s=Nr(),i=xl(),l=er(),a=function(u){o(c,u);function c(){var f=u.call(this)||this;return f.end_=f._Create_iterator(null,null),f.clear(),f}return c.prototype.assign=function(f,d){this.clear(),this.insert(this.end(),f,d)},c.prototype.clear=function(){t.ListIterator._Set_prev(this.end_,this.end_),t.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},c.prototype.resize=function(f){var d=f-this.size();d>0?this.insert(this.end(),d,void 0):d<0&&this.erase((0,i.advance)(this.end(),-d),this.end())},c.prototype.begin=function(){return this.begin_},c.prototype.end=function(){return this.end_},c.prototype.size=function(){return this.size_},c.prototype.push_front=function(f){this.insert(this.begin_,f)},c.prototype.push_back=function(f){this.insert(this.end_,f)},c.prototype.pop_front=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},c.prototype.pop_back=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},c.prototype.push=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];if(f.length===0)return this.size();var h=new s.NativeArrayIterator(f,0),_=new s.NativeArrayIterator(f,f.length);return this._Insert_by_range(this.end(),h,_),this.size()},c.prototype.insert=function(f){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return d.length===1?this._Insert_by_repeating_val(f,1,d[0]):d.length===2&&typeof d[0]=="number"?this._Insert_by_repeating_val(f,d[0],d[1]):this._Insert_by_range(f,d[0],d[1])},c.prototype._Insert_by_repeating_val=function(f,d,h){var _=new n.Repeater(0,h),m=new n.Repeater(d);return this._Insert_by_range(f,_,m)},c.prototype._Insert_by_range=function(f,d,h){for(var _=f.prev(),m=null,b=0,E=d;E.equals(h)===!1;E=E.next()){var S=this._Create_iterator(_,null,E.value);b===0&&(m=S),t.ListIterator._Set_next(_,S),_=S,++b}return f.equals(this.begin())===!0&&(this.begin_=m),t.ListIterator._Set_next(_,f),t.ListIterator._Set_prev(f,_),this.size_+=b,m},c.prototype.erase=function(f,d){return d===void 0&&(d=f.next()),this._Erase_by_range(f,d)},c.prototype._Erase_by_range=function(f,d){if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(f.equals(this.end_))return this.end_;var h=f.prev();t.ListIterator._Set_next(h,d),t.ListIterator._Set_prev(d,h);for(var _=f;!_.equals(d);_=_.next())_.erased_=!0,--this.size_;return f.equals(this.begin_)&&(this.begin_=d),d},c.prototype.swap=function(f){var d,h,_;d=e([f.begin_,this.begin_],2),this.begin_=d[0],f.begin_=d[1],h=e([f.end_,this.end_],2),this.end_=h[0],f.end_=h[1],_=e([f.size_,this.size_],2),this.size_=_[0],f.size_=_[1]},c}(r.Container);return ft.ListContainer=a,ft}var _t={},so;function ns(){if(so)return _t;so=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.ReverseIterator=void 0;var o=function(){function e(r){this.base_=r.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(r){return this.base_.equals(r.base_)},e}();return _t.ReverseIterator=o,_t}var ao;function eu(){return ao||(ao=1,function(o){var e=B&&B.__extends||function(){var l=function(a,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(a,u);function c(){this.constructor=a}a.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=B&&B.__read||function(l,a){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(a===void 0||a-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(o,"__esModule",{value:!0}),o.SetElementList=void 0;var t=rs(),n=Vr(),s=ns(),i=function(l){e(a,l);function a(u){var c=l.call(this)||this;return c.associative_=u,c}return a.prototype._Create_iterator=function(u,c,f){return a.Iterator.create(this,u,c,f)},a._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},a.prototype.associative=function(){return this.associative_},a}(t.ListContainer);o.SetElementList=i,function(l){var a=function(c){e(f,c);function f(d,h,_,m){var b=c.call(this,h,_,m)||this;return b.source_=d,b}return f.create=function(d,h,_,m){return new f(d,h,_,m)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.source_.associative()},f}(n.ListIterator);l.Iterator=a;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},f}(s.ReverseIterator);l.ReverseIterator=u}(i=o.SetElementList||(o.SetElementList={})),o.SetElementList=i}(_r)),_r}var pt={},vt={},lo;function os(){if(lo)return vt;lo=1;var o=B&&B.__values||function(n){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&n[s],l=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&l>=n.length&&(n=void 0),{value:n&&n[l++],done:!n}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vt,"__esModule",{value:!0}),vt.HashBuckets=void 0;var e=function(){function n(s,i){this.fetcher_=s,this.hasher_=i,this.max_load_factor_=t,this.data_=[],this.size_=0,this.initialize()}return n.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},n.prototype.rehash=function(s){var i,l,a,u;s=Math.max(s,r);for(var c=[],f=0;f<s;++f)c.push([]);try{for(var d=o(this.data_),h=d.next();!h.done;h=d.next()){var _=h.value;try{for(var m=(a=void 0,o(_)),b=m.next();!b.done;b=m.next()){var E=b.value,S=this.hasher_(this.fetcher_(E))%c.length;c[S].push(E)}}catch(q){a={error:q}}finally{try{b&&!b.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}}}catch(q){i={error:q}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(i)throw i.error}}this.data_=c},n.prototype.reserve=function(s){s>this.capacity()&&(s=Math.floor(s/this.max_load_factor_),this.rehash(s))},n.prototype.initialize=function(){for(var s=0;s<r;++s)this.data_.push([])},n.prototype.length=function(){return this.data_.length},n.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},n.prototype.at=function(s){return this.data_[s]},n.prototype.load_factor=function(){return this.size_/this.length()},n.prototype.max_load_factor=function(s){if(s===void 0&&(s=null),s===null)return this.max_load_factor_;this.max_load_factor_=s},n.prototype.hash_function=function(){return this.hasher_},n.prototype.index=function(s){return this.hasher_(this.fetcher_(s))%this.length()},n.prototype.insert=function(s){var i=this.capacity();++this.size_>i&&this.reserve(i*2);var l=this.index(s);this.data_[l].push(s)},n.prototype.erase=function(s){for(var i=this.index(s),l=this.data_[i],a=0;a<l.length;++a)if(l[a]===s){l.splice(a,1),--this.size_;break}},n}();vt.HashBuckets=e;var r=10,t=1;return vt}var uo;function tu(){if(uo)return pt;uo=1;var o=B&&B.__extends||function(){var i=function(l,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},i(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=B&&B.__read||function(i,l){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__values||function(i){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&i[l],u=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pt,"__esModule",{value:!0}),pt.SetHashBuckets=void 0;var t=os(),n=function(i){o(l,i);function l(a,u,c){var f=i.call(this,s,u)||this;return f.source_=a,f.key_eq_=c,f}return l._Swap_source=function(a,u){var c;c=e([u.source_,a.source_],2),a.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(a){var u,c,f=this.hash_function()(a)%this.length(),d=this.at(f);try{for(var h=r(d),_=h.next();!_.done;_=h.next()){var m=_.value;if(this.key_eq_(m.value,a))return m}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);pt.SetHashBuckets=n;function s(i){return i.value}return pt}var He={},co;function is(){if(co)return He;co=1,Object.defineProperty(He,"__esModule",{value:!0}),He.make_pair=He.Pair=void 0;var o=jr(),e=Ur(),r=function(){function n(s,i){this.first=s,this.second=i}return n.prototype.equals=function(s){return(0,e.equal_to)(this.first,s.first)&&(0,e.equal_to)(this.second,s.second)},n.prototype.less=function(s){return(0,e.equal_to)(this.first,s.first)===!1?(0,e.less)(this.first,s.first):(0,e.less)(this.second,s.second)},n.prototype.hashCode=function(){return(0,o.hash)(this.first,this.second)},n}();He.Pair=r;function t(n,s){return new r(n,s)}return He.make_pair=t,He}var fo;function ru(){return fo||(fo=1,function(o){var e=B&&B.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(h[m]=_[m])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function h(){this.constructor=f}f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),r=B&&B.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h=d.call(c),_,m=[],b;try{for(;(f===void 0||f-- >0)&&!(_=h.next()).done;)m.push(_.value)}catch(E){b={error:E}}finally{try{_&&!_.done&&(d=h.return)&&d.call(h)}finally{if(b)throw b.error}}return m},t=B&&B.__spreadArray||function(c,f,d){if(d||arguments.length===2)for(var h=0,_=f.length,m;h<_;h++)(m||!(h in f))&&(m||(m=Array.prototype.slice.call(f,0,h)),m[h]=f[h]);return c.concat(m||Array.prototype.slice.call(f))};Object.defineProperty(o,"__esModule",{value:!0}),o.HashSet=void 0;var n=Wl(),s=ts(),i=eu(),l=tu(),a=is(),u=function(c){e(f,c);function f(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var _=c.call(this,function(m){return new i.SetElementList(m)})||this;return s.IHashContainer.construct.apply(s.IHashContainer,t([_,f,function(m,b){_.buckets_=new l.SetHashBuckets(_,m,b)}],r(d),!1)),_}return f.prototype.clear=function(){this.buckets_.clear(),c.prototype.clear.call(this)},f.prototype.swap=function(d){var h,_;h=r([d.data_,this.data_],2),this.data_=h[0],d.data_=h[1],i.SetElementList._Swap_associative(this.data_,d.data_),l.SetHashBuckets._Swap_source(this.buckets_,d.buckets_),_=r([d.buckets_,this.buckets_],2),this.buckets_=_[0],d.buckets_=_[1]},f.prototype.find=function(d){return this.buckets_.find(d)},f.prototype.begin=function(d){return d===void 0&&(d=null),d===null?c.prototype.begin.call(this):this.buckets_.at(d)[0]},f.prototype.end=function(d){if(d===void 0&&(d=null),d===null)return c.prototype.end.call(this);var h=this.buckets_.at(d);return h[h.length-1].next()},f.prototype.rbegin=function(d){return d===void 0&&(d=null),this.end(d).reverse()},f.prototype.rend=function(d){return d===void 0&&(d=null),this.begin(d).reverse()},f.prototype.bucket_count=function(){return this.buckets_.length()},f.prototype.bucket_size=function(d){return this.buckets_.at(d).length},f.prototype.load_factor=function(){return this.buckets_.load_factor()},f.prototype.hash_function=function(){return this.buckets_.hash_function()},f.prototype.key_eq=function(){return this.buckets_.key_eq()},f.prototype.bucket=function(d){return this.hash_function()(d)%this.buckets_.length()},f.prototype.max_load_factor=function(d){return d===void 0&&(d=null),this.buckets_.max_load_factor(d)},f.prototype.reserve=function(d){this.buckets_.reserve(d)},f.prototype.rehash=function(d){this.buckets_.rehash(d)},f.prototype._Insert_by_key=function(d){var h=this.find(d);return h.equals(this.end())===!1?new a.Pair(h,!1):(this.data_.push(d),h=h.prev(),this._Handle_insert(h,h.next()),new a.Pair(h,!0))},f.prototype._Insert_by_hint=function(d,h){var _=this.find(h);return _.equals(this.end())===!0&&(_=this.data_.insert(d,h),this._Handle_insert(_,_.next())),_},f.prototype._Handle_insert=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.insert(d)},f.prototype._Handle_erase=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.erase(d)},f}(n.UniqueSet);o.HashSet=u,function(c){c.Iterator=i.SetElementList.Iterator,c.ReverseIterator=i.SetElementList.ReverseIterator}(u=o.HashSet||(o.HashSet={})),o.HashSet=u}(cr)),cr}var pr={},mt={},yt={},ho;function nu(){if(ho)return yt;ho=1;var o=B&&B.__extends||function(){var n=function(s,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},n(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(s,i);function l(){this.constructor=s}s.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}}();Object.defineProperty(yt,"__esModule",{value:!0}),yt.MapContainer=void 0;var e=Ar(),r=Nr(),t=function(n){o(s,n);function s(i){var l=n.call(this)||this;return l.data_=i(l),l}return s.prototype.assign=function(i,l){this.clear(),this.insert(i,l)},s.prototype.clear=function(){this.data_.clear()},s.prototype.begin=function(){return this.data_.begin()},s.prototype.end=function(){return this.data_.end()},s.prototype.has=function(i){return!this.find(i).equals(this.end())},s.prototype.size=function(){return this.data_.size()},s.prototype.push=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var a=new r.NativeArrayIterator(i,0),u=new r.NativeArrayIterator(i,i.length);return this.insert(a,u),this.size()},s.prototype.insert=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return i.length===1?this.emplace(i[0].first,i[0].second):i[0].next instanceof Function&&i[1].next instanceof Function?this._Insert_by_range(i[0],i[1]):this.emplace_hint(i[0],i[1].first,i[1].second)},s.prototype.erase=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return i.length===1&&(!(i[0]instanceof this.end().constructor)||i[0].source()!==this)?this._Erase_by_key(i[0]):i.length===1?this._Erase_by_range(i[0]):this._Erase_by_range(i[0],i[1])},s.prototype._Erase_by_range=function(i,l){l===void 0&&(l=i.next());var a=this.data_.erase(i,l);return this._Handle_erase(i,l),a},s}(e.Container);return yt.MapContainer=t,yt}var _o;function ou(){if(_o)return mt;_o=1;var o=B&&B.__extends||function(){var i=function(l,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},i(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=B&&B.__read||function(i,l){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(i,l,a){if(a||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return i.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(mt,"__esModule",{value:!0}),mt.UniqueMap=void 0;var t=nu(),n=er(),s=function(i){o(l,i);function l(){return i!==null&&i.apply(this,arguments)||this}return l.prototype.count=function(a){return this.find(a).equals(this.end())?0:1},l.prototype.get=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"get",a);return u.second},l.prototype.take=function(a,u){var c=this.find(a);return c.equals(this.end())?this.emplace(a,u()).first.second:c.second},l.prototype.set=function(a,u){this.insert_or_assign(a,u)},l.prototype.insert=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return i.prototype.insert.apply(this,r([],e(a),!1))},l.prototype._Insert_by_range=function(a,u){for(var c=a;!c.equals(u);c=c.next())this.emplace(c.value.first,c.value.second)},l.prototype.insert_or_assign=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(a.length===2)return this._Insert_or_assign_with_key_value(a[0],a[1]);if(a.length===3)return this._Insert_or_assign_with_hint(a[0],a[1],a[2])},l.prototype._Insert_or_assign_with_key_value=function(a,u){var c=this.emplace(a,u);return c.second===!1&&(c.first.second=u),c},l.prototype._Insert_or_assign_with_hint=function(a,u,c){var f=this.emplace_hint(a,u,c);return f.second!==c&&(f.second=c),f},l.prototype.extract=function(a){return a instanceof this.end().constructor?this._Extract_by_iterator(a):this._Extract_by_key(a)},l.prototype._Extract_by_key=function(a){var u=this.find(a);if(u.equals(this.end())===!0)throw n.ErrorGenerator.key_nout_found(this,"extract",a);var c=u.value;return this._Erase_by_range(u),c},l.prototype._Extract_by_iterator=function(a){return a.equals(this.end())===!0?this.end():(this._Erase_by_range(a),a)},l.prototype._Erase_by_key=function(a){var u=this.find(a);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(a){for(var u=a.begin();!u.equals(a.end());)this.has(u.first)===!1?(this.insert(u.value),u=a.erase(u)):u=u.next()},l}(t.MapContainer);return mt.UniqueMap=s,mt}var vr={},po;function iu(){return po||(po=1,function(o){var e=B&&B.__extends||function(){var l=function(a,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(a,u);function c(){this.constructor=a}a.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=B&&B.__read||function(l,a){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(a===void 0||a-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(o,"__esModule",{value:!0}),o.MapElementList=void 0;var t=rs(),n=Vr(),s=ns(),i=function(l){e(a,l);function a(u){var c=l.call(this)||this;return c.associative_=u,c}return a.prototype._Create_iterator=function(u,c,f){return a.Iterator.create(this,u,c,f)},a._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},a.prototype.associative=function(){return this.associative_},a}(t.ListContainer);o.MapElementList=i,function(l){var a=function(c){e(f,c);function f(d,h,_,m){var b=c.call(this,h,_,m)||this;return b.list_=d,b}return f.create=function(d,h,_,m){return new f(d,h,_,m)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.list_.associative()},Object.defineProperty(f.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.value.second},set:function(d){this.value.second=d},enumerable:!1,configurable:!0}),f}(n.ListIterator);l.Iterator=a;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},Object.defineProperty(f.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.base_.second},set:function(d){this.base_.second=d},enumerable:!1,configurable:!0}),f}(s.ReverseIterator);l.ReverseIterator=u}(i=o.MapElementList||(o.MapElementList={})),o.MapElementList=i}(vr)),vr}var bt={},vo;function su(){if(vo)return bt;vo=1;var o=B&&B.__extends||function(){var i=function(l,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},i(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),e=B&&B.__read||function(i,l){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__values||function(i){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&i[l],u=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bt,"__esModule",{value:!0}),bt.MapHashBuckets=void 0;var t=os(),n=function(i){o(l,i);function l(a,u,c){var f=i.call(this,s,u)||this;return f.source_=a,f.key_eq_=c,f}return l._Swap_source=function(a,u){var c;c=e([u.source_,a.source_],2),a.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(a){var u,c,f=this.hash_function()(a)%this.length(),d=this.at(f);try{for(var h=r(d),_=h.next();!_.done;_=h.next()){var m=_.value;if(this.key_eq_(m.first,a))return m}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);bt.MapHashBuckets=n;function s(i){return i.first}return bt}var gt={},mo;function au(){if(mo)return gt;mo=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.Entry=void 0;var o=jr(),e=Ur(),r=function(){function t(n,s){this.first=n,this.second=s}return t.prototype.equals=function(n){return(0,e.equal_to)(this.first,n.first)},t.prototype.less=function(n){return(0,e.less)(this.first,n.first)},t.prototype.hashCode=function(){return(0,o.hash)(this.first)},t}();return gt.Entry=r,gt}var yo;function lu(){return yo||(yo=1,function(o){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(_[b]=m[b])},f(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),r=B&&B.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var _=h.call(f),m,b=[],E;try{for(;(d===void 0||d-- >0)&&!(m=_.next()).done;)b.push(m.value)}catch(S){E={error:S}}finally{try{m&&!m.done&&(h=_.return)&&h.call(_)}finally{if(E)throw E.error}}return b},t=B&&B.__spreadArray||function(f,d,h){if(h||arguments.length===2)for(var _=0,m=d.length,b;_<m;_++)(b||!(_ in d))&&(b||(b=Array.prototype.slice.call(d,0,_)),b[_]=d[_]);return f.concat(b||Array.prototype.slice.call(d))};Object.defineProperty(o,"__esModule",{value:!0}),o.HashMap=void 0;var n=ou(),s=ts(),i=iu(),l=su(),a=au(),u=is(),c=function(f){e(d,f);function d(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];var m=f.call(this,function(b){return new i.MapElementList(b)})||this;return s.IHashContainer.construct.apply(s.IHashContainer,t([m,d,function(b,E){m.buckets_=new l.MapHashBuckets(m,b,E)}],r(h),!1)),m}return d.prototype.clear=function(){this.buckets_.clear(),f.prototype.clear.call(this)},d.prototype.swap=function(h){var _,m;_=r([h.data_,this.data_],2),this.data_=_[0],h.data_=_[1],i.MapElementList._Swap_associative(this.data_,h.data_),l.MapHashBuckets._Swap_source(this.buckets_,h.buckets_),m=r([h.buckets_,this.buckets_],2),this.buckets_=m[0],h.buckets_=m[1]},d.prototype.find=function(h){return this.buckets_.find(h)},d.prototype.begin=function(h){return h===void 0&&(h=null),h===null?f.prototype.begin.call(this):this.buckets_.at(h)[0]},d.prototype.end=function(h){if(h===void 0&&(h=null),h===null)return f.prototype.end.call(this);var _=this.buckets_.at(h);return _[_.length-1].next()},d.prototype.rbegin=function(h){return h===void 0&&(h=null),this.end(h).reverse()},d.prototype.rend=function(h){return h===void 0&&(h=null),this.begin(h).reverse()},d.prototype.bucket_count=function(){return this.buckets_.length()},d.prototype.bucket_size=function(h){return this.buckets_.at(h).length},d.prototype.load_factor=function(){return this.buckets_.load_factor()},d.prototype.hash_function=function(){return this.buckets_.hash_function()},d.prototype.key_eq=function(){return this.buckets_.key_eq()},d.prototype.bucket=function(h){return this.hash_function()(h)%this.buckets_.length()},d.prototype.max_load_factor=function(h){return h===void 0&&(h=null),this.buckets_.max_load_factor(h)},d.prototype.reserve=function(h){this.buckets_.reserve(h)},d.prototype.rehash=function(h){this.buckets_.rehash(h)},d.prototype.emplace=function(h,_){var m=this.find(h);return m.equals(this.end())===!1?new u.Pair(m,!1):(this.data_.push(new a.Entry(h,_)),m=m.prev(),this._Handle_insert(m,m.next()),new u.Pair(m,!0))},d.prototype.emplace_hint=function(h,_,m){var b=this.find(_);return b.equals(this.end())===!0&&(b=this.data_.insert(h,new a.Entry(_,m)),this._Handle_insert(b,b.next())),b},d.prototype._Handle_insert=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.insert(h)},d.prototype._Handle_erase=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.erase(h)},d}(n.UniqueMap);o.HashMap=c,function(f){f.Iterator=i.MapElementList.Iterator,f.ReverseIterator=i.MapElementList.ReverseIterator}(c=o.HashMap||(o.HashMap={})),o.HashMap=c}(pr)),pr}var bo;function uu(){if(bo)return Lt;bo=1;var o=B&&B.__values||function(n){var s=typeof Symbol=="function"&&n[Symbol.iterator],i=0;return s?s.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}};Object.defineProperty(Lt,"__esModule",{value:!0});var e=ru(),r=lu(),t=function(){function n(){this.listeners_=new r.HashMap,this.created_at_=new Date}return n.prototype.dispatchEvent=function(s){var i,l,a=this.listeners_.find(s.type);if(!a.equals(this.listeners_.end())){s.target=this,s.timeStamp=new Date().getTime()-this.created_at_.getTime();try{for(var u=o(a.second),c=u.next();!c.done;c=u.next()){var f=c.value;f(s)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}}},n.prototype.addEventListener=function(s,i){var l=this.listeners_.find(s);l.equals(this.listeners_.end())&&(l=this.listeners_.emplace(s,new e.HashSet).first),l.second.insert(i)},n.prototype.removeEventListener=function(s,i){var l=this.listeners_.find(s);l.equals(this.listeners_.end())||(l.second.erase(i),l.second.empty()&&this.listeners_.erase(l))},n}();return Lt.EventTarget=t,Lt}var At={},go;function tr(){if(go)return At;go=1,Object.defineProperty(At,"__esModule",{value:!0});var o=function(){function e(r,t){this.type=r,t&&Object.assign(this,t)}return e}();return At.Event=o,At}var Nt={},ko;function cu(){if(ko)return Nt;ko=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)l.hasOwnProperty(a)&&(i[a]=l[a])},t(n,s)};return function(n,s){t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(Nt,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(s,i){return t.call(this,s,i)||this}return n}(e.Event);return Nt.CloseEvent=r,Nt}var jt={},wo;function fu(){if(wo)return jt;wo=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)l.hasOwnProperty(a)&&(i[a]=l[a])},t(n,s)};return function(n,s){t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(jt,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(s,i){return t.call(this,s,i)||this}return n}(e.Event);return jt.MessageEvent=r,jt}var Ut={},Eo;function du(){if(Eo)return Ut;Eo=1;var o=B&&B.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var a in l)l.hasOwnProperty(a)&&(i[a]=l[a])},t(n,s)};return function(n,s){t(n,s);function i(){this.constructor=n}n.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(Ut,"__esModule",{value:!0});var e=tr(),r=function(t){o(n,t);function n(s,i){return t.call(this,s,i)||this}return n}(e.Event);return Ut.ErrorEvent=r,Ut}var Oo;function hu(){return Oo||(Oo=1,function(o){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var b in m)m.hasOwnProperty(b)&&(_[b]=m[b])},f(d,h)};return function(d,h){f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),r=B&&B.__assign||function(){return r=Object.assign||function(f){for(var d,h=1,_=arguments.length;h<_;h++){d=arguments[h];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(f[m]=d[m])}return f},r.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var t=Ql(),n=uu(),s=tr(),i=cu(),l=fu(),a=du(),u=function(f){e(d,f);function d(h,_){var m=f.call(this)||this;return m.on_={},m.state_=d.CONNECTING,m.client_=new t.client,m.client_.on("connect",m._Handle_connect.bind(m)),m.client_.on("connectFailed",m._Handle_error.bind(m)),typeof _=="string"&&(_=[_]),m.client_.connect(h,_),m}return d.prototype.close=function(h,_){this.state_=d.CLOSING,h===void 0?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(h,_,!0)},d.prototype.send=function(h){if(typeof h.valueOf()=="string")this.connection_.sendUTF(h);else{var _=void 0;h instanceof Buffer?_=h:h instanceof Blob?_=new Buffer(h,"blob"):h.buffer?_=new Buffer(h.buffer):_=new Buffer(h),this.connection_.sendBytes(_)}},Object.defineProperty(d.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onopen",{get:function(){return this.on_.open},set:function(h){this._Set_on("open",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onclose",{get:function(){return this.on_.close},set:function(h){this._Set_on("close",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onmessage",{get:function(){return this.on_.message},set:function(h){this._Set_on("message",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onerror",{get:function(){return this.on_.error},set:function(h){this._Set_on("error",h)},enumerable:!0,configurable:!0}),d.prototype._Set_on=function(h,_){this.on_[h]&&this.removeEventListener(h,this.on_[h]),this.addEventListener(h,_),this.on_[h]=_},d.prototype._Handle_connect=function(h){this.connection_=h,this.state_=d.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var _=new s.Event("open",c);this.dispatchEvent(_)},d.prototype._Handle_close=function(h,_){var m=new i.CloseEvent("close",r({},c,{code:h,reason:_}));this.state_=d.CLOSED,this.dispatchEvent(m)},d.prototype._Handle_message=function(h){var _=new l.MessageEvent("message",r({},c,{data:h.binaryData?h.binaryData:h.utf8Data}));this.dispatchEvent(_)},d.prototype._Handle_error=function(h){var _=new a.ErrorEvent("error",r({},c,{error:h,message:h.message}));this.state_===d.CONNECTING&&(this.state_=d.CLOSED),this.dispatchEvent(_)},d}(n.EventTarget);o.WebSocket=u,function(f){f.CONNECTING=0,f.OPEN=1,f.CLOSING=2,f.CLOSED=3}(u=o.WebSocket||(o.WebSocket={})),o.WebSocket=u;var c={bubbles:!1,cancelable:!1}}(sr)),sr}var _u=Ct;_u.is_node()&&(B.WebSocket=hu().WebSocket);async function Io(o,e){const r=new URL(o),t=r.origin+r.pathname,n=pu(t),s=await caches.open("user-icon-cache-v1"),i=await s.match(`${e}/usericon/${n}`);if(i){const l=await i.blob();return URL.createObjectURL(l)}else try{const l=await fetch(t);if(l.ok){s.put(`${e}/usericon/${n}`,l.clone());const a=await l.blob();return URL.createObjectURL(a)}else return t}catch{return t}}function pu(o){const e=vu(o),r=mu(o);return`image-${e}.${r}`}function vu(o){let e=0;for(let r=0;r<o.length;r++){const t=o.charCodeAt(r);e=(e<<5)-e+t,e|=0}return e}function mu(o){const e=o.split(".");return e[e.length-1]}function So(o){let e,r,t,n,s=JSON.parse(o[1][0].value.metadata.content).picture,i,l,a,u,c,f,d,h,_,m,b=JSON.parse(o[1][0].value.metadata.content).about+"",E,S,q,R,H,P,A,j=JSON.stringify(o[1][0].value.metadata,void 0,4)+"",N,K,Z,G,ne,J,D,L,z,ie,re,oe,X,ee,te,pe=o[0].buttonTextCancel+"",Re,Ne,$e,he=s&&Co(o);return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("div"),he&&he.c(),i=U(),l=g("div"),a=g("img"),c=U(),f=g("div"),d=g("div"),h=O("about"),_=U(),m=g("div"),E=O(b),S=U(),q=g("div"),R=g("div"),H=O("profileJSON"),P=U(),A=g("div"),N=O(j),K=U(),Z=g("div"),G=g("div"),ne=g("button"),J=O("copy pubKey"),D=U(),L=g("button"),z=O("copy hexKey"),ie=U(),re=g("div"),oe=g("button"),X=O("Open in external app"),ee=U(),te=g("button"),Re=O(pe),this.h()},l(Ie){e=k(Ie,"DIV",{class:!0});var $=w(e);r=k($,"DIV",{class:!0});var ve=w(r);t=k(ve,"DIV",{class:!0});var Be=w(t);n=k(Be,"DIV",{class:!0});var $r=w(n);he&&he.l($r),$r.forEach(p),i=V(Be),l=k(Be,"DIV",{});var Br=w(l);a=k(Br,"IMG",{class:!0,src:!0,alt:!0}),Br.forEach(p),Be.forEach(p),c=V(ve),f=k(ve,"DIV",{class:!0});var Pt=w(f);d=k(Pt,"DIV",{class:!0});var Hr=w(d);h=I(Hr,"about"),Hr.forEach(p),_=V(Pt),m=k(Pt,"DIV",{class:!0});var Qr=w(m);E=I(Qr,b),Qr.forEach(p),Pt.forEach(p),S=V(ve),q=k(ve,"DIV",{class:!0});var qt=w(q);R=k(qt,"DIV",{class:!0});var Kr=w(R);H=I(Kr,"profileJSON"),Kr.forEach(p),P=V(qt),A=k(qt,"DIV",{class:!0});var Gr=w(A);N=I(Gr,j),Gr.forEach(p),qt.forEach(p),ve.forEach(p),K=V($),Z=k($,"DIV",{class:!0});var Dt=w(Z);G=k(Dt,"DIV",{class:!0});var Rt=w(G);ne=k(Rt,"BUTTON",{type:!0,class:!0});var Jr=w(ne);J=I(Jr,"copy pubKey"),Jr.forEach(p),D=V(Rt),L=k(Rt,"BUTTON",{type:!0,class:!0});var zr=w(L);z=I(zr,"copy hexKey"),zr.forEach(p),Rt.forEach(p),ie=V(Dt),re=k(Dt,"DIV",{class:!0});var Tt=w(re);oe=k(Tt,"BUTTON",{type:!0,class:!0});var Wr=w(oe);X=I(Wr,"Open in external app"),Wr.forEach(p),ee=V(Tt),te=k(Tt,"BUTTON",{type:!0,class:!0});var Yr=w(te);Re=I(Yr,pe),Yr.forEach(p),Tt.forEach(p),Dt.forEach(p),$.forEach(p),this.h()},h(){y(n,"class","w-16 h-16 rounded-lg flex justify-center overflow-hidden bg-surface-500/25"),y(a,"class",""),de(a.src,u=JSON.parse(o[1][0].value.metadata.content).banner)||y(a,"src",u),y(a,"alt",""),y(t,"class","grid grid-cols-[auto_1fr] gap-2 max-w-md"),y(d,"class","font-bold"),y(m,"class","break-all whitespace-pre-wrap text-sm max-h-32 overflow-auto"),y(f,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),y(R,"class","font-bold"),y(A,"class","break-all whitespace-pre-wrap text-sm max-h-24 overflow-auto"),y(q,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),y(r,"class","grid grid-row-[auto_auto_auto] gap-1 max-w-md"),y(ne,"type","button"),y(ne,"class","btn variant-filled-secondary p-1"),y(L,"type","button"),y(L,"class","btn variant-filled-secondary p-1"),y(G,"class","grid grid-row-[auto_auto] gap-2"),y(oe,"type","button"),y(oe,"class","btn variant-filled-surface p-2"),y(te,"type","button"),y(te,"class","btn variant-filled-surface p-2"),y(re,"class","grid grid-row-[auto_auto] gap-2"),y(Z,"class","grid grid-cols-[auto_auto] gap-2"),y(e,"class","modal-example-form "+wu+" svelte-1wtdwek")},m(Ie,$){C(Ie,e,$),v(e,r),v(r,t),v(t,n),he&&he.m(n,null),v(t,i),v(t,l),v(l,a),v(r,c),v(r,f),v(f,d),v(d,h),v(f,_),v(f,m),v(m,E),v(r,S),v(r,q),v(q,R),v(R,H),v(q,P),v(q,A),v(A,N),v(e,K),v(e,Z),v(Z,G),v(G,ne),v(ne,J),v(G,D),v(G,L),v(L,z),v(Z,ie),v(Z,re),v(re,oe),v(oe,X),v(re,ee),v(re,te),v(te,Re),Ne||($e=[W(ne,"click",o[4]),W(L,"click",o[5]),W(oe,"click",o[6]),W(te,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],Ne=!0)},p(Ie,$){o=Ie,$&2&&(s=JSON.parse(o[1][0].value.metadata.content).picture),s?he?he.p(o,$):(he=Co(o),he.c(),he.m(n,null)):he&&(he.d(1),he=null),$&2&&!de(a.src,u=JSON.parse(o[1][0].value.metadata.content).banner)&&y(a,"src",u),$&2&&b!==(b=JSON.parse(o[1][0].value.metadata.content).about+"")&&T(E,b),$&2&&j!==(j=JSON.stringify(o[1][0].value.metadata,void 0,4)+"")&&T(N,j),$&1&&pe!==(pe=o[0].buttonTextCancel+"")&&T(Re,pe)},d(Ie){Ie&&p(e),he&&he.d(),Ne=!1,Te($e)}}}function Co(o){let e,r,t={ctx:o,current:null,token:null,hasCatch:!1,pending:gu,then:bu,catch:yu,value:7};return Ve(r=Io(JSON.parse(o[1][0].value.metadata.content).picture,o[2].url.origin),t),{c(){e=Y(),t.block.c()},l(n){e=Y(),t.block.l(n)},m(n,s){C(n,e,s),t.block.m(n,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(n,s){o=n,t.ctx=o,s&6&&r!==(r=Io(JSON.parse(o[1][0].value.metadata.content).picture,o[2].url.origin))&&Ve(r,t)||Yt(t,o,s)},d(n){n&&p(e),t.block.d(n),t.token=null,t=null}}}function yu(o){return{c:Q,l:Q,m:Q,p:Q,d:Q}}function bu(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","w-16 object-contain justify-center"),de(e.src,r=o[7])||y(e,"src",r),y(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n&6&&!de(e.src,r=t[7])&&y(e,"src",r)},d(t){t&&p(e)}}}function gu(o){return{c:Q,l:Q,m:Q,p:Q,d:Q}}function ku(o){let e,r=o[1][0]&&So(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=So(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&p(e)}}}const wu="card p-4  shadow-xl space-y-4 break-all";function Eu(o,e,r){let t,n;ke(o,ye,c=>r(1,t=c)),ke(o,Ps,c=>r(2,n=c));let{parent:s}=e;function i(c){var d,h;const f=c==="npub"?x.npubEncode((d=t[0])==null?void 0:d.value.pubkey):(h=t[0])==null?void 0:h.value.pubkey;navigator.clipboard.writeText(f).then(()=>{console.log(`copied: ${f.slice(0,15)}...`);const _={message:`copied: ${f.slice(0,15)}...`,timeout:3e3};Ht.trigger(_)},()=>{console.log("");const _={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};Ht.trigger(_)}),s.onClose()}const l=()=>i("npub"),a=()=>i("hex"),u=()=>{var c;window.open("https://nostr.com/"+x.npubEncode((c=t[0])==null?void 0:c.value.pubkey),"_blank"),s.onClose()};return o.$$set=c=>{"parent"in c&&r(0,s=c.parent)},[s,t,n,i,l,a,u]}class Fr extends Ee{constructor(e){super(),Oe(this,e,Eu,ku,we,{parent:0})}}function Po(o){let e,r,t=(o[1][0].title??"(title missing)")+"",n,s,i,l=JSON.stringify(o[1][0].value.note,void 0,4)+"",a,u,c,f,d,h,_,m,b,E,S,q=o[0].buttonTextCancel+"",R,H,P,A;return{c(){e=g("div"),r=g("header"),n=O(t),s=U(),i=g("div"),a=O(l),u=U(),c=g("footer"),f=g("div"),d=g("button"),h=O("copy noteID"),_=U(),m=g("button"),b=O("copy hexID"),E=U(),S=g("button"),R=O(q),this.h()},l(j){e=k(j,"DIV",{class:!0});var N=w(e);r=k(N,"HEADER",{class:!0});var K=w(r);n=I(K,t),K.forEach(p),s=V(N),i=k(N,"DIV",{class:!0});var Z=w(i);a=I(Z,l),Z.forEach(p),u=V(N),c=k(N,"FOOTER",{class:!0});var G=w(c);f=k(G,"DIV",{class:!0});var ne=w(f);d=k(ne,"BUTTON",{type:!0,class:!0});var J=w(d);h=I(J,"copy noteID"),J.forEach(p),_=V(ne),m=k(ne,"BUTTON",{type:!0,class:!0});var D=w(m);b=I(D,"copy hexID"),D.forEach(p),E=V(ne),S=k(ne,"BUTTON",{type:!0,class:!0});var L=w(S);R=I(L,q),L.forEach(p),ne.forEach(p),G.forEach(p),N.forEach(p),this.h()},h(){y(r,"class",Su),y(i,"class","bg-surface-50-900-token break-words whitespace-pre-wrap max-h-60 overflow-auto"),y(d,"type","button"),y(d,"class","btn variant-filled-secondary p-1"),y(m,"type","button"),y(m,"class","btn variant-filled-secondary p-1"),y(S,"type","button"),y(S,"class","btn variant-filled-surface p-2"),y(f,"class","flex flex-wrap gap-2"),y(c,"class",H="modal-footer "+o[0].regionFooter),y(e,"class","modal-example-form "+Iu+" bg-surface-200-700-token")},m(j,N){C(j,e,N),v(e,r),v(r,n),v(e,s),v(e,i),v(i,a),v(e,u),v(e,c),v(c,f),v(f,d),v(d,h),v(f,_),v(f,m),v(m,b),v(f,E),v(f,S),v(S,R),P||(A=[W(d,"click",o[3]),W(m,"click",o[4]),W(S,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],P=!0)},p(j,N){o=j,N&2&&t!==(t=(o[1][0].title??"(title missing)")+"")&&T(n,t),N&2&&l!==(l=JSON.stringify(o[1][0].value.note,void 0,4)+"")&&T(a,l),N&1&&q!==(q=o[0].buttonTextCancel+"")&&T(R,q),N&1&&H!==(H="modal-footer "+o[0].regionFooter)&&y(c,"class",H)},d(j){j&&p(e),P=!1,Te(A)}}}function Ou(o){let e,r=o[1][0]&&Po(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=Po(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&p(e)}}}const Iu="card p-4  shadow-xl space-y-4 break-all",Su="text-2xl font-bold";function Cu(o,e,r){let t;ke(o,ye,a=>r(1,t=a));let{parent:n}=e;function s(a){var c,f;const u=a==="note"?x.noteEncode((c=t[0])==null?void 0:c.value.note.id):(f=t[0])==null?void 0:f.value.note.id;navigator.clipboard.writeText(u).then(()=>{console.log(`copied: ${u.slice(0,15)}...`);const d={message:`copied: ${u.slice(0,15)}...`,timeout:3e3};Ht.trigger(d)},()=>{console.log("");const d={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};Ht.trigger(d)}),n.onClose()}const i=()=>s("note"),l=()=>s("hex");return o.$$set=a=>{"parent"in a&&r(0,n=a.parent)},[n,t,s,i,l]}class ss extends Ee{constructor(e){super(),Oe(this,e,Cu,Ou,we,{parent:0})}}const qo=/(:[^:\s]+:)/,Do=/(https?:\/\/+[^\s"'<`\]\)]+[^\s"'<`:\].\)]+)/,Ro=/\.(?:jpg|jpeg|png|gif|webp)$/i,To=/(nostr:[A-Za-z0-9]+)/,Mo=/(#\[\d+\])/i,Lo=/(\B#[^\s#.?:/()]+)/gi;async function Pu(o,e){var a;const r=e.filter(u=>u[0]==="emoji"),t=e.filter(u=>u[0]==="t");t.sort((u,c)=>c[1].length-u[1].length),t.map(u=>u[1]).join("|");let n=[];r.length>0&&n.push(qo.source),t.length>0&&n.push(Lo.source),n.push(To.source),n.push(Do.source),n.push(Ro.source),n.push(Mo.source);const s=new RegExp(n.join("|"),"g"),i=o.split(s),l=[];for(let u of i)if(u!==void 0)if(u.match(To)){const c=u.indexOf("nostr:"),f=u.slice(0,c),d=u.slice(c);l.push({content:f,type:"text"}),l.push({content:d,type:"nostr",url:d.slice(6)})}else if(r.length>0&&u.match(qo)){const c=(a=r.find(f=>`:${f[1]}:`===u))==null?void 0:a[2];c?l.push({content:u,type:"emoji",url:c}):l.push({content:u,type:"text"})}else qu(u)?u.match(Do)?u.match(Ro)?l.push({content:u,type:"image"}):l.push({content:u,type:"url"}):l.push({content:u,type:"url"}):u.match(Mo)?parseInt(u.slice(2,-1))<e.length?l.push({content:u,type:"quote",number:parseInt(u.slice(2,-1))}):l.push({content:u,type:"text"}):t.length>0&&u.match(Lo)?t.find(f=>new RegExp(`${f[1]}`,"i").test(u))?l.push({content:u,type:"hashtag"}):l.push({content:u,type:"text"}):l.push({content:u,type:"text"});return l}function qu(o){const e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;try{return new URL(o),e.test(o)}catch{return!1}}function Ao(o){let e,r,t,n,s,i,l=o[0].buttonTextCancel+"",a,u,c,f,d;return{c(){e=g("div"),r=g("img"),n=U(),s=g("footer"),i=g("button"),a=O(l),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=w(e);r=k(_,"IMG",{src:!0,alt:!0,class:!0}),n=V(_),s=k(_,"FOOTER",{class:!0});var m=w(s);i=k(m,"BUTTON",{class:!0});var b=w(i);a=I(b,l),b.forEach(p),m.forEach(p),_.forEach(p),this.h()},h(){var h;de(r.src,t=(h=o[1][0])==null?void 0:h.image)||y(r,"src",t),y(r,"alt",""),y(r,"class","svelte-1scgpoe"),y(i,"class",u="btn "+o[0].buttonNeutral),y(s,"class",c="modal-footer "+o[0].regionFooter),y(e,"class","modal-example-form "+Ru)},m(h,_){C(h,e,_),v(e,r),v(e,n),v(e,s),v(s,i),v(i,a),f||(d=[W(r,"click",o[2]),W(i,"click",function(){Ir(o[0].onClose)&&o[0].onClose.apply(this,arguments)})],f=!0)},p(h,_){var m;o=h,_&2&&!de(r.src,t=(m=o[1][0])==null?void 0:m.image)&&y(r,"src",t),_&1&&l!==(l=o[0].buttonTextCancel+"")&&T(a,l),_&1&&u!==(u="btn "+o[0].buttonNeutral)&&y(i,"class",u),_&1&&c!==(c="modal-footer "+o[0].regionFooter)&&y(s,"class",c)},d(h){h&&p(e),f=!1,Te(d)}}}function Du(o){let e,r=o[1][0]&&Ao(o);return{c(){r&&r.c(),e=Y()},l(t){r&&r.l(t),e=Y()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,[n]){t[1][0]?r?r.p(t,n):(r=Ao(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Q,o:Q,d(t){r&&r.d(t),t&&p(e)}}}const Ru="card p-4  shadow-xl space-y-4 break-all";function Tu(o,e,r){let t;ke(o,ye,i=>r(1,t=i));let{parent:n}=e;function s(){var i;window.open((i=t[0])==null?void 0:i.image,"_blank")}return o.$$set=i=>{"parent"in i&&r(0,n=i.parent)},[n,t,s]}class Mu extends Ee{constructor(e){super(),Oe(this,e,Tu,Du,we,{parent:0})}}function No(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","object-contain object-contain max-h-[6rem]"),de(e.src,r=o[0].image)||y(e,"src",r),y(e,"alt","")},m(t,n){C(t,e,n)},p(t,n){n&1&&!de(e.src,r=t[0].image)&&y(e,"src",r)},d(t){t&&p(e)}}}function jo(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","object-contain w-5 pl-0.5 pr-0.5"),de(e.src,r=o[0].favicon)||y(e,"src",r),y(e,"alt","")},m(t,n){C(t,e,n)},p(t,n){n&1&&!de(e.src,r=t[0].favicon)&&y(e,"src",r)},d(t){t&&p(e)}}}function Lu(o){let e,r,t,n,s,i,l,a,u=o[0].title+"",c,f,d,h=o[0].description+"",_,m,b,E,S,q=new URL(o[1]).hostname+"",R,H=o[0].image&&No(o),P=o[0].favicon!==""&&jo(o);return{c(){e=g("div"),r=g("a"),t=g("div"),n=g("div"),s=g("div"),H&&H.c(),i=U(),l=g("div"),a=g("div"),c=O(u),f=U(),d=g("div"),_=O(h),m=U(),b=g("div"),P&&P.c(),E=U(),S=g("div"),R=O(q),this.h()},l(A){e=k(A,"DIV",{class:!0});var j=w(e);r=k(j,"A",{class:!0,href:!0,target:!0});var N=w(r);t=k(N,"DIV",{class:!0});var K=w(t);n=k(K,"DIV",{class:!0});var Z=w(n);s=k(Z,"DIV",{class:!0});var G=w(s);H&&H.l(G),G.forEach(p),i=V(Z),l=k(Z,"DIV",{class:!0});var ne=w(l);a=k(ne,"DIV",{class:!0});var J=w(a);c=I(J,u),J.forEach(p),f=V(ne),d=k(ne,"DIV",{class:!0});var D=w(d);_=I(D,h),D.forEach(p),ne.forEach(p),Z.forEach(p),m=V(K),b=k(K,"DIV",{class:!0});var L=w(b);P&&P.l(L),E=V(L),S=k(L,"DIV",{class:!0});var z=w(S);R=I(z,q),z.forEach(p),L.forEach(p),K.forEach(p),N.forEach(p),j.forEach(p),this.h()},h(){y(s,"class","overflow-hidden relative rounded-xl max-h-[6rem]"),y(a,"class","line-clamp-2 text-sm font-bold text-primary-800 underline decoration-primary-600 dark:text-primary-300"),y(d,"class","line-clamp-4 text-xs text-primary-500 dark:text-primary-400"),y(l,"class","p-0.5 grid grid-rows-[auto_1fr] z-10 min-w-[12em]"),y(n,"class","grid grid-cols-[auto_1fr] gap-0.5"),y(S,"class","text-xs text-purple-900/50 dark:text-purple-50/50"),y(b,"class","flex flex-row-reverse ... -my-1"),y(t,"class","grid grid-rows-[auto_1fr]"),y(r,"class",""),y(r,"href",o[1]),y(r,"target","_blank"),y(e,"class","drop-shadow-md rounded-2xl m-0 p-1 border-2 border-primary-500 hover:drop-shadow-xl z-20 break-all bg-primary-200 dark:bg-primary-700 dark:hover:border-primary-400")},m(A,j){C(A,e,j),v(e,r),v(r,t),v(t,n),v(n,s),H&&H.m(s,null),v(n,i),v(n,l),v(l,a),v(a,c),v(l,f),v(l,d),v(d,_),v(t,m),v(t,b),P&&P.m(b,null),v(b,E),v(b,S),v(S,R)},p(A,[j]){A[0].image?H?H.p(A,j):(H=No(A),H.c(),H.m(s,null)):H&&(H.d(1),H=null),j&1&&u!==(u=A[0].title+"")&&T(c,u),j&1&&h!==(h=A[0].description+"")&&T(_,h),A[0].favicon!==""?P?P.p(A,j):(P=jo(A),P.c(),P.m(b,E)):P&&(P.d(1),P=null),j&2&&q!==(q=new URL(A[1]).hostname+"")&&T(R,q),j&2&&y(r,"href",A[1])},i:Q,o:Q,d(A){A&&p(e),H&&H.d(),P&&P.d()}}}function Au(o,e,r){let{ogp:t}=e,{url:n}=e;return o.$$set=s=>{"ogp"in s&&r(0,t=s.ogp),"url"in s&&r(1,n=s.url)},[t,n]}class Nu extends Ee{constructor(e){super(),Oe(this,e,Au,Lu,we,{ogp:0,url:1})}}const Ze=`<svg
xmlns="http://www.w3.org/2000/svg"
width="24"
height="24"
viewBox="0 0 24 24"
fill="none"
stroke="currentColor"
stroke-width="2"
stroke-linecap="round"
stroke-linejoin="round"
>
<circle cx="9" cy="9" r="6" />

<line x1="12.5" y1="12.5" x2="20" y2="20" />
</svg>`,ud=`<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <circle cx="18" cy="5" r="3" />
    <circle cx="6" cy="12" r="3" />
    <circle cx="18" cy="19" r="3" />
    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
  </svg>`,cd=`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect
    x="3"
    y="16"
    width="18"
    height="4"
    rx="2"
    ry="2"
  />
  <line x1="12" y1="5" x2="12" y2="15" />
  <line x1="8" y1="10" x2="12" y2="5" />
  <line x1="16" y1="10" x2="12" y2="5" />
</svg>`,fd=`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="orange"
  stroke-width="3"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
</svg>`,dd=`<svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
              transform="rotate(-45)"
            >
              <path d="M9 5l7 7-7 7" />
              <path d="M5 12h14" />
            </svg>`,hd=`<svg
xmlns="http://www.w3.org/2000/svg"
width="24"
height="24"
viewBox="0 0 24 24"
fill="none"
stroke="currentColor"
stroke-width="2"
stroke-linecap="round"
stroke-linejoin="round"
>
<line x1="3" y1="12" x2="21" y2="12" />
<line x1="3" y1="6" x2="21" y2="6" />
<line x1="3" y1="18" x2="21" y2="18" />
</svg>`,_d=`  <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="4"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 5v14M5 12h14" />
            </svg>`,pd=`<svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
          <line x1="12" y1="6" x2="12" y2="12" />
          <line x1="8" y1="6" x2="8" y2="12" />
          <line x1="16" y1="6" x2="16" y2="12" />
          <line x1="3" y1="16" x2="21" y2="16" />
        </svg>`,vd=`<svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M1 12h4M20 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"
          />
        </svg>`,md=`<svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M12 2L3.5 20.5H20.5L12 2Z" fill="#FDD835" />
            <path
              d="M12 15V17"
              stroke="black"
              stroke-width="2"
              stroke-linecap="round"
            />
            <circle cx="12" cy="11" r="1.5" fill="black" />
          </svg>`,yd=`<svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="11" fill="#42B983" />
            <path
              d="M6 18L18 6"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>`;function Uo(o,e,r){const t=o.slice();return t[18]=e[r],t}function Vo(o,e,r){const t=o.slice();return t[21]=e[r],t[23]=r,t}function Fo(o){let e,r,t,n=(o[6][0].title??"(title missing)")+"",s,i,l,a,u=(o[6][0].body??"(body missing)")+"",c,f,d,h,_,m,b,E,S,q,R,H,P,A,j=o[0].buttonTextCancel+"",N,K,Z,G,ne,J,D=o[5]&&$o(),L=o[7],z=[];for(let X=0;X<L.length;X+=1)z[X]=Bo(Vo(o,L,X));let ie=o[6][0].value.isPageOwner&&o[3].sig!==""&&Ho(o),re=o[3].sig!==""&&Qo(o),oe=o[2].length>0&&Ko(o);return{c(){e=g("div"),r=g("div"),t=g("header"),s=O(n),i=U(),D&&D.c(),l=U(),a=g("article"),c=O(u),f=U(),d=g("div");for(let X=0;X<z.length;X+=1)z[X].c();h=U(),_=g("button"),m=O("search"),E=U(),ie&&ie.c(),S=U(),re&&re.c(),q=U(),oe&&oe.c(),R=U(),H=g("label"),P=g("footer"),A=g("button"),N=O(j),this.h()},l(X){e=k(X,"DIV",{class:!0});var ee=w(e);r=k(ee,"DIV",{class:!0});var te=w(r);t=k(te,"HEADER",{class:!0});var pe=w(t);s=I(pe,n),pe.forEach(p),i=V(te),D&&D.l(te),te.forEach(p),l=V(ee),a=k(ee,"ARTICLE",{class:!0});var Re=w(a);c=I(Re,u),Re.forEach(p),f=V(ee),d=k(ee,"DIV",{class:!0});var Ne=w(d);for(let ve=0;ve<z.length;ve+=1)z[ve].l(Ne);Ne.forEach(p),h=V(ee),_=k(ee,"BUTTON",{class:!0});var $e=w(_);m=I($e,"search"),$e.forEach(p),E=V(ee),ie&&ie.l(ee),S=V(ee),re&&re.l(ee),q=V(ee),oe&&oe.l(ee),R=V(ee),H=k(ee,"LABEL",{class:!0});var he=w(H);P=k(he,"FOOTER",{class:!0});var Ie=w(P);A=k(Ie,"BUTTON",{class:!0});var $=w(A);N=I($,j),$.forEach(p),Ie.forEach(p),he.forEach(p),ee.forEach(p),this.h()},h(){y(t,"class",Vu),y(r,"class","grid grid-cols-[1fr_auto]"),y(a,"class","body break-all whitespace-pre-wrap"),y(d,"class","break-all text-sm grid grid-cols-[0.5fr_0.5fr]"),y(_,"class",b="btn "+o[0].buttonNeutral),y(A,"class",K="btn "+o[0].buttonNeutral),y(P,"class",Z="modal-footer "+o[0].regionFooter),y(H,"class","label break-all whitespace-pre-wrap"),y(e,"class","modal-example-form "+Uu+" overflow-h-auto")},m(X,ee){C(X,e,ee),v(e,r),v(r,t),v(t,s),v(r,i),D&&D.m(r,null),v(e,l),v(e,a),v(a,c),v(e,f),v(e,d);for(let te=0;te<z.length;te+=1)z[te]&&z[te].m(d,null);v(e,h),v(e,_),v(_,m),v(e,E),ie&&ie.m(e,null),v(e,S),re&&re.m(e,null),v(e,q),oe&&oe.m(e,null),v(e,R),v(e,H),v(H,P),v(P,A),v(A,N),G=!0,ne||(J=[W(_,"click",o[8]),W(A,"click",o[11])],ne=!0)},p(X,ee){if((!G||ee&64)&&n!==(n=(X[6][0].title??"(title missing)")+"")&&T(s,n),X[5]?D?ee&32&&M(D,1):(D=$o(),D.c(),M(D,1),D.m(r,null)):D&&(ce(),F(D,1,1,()=>{D=null}),fe()),(!G||ee&64)&&u!==(u=(X[6][0].body??"(body missing)")+"")&&T(c,u),ee&130){L=X[7];let te;for(te=0;te<L.length;te+=1){const pe=Vo(X,L,te);z[te]?z[te].p(pe,ee):(z[te]=Bo(pe),z[te].c(),z[te].m(d,null))}for(;te<z.length;te+=1)z[te].d(1);z.length=L.length}(!G||ee&1&&b!==(b="btn "+X[0].buttonNeutral))&&y(_,"class",b),X[6][0].value.isPageOwner&&X[3].sig!==""?ie?ie.p(X,ee):(ie=Ho(X),ie.c(),ie.m(e,S)):ie&&(ie.d(1),ie=null),X[3].sig!==""?re?re.p(X,ee):(re=Qo(X),re.c(),re.m(e,q)):re&&(re.d(1),re=null),X[2].length>0?oe?oe.p(X,ee):(oe=Ko(X),oe.c(),oe.m(e,R)):oe&&(oe.d(1),oe=null),(!G||ee&1)&&j!==(j=X[0].buttonTextCancel+"")&&T(N,j),(!G||ee&1&&K!==(K="btn "+X[0].buttonNeutral))&&y(A,"class",K),(!G||ee&1&&Z!==(Z="modal-footer "+X[0].regionFooter))&&y(P,"class",Z)},i(X){G||(M(D),G=!0)},o(X){F(D),G=!1},d(X){X&&p(e),D&&D.d(),Xe(z,X),ie&&ie.d(),re&&re.d(),oe&&oe.d(),ne=!1,Te(J)}}}function $o(o){let e,r;return e=new ks({props:{"...":!0,stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30",width:"w-12"}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Bo(o){let e,r,t,n,s=o[21]+"",i,l;return{c(){e=g("div"),r=g("span"),n=U(),i=O(s),l=U(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=w(e);r=k(u,"SPAN",{class:!0}),w(r).forEach(p),n=V(u),i=I(u,s),l=V(u),u.forEach(p),this.h()},h(){y(r,"class",t=Jo(o[1][o[21]])),y(e,"class","card m-0 p-0 text-sm bg-grey")},m(a,u){C(a,e,u),v(e,r),v(e,n),v(e,i),v(e,l)},p(a,u){u&2&&t!==(t=Jo(a[1][a[21]]))&&y(r,"class",t)},d(a){a&&p(e)}}}function Ho(o){let e,r,t,n,s;return{c(){e=g("button"),r=O("duplicate"),this.h()},l(i){e=k(i,"BUTTON",{class:!0});var l=w(e);r=I(l,"duplicate"),l.forEach(p),this.h()},h(){y(e,"class",t="btn "+o[0].buttonNeutral)},m(i,l){C(i,e,l),v(e,r),n||(s=W(e,"click",o[10]),n=!0)},p(i,l){l&1&&t!==(t="btn "+i[0].buttonNeutral)&&y(e,"class",t)},d(i){i&&p(e),n=!1,s()}}}function Qo(o){let e,r,t,n,s=JSON.stringify(o[3],null,2)+"",i;return{c(){e=g("div"),r=O("Event"),t=U(),n=g("div"),i=O(s),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);r=I(a,"Event"),a.forEach(p),t=V(l),n=k(l,"DIV",{class:!0});var u=w(n);i=I(u,s),u.forEach(p),this.h()},h(){y(e,"class","border"),y(n,"class","break-all whitespace-pre-wrap max-h-[8rem] overflow-y-auto")},m(l,a){C(l,e,a),v(e,r),C(l,t,a),C(l,n,a),v(n,i)},p(l,a){a&8&&s!==(s=JSON.stringify(l[3],null,2)+"")&&T(i,s)},d(l){l&&p(e),l&&p(t),l&&p(n)}}}function Ko(o){let e,r,t,n,s=o[2],i=[];for(let l=0;l<s.length;l+=1)i[l]=Go(Uo(o,s,l));return{c(){e=g("div"),r=O("Log"),t=U(),n=g("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);r=I(a,"Log"),a.forEach(p),t=V(l),n=k(l,"DIV",{class:!0});var u=w(n);for(let c=0;c<i.length;c+=1)i[c].l(u);u.forEach(p),this.h()},h(){y(e,"class","border"),y(n,"class","break-all whitespace-pre-wrap max-h-[8rem] overflow-y-auto")},m(l,a){C(l,e,a),v(e,r),C(l,t,a),C(l,n,a);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(n,null)},p(l,a){if(a&4){s=l[2];let u;for(u=0;u<s.length;u+=1){const c=Uo(l,s,u);i[u]?i[u].p(c,a):(i[u]=Go(c),i[u].c(),i[u].m(n,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=s.length}},d(l){l&&p(e),l&&p(t),l&&p(n),Xe(i,l)}}}function Go(o){let e,r=o[18]+"";return{c(){e=g("div"),this.h()},l(t){e=k(t,"DIV",{class:!0});var n=w(e);n.forEach(p),this.h()},h(){y(e,"class","break-all whitespace-pre-wrap")},m(t,n){C(t,e,n),e.innerHTML=r},p(t,n){n&4&&r!==(r=t[18]+"")&&(e.innerHTML=r)},d(t){t&&p(e)}}}function ju(o){let e,r,t=o[6][0]&&Fo(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,s){t&&t.m(n,s),C(n,e,s),r=!0},p(n,[s]){n[6][0]?t?(t.p(n,s),s&64&&M(t,1)):(t=Fo(n),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(ce(),F(t,1,1,()=>{t=null}),fe())},i(n){r||(M(t),r=!0)},o(n){F(t),r=!1},d(n){t&&t.d(n),n&&p(e)}}}const Uu="card p-4 w-modal shadow-xl space-y-4",Vu="text-2xl font-bold";function Jo(o){switch(o){case 1:return"badge bg-surface-400";case 2:return"badge bg-warning-400";case 3:return"badge bg-error-400";case 4:return"badge bg-success-500";default:return"badge bg-surface-300"}}function Fu(o,e,r){let t,n;ke(o,gs,q=>r(12,t=q)),ke(o,ye,q=>r(6,n=q));let{parent:s}=e;var i=(q=>(q[q.Preparing=0]="Preparing",q[q.Connecting=1]="Connecting",q[q.Not_exist=2]="Not_exist",q[q.Error=3]="Error",q[q.Exist=4]="Exist",q))(i||{});const l=["wss://nos.lol","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://relay.nostr.band","wss://yabu.me","wss://relay-jp.nostr.wirednet.jp","wss://nostr-relay.nokotaro.com","wss://nostr.wine","wss://nostr.bitcoiner.social","wss://nostr-pub.wellorder.net","wss://relay.nostr.bg","wss://nostr.mom","wss://relay.orangepill.dev","wss://relay.nostr.com.au","wss://offchain.pub","wss://nostr.fmt.wiz.biz","wss://nostr.mutinywallet.com","wss://e.nos.lol","wss://relayable.org","wss://relay.mostr.pub"];let a={};l.forEach(q=>{r(1,a[q]=0,a)});const u={id:"",pubkey:"",created_at:0,kind:1,tags:[],content:"",sig:""};let c={id:"",pubkey:"",created_at:0,kind:1,tags:[],content:"",sig:""},f,d=[],h=!1;const _=vi();_.setRelays(l);function m(){if(f&&!f.closed)return;r(5,h=!0),r(2,d=[]),r(3,c=u),console.log(n[0].value.id);const q=[{ids:[n[0].value.id]}],R=_i({filters:q});l.forEach(j=>{r(1,a[j]=1,a)});const H=_.use(R).pipe(),P={next:j=>{console.log(j),r(1,a[j.from]=4,a),r(3,c=j.event)},error:j=>{console.error("Error occurred:",j)},complete:()=>{console.log("Subscription completed"),r(5,h=!1)}};r(4,f=H.subscribe(P));const A=_.createAllErrorObservable().subscribe(j=>{console.error("Error occurred globally:",j),r(1,a[j.from]=3,a)});setTimeout(()=>{f.unsubscribe(),r(5,h=!1),c.sig===""&&d.push("failed to get Event"),A.unsubscribe()},5*1e3)}let b=[];async function E(){r(5,h=!0),f.closed||f.unsubscribe();for(let q=0;q<t.length;q++){const R=new WebSocket(t[q]);b.push(R),R.onopen=()=>{d.push(`Connected to ${t[q]}`),r(2,d),R.send(JSON.stringify(["EVENT",c]))},R.onmessage=H=>{console.log(H);const P=JSON.parse(H.data);d.push(`message from ${t[q]}: ${H.data}`),r(2,d),P[2]?(d.push(`<span class="font-bold">Success: ${t[q]}</span>`),r(2,d)):(d.push(`<span class="font-bold">Failed: ${t[1]}</span> (reason:  ${P[3]})`),r(2,d)),R.close(),r(5,h=!1)}}}const S=()=>{f&&!f.closed&&f.unsubscribe(),b.forEach(q=>{q.OPEN&&q.close()}),s.onClose()};return o.$$set=q=>{"parent"in q&&r(0,s=q.parent)},o.$$.update=()=>{o.$$.dirty&2&&r(1,a),o.$$.dirty&4&&r(2,d)},[s,a,d,c,f,h,n,l,m,b,E,S]}class as extends Ee{constructor(e){super(),Oe(this,e,Fu,ju,we,{parent:0})}}function zo(o,e,r){const t=o.slice();return t[30]=e[r],t}function Wo(o,e,r){const t=o.slice();return t[30]=e[r],t}function $u(o){let e,r,t,n,s;r=new Le({props:{queryKey:["metadata",x.decode(o[0]).data.pubkey],pubkey:x.decode(o[0]).data.pubkey,$$slots:{nodata:[zu,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],error:[Ju,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],loading:[Gu,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]],default:[Ku,({metadata:l})=>({29:l}),({metadata:l})=>[l?536870912:0]]},$$scope:{ctx:o}}});let i={ctx:o,current:null,token:null,hasCatch:!1,pending:rc,then:Yu,catch:Wu,value:28,blocks:[,,,]};return Ve(n=o[6](o[0]),i),{c(){e=g("div"),se(r.$$.fragment),t=U(),i.block.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=w(e);ue(r.$$.fragment,a),t=V(a),i.block.l(a),a.forEach(p),this.h()},h(){y(e,"class","card border border-surface-400 px-3 py-2")},m(l,a){C(l,e,a),ae(r,e,null),v(e,t),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,s=!0},p(l,a){o=l;const u={};a[0]&1&&(u.queryKey=["metadata",x.decode(o[0]).data.pubkey]),a[0]&1&&(u.pubkey=x.decode(o[0]).data.pubkey),a[0]&536870913|a[1]&16&&(u.$$scope={dirty:a,ctx:o}),r.$set(u),i.ctx=o,a[0]&1&&n!==(n=o[6](o[0]))&&Ve(n,i)||Yt(i,o,a)},i(l){s||(M(r.$$.fragment,l),M(i.block),s=!0)},o(l){F(r.$$.fragment,l);for(let a=0;a<3;a+=1){const u=i.blocks[a];F(u)}s=!1},d(l){l&&p(e),le(r),i.block.d(),i.token=null,i=null}}}function Bu(o){let e,r;return e=new Le({props:{queryKey:["metadata",x.decode(o[0]).data.pubkey],pubkey:x.decode(o[0]).data.pubkey,$$slots:{nodata:[sc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[ic,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[oc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[nc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&1&&(s.queryKey=["metadata",x.decode(t[0]).data.pubkey]),n[0]&1&&(s.pubkey=x.decode(t[0]).data.pubkey),n[0]&536870913|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Hu(o){let e,r;return e=new Le({props:{queryKey:["metadata",x.decode(o[0]).data],pubkey:x.decode(o[0]).data,$$slots:{nodata:[cc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[uc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[lc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[ac,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&1&&(s.queryKey=["metadata",x.decode(t[0]).data]),n[0]&1&&(s.pubkey=x.decode(t[0]).data),n[0]&536870913|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Qu(o){let e,r,t,n;return t=new St({props:{queryKey:[o[7](o[0])],id:o[7](o[0]),$$slots:{nodata:[Rc,({text:s})=>({28:s}),({text:s})=>[s?268435456:0]],error:[Dc,({text:s})=>({28:s}),({text:s})=>[s?268435456:0]],loading:[qc,({text:s})=>({28:s}),({text:s})=>[s?268435456:0]],default:[Pc,({text:s})=>({28:s}),({text:s})=>[s?268435456:0]]},$$scope:{ctx:o}}}),{c(){e=g("div"),r=g("div"),se(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);ue(t.$$.fragment,l),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),y(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(s,i){C(s,e,i),v(e,r),ae(t,r,null),n=!0},p(s,i){const l={};i[0]&1&&(l.queryKey=[s[7](s[0])]),i[0]&1&&(l.id=s[7](s[0])),i[0]&268435471|i[1]&16&&(l.$$scope={dirty:i,ctx:s}),t.$set(l)},i(s){n||(M(t.$$.fragment,s),n=!0)},o(s){F(t.$$.fragment,s),n=!1},d(s){s&&p(e),le(t)}}}function Ku(o){let e,r,t=JSON.parse(o[29].content).name+"",n,s,i;function l(){return o[20](o[29])}return{c(){e=g("button"),r=g("u"),n=O(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var u=w(e);r=k(u,"U",{});var c=w(r);n=I(c,t),c.forEach(p),u.forEach(p),this.h()},h(){y(e,"class","inline-flex text-gray-800/80 dark:text-gray-200/80")},m(a,u){C(a,e,u),v(e,r),v(r,n),s||(i=W(e,"click",l),s=!0)},p(a,u){o=a,u[0]&536870912&&t!==(t=JSON.parse(o[29].content).name+"")&&T(n,t)},d(a){a&&p(e),s=!1,i()}}}function Gu(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function Ju(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function zu(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function Wu(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function Yu(o){let e,r,t=o[28]&&Yo(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,s){t&&t.m(n,s),C(n,e,s),r=!0},p(n,s){n[28]?t?(t.p(n,s),s[0]&1&&M(t,1)):(t=Yo(n),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(ce(),F(t,1,1,()=>{t=null}),fe())},i(n){r||(M(t),r=!0)},o(n){F(t),r=!1},d(n){t&&t.d(n),n&&p(e)}}}function Yo(o){let e,r=new Date(o[28].created_at*1e3).toLocaleString()+"",t,n,s,i,l,a,u,c,f;function d(){return o[21](o[28])}let h=o[28].tags.length>0&&Xo(o);return a=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("button"),t=O(r),n=U(),s=g("div"),h&&h.c(),i=U(),l=g("div"),se(a.$$.fragment),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var m=w(e);t=I(m,r),m.forEach(p),n=V(_),s=k(_,"DIV",{class:!0});var b=w(s);h&&h.l(b),i=V(b),l=k(b,"DIV",{class:!0});var E=w(l);ue(a.$$.fragment,E),E.forEach(p),b.forEach(p),this.h()},h(){y(e,"class","-mt-0.5 ml-2 text-xs underline decoration-secondary-500"),y(l,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),y(s,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix")},m(_,m){C(_,e,m),v(e,t),C(_,n,m),C(_,s,m),h&&h.m(s,null),v(s,i),v(s,l),ae(a,l,null),u=!0,c||(f=W(e,"click",d),c=!0)},p(_,m){o=_,(!u||m[0]&1)&&r!==(r=new Date(o[28].created_at*1e3).toLocaleString()+"")&&T(t,r),o[28].tags.length>0?h?(h.p(o,m),m[0]&1&&M(h,1)):(h=Xo(o),h.c(),M(h,1),h.m(s,i)):h&&(ce(),F(h,1,1,()=>{h=null}),fe());const b={};m[0]&1&&(b.text=o[28].content),m[0]&1&&(b.tag=o[28].tags),m[0]&1&&(b.id=o[28].id),m[0]&8&&(b.view=o[3]),m[0]&2&&(b.URLPreview=o[1]),m[0]&4&&(b.isPageOwner=o[2]),a.$set(b)},i(_){u||(M(h),M(a.$$.fragment,_),u=!0)},o(_){F(h),F(a.$$.fragment,_),u=!1},d(_){_&&p(e),_&&p(n),_&&p(s),h&&h.d(),le(a),c=!1,f()}}}function Xo(o){let e,r,t=o[28].tags,n=[];for(let i=0;i<t.length;i+=1)n[i]=Zo(zo(o,t,i));const s=i=>F(n[i],1,1,()=>{n[i]=null});return{c(){e=g("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(p),this.h()},h(){y(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(i,l){C(i,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(i,l){if(l[0]&805306481){t=i[28].tags;let a;for(a=0;a<t.length;a+=1){const u=zo(i,t,a);n[a]?(n[a].p(u,l),M(n[a],1)):(n[a]=Zo(u),n[a].c(),M(n[a],1),n[a].m(e,null))}for(ce(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(i){if(!r){for(let l=0;l<t.length;l+=1)M(n[l]);r=!0}},o(i){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)F(n[l]);r=!1},d(i){i&&p(e),Xe(n,i)}}}function Xu(o){let e,r,t=o[30][0]+"",n,s,i=o[30][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),s=O(`]
                    `),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),s=I(c,`]
                    `),l=I(c,i),a=V(c),c.forEach(p),this.h()},h(){y(e,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,s),v(e,l),v(e,a)},p(u,c){c[0]&1&&t!==(t=u[30][0]+"")&&T(n,t),c[0]&1&&i!==(i=u[30][1]+"")&&T(l,i)},i:Q,o:Q,d(u){u&&p(e)}}}function Zu(o){let e,r;return e=new St({props:{queryKey:[o[30][1]],id:o[30][1],$$slots:{default:[ec,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&1&&(s.queryKey=[t[30][1]]),n[0]&1&&(s.id=t[30][1]),n[0]&268435456|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function xu(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[30][1]],pubkey:o[30][1],$$slots:{default:[tc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&1&&(s.queryKey=["metadata",t[30][1]]),n[0]&1&&(s.pubkey=t[30][1]),n[0]&536870913|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function ec(o){let e,r,t,n=o[28].content+"",s,i,l,a;function u(){return o[23](o[28])}return{c(){e=g("div"),r=O("[e] "),t=g("button"),s=O(n),i=U(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=w(e);r=I(f,"[e] "),t=k(f,"BUTTON",{class:!0});var d=w(t);s=I(d,n),d.forEach(p),f.forEach(p),i=V(c),this.h()},h(){y(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(c,f){C(c,e,f),v(e,r),v(e,t),v(t,s),C(c,i,f),l||(a=W(t,"click",u),l=!0)},p(c,f){o=c,f[0]&268435456&&n!==(n=o[28].content+"")&&T(s,n)},d(c){c&&p(e),c&&p(i),l=!1,a()}}}function tc(o){let e,r,t,n,s=JSON.parse(o[29].content).name+"",i,l,a,u;function c(){return o[22](o[29],o[30])}return{c(){e=g("div"),r=O("to "),t=g("button"),n=g("u"),i=O(s),l=U(),this.h()},l(f){e=k(f,"DIV",{class:!0});var d=w(e);r=I(d,"to "),t=k(d,"BUTTON",{class:!0});var h=w(t);n=k(h,"U",{});var _=w(n);i=I(_,s),_.forEach(p),h.forEach(p),d.forEach(p),l=V(f),this.h()},h(){y(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(f,d){C(f,e,d),v(e,r),v(e,t),v(t,n),v(n,i),C(f,l,d),a||(u=W(t,"click",c),a=!0)},p(f,d){o=f,d[0]&536870912&&s!==(s=JSON.parse(o[29].content).name+"")&&T(i,s)},d(f){f&&p(e),f&&p(l),a=!1,u()}}}function Zo(o){let e,r,t,n;const s=[xu,Zu,Xu],i=[];function l(a,u){return a[30][0]==="p"?0:a[30][0]==="e"||a[30][0]==="q"?1:a[30][0]!=="emoji"&&a[30][0]!=="r"&&a[30][0]!=="t"?2:-1}return~(e=l(o))&&(r=i[e]=s[e](o)),{c(){r&&r.c(),t=Y()},l(a){r&&r.l(a),t=Y()},m(a,u){~e&&i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?~e&&i[e].p(a,u):(r&&(ce(),F(i[c],1,1,()=>{i[c]=null}),fe()),~e?(r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t)):r=null)},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){~e&&i[e].d(a),a&&p(t)}}}function rc(o){let e,r;return{c(){e=g("div"),r=O(o[0]),this.h()},l(t){e=k(t,"DIV",{class:!0});var n=w(e);r=I(n,o[0]),n.forEach(p),this.h()},h(){y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(t,n){C(t,e,n),v(e,r)},p(t,n){n[0]&1&&T(r,t[0])},i:Q,o:Q,d(t){t&&p(e)}}}function nc(o){let e,r,t=JSON.parse(o[29].content).name+"",n,s,i;function l(){return o[19](o[29])}return{c(){e=g("button"),r=g("u"),n=O(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var u=w(e);r=k(u,"U",{});var c=w(r);n=I(c,t),c.forEach(p),u.forEach(p),this.h()},h(){y(e,"class","inline-flex text-gray-800/80 dark:text-gray-200/80")},m(a,u){C(a,e,u),v(e,r),v(r,n),s||(i=W(e,"click",l),s=!0)},p(a,u){o=a,u[0]&536870912&&t!==(t=JSON.parse(o[29].content).name+"")&&T(n,t)},d(a){a&&p(e),s=!1,i()}}}function oc(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),y(e,"slot","loading")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function ic(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),y(e,"slot","error")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function sc(o){let e,r,t=x.decode(o[0]).data.pubkey+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),y(e,"slot","nodata")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data.pubkey+"")&&T(n,t)},d(s){s&&p(e)}}}function ac(o){let e,r,t=JSON.parse(o[29].content).name+"",n,s,i;function l(){return o[18](o[29])}return{c(){e=g("button"),r=g("u"),n=O(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var u=w(e);r=k(u,"U",{});var c=w(r);n=I(c,t),c.forEach(p),u.forEach(p),this.h()},h(){y(e,"class","inline-flex text-gray-800/80 dark:text-gray-200/80")},m(a,u){C(a,e,u),v(e,r),v(r,n),s||(i=W(e,"click",l),s=!0)},p(a,u){o=a,u[0]&536870912&&t!==(t=JSON.parse(o[29].content).name+"")&&T(n,t)},d(a){a&&p(e),s=!1,i()}}}function lc(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data+"")&&T(n,t)},d(s){s&&p(e)}}}function uc(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data+"")&&T(n,t)},d(s){s&&p(e)}}}function cc(o){let e,r,t=x.decode(o[0]).data+"",n;return{c(){e=g("div"),r=g("div"),n=O(t),this.h()},l(s){e=k(s,"DIV",{slot:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);n=I(l,t),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(s,i){C(s,e,i),v(e,r),v(r,n)},p(s,i){i[0]&1&&t!==(t=x.decode(s[0]).data+"")&&T(n,t)},d(s){s&&p(e)}}}function xo(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","h-5 object-contain justify-center"),de(e.src,r=JSON.parse(o[29].content).picture)||y(e,"src",r),y(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n[0]&536870912&&!de(e.src,r=JSON.parse(t[29].content).picture)&&y(e,"src",r)},d(t){t&&p(e)}}}function ei(o){let e=JSON.parse(o[29].content).display_name+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n[0]&536870912&&e!==(e=JSON.parse(t[29].content).display_name+"")&&T(r,e)},d(t){t&&p(r)}}}function ti(o){let e,r,t=Fe(o[28].tags),n=[];for(let i=0;i<t.length;i+=1)n[i]=ri(Wo(o,t,i));const s=i=>F(n[i],1,1,()=>{n[i]=null});return{c(){e=g("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(p),this.h()},h(){y(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25 dark:border-s-rose-100/25")},m(i,l){C(i,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(i,l){if(l[0]&805306424){t=Fe(i[28].tags);let a;for(a=0;a<t.length;a+=1){const u=Wo(i,t,a);n[a]?(n[a].p(u,l),M(n[a],1)):(n[a]=ri(u),n[a].c(),M(n[a],1),n[a].m(e,null))}for(ce(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(i){if(!r){for(let l=0;l<t.length;l+=1)M(n[l]);r=!0}},o(i){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)F(n[l]);r=!1},d(i){i&&p(e),Xe(n,i)}}}function fc(o){let e,r,t=o[30][0]+"",n,s,i=o[30][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),s=O(`]
                    `),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),s=I(c,`]
                    `),l=I(c,i),a=V(c),c.forEach(p),this.h()},h(){y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,s),v(e,l),v(e,a)},p(u,c){c[0]&268435456&&t!==(t=u[30][0]+"")&&T(n,t),c[0]&268435456&&i!==(i=u[30][1]+"")&&T(l,i)},i:Q,o:Q,d(u){u&&p(e)}}}function dc(o){let e,r;return e=new St({props:{queryKey:[o[30][1]],id:o[30][1],$$slots:{nodata:[bc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],error:[yc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],loading:[mc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]],default:[vc,({text:t})=>({28:t}),({text:t})=>[t?268435456:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&268435456&&(s.queryKey=[t[30][1]]),n[0]&268435456&&(s.id=t[30][1]),n[0]&268435464|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function hc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[30][1]],pubkey:o[30][1],$$slots:{nodata:[Ec,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[wc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[kc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[gc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&268435456&&(s.queryKey=["metadata",t[30][1]]),n[0]&268435456&&(s.pubkey=t[30][1]),n[0]&805306368|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function _c(o){let e=o[28].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n[0]&268435456&&e!==(e=t[28].content+"")&&T(r,e)},d(t){t&&p(r)}}}function pc(o){let e="<content-warning>",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p:Q,d(t){t&&p(r)}}}function vc(o){let e,r,t=o[30][0]+"",n,s,i,l,a,u,c;function f(m,b){return b[0]&268435464&&(l=null),l==null&&(l=!!(m[28].tags.some(Mc)&&m[3]==!1)),l?pc:_c}let d=f(o,[-1,-1]),h=d(o);function _(){return o[17](o[28])}return{c(){e=g("div"),r=O("["),n=O(t),s=O(`]
                      `),i=g("button"),h.c(),a=U(),this.h()},l(m){e=k(m,"DIV",{class:!0});var b=w(e);r=I(b,"["),n=I(b,t),s=I(b,`]
                      `),i=k(b,"BUTTON",{class:!0});var E=w(i);h.l(E),E.forEach(p),b.forEach(p),a=V(m),this.h()},h(){y(i,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(m,b){C(m,e,b),v(e,r),v(e,n),v(e,s),v(e,i),h.m(i,null),C(m,a,b),u||(c=W(i,"click",_),u=!0)},p(m,b){o=m,b[0]&268435456&&t!==(t=o[30][0]+"")&&T(n,t),d===(d=f(o,b))&&h?h.p(o,b):(h.d(1),h=d(o),h&&(h.c(),h.m(i,null)))},d(m){m&&p(e),h.d(),m&&p(a),u=!1,c()}}}function mc(o){let e,r,t,n=o[30][0]+"",s,i,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),s=O(n),i=O("] "),a=O(l),u=U(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),s=I(d,n),i=I(d,"] "),a=I(d,l),d.forEach(p),u=V(f),f.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,s),v(r,i),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&T(s,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&T(a,l)},d(c){c&&p(e)}}}function yc(o){let e,r,t,n=o[30][0]+"",s,i,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),s=O(n),i=O("] "),a=O(l),u=U(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),s=I(d,n),i=I(d,"] "),a=I(d,l),d.forEach(p),u=V(f),f.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,s),v(r,i),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&T(s,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&T(a,l)},d(c){c&&p(e)}}}function bc(o){let e,r,t,n=o[30][0]+"",s,i,l=o[30][1]+"",a,u;return{c(){e=g("div"),r=g("div"),t=O("["),s=O(n),i=O("] "),a=O(l),u=U(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=I(d,"["),s=I(d,n),i=I(d,"] "),a=I(d,l),d.forEach(p),u=V(f),f.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(c,f){C(c,e,f),v(e,r),v(r,t),v(r,s),v(r,i),v(r,a),v(e,u)},p(c,f){f[0]&268435456&&n!==(n=c[30][0]+"")&&T(s,n),f[0]&268435456&&l!==(l=c[30][1]+"")&&T(a,l)},d(c){c&&p(e)}}}function gc(o){let e,r=o[30][o[30].length-1]==="mention"?"mention":"to",t,n,s,i,l=JSON.parse(o[29].content).name+"",a,u,c,f;function d(){return o[16](o[29],o[30])}return{c(){e=g("div"),t=O(r),n=O(`[p]
                      `),s=g("button"),i=g("u"),a=O(l),u=U(),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=w(e);t=I(_,r),n=I(_,`[p]
                      `),s=k(_,"BUTTON",{class:!0});var m=w(s);i=k(m,"U",{});var b=w(i);a=I(b,l),b.forEach(p),m.forEach(p),_.forEach(p),u=V(h),this.h()},h(){y(s,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(h,_){C(h,e,_),v(e,t),v(e,n),v(e,s),v(s,i),v(i,a),C(h,u,_),c||(f=W(s,"click",d),c=!0)},p(h,_){o=h,_[0]&268435456&&r!==(r=o[30][o[30].length-1]==="mention"?"mention":"to")&&T(t,r),_[0]&536870912&&l!==(l=JSON.parse(o[29].content).name+"")&&T(a,l)},d(h){h&&p(e),h&&p(u),c=!1,f()}}}function kc(o){let e,r,t=o[30][o[30].length-1]==="mention"?"mention":"to",n,s,i=o[30][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c[0]&268435456&&t!==(t=u[30][u[30].length-1]==="mention"?"mention":"to")&&T(n,t),c[0]&268435456&&i!==(i=u[30][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function wc(o){let e,r,t=o[30][o[30].length-1]==="mention"?"mention":"to",n,s,i=o[30][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c[0]&268435456&&t!==(t=u[30][u[30].length-1]==="mention"?"mention":"to")&&T(n,t),c[0]&268435456&&i!==(i=u[30][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function Ec(o){let e,r,t=o[30][o[30].length-1]==="mention"?"mention":"to",n,s,i=o[30][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c[0]&268435456&&t!==(t=u[30][u[30].length-1]==="mention"?"mention":"to")&&T(n,t),c[0]&268435456&&i!==(i=u[30][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function ri(o){let e,r,t,n;const s=[hc,dc,fc],i=[];function l(a,u){return a[30][0]==="p"?0:a[30][0]==="e"||a[30][0]==="q"?1:2}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function Oc(o){let e,r,t=JSON.parse(o[29].content).picture,n,s,i,l,a=JSON.parse(o[29].content).name+"",u,c,f,d=JSON.parse(o[29].content).display_name,h,_,m,b=new Date(o[28].created_at*1e3).toLocaleString()+"",E,S,q=o[28].tags&&Fe(o[28].tags).length>0,R,H,P,A,j,N,K=t&&xo(o);function Z(){return o[14](o[29],o[28])}let G=d&&ei(o);function ne(){return o[15](o[28])}let J=q&&ti(o);return P=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),K&&K.c(),n=U(),s=g("div"),i=g("button"),l=g("u"),u=O(a),c=U(),f=g("div"),G&&G.c(),h=U(),_=g("div"),m=g("button"),E=O(b),S=U(),J&&J.c(),R=U(),H=g("div"),se(P.$$.fragment),this.h()},l(D){e=k(D,"DIV",{class:!0});var L=w(e);r=k(L,"DIV",{});var z=w(r);K&&K.l(z),z.forEach(p),n=V(L),s=k(L,"DIV",{class:!0});var ie=w(s);i=k(ie,"BUTTON",{class:!0});var re=w(i);l=k(re,"U",{});var oe=w(l);u=I(oe,a),oe.forEach(p),re.forEach(p),ie.forEach(p),c=V(L),f=k(L,"DIV",{class:!0});var X=w(f);G&&G.l(X),X.forEach(p),h=V(L),_=k(L,"DIV",{class:!0});var ee=w(_);m=k(ee,"BUTTON",{class:!0});var te=w(m);E=I(te,b),te.forEach(p),ee.forEach(p),L.forEach(p),S=V(D),J&&J.l(D),R=V(D),H=k(D,"DIV",{class:!0});var pe=w(H);ue(P.$$.fragment,pe),pe.forEach(p),this.h()},h(){y(i,"class","text-emerald-800 dark:text-blue-500 text-sm"),y(s,"class","truncate wid justify-items-end"),y(f,"class","text-sm text-left self-end wi truncate justify-items-end"),y(m,"class","text-xs underline decoration-secondary-500"),y(_,"class","min-w-max"),y(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),y(H,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(D,L){C(D,e,L),v(e,r),K&&K.m(r,null),v(e,n),v(e,s),v(s,i),v(i,l),v(l,u),v(e,c),v(e,f),G&&G.m(f,null),v(e,h),v(e,_),v(_,m),v(m,E),C(D,S,L),J&&J.m(D,L),C(D,R,L),C(D,H,L),ae(P,H,null),A=!0,j||(N=[W(i,"click",Z),W(m,"click",ne)],j=!0)},p(D,L){o=D,L[0]&536870912&&(t=JSON.parse(o[29].content).picture),t?K?K.p(o,L):(K=xo(o),K.c(),K.m(r,null)):K&&(K.d(1),K=null),(!A||L[0]&536870912)&&a!==(a=JSON.parse(o[29].content).name+"")&&T(u,a),L[0]&536870912&&(d=JSON.parse(o[29].content).display_name),d?G?G.p(o,L):(G=ei(o),G.c(),G.m(f,null)):G&&(G.d(1),G=null),(!A||L[0]&268435456)&&b!==(b=new Date(o[28].created_at*1e3).toLocaleString()+"")&&T(E,b),L[0]&268435456&&(q=o[28].tags&&Fe(o[28].tags).length>0),q?J?(J.p(o,L),L[0]&268435456&&M(J,1)):(J=ti(o),J.c(),M(J,1),J.m(R.parentNode,R)):J&&(ce(),F(J,1,1,()=>{J=null}),fe());const z={};L[0]&268435456&&(z.text=o[28].content),L[0]&268435456&&(z.tag=o[28].tags),L[0]&268435456&&(z.id=o[28].id),L[0]&8&&(z.view=o[3]),L[0]&2&&(z.URLPreview=o[1]),L[0]&4&&(z.isPageOwner=o[2]),P.$set(z)},i(D){A||(M(J),M(P.$$.fragment,D),A=!0)},o(D){F(J),F(P.$$.fragment,D),A=!1},d(D){D&&p(e),K&&K.d(),G&&G.d(),D&&p(S),J&&J.d(D),D&&p(R),D&&p(H),le(P),j=!1,Te(N)}}}function Ic(o){let e,r,t=o[28].pubkey+"",n,s,i,l,a=new Date(o[28].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function m(){return o[13](o[28])}return f=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("div"),l=g("button"),u=O(a),c=U(),se(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),S.forEach(p),s=V(E),i=k(E,"DIV",{class:!0});var q=w(i);l=k(q,"BUTTON",{class:!0});var R=w(l);u=I(R,a),R.forEach(p),c=V(q),ue(f.$$.fragment,q),q.forEach(p),E.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),y(l,"class","text-xs underline decoration-secondary-500"),y(i,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","loading")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(e,s),v(e,i),v(i,l),v(l,u),v(i,c),ae(f,i,null),d=!0,h||(_=W(l,"click",m),h=!0)},p(b,E){o=b,(!d||E[0]&268435456)&&t!==(t=o[28].pubkey+"")&&T(n,t),(!d||E[0]&268435456)&&a!==(a=new Date(o[28].created_at*1e3).toLocaleString()+"")&&T(u,a);const S={};E[0]&268435456&&(S.text=o[28].content),E[0]&268435456&&(S.tag=o[28].tags),E[0]&268435456&&(S.id=o[28].id),E[0]&8&&(S.view=o[3]),E[0]&2&&(S.URLPreview=o[1]),E[0]&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(M(f.$$.fragment,b),d=!0)},o(b){F(f.$$.fragment,b),d=!1},d(b){b&&p(e),le(f),h=!1,_()}}}function Sc(o){let e,r,t=o[28].pubkey+"",n,s,i,l=new Date(o[28].created_at*1e3).toLocaleString()+"",a,u,c,f,d,h,_;function m(){return o[12](o[28])}return f=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("button"),a=O(l),u=U(),c=g("div"),se(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),s=V(S),i=k(S,"BUTTON",{class:!0});var q=w(i);a=I(q,l),q.forEach(p),S.forEach(p),u=V(E),c=k(E,"DIV",{class:!0});var R=w(c);ue(f.$$.fragment,R),R.forEach(p),E.forEach(p),this.h()},h(){y(i,"class","text-xs underline decoration-secondary-500"),y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(c,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","error")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(r,s),v(r,i),v(i,a),v(e,u),v(e,c),ae(f,c,null),d=!0,h||(_=W(i,"click",m),h=!0)},p(b,E){o=b,(!d||E[0]&268435456)&&t!==(t=o[28].pubkey+"")&&T(n,t),(!d||E[0]&268435456)&&l!==(l=new Date(o[28].created_at*1e3).toLocaleString()+"")&&T(a,l);const S={};E[0]&268435456&&(S.text=o[28].content),E[0]&268435456&&(S.tag=o[28].tags),E[0]&268435456&&(S.id=o[28].id),E[0]&8&&(S.view=o[3]),E[0]&2&&(S.URLPreview=o[1]),E[0]&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(M(f.$$.fragment,b),d=!0)},o(b){F(f.$$.fragment,b),d=!1},d(b){b&&p(e),le(f),h=!1,_()}}}function Cc(o){let e,r,t=o[28].pubkey+"",n,s,i,l,a;return l=new Ae({props:{text:o[28].content,tag:o[28].tags,id:o[28].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("div"),se(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),f.forEach(p),s=V(c),i=k(c,"DIV",{class:!0});var d=w(i);ue(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(i,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,s),v(e,i),ae(l,i,null),a=!0},p(u,c){(!a||c[0]&268435456)&&t!==(t=u[28].pubkey+"")&&T(n,t);const f={};c[0]&268435456&&(f.text=u[28].content),c[0]&268435456&&(f.tag=u[28].tags),c[0]&268435456&&(f.id=u[28].id),c[0]&8&&(f.view=u[3]),c[0]&2&&(f.URLPreview=u[1]),c[0]&4&&(f.isPageOwner=u[2]),l.$set(f)},i(u){a||(M(l.$$.fragment,u),a=!0)},o(u){F(l.$$.fragment,u),a=!1},d(u){u&&p(e),le(l)}}}function Pc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[28].pubkey],pubkey:o[28].pubkey,$$slots:{nodata:[Cc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],error:[Sc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],loading:[Ic,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]],default:[Oc,({metadata:t})=>({29:t}),({metadata:t})=>[t?536870912:0]]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n[0]&268435456&&(s.queryKey=["metadata",t[28].pubkey]),n[0]&268435456&&(s.pubkey=t[28].pubkey),n[0]&805306382|n[1]&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function qc(o){let e,r,t,n,s,i,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Loading note... ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var _=w(e);r=k(_,"DIV",{class:!0});var m=w(r);t=k(m,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(p),b.forEach(p),s=V(m),i=k(m,"DIV",{class:!0});var S=w(i);l=I(S,"Loading note... ("),u=I(S,a),c=I(S,")"),S.forEach(p),m.forEach(p),_.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","loading")},m(h,_){C(h,e,_),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,u),v(i,c),f||(d=W(n,"click",o[11]),f=!0)},p(h,_){_[0]&1&&a!==(a=h[7](h[0])+"")&&T(u,a)},d(h){h&&p(e),f=!1,d()}}}function Dc(o){let e,r,t,n,s,i,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Failed to get note ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var _=w(e);r=k(_,"DIV",{class:!0});var m=w(r);t=k(m,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(p),b.forEach(p),s=V(m),i=k(m,"DIV",{class:!0});var S=w(i);l=I(S,"Failed to get note ("),u=I(S,a),c=I(S,")"),S.forEach(p),m.forEach(p),_.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","error")},m(h,_){C(h,e,_),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,u),v(i,c),f||(d=W(n,"click",o[10]),f=!0)},p(h,_){_[0]&1&&a!==(a=h[7](h[0])+"")&&T(u,a)},d(h){h&&p(e),f=!1,d()}}}function Rc(o){let e,r,t,n,s,i,l,a=o[7](o[0])+"",u,c,f,d;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Note not found ("),u=O(a),c=O(")"),this.h()},l(h){e=k(h,"DIV",{slot:!0});var _=w(e);r=k(_,"DIV",{class:!0});var m=w(r);t=k(m,"DIV",{class:!0});var b=w(t);n=k(b,"BUTTON",{class:!0});var E=w(n);E.forEach(p),b.forEach(p),s=V(m),i=k(m,"DIV",{class:!0});var S=w(i);l=I(S,"Note not found ("),u=I(S,a),c=I(S,")"),S.forEach(p),m.forEach(p),_.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","nodata")},m(h,_){C(h,e,_),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,u),v(i,c),f||(d=W(n,"click",o[9]),f=!0)},p(h,_){_[0]&1&&a!==(a=h[7](h[0])+"")&&T(u,a)},d(h){h&&p(e),f=!1,d()}}}function Tc(o){let e,r,t,n,s,i,l,a;const u=[Qu,Hu,Bu,$u],c=[];function f(d,h){return h[0]&1&&(e=null),h[0]&1&&(r=null),h[0]&1&&(t=null),h[0]&1&&(n=null),e==null&&(e=x.decode(d[0]).type==="note"||x.decode(d[0]).type==="nevent"),e?0:(r==null&&(r=x.decode(d[0]).type==="npub"),r?1:(t==null&&(t=x.decode(d[0]).type==="nprofile"),t?2:(n==null&&(n=x.decode(d[0]).type==="naddr"),n?3:-1)))}return~(s=f(o,[-1,-1]))&&(i=c[s]=u[s](o)),{c(){i&&i.c(),l=Y()},l(d){i&&i.l(d),l=Y()},m(d,h){~s&&c[s].m(d,h),C(d,l,h),a=!0},p(d,h){let _=s;s=f(d,h),s===_?~s&&c[s].p(d,h):(i&&(ce(),F(c[_],1,1,()=>{c[_]=null}),fe()),~s?(i=c[s],i?i.p(d,h):(i=c[s]=u[s](d),i.c()),M(i,1),i.m(l.parentNode,l)):i=null)},i(d){a||(M(i),a=!0)},o(d){F(i),a=!1},d(d){~s&&c[s].d(d),d&&p(l)}}}const Mc=o=>o[0]==="content-warning";function Lc(o,e,r){let t,n;ke(o,nn,D=>r(24,t=D)),ke(o,mi,D=>r(3,n=D));let{encodedId:s}=e,{URLPreview:i}=e,{isPageOwner:l}=e;const a={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function u(D,L){console.log(D);const z={type:"component",value:{metadata:D,pubkey:L},component:a};ye.trigger(z)}const c={ref:ss,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function f(D){console.log("click");const L={type:"component",title:"Event Json",value:{note:D},component:c};ye.trigger(L)}async function d(D){const L=x.decode(D).data;if(console.log(t),!(D in t)){const z=L.relays&&L.relays.length>0?L.relays:ws,ie=[{authors:[L.pubkey],"#d":[L.identifier],kinds:[L.kind]}],re=await Es(z,ie);return re.length>0&&(re.sort((oe,X)=>X.created_at-oe.created_at),ze(nn,t[D]=re[0],t)),re[0]}return t[D]}const h=D=>x.decode(D).type==="note"?x.decode(D).data:x.decode(D).data.id,_={ref:as,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function m(D){console.log("search");const L={type:"component",component:_,title:"Search",body:"",value:{id:h(D),isPageOwner:l},response:async z=>{console.log(z)}};ye.trigger(L)}const b=()=>{console.log("test"),m(s)},E=()=>{console.log("test"),m(s)},S=()=>{console.log("test"),m(s)},q=D=>{f(D)},R=D=>{f(D)},H=(D,L)=>{u(D,L.pubkey)},P=D=>{f(D)},A=(D,L)=>{u(D,L[1])},j=D=>{f(D)},N=D=>{u(D,x.decode(s).data)},K=D=>{u(D,x.decode(s).data.pubkey)},Z=D=>{u(D,x.decode(s).data.pubkey)},G=D=>{f(D)},ne=(D,L)=>{u(D,L[1])},J=D=>{f(D)};return o.$$set=D=>{"encodedId"in D&&r(0,s=D.encodedId),"URLPreview"in D&&r(1,i=D.URLPreview),"isPageOwner"in D&&r(2,l=D.isPageOwner)},[s,i,l,n,u,f,d,h,m,b,E,S,q,R,H,P,A,j,N,K,Z,G,ne,J]}class Ac extends Ee{constructor(e){super(),Oe(this,e,Lc,Tc,we,{encodedId:0,URLPreview:1,isPageOwner:2},null,[-1,-1])}}function ni(o,e,r){const t=o.slice();return t[21]=e[r],t}function oi(o){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","h-5 object-contain justify-center"),de(e.src,r=JSON.parse(o[20].content).picture)||y(e,"src",r),y(e,"alt","avatar")},m(t,n){C(t,e,n)},p(t,n){n&1048576&&!de(e.src,r=JSON.parse(t[20].content).picture)&&y(e,"src",r)},d(t){t&&p(e)}}}function ii(o){let e=JSON.parse(o[20].content).display_name+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&1048576&&e!==(e=JSON.parse(t[20].content).display_name+"")&&T(r,e)},d(t){t&&p(r)}}}function si(o){let e,r,t=Fe(o[19].tags),n=[];for(let i=0;i<t.length;i+=1)n[i]=ai(ni(o,t,i));const s=i=>F(n[i],1,1,()=>{n[i]=null});return{c(){e=g("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(p),this.h()},h(){y(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25 dark:border-s-rose-100/25")},m(i,l){C(i,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(i,l){if(l&1572920){t=Fe(i[19].tags);let a;for(a=0;a<t.length;a+=1){const u=ni(i,t,a);n[a]?(n[a].p(u,l),M(n[a],1)):(n[a]=ai(u),n[a].c(),M(n[a],1),n[a].m(e,null))}for(ce(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(i){if(!r){for(let l=0;l<t.length;l+=1)M(n[l]);r=!0}},o(i){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)F(n[l]);r=!1},d(i){i&&p(e),Xe(n,i)}}}function Nc(o){let e,r,t=o[21][0]+"",n,s,i=o[21][1]+"",l,a;return{c(){e=g("div"),r=O("["),n=O(t),s=O(`]
                  `),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=I(c,"["),n=I(c,t),s=I(c,`]
                  `),l=I(c,i),a=V(c),c.forEach(p),this.h()},h(){y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){C(u,e,c),v(e,r),v(e,n),v(e,s),v(e,l),v(e,a)},p(u,c){c&524288&&t!==(t=u[21][0]+"")&&T(n,t),c&524288&&i!==(i=u[21][1]+"")&&T(l,i)},i:Q,o:Q,d(u){u&&p(e)}}}function jc(o){let e,r;return e=new St({props:{queryKey:[o[21][1]],id:o[21][1],$$slots:{nodata:[Qc,({text:t})=>({19:t}),({text:t})=>t?524288:0],error:[Hc,({text:t})=>({19:t}),({text:t})=>t?524288:0],loading:[Bc,({text:t})=>({19:t}),({text:t})=>t?524288:0],default:[$c,({text:t})=>({19:t}),({text:t})=>t?524288:0]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&524288&&(s.queryKey=[t[21][1]]),n&524288&&(s.id=t[21][1]),n&17301512&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Uc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[21][1]],pubkey:o[21][1],$$slots:{nodata:[zc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],error:[Jc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],loading:[Gc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],default:[Kc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&524288&&(s.queryKey=["metadata",t[21][1]]),n&524288&&(s.pubkey=t[21][1]),n&18350080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Vc(o){let e=o[19].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&524288&&e!==(e=t[19].content+"")&&T(r,e)},d(t){t&&p(r)}}}function Fc(o){let e="<content-warning>",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p:Q,d(t){t&&p(r)}}}function $c(o){let e,r,t,n,s,i,l;function a(d,h){return h&524296&&(n=null),n==null&&(n=!!(d[19].tags.some(of)&&d[3]==!1)),n?Fc:Vc}let u=a(o,-1),c=u(o);function f(){return o[15](o[19])}return{c(){e=g("div"),r=O("[e] "),t=g("button"),c.c(),s=U(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=I(h,"[e] "),t=k(h,"BUTTON",{class:!0});var _=w(t);c.l(_),_.forEach(p),h.forEach(p),s=V(d),this.h()},h(){y(t,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){C(d,e,h),v(e,r),v(e,t),c.m(t,null),C(d,s,h),i||(l=W(t,"click",f),i=!0)},p(d,h){o=d,u===(u=a(o,h))&&c?c.p(o,h):(c.d(1),c=u(o),c&&(c.c(),c.m(t,null)))},d(d){d&&p(e),c.d(),d&&p(s),i=!1,l()}}}function Bc(o){let e,r,t,n=o[21][1]+"",s,i;return{c(){e=g("div"),r=g("div"),t=O("[e] "),s=O(n),i=U(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),s=I(u,n),u.forEach(p),i=V(a),a.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,s),v(e,i)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&T(s,n)},d(l){l&&p(e)}}}function Hc(o){let e,r,t,n=o[21][1]+"",s,i;return{c(){e=g("div"),r=g("div"),t=O("[e] "),s=O(n),i=U(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),s=I(u,n),u.forEach(p),i=V(a),a.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,s),v(e,i)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&T(s,n)},d(l){l&&p(e)}}}function Qc(o){let e,r,t,n=o[21][1]+"",s,i;return{c(){e=g("div"),r=g("div"),t=O("[e] "),s=O(n),i=U(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var u=w(r);t=I(u,"[e] "),s=I(u,n),u.forEach(p),i=V(a),a.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(l,a){C(l,e,a),v(e,r),v(r,t),v(r,s),v(e,i)},p(l,a){a&524288&&n!==(n=l[21][1]+"")&&T(s,n)},d(l){l&&p(e)}}}function Kc(o){let e,r=o[21][o[21].length-1]==="mention"?"mention":"to",t,n,s,i,l,a=JSON.parse(o[20].content).name+"",u,c,f,d;function h(){return o[14](o[20],o[21])}return{c(){e=g("div"),t=O(r),n=O(`[p]
                    `),s=g("button"),i=O("@"),l=g("u"),u=O(a),c=U(),this.h()},l(_){e=k(_,"DIV",{class:!0});var m=w(e);t=I(m,r),n=I(m,`[p]
                    `),s=k(m,"BUTTON",{class:!0});var b=w(s);i=I(b,"@"),l=k(b,"U",{});var E=w(l);u=I(E,a),E.forEach(p),b.forEach(p),m.forEach(p),c=V(_),this.h()},h(){y(s,"class","text-emerald-800 dark:text-blue-400 overflow-hidden text-ellipsis"),y(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(_,m){C(_,e,m),v(e,t),v(e,n),v(e,s),v(s,i),v(s,l),v(l,u),C(_,c,m),f||(d=W(s,"click",h),f=!0)},p(_,m){o=_,m&524288&&r!==(r=o[21][o[21].length-1]==="mention"?"mention":"to")&&T(t,r),m&1048576&&a!==(a=JSON.parse(o[20].content).name+"")&&T(u,a)},d(_){_&&p(e),_&&p(c),f=!1,d()}}}function Gc(o){let e,r,t=o[21][o[21].length-1]==="mention"?"mention":"to",n,s,i=o[21][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c&524288&&t!==(t=u[21][u[21].length-1]==="mention"?"mention":"to")&&T(n,t),c&524288&&i!==(i=u[21][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function Jc(o){let e,r,t=o[21][o[21].length-1]==="mention"?"mention":"to",n,s,i=o[21][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c&524288&&t!==(t=u[21][u[21].length-1]==="mention"?"mention":"to")&&T(n,t),c&524288&&i!==(i=u[21][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function zc(o){let e,r,t=o[21][o[21].length-1]==="mention"?"mention":"to",n,s,i=o[21][1]+"",l,a;return{c(){e=g("div"),r=g("div"),n=O(t),s=O("[p] "),l=O(i),a=U(),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),s=I(f,"[p] "),l=I(f,i),f.forEach(p),a=V(c),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(r,s),v(r,l),v(e,a)},p(u,c){c&524288&&t!==(t=u[21][u[21].length-1]==="mention"?"mention":"to")&&T(n,t),c&524288&&i!==(i=u[21][1]+"")&&T(l,i)},d(u){u&&p(e)}}}function ai(o){let e,r,t,n;const s=[Uc,jc,Nc],i=[];function l(a,u){return a[21][0]==="p"?0:a[21][0]==="e"||a[21][0]==="q"?1:2}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function Wc(o){let e,r,t=JSON.parse(o[20].content).picture,n,s,i,l,a=JSON.parse(o[20].content).name+"",u,c,f,d=JSON.parse(o[20].content).display_name,h,_,m,b=new Date(o[19].created_at*1e3).toLocaleString()+"",E,S,q=o[19].tags&&Fe(o[19].tags).length>0,R,H,P,A,j,N,K=t&&oi(o);function Z(){return o[12](o[20],o[19])}let G=d&&ii(o);function ne(){return o[13](o[19])}let J=q&&si(o);return P=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),K&&K.c(),n=U(),s=g("div"),i=g("button"),l=g("u"),u=O(a),c=U(),f=g("div"),G&&G.c(),h=U(),_=g("div"),m=g("button"),E=O(b),S=U(),J&&J.c(),R=U(),H=g("div"),se(P.$$.fragment),this.h()},l(D){e=k(D,"DIV",{class:!0});var L=w(e);r=k(L,"DIV",{});var z=w(r);K&&K.l(z),z.forEach(p),n=V(L),s=k(L,"DIV",{class:!0});var ie=w(s);i=k(ie,"BUTTON",{class:!0});var re=w(i);l=k(re,"U",{});var oe=w(l);u=I(oe,a),oe.forEach(p),re.forEach(p),ie.forEach(p),c=V(L),f=k(L,"DIV",{class:!0});var X=w(f);G&&G.l(X),X.forEach(p),h=V(L),_=k(L,"DIV",{class:!0});var ee=w(_);m=k(ee,"BUTTON",{class:!0});var te=w(m);E=I(te,b),te.forEach(p),ee.forEach(p),L.forEach(p),S=V(D),J&&J.l(D),R=V(D),H=k(D,"DIV",{class:!0});var pe=w(H);ue(P.$$.fragment,pe),pe.forEach(p),this.h()},h(){y(i,"class","text-emerald-800 dark:text-blue-500 text-sm"),y(s,"class","truncate wid justify-items-end"),y(f,"class","text-left self-end text-sm wi truncate justify-items-end"),y(m,"class","text-xs underline decoration-secondary-500"),y(_,"class","min-w-max"),y(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),y(H,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(D,L){C(D,e,L),v(e,r),K&&K.m(r,null),v(e,n),v(e,s),v(s,i),v(i,l),v(l,u),v(e,c),v(e,f),G&&G.m(f,null),v(e,h),v(e,_),v(_,m),v(m,E),C(D,S,L),J&&J.m(D,L),C(D,R,L),C(D,H,L),ae(P,H,null),A=!0,j||(N=[W(i,"click",Z),W(m,"click",ne)],j=!0)},p(D,L){o=D,L&1048576&&(t=JSON.parse(o[20].content).picture),t?K?K.p(o,L):(K=oi(o),K.c(),K.m(r,null)):K&&(K.d(1),K=null),(!A||L&1048576)&&a!==(a=JSON.parse(o[20].content).name+"")&&T(u,a),L&1048576&&(d=JSON.parse(o[20].content).display_name),d?G?G.p(o,L):(G=ii(o),G.c(),G.m(f,null)):G&&(G.d(1),G=null),(!A||L&524288)&&b!==(b=new Date(o[19].created_at*1e3).toLocaleString()+"")&&T(E,b),L&524288&&(q=o[19].tags&&Fe(o[19].tags).length>0),q?J?(J.p(o,L),L&524288&&M(J,1)):(J=si(o),J.c(),M(J,1),J.m(R.parentNode,R)):J&&(ce(),F(J,1,1,()=>{J=null}),fe());const z={};L&524288&&(z.text=o[19].content),L&524288&&(z.tag=o[19].tags),L&524288&&(z.id=o[19].id),L&8&&(z.view=o[3]),L&2&&(z.URLPreview=o[1]),L&4&&(z.isPageOwner=o[2]),P.$set(z)},i(D){A||(M(J),M(P.$$.fragment,D),A=!0)},o(D){F(J),F(P.$$.fragment,D),A=!1},d(D){D&&p(e),K&&K.d(),G&&G.d(),D&&p(S),J&&J.d(D),D&&p(R),D&&p(H),le(P),j=!1,Te(N)}}}function Yc(o){let e,r,t=o[19].pubkey+"",n,s,i,l,a=new Date(o[19].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function m(){return o[11](o[19])}return f=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("div"),l=g("button"),u=O(a),c=U(),se(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),S.forEach(p),s=V(E),i=k(E,"DIV",{class:!0});var q=w(i);l=k(q,"BUTTON",{class:!0});var R=w(l);u=I(R,a),R.forEach(p),c=V(q),ue(f.$$.fragment,q),q.forEach(p),E.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),y(l,"class","text-xs underline decoration-secondary-500"),y(i,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","loading")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(e,s),v(e,i),v(i,l),v(l,u),v(i,c),ae(f,i,null),d=!0,h||(_=W(l,"click",m),h=!0)},p(b,E){o=b,(!d||E&524288)&&t!==(t=o[19].pubkey+"")&&T(n,t),(!d||E&524288)&&a!==(a=new Date(o[19].created_at*1e3).toLocaleString()+"")&&T(u,a);const S={};E&524288&&(S.text=o[19].content),E&524288&&(S.tag=o[19].tags),E&524288&&(S.id=o[19].id),E&8&&(S.view=o[3]),E&2&&(S.URLPreview=o[1]),E&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(M(f.$$.fragment,b),d=!0)},o(b){F(f.$$.fragment,b),d=!1},d(b){b&&p(e),le(f),h=!1,_()}}}function Xc(o){let e,r,t=o[19].pubkey+"",n,s,i,l=new Date(o[19].created_at*1e3).toLocaleString()+"",a,u,c,f,d,h,_;function m(){return o[10](o[19])}return f=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("button"),a=O(l),u=U(),c=g("div"),se(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);n=I(S,t),s=V(S),i=k(S,"BUTTON",{class:!0});var q=w(i);a=I(q,l),q.forEach(p),S.forEach(p),u=V(E),c=k(E,"DIV",{class:!0});var R=w(c);ue(f.$$.fragment,R),R.forEach(p),E.forEach(p),this.h()},h(){y(i,"class","text-xs underline decoration-secondary-500"),y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(c,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","error")},m(b,E){C(b,e,E),v(e,r),v(r,n),v(r,s),v(r,i),v(i,a),v(e,u),v(e,c),ae(f,c,null),d=!0,h||(_=W(i,"click",m),h=!0)},p(b,E){o=b,(!d||E&524288)&&t!==(t=o[19].pubkey+"")&&T(n,t),(!d||E&524288)&&l!==(l=new Date(o[19].created_at*1e3).toLocaleString()+"")&&T(a,l);const S={};E&524288&&(S.text=o[19].content),E&524288&&(S.tag=o[19].tags),E&524288&&(S.id=o[19].id),E&8&&(S.view=o[3]),E&2&&(S.URLPreview=o[1]),E&4&&(S.isPageOwner=o[2]),f.$set(S)},i(b){d||(M(f.$$.fragment,b),d=!0)},o(b){F(f.$$.fragment,b),d=!1},d(b){b&&p(e),le(f),h=!1,_()}}}function Zc(o){let e,r,t=o[19].pubkey+"",n,s,i,l,a;return l=new Ae({props:{text:o[19].content,tag:o[19].tags,id:o[19].id,view:o[3],URLPreview:o[1],isPageOwner:o[2]}}),{c(){e=g("div"),r=g("div"),n=O(t),s=U(),i=g("div"),se(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);n=I(f,t),f.forEach(p),s=V(c),i=k(c,"DIV",{class:!0});var d=w(i);ue(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(i,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),y(e,"slot","nodata")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,s),v(e,i),ae(l,i,null),a=!0},p(u,c){(!a||c&524288)&&t!==(t=u[19].pubkey+"")&&T(n,t);const f={};c&524288&&(f.text=u[19].content),c&524288&&(f.tag=u[19].tags),c&524288&&(f.id=u[19].id),c&8&&(f.view=u[3]),c&2&&(f.URLPreview=u[1]),c&4&&(f.isPageOwner=u[2]),l.$set(f)},i(u){a||(M(l.$$.fragment,u),a=!0)},o(u){F(l.$$.fragment,u),a=!1},d(u){u&&p(e),le(l)}}}function xc(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[19].pubkey],pubkey:o[19].pubkey,$$slots:{nodata:[Zc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],error:[Xc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],loading:[Yc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0],default:[Wc,({metadata:t})=>({20:t}),({metadata:t})=>t?1048576:0]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&524288&&(s.queryKey=["metadata",t[19].pubkey]),n&524288&&(s.pubkey=t[19].pubkey),n&18350094&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function ef(o){let e,r,t,n,s,i,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var _=w(r);t=k(_,"DIV",{class:!0});var m=w(t);n=k(m,"BUTTON",{class:!0});var b=w(n);b.forEach(p),m.forEach(p),s=V(_),i=k(_,"DIV",{class:!0});var E=w(i);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(p),_.forEach(p),h.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","loading")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,a),v(i,u),c||(f=W(n,"click",o[9]),c=!0)},p(d,h){h&1&&T(a,d[0])},d(d){d&&p(e),c=!1,f()}}}function tf(o){let e,r,t,n,s,i,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var _=w(r);t=k(_,"DIV",{class:!0});var m=w(t);n=k(m,"BUTTON",{class:!0});var b=w(n);b.forEach(p),m.forEach(p),s=V(_),i=k(_,"DIV",{class:!0});var E=w(i);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(p),_.forEach(p),h.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","error")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,a),v(i,u),c||(f=W(n,"click",o[8]),c=!0)},p(d,h){h&1&&T(a,d[0])},d(d){d&&p(e),c=!1,f()}}}function rf(o){let e,r,t,n,s,i,l,a,u,c,f;return{c(){e=g("div"),r=g("div"),t=g("div"),n=g("button"),s=U(),i=g("div"),l=O("Loading note... ("),a=O(o[0]),u=O(")"),this.h()},l(d){e=k(d,"DIV",{slot:!0});var h=w(e);r=k(h,"DIV",{class:!0});var _=w(r);t=k(_,"DIV",{class:!0});var m=w(t);n=k(m,"BUTTON",{class:!0});var b=w(n);b.forEach(p),m.forEach(p),s=V(_),i=k(_,"DIV",{class:!0});var E=w(i);l=I(E,"Loading note... ("),a=I(E,o[0]),u=I(E,")"),E.forEach(p),_.forEach(p),h.forEach(p),this.h()},h(){y(n,"class","btn m-0 p-1 variant-filled-primary rounded-full"),y(t,"class","flex justify-center items-center h-auto"),y(i,"class","text-sm break-all overflow-hidden"),y(r,"class","grid grid-cols-[auto_1fr] gap-1 flex"),y(e,"slot","nodata")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),n.innerHTML=Ze,v(r,s),v(r,i),v(i,l),v(i,a),v(i,u),c||(f=W(n,"click",o[7]),c=!0)},p(d,h){h&1&&T(a,d[0])},d(d){d&&p(e),c=!1,f()}}}function nf(o){let e,r,t,n;return t=new St({props:{queryKey:[o[0]],id:o[0],$$slots:{nodata:[rf,({text:s})=>({19:s}),({text:s})=>s?524288:0],error:[tf,({text:s})=>({19:s}),({text:s})=>s?524288:0],loading:[ef,({text:s})=>({19:s}),({text:s})=>s?524288:0],default:[xc,({text:s})=>({19:s}),({text:s})=>s?524288:0]},$$scope:{ctx:o}}}),{c(){e=g("div"),r=g("div"),se(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var i=w(e);r=k(i,"DIV",{class:!0});var l=w(r);ue(t.$$.fragment,l),l.forEach(p),i.forEach(p),this.h()},h(){y(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),y(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(s,i){C(s,e,i),v(e,r),ae(t,r,null),n=!0},p(s,[i]){const l={};i&1&&(l.queryKey=[s[0]]),i&1&&(l.id=s[0]),i&17301519&&(l.$$scope={dirty:i,ctx:s}),t.$set(l)},i(s){n||(M(t.$$.fragment,s),n=!0)},o(s){F(t.$$.fragment,s),n=!1},d(s){s&&p(e),le(t)}}}const of=o=>o[0]==="content-warning";function sf(o,e,r){let t;ke(o,mi,P=>r(3,t=P));let{id:n}=e,{URLPreview:s}=e,{isPageOwner:i}=e;const l={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function a(P,A){console.log(P);const j={type:"component",value:{metadata:P,pubkey:A},component:l};ye.trigger(j)}const u={ref:ss,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function c(P){console.log("click");const A={type:"component",title:"Event Json",value:{note:P},component:u};ye.trigger(A)}const f={ref:as,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function d(P){console.log("search");const A={type:"component",component:f,title:"Search",body:"",value:{id:P,isPageOwner:i},response:async j=>{console.log(j)}};ye.trigger(A)}const h=()=>{d(n)},_=()=>{d(n)},m=()=>{d(n)},b=P=>{c(P)},E=P=>{c(P)},S=(P,A)=>{a(P,A.pubkey)},q=P=>{c(P)},R=(P,A)=>{a(P,A[1])},H=P=>{c(P)};return o.$$set=P=>{"id"in P&&r(0,n=P.id),"URLPreview"in P&&r(1,s=P.URLPreview),"isPageOwner"in P&&r(2,i=P.isPageOwner)},[n,s,i,t,a,c,d,h,_,m,b,E,S,q,R,H]}class af extends Ee{constructor(e){super(),Oe(this,e,sf,nf,we,{id:0,URLPreview:1,isPageOwner:2})}}function li(o,e,r){const t=o.slice();return t[23]=e[r],t[25]=r,t}function lf(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:Yf,then:ff,catch:cf,value:22,blocks:[,,,]};return Ve(r=o[11](o[1],o[2]),n),{c(){e=Y(),n.block.c()},l(s){e=Y(),n.block.l(s)},m(s,i){C(s,e,i),n.block.m(s,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,i){o=s,n.ctx=o,i&6&&r!==(r=o[11](o[1],o[2]))&&Ve(r,n)||Yt(n,o,i)},i(s){t||(M(n.block),t=!0)},o(s){for(let i=0;i<3;i+=1){const l=n.blocks[i];F(l)}t=!1},d(s){s&&p(e),n.block.d(s),n.token=null,n=null}}}function uf(o){let e,r,t,n,s=o[2][o[2].findIndex(fi)][1]+"",i,l,a;return{c(){e=g("button"),r=O("content-warning"),t=g("br"),n=U(),i=O(s),this.h()},l(u){e=k(u,"BUTTON",{type:!0,class:!0});var c=w(e);r=I(c,"content-warning"),t=k(c,"BR",{}),n=V(c),i=I(c,s),c.forEach(p),this.h()},h(){y(e,"type","button"),y(e,"class","btn variant-filled-warning m-0")},m(u,c){C(u,e,c),v(e,r),v(e,t),v(e,n),v(e,i),l||(a=W(e,"click",o[12]),l=!0)},p(u,c){c&4&&s!==(s=u[2][u[2].findIndex(fi)][1]+"")&&T(i,s)},i:Q,o:Q,d(u){u&&p(e),l=!1,a()}}}function cf(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function ff(o){let e,r,t=o[22],n=[];for(let i=0;i<t.length;i+=1)n[i]=ci(li(o,t,i));const s=i=>F(n[i],1,1,()=>{n[i]=null});return{c(){e=g("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var l=w(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(p),this.h()},h(){y(e,"class","parent-container break-all whitespace-pre-wrap")},m(i,l){C(i,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(i,l){if(l&134221822){t=i[22];let a;for(a=0;a<t.length;a+=1){const u=li(i,t,a);n[a]?(n[a].p(u,l),M(n[a],1)):(n[a]=ci(u),n[a].c(),M(n[a],1),n[a].m(e,null))}for(ce(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(i){if(!r){for(let l=0;l<t.length;l+=1)M(n[l]);r=!0}},o(i){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)F(n[l]);r=!1},d(i){i&&p(e),Xe(n,i)}}}function ui(o){let e,r,t,n;const s=[yf,mf,vf,pf,_f,hf,df],i=[];function l(a,u){return a[23].type==="emoji"?0:a[23].type==="url"?1:a[23].type==="image"?2:a[23].type==="nostr"&&a[23].url?3:a[23].type==="quote"&&a[23].number!==void 0?4:a[23].type==="hashtag"?5:a[23].content.length>0?6:-1}return~(e=l(o))&&(r=i[e]=s[e](o)),{c(){r&&r.c(),t=Y()},l(a){r&&r.l(a),t=Y()},m(a,u){~e&&i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?~e&&i[e].p(a,u):(r&&(ce(),F(i[c],1,1,()=>{i[c]=null}),fe()),~e?(r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t)):r=null)},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){~e&&i[e].d(a),a&&p(t)}}}function df(o){let e,r=o[23].content+"",t;return{c(){e=g("span"),t=O(r)},l(n){e=k(n,"SPAN",{});var s=w(e);t=I(s,r),s.forEach(p)},m(n,s){C(n,e,s),v(e,t)},p(n,s){s&6&&r!==(r=n[23].content+"")&&T(t,r)},i:Q,o:Q,d(n){n&&p(e)}}}function hf(o){let e,r,t=o[23].content+"",n,s,i,l;function a(){return o[18](o[23])}return{c(){e=g("span"),r=g("button"),n=O(t),s=U(),this.h()},l(u){e=k(u,"SPAN",{class:!0});var c=w(e);r=k(c,"BUTTON",{class:!0});var f=w(r);n=I(f,t),f.forEach(p),s=V(c),c.forEach(p),this.h()},h(){y(r,"class","anchor"),y(e,"class","break-all whitespace-pre-wrap")},m(u,c){C(u,e,c),v(e,r),v(r,n),v(e,s),i||(l=W(r,"click",a),i=!0)},p(u,c){o=u,c&6&&t!==(t=o[23].content+"")&&T(n,t)},i:Q,o:Q,d(u){u&&p(e),i=!1,l()}}}function _f(o){let e,r,t,n;const s=[wf,kf,gf,bf],i=[];function l(a,u){return a[2][a[23].number][0]==="p"?0:a[2][a[23].number][0]==="e"||a[2][a[23].number][0]==="q"?1:a[2][a[23].number][0]==="t"?2:3}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function pf(o){let e,r,t,n,s;const i=[Pf,Cf],l=[];function a(u,c){return c&6&&(e=null),e==null&&(e=!!u[7](u[23].url)),e?0:1}return r=a(o,-1),t=l[r]=i[r](o),{c(){t.c(),n=Y()},l(u){t.l(u),n=Y()},m(u,c){l[r].m(u,c),C(u,n,c),s=!0},p(u,c){let f=r;r=a(u,c),r===f?l[r].p(u,c):(ce(),F(l[f],1,1,()=>{l[f]=null}),fe(),t=l[r],t?t.p(u,c):(t=l[r]=i[r](u),t.c()),M(t,1),t.m(n.parentNode,n))},i(u){s||(M(t),s=!0)},o(u){F(t),s=!1},d(u){l[r].d(u),u&&p(n)}}}function vf(o){let e;function r(s,i){return s[3]?Df:qf}let t=r(o),n=t(o);return{c(){n.c(),e=Y()},l(s){n.l(s),e=Y()},m(s,i){n.m(s,i),C(s,e,i)},p(s,i){t===(t=r(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(s){n.d(s),s&&p(e)}}}function mf(o){let e,r,t,n;const s=[Lf,Mf],i=[];function l(a,u){return a[3]?0:1}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=Y()},l(a){r.l(a),t=Y()},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function yf(o){let e,r,t,n,s,i;function l(){return o[14](o[23])}return{c(){e=g("span"),r=g("img"),n=U(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0}),n=V(u),u.forEach(p),this.h()},h(){y(r,"class","max-h-[1.5em] object-contain"),de(r.src,t=o[23].url)||y(r,"src",t),y(r,"alt",""),y(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(a,u){C(a,e,u),v(e,r),v(e,n),s||(i=W(r,"click",l),s=!0)},p(a,u){o=a,u&6&&!de(r.src,t=o[23].url)&&y(r,"src",t)},i:Q,o:Q,d(a){a&&p(e),s=!1,i()}}}function bf(o){let e=o[2][o[23].number][1]+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[2][t[23].number][1]+"")&&T(r,e)},i:Q,o:Q,d(t){t&&p(r)}}}function gf(o){let e,r,t=o[2][o[23].number][1]+"",n,s,i;function l(){return o[17](o[23])}return{c(){e=g("button"),r=O("#"),n=O(t),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var u=w(e);r=I(u,"#"),n=I(u,t),u.forEach(p),this.h()},h(){y(e,"class","anchor")},m(a,u){C(a,e,u),v(e,r),v(e,n),s||(i=W(e,"click",l),s=!0)},p(a,u){o=a,u&6&&t!==(t=o[2][o[23].number][1]+"")&&T(n,t)},i:Q,o:Q,d(a){a&&p(e),s=!1,i()}}}function kf(o){let e,r;return e=new af({props:{id:o[2][o[23].number][1],URLPreview:o[3],isPageOwner:o[4]}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&6&&(s.id=t[2][t[23].number][1]),n&8&&(s.URLPreview=t[3]),n&16&&(s.isPageOwner=t[4]),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function wf(o){let e,r;return e=new Le({props:{queryKey:["metadata",o[2][o[23].number][1]],pubkey:o[2][o[23].number][1],$$slots:{nodata:[Sf,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],error:[If,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],loading:[Of,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0],default:[Ef,({metadata:t})=>({27:t}),({metadata:t})=>t?134217728:0]},$$scope:{ctx:o}}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&6&&(s.queryKey=["metadata",t[2][t[23].number][1]]),n&6&&(s.pubkey=t[2][t[23].number][1]),n&402653190&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Ef(o){let e,r,t=JSON.parse(o[27].content).name+"",n,s,i,l;function a(){return o[16](o[23],o[27])}return{c(){e=g("button"),r=g("u"),n=O(t),s=U(),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=k(c,"U",{});var f=w(r);n=I(f,t),f.forEach(p),c.forEach(p),s=V(u),this.h()},h(){y(e,"class","flex inline-flex text-gray-800/80 dark:text-gray-200/80")},m(u,c){C(u,e,c),v(e,r),v(r,n),C(u,s,c),i||(l=W(e,"click",a),i=!0)},p(u,c){o=u,c&134217728&&t!==(t=JSON.parse(o[27].content).name+"")&&T(n,t)},d(u){u&&p(e),u&&p(s),i=!1,l()}}}function Of(o){let e,r,t=o[2][o[23].number][1]+"",n,s;return{c(){e=g("div"),r=g("div"),n=O(t),s=U(),this.h()},l(i){e=k(i,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(p),s=V(l),l.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","loading")},m(i,l){C(i,e,l),v(e,r),v(r,n),v(e,s)},p(i,l){l&6&&t!==(t=i[2][i[23].number][1]+"")&&T(n,t)},d(i){i&&p(e)}}}function If(o){let e,r,t=o[2][o[23].number][1]+"",n,s;return{c(){e=g("div"),r=g("div"),n=O(t),s=U(),this.h()},l(i){e=k(i,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(p),s=V(l),l.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","error")},m(i,l){C(i,e,l),v(e,r),v(r,n),v(e,s)},p(i,l){l&6&&t!==(t=i[2][i[23].number][1]+"")&&T(n,t)},d(i){i&&p(e)}}}function Sf(o){let e,r,t=o[2][o[23].number][1]+"",n,s;return{c(){e=g("div"),r=g("div"),n=O(t),s=U(),this.h()},l(i){e=k(i,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var a=w(r);n=I(a,t),a.forEach(p),s=V(l),l.forEach(p),this.h()},h(){y(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),y(e,"slot","nodata")},m(i,l){C(i,e,l),v(e,r),v(r,n),v(e,s)},p(i,l){l&6&&t!==(t=i[2][i[23].number][1]+"")&&T(n,t)},d(i){i&&p(e)}}}function Cf(o){let e,r=o[23].content+"",t;return{c(){e=g("span"),t=O(r)},l(n){e=k(n,"SPAN",{});var s=w(e);t=I(s,r),s.forEach(p)},m(n,s){C(n,e,s),v(e,t)},p(n,s){s&6&&r!==(r=n[23].content+"")&&T(t,r)},i:Q,o:Q,d(n){n&&p(e)}}}function Pf(o){let e,r;return e=new Ac({props:{encodedId:o[23].url,URLPreview:o[3],isPageOwner:o[4]}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&6&&(s.encodedId=t[23].url),n&8&&(s.URLPreview=t[3]),n&16&&(s.isPageOwner=t[4]),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function qf(o){let e,r,t,n;function s(a,u){return a[23].content.length>80?Tf:Rf}let i=s(o),l=i(o);return{c(){e=g("span"),r=g("a"),l.c(),n=U(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),n=V(u),u.forEach(p),this.h()},h(){y(r,"class","anchor example svelte-zj6vf6"),y(r,"href",t=o[23].content),y(r,"target","_blank"),y(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),v(e,n)},p(a,u){i===(i=s(a))&&l?l.p(a,u):(l.d(1),l=i(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&y(r,"href",t)},d(a){a&&p(e),l.d()}}}function Df(o){let e,r,t,n,s,i;function l(){return o[15](o[23])}return{c(){e=g("span"),r=g("img"),n=U(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),n=V(u),u.forEach(p),this.h()},h(){y(r,"class","max-h-[10em] object-contain"),de(r.src,t=o[23].content)||y(r,"src",t),y(r,"alt",""),y(r,"loading","lazy"),y(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(a,u){C(a,e,u),v(e,r),v(e,n),s||(i=W(r,"click",l),s=!0)},p(a,u){o=a,u&6&&!de(r.src,t=o[23].content)&&y(r,"src",t)},d(a){a&&p(e),s=!1,i()}}}function Rf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&T(r,e)},d(t){t&&p(r)}}}function Tf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,s){C(n,r,s),C(n,t,s)},p(n,s){s&6&&e!==(e=n[23].content.slice(0,75)+"")&&T(r,e)},d(n){n&&p(r),n&&p(t)}}}function Mf(o){let e,r,t,n;function s(a,u){return a[23].content.length>80?Nf:Af}let i=s(o),l=i(o);return{c(){e=g("span"),r=g("a"),l.c(),n=U(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),n=V(u),u.forEach(p),this.h()},h(){y(r,"class","anchor example svelte-zj6vf6"),y(r,"href",t=o[23].content),y(r,"target","_blank"),y(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),v(e,n)},p(a,u){i===(i=s(a))&&l?l.p(a,u):(l.d(1),l=i(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&y(r,"href",t)},i:Q,o:Q,d(a){a&&p(e),l.d()}}}function Lf(o){let e,r,t,n,s,i,l;const a=[Ff,Vf,Uf,jf],u=[];function c(f,d){var h,_;return d&6&&(e=null),d&6&&(r=null),d&6&&(t=null),e==null&&(e=!!new URL(f[23].content).hostname.endsWith("twitter.com")),e?0:(r==null&&(r=new URL(f[23].content).hostname==="www.youtube.com"||new URL(f[23].content).hostname==="m.youtube.com"||new URL(f[23].content).hostname==="youtu.be"),r?1:(t==null&&(t=!!((h=f[23].content)!=null&&h.endsWith(".mp4")||(_=f[23].content)!=null&&_.endsWith(".mov"))),t?2:3))}return n=c(o,-1),s=u[n]=a[n](o),{c(){s.c(),i=Y()},l(f){s.l(f),i=Y()},m(f,d){u[n].m(f,d),C(f,i,d),l=!0},p(f,d){let h=n;n=c(f,d),n===h?u[n].p(f,d):(ce(),F(u[h],1,1,()=>{u[h]=null}),fe(),s=u[n],s?s.p(f,d):(s=u[n]=a[n](f),s.c()),M(s,1),s.m(i.parentNode,i))},i(f){l||(M(s),l=!0)},o(f){F(s),l=!1},d(f){u[n].d(f),f&&p(i)}}}function Af(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&T(r,e)},d(t){t&&p(r)}}}function Nf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,s){C(n,r,s),C(n,t,s)},p(n,s){s&6&&e!==(e=n[23].content.slice(0,75)+"")&&T(r,e)},d(n){n&&p(r),n&&p(t)}}}function jf(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:Jf,then:Bf,catch:$f,value:26,blocks:[,,,]};return Ve(r=o[8](o[23].content),n),{c(){e=Y(),n.block.c()},l(s){e=Y(),n.block.l(s)},m(s,i){C(s,e,i),n.block.m(s,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,i){o=s,n.ctx=o,i&6&&r!==(r=o[8](o[23].content))&&Ve(r,n)||Yt(n,o,i)},i(s){t||(M(n.block),t=!0)},o(s){for(let i=0;i<3;i+=1){const l=n.blocks[i];F(l)}t=!1},d(s){s&&p(e),n.block.d(s),n.token=null,n=null}}}function Uf(o){let e,r,t,n,s,i;return{c(){e=g("video"),r=g("source"),n=g("track"),i=O(`
                  Your browser does not support the video tag.
                `),this.h()},l(l){e=k(l,"VIDEO",{class:!0});var a=w(e);r=k(a,"SOURCE",{src:!0,type:!0}),n=k(a,"TRACK",{kind:!0,src:!0,label:!0}),i=I(a,`
                  Your browser does not support the video tag.
                `),a.forEach(p),this.h()},h(){de(r.src,t=o[23].content)||y(r,"src",t),y(r,"type","video/mp4"),y(n,"kind","captions"),de(n.src,s="")||y(n,"src",s),y(n,"label","English"),n.default=!0,e.controls=!0,y(e,"class","max-h-[20em]")},m(l,a){C(l,e,a),v(e,r),v(e,n),v(e,i)},p(l,a){a&6&&!de(r.src,t=l[23].content)&&y(r,"src",t)},i:Q,o:Q,d(l){l&&p(e)}}}function Vf(o){let e,r;return{c(){e=g("iframe"),this.h()},l(t){e=k(t,"IFRAME",{class:!0,width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),w(e).forEach(p),this.h()},h(){y(e,"class","rounded"),y(e,"width","320"),y(e,"height","180"),de(e.src,r=`https://www.youtube.com/embed/${o[9](o[23].content)}`)||y(e,"src",r),y(e,"title","YouTube video player"),y(e,"frameborder","0"),y(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.allowFullscreen=!0},m(t,n){C(t,e,n)},p(t,n){n&6&&!de(e.src,r=`https://www.youtube.com/embed/${t[9](t[23].content)}`)&&y(e,"src",r)},i:Q,o:Q,d(t){t&&p(e)}}}function Ff(o){let e,r,t,n,s=o[23].content+"",i,l,a,u,c,f;return{c(){e=g("div"),r=g("blockquote"),t=g("p"),n=g("a"),i=O(s),a=U(),u=g("script"),f=U(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=k(h,"BLOCKQUOTE",{class:!0});var _=w(r);t=k(_,"P",{lang:!0,dir:!0});var m=w(t);n=k(m,"A",{class:!0,href:!0});var b=w(n);i=I(b,s),b.forEach(p),m.forEach(p),_.forEach(p),a=V(h),u=k(h,"SCRIPT",{src:!0,charset:!0});var E=w(u);E.forEach(p),f=V(h),h.forEach(p),this.h()},h(){y(n,"class","anchor example svelte-zj6vf6"),y(n,"href",l=o[23].content),y(t,"lang","ja"),y(t,"dir","ltr"),y(r,"class","twitter-tweet"),u.async=!0,de(u.src,c="https://platform.twitter.com/widgets.js")||y(u,"src",c),y(u,"charset","utf-8"),y(e,"class","max-h-[24rem] max-w-[36rem] overflow-auto")},m(d,h){C(d,e,h),v(e,r),v(r,t),v(t,n),v(n,i),v(e,a),v(e,u),v(e,f)},p(d,h){h&6&&s!==(s=d[23].content+"")&&T(i,s),h&6&&l!==(l=d[23].content)&&y(n,"href",l)},i:Q,o:Q,d(d){d&&p(e)}}}function $f(o){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function Bf(o){let e,r,t,n;const s=[Qf,Hf],i=[];function l(a,u){return a[5][a[23].content].title!==""?0:1}return e=l(o),r=i[e]=s[e](o),{c(){r.c(),t=U()},l(a){r.l(a),t=V(a)},m(a,u){i[e].m(a,u),C(a,t,u),n=!0},p(a,u){let c=e;e=l(a),e===c?i[e].p(a,u):(ce(),F(i[c],1,1,()=>{i[c]=null}),fe(),r=i[e],r?r.p(a,u):(r=i[e]=s[e](a),r.c()),M(r,1),r.m(t.parentNode,t))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){i[e].d(a),a&&p(t)}}}function Hf(o){let e,r,t;function n(l,a){return l[23].content.length>80?Gf:Kf}let s=n(o),i=s(o);return{c(){e=g("span"),r=g("a"),i.c(),this.h()},l(l){e=k(l,"SPAN",{class:!0});var a=w(e);r=k(a,"A",{class:!0,href:!0,target:!0});var u=w(r);i.l(u),u.forEach(p),a.forEach(p),this.h()},h(){y(r,"class","anchor example svelte-zj6vf6"),y(r,"href",t=o[23].content),y(r,"target","_blank"),y(e,"class","break-all whitespace-pre-wrap")},m(l,a){C(l,e,a),v(e,r),i.m(r,null)},p(l,a){s===(s=n(l))&&i?i.p(l,a):(i.d(1),i=s(l),i&&(i.c(),i.m(r,null))),a&6&&t!==(t=l[23].content)&&y(r,"href",t)},i:Q,o:Q,d(l){l&&p(e),i.d()}}}function Qf(o){let e,r;return e=new Nu({props:{ogp:o[5][o[23].content],url:o[23].content}}),{c(){se(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ae(e,t,n),r=!0},p(t,n){const s={};n&38&&(s.ogp=t[5][t[23].content]),n&6&&(s.url=t[23].content),e.$set(s)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){le(e,t)}}}function Kf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&T(r,e)},d(t){t&&p(r)}}}function Gf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,s){C(n,r,s),C(n,t,s)},p(n,s){s&6&&e!==(e=n[23].content.slice(0,75)+"")&&T(r,e)},d(n){n&&p(r),n&&p(t)}}}function Jf(o){let e,r,t,n;function s(a,u){return a[23].content.length>80?Wf:zf}let i=s(o),l=i(o);return{c(){e=g("span"),r=g("a"),l.c(),n=U(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),u.forEach(p),n=V(a),this.h()},h(){y(r,"class","anchor example svelte-zj6vf6"),y(r,"href",t=o[23].content),y(r,"target","_blank"),y(e,"class","break-all whitespace-pre-wrap")},m(a,u){C(a,e,u),v(e,r),l.m(r,null),C(a,n,u)},p(a,u){i===(i=s(a))&&l?l.p(a,u):(l.d(1),l=i(a),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=a[23].content)&&y(r,"href",t)},i:Q,o:Q,d(a){a&&p(e),l.d(),a&&p(n)}}}function zf(o){let e=o[23].content+"",r;return{c(){r=O(e)},l(t){r=I(t,e)},m(t,n){C(t,r,n)},p(t,n){n&6&&e!==(e=t[23].content+"")&&T(r,e)},d(t){t&&p(r)}}}function Wf(o){let e=o[23].content.slice(0,75)+"",r,t;return{c(){r=O(e),t=O("...")},l(n){r=I(n,e),t=I(n,"...")},m(n,s){C(n,r,s),C(n,t,s)},p(n,s){s&6&&e!==(e=n[23].content.slice(0,75)+"")&&T(r,e)},d(n){n&&p(r),n&&p(t)}}}function ci(o){let e,r,t=o[23].content.length>0&&ui(o);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,s){t&&t.m(n,s),C(n,e,s),r=!0},p(n,s){n[23].content.length>0?t?(t.p(n,s),s&6&&M(t,1)):(t=ui(n),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(ce(),F(t,1,1,()=>{t=null}),fe())},i(n){r||(M(t),r=!0)},o(n){F(t),r=!1},d(n){t&&t.d(n),n&&p(e)}}}function Yf(o){let e;return{c(){e=O(o[1])},l(r){e=I(r,o[1])},m(r,t){C(r,e,t)},p(r,t){t&2&&T(e,r[1])},i:Q,o:Q,d(r){r&&p(e)}}}function Xf(o){let e,r,t,n,s;const i=[uf,lf],l=[];function a(u,c){return c&5&&(e=null),e==null&&(e=!!(u[2].some(xf)&&u[0]==!1)),e?0:1}return r=a(o,-1),t=l[r]=i[r](o),{c(){t.c(),n=Y()},l(u){t.l(u),n=Y()},m(u,c){l[r].m(u,c),C(u,n,c),s=!0},p(u,[c]){let f=r;r=a(u,c),r===f?l[r].p(u,c):(ce(),F(l[f],1,1,()=>{l[f]=null}),fe(),t=l[r],t?t.p(u,c):(t=l[r]=i[r](u),t.c()),M(t,1),t.m(n.parentNode,n))},i(u){s||(M(t),s=!0)},o(u){F(t),s=!1},d(u){l[r].d(u),u&&p(n)}}}function Zf(o,e){e||(e=window.location.href),o=o.replace(/[\[\]]/g,"\\$&");const t=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)").exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}const xf=o=>o[0]==="content-warning",fi=o=>o[0]==="content-warning";function ed(o,e,r){let t,n;ke(o,on,N=>r(19,t=N)),ke(o,Je,N=>r(5,n=N));let{id:s}=e,{text:i}=e,{tag:l}=e,{URLPreview:a}=e,{isPageOwner:u}=e;const c={ref:Mu,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function f(N){if(typeof N=="string"){const K={type:"component",image:N,component:c};ye.trigger(K)}}function d(N){try{return x.decode(N),!0}catch{return!1}}async function h(N){if(!n[N]||n[N].title==="")try{const K=await Os(N);Je.update(Z=>({...Z,[N]:K}))}catch(K){console.log(K),ze(Je,n[N].title="",n),ze(Je,n[N].image="",n),ze(Je,n[N].description="",n),ze(Je,n[N].favicon="",n)}}const _=N=>{const K=new URL(N);if(K.hostname==="youtu.be")return K.pathname.substring(1);if(K.hostname==="www.youtube.com"||K.hostname==="m.youtube.com")return K.pathname.startsWith("/shorts/")?K.pathname.replace("/shorts/",""):Zf("v",N)},m={ref:Fr,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function b(N,K){console.log(N);const Z={type:"component",value:{metadata:N,pubkey:K},component:m};ye.trigger(Z)}async function E(N,K){if(s in t)return t[s];{const Z=await Pu(N,K);return ze(on,t[s]=Z,t),Z}}let{view:S=!1}=e;function q(){r(0,S=!0)}const R=N=>f(N.url),H=N=>f(N.content),P=(N,K)=>{const Z=N.number===void 0?0:N.number;b(K,l[Z][1])},A=N=>{console.log(N.number),N.number!==void 0&&sn(`../t/${l[N.number][1]}`)},j=N=>{sn(`../t/${N.content.slice(1)}`)};return o.$$set=N=>{"id"in N&&r(13,s=N.id),"text"in N&&r(1,i=N.text),"tag"in N&&r(2,l=N.tag),"URLPreview"in N&&r(3,a=N.URLPreview),"isPageOwner"in N&&r(4,u=N.isPageOwner),"view"in N&&r(0,S=N.view)},[S,i,l,a,u,n,f,d,h,_,b,E,q,s,R,H,P,A,j]}class Ae extends Ee{constructor(e){super(),Oe(this,e,ed,Xf,we,{id:13,text:1,tag:2,URLPreview:3,isPageOwner:4,view:0})}}export{Ae as C,ad as M,ld as N,as as S,St as T,Ze as a,yd as b,Fr as c,ss as d,Le as e,dd as f,Io as g,fd as h,_d as i,pd as j,Xi as k,wa as l,ye as m,Cr as n,cd as o,Xt as p,ud as s,hd as t,vd as u,md as w};
