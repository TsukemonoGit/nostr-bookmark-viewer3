import{S as De,i as Re,s as Pe,C as Oe,k as g,a as F,l as k,m as w,c as U,h as p,n as m,b as I,F as v,g as A,v as te,d as j,f as re,G as Se,I as Ie,J as Ce,R as Kr,N as He,O as Ye,P as Y,Q as Qe,M as nt,V as Be,a8 as da,a9 as nr,ab as Gr,ac as cn,T as it,w as ha,e as Z,L as Ue,U as _a,K as H,a2 as pa,_ as Lr,an as ft,x as fn,y as ie,z as le,A as oe,ao as va,B as ae,a7 as ue,q as C,r as q,Y as ir,u as N,H as ma,E as ya,o as ba,ap as go,aq as at,ad as hr,a5 as Xe,a6 as _r,a1 as ct,Z as pr}from"./index.2325ee3b.js";import{q as or,r as dn,s as ga,G as ka,v as ko,w as wa,x as Ea,y as Oa,z as Sa,n as X,t as ar,A as hn,b as wo,R as Ia,f as Ca,u as Ze,B as _n,C as ut,D as qa}from"./navigation.b09c0480.js";import"./ProgressBar.svelte_svelte_type_style_lang.7cb4d88a.js";import{w as sr,r as Bt,d as tr}from"./index.5c2dc23e.js";function Pa(){const{subscribe:n,set:e,update:r}=sr([]);return{subscribe:n,set:e,update:r,trigger:t=>r(i=>(i.push(t),i)),close:()=>r(t=>(t.length>0&&t.shift(),t)),clear:()=>e([])}}const qe=Pa();function Da(n,e){const r='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let t,i;function o(f){f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),i.focus())}function a(f){!f.shiftKey&&f.code==="Tab"&&(f.preventDefault(),t.focus())}const l=f=>{if(e===!1)return;const d=Array.from(n.querySelectorAll(r));d.length&&(t=d[0],i=d[d.length-1],f||t.focus(),t.addEventListener("keydown",o),i.addEventListener("keydown",a))};l(!1);function s(){t&&t.removeEventListener("keydown",o),i&&i.removeEventListener("keydown",a)}const u=(f,d)=>(f.length&&(s(),l(!0)),d),c=new MutationObserver(u);return c.observe(n,{childList:!0,subtree:!0}),{update(f){e=f,f?l(!1):s()},destroy(){s(),c.disconnect()}}}const Ra=n=>({}),pn=n=>({}),Ta=n=>({}),vn=n=>({}),Aa=n=>({}),mn=n=>({});function yn(n){let e,r,t;const i=n[22].lead,o=Oe(i,n,n[21],mn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",r="app-bar-slot-lead "+n[4])},m(a,l){I(a,e,l),o&&o.m(e,null),t=!0},p(a,l){o&&o.p&&(!t||l&2097152)&&Se(o,i,a,a[21],t?Ce(i,a[21],l,Aa):Ie(a[21]),mn),(!t||l&16&&r!==(r="app-bar-slot-lead "+a[4]))&&m(e,"class",r)},i(a){t||(A(o,a),t=!0)},o(a){j(o,a),t=!1},d(a){a&&p(e),o&&o.d(a)}}}function bn(n){let e,r,t;const i=n[22].trail,o=Oe(i,n,n[21],vn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",r="app-bar-slot-trail "+n[2])},m(a,l){I(a,e,l),o&&o.m(e,null),t=!0},p(a,l){o&&o.p&&(!t||l&2097152)&&Se(o,i,a,a[21],t?Ce(i,a[21],l,Ta):Ie(a[21]),vn),(!t||l&4&&r!==(r="app-bar-slot-trail "+a[2]))&&m(e,"class",r)},i(a){t||(A(o,a),t=!0)},o(a){j(o,a),t=!1},d(a){a&&p(e),o&&o.d(a)}}}function gn(n){let e,r,t;const i=n[22].headline,o=Oe(i,n,n[21],pn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",r="app-bar-row-headline "+n[5])},m(a,l){I(a,e,l),o&&o.m(e,null),t=!0},p(a,l){o&&o.p&&(!t||l&2097152)&&Se(o,i,a,a[21],t?Ce(i,a[21],l,Ra):Ie(a[21]),pn),(!t||l&32&&r!==(r="app-bar-row-headline "+a[5]))&&m(e,"class",r)},i(a){t||(A(o,a),t=!0)},o(a){j(o,a),t=!1},d(a){a&&p(e),o&&o.d(a)}}}function Ma(n){let e,r,t,i,o,a,l,s,u,c,f=n[8].lead&&yn(n);const d=n[22].default,h=Oe(d,n,n[21],null);let _=n[8].trail&&bn(n),y=n[8].headline&&gn(n);return{c(){e=g("div"),r=g("div"),f&&f.c(),t=F(),i=g("div"),h&&h.c(),a=F(),_&&_.c(),s=F(),y&&y.c(),this.h()},l(b){e=k(b,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-labelledby":!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);f&&f.l(S),t=U(S),i=k(S,"DIV",{class:!0});var D=w(i);h&&h.l(D),D.forEach(p),a=U(S),_&&_.l(S),S.forEach(p),s=U(E),y&&y.l(E),E.forEach(p),this.h()},h(){m(i,"class",o="app-bar-slot-default "+n[3]),m(r,"class",l="app-bar-row-main "+n[6]),m(e,"class",u="app-bar "+n[7]),m(e,"data-testid","app-bar"),m(e,"role","toolbar"),m(e,"aria-label",n[0]),m(e,"aria-labelledby",n[1])},m(b,E){I(b,e,E),v(e,r),f&&f.m(r,null),v(r,t),v(r,i),h&&h.m(i,null),v(r,a),_&&_.m(r,null),v(e,s),y&&y.m(e,null),c=!0},p(b,[E]){b[8].lead?f?(f.p(b,E),E&256&&A(f,1)):(f=yn(b),f.c(),A(f,1),f.m(r,t)):f&&(te(),j(f,1,1,()=>{f=null}),re()),h&&h.p&&(!c||E&2097152)&&Se(h,d,b,b[21],c?Ce(d,b[21],E,null):Ie(b[21]),null),(!c||E&8&&o!==(o="app-bar-slot-default "+b[3]))&&m(i,"class",o),b[8].trail?_?(_.p(b,E),E&256&&A(_,1)):(_=bn(b),_.c(),A(_,1),_.m(r,null)):_&&(te(),j(_,1,1,()=>{_=null}),re()),(!c||E&64&&l!==(l="app-bar-row-main "+b[6]))&&m(r,"class",l),b[8].headline?y?(y.p(b,E),E&256&&A(y,1)):(y=gn(b),y.c(),A(y,1),y.m(e,null)):y&&(te(),j(y,1,1,()=>{y=null}),re()),(!c||E&128&&u!==(u="app-bar "+b[7]))&&m(e,"class",u),(!c||E&1)&&m(e,"aria-label",b[0]),(!c||E&2)&&m(e,"aria-labelledby",b[1])},i(b){c||(A(f),A(h,b),A(_),A(y),c=!0)},o(b){j(f),j(h,b),j(_),j(y),c=!1},d(b){b&&p(e),f&&f.d(),h&&h.d(b),_&&_.d(),y&&y.d()}}}const La="flex flex-col",ja="grid items-center",Na="",Va="flex-none flex justify-between items-center",Fa="flex-auto",Ua="flex-none flex items-center space-x-4";function Ba(n,e,r){let t,i,o,a,l,s,{$$slots:u={},$$scope:c}=e;const f=Kr(u);let{background:d="bg-surface-100-800-token"}=e,{border:h=""}=e,{padding:_="p-4"}=e,{shadow:y=""}=e,{spacing:b="space-y-4"}=e,{gridColumns:E="grid-cols-[auto_1fr_auto]"}=e,{gap:S="gap-4"}=e,{regionRowMain:D=""}=e,{regionRowHeadline:T=""}=e,{slotLead:L=""}=e,{slotDefault:O=""}=e,{slotTrail:P=""}=e,{label:R=""}=e,{labelledby:M=""}=e;return n.$$set=Q=>{r(23,e=He(He({},e),Ye(Q))),"background"in Q&&r(9,d=Q.background),"border"in Q&&r(10,h=Q.border),"padding"in Q&&r(11,_=Q.padding),"shadow"in Q&&r(12,y=Q.shadow),"spacing"in Q&&r(13,b=Q.spacing),"gridColumns"in Q&&r(14,E=Q.gridColumns),"gap"in Q&&r(15,S=Q.gap),"regionRowMain"in Q&&r(16,D=Q.regionRowMain),"regionRowHeadline"in Q&&r(17,T=Q.regionRowHeadline),"slotLead"in Q&&r(18,L=Q.slotLead),"slotDefault"in Q&&r(19,O=Q.slotDefault),"slotTrail"in Q&&r(20,P=Q.slotTrail),"label"in Q&&r(0,R=Q.label),"labelledby"in Q&&r(1,M=Q.labelledby),"$$scope"in Q&&r(21,c=Q.$$scope)},n.$$.update=()=>{r(7,t=`${La} ${d} ${h} ${b} ${_} ${y} ${e.class??""}`),n.$$.dirty&114688&&r(6,i=`${ja} ${E} ${S} ${D}`),n.$$.dirty&131072&&r(5,o=`${Na} ${T}`),n.$$.dirty&262144&&r(4,a=`${Va} ${L}`),n.$$.dirty&524288&&r(3,l=`${Fa} ${O}`),n.$$.dirty&1048576&&r(2,s=`${Ua} ${P}`)},e=Ye(e),[R,M,s,l,a,o,i,t,f,d,h,_,y,b,E,S,D,T,L,O,P,c,u]}class Dd extends De{constructor(e){super(),Re(this,e,Ba,Ma,Pe,{background:9,border:10,padding:11,shadow:12,spacing:13,gridColumns:14,gap:15,regionRowMain:16,regionRowHeadline:17,slotLead:18,slotDefault:19,slotTrail:20,label:0,labelledby:1})}}const Ha=n=>({}),kn=n=>({});function wn(n){let e,r,t;const i=n[17].panel,o=Oe(i,n,n[16],kn);return{c(){e=g("div"),o&&o.c(),this.h()},l(a){e=k(a,"DIV",{class:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var l=w(e);o&&o.l(l),l.forEach(p),this.h()},h(){m(e,"class",r="tab-panel "+n[2]),m(e,"role","tabpanel"),m(e,"aria-labelledby",n[1]),m(e,"tabindex","0")},m(a,l){I(a,e,l),o&&o.m(e,null),t=!0},p(a,l){o&&o.p&&(!t||l&65536)&&Se(o,i,a,a[16],t?Ce(i,a[16],l,Ha):Ie(a[16]),kn),(!t||l&4&&r!==(r="tab-panel "+a[2]))&&m(e,"class",r),(!t||l&2)&&m(e,"aria-labelledby",a[1])},i(a){t||(A(o,a),t=!0)},o(a){j(o,a),t=!1},d(a){a&&p(e),o&&o.d(a)}}}function Qa(n){let e,r,t,i,o,a,l,s;const u=n[17].default,c=Oe(u,n,n[16],null);let f=n[5].panel&&wn(n);return{c(){e=g("div"),r=g("div"),c&&c.c(),i=F(),f&&f.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,"data-testid":!0});var h=w(e);r=k(h,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var _=w(r);c&&c.l(_),_.forEach(p),i=U(h),f&&f.l(h),h.forEach(p),this.h()},h(){m(r,"class",t="tab-list "+n[3]),m(r,"role","tablist"),m(r,"aria-labelledby",n[0]),m(e,"class",o="tab-group "+n[4]),m(e,"data-testid","tab-group")},m(d,h){I(d,e,h),v(e,r),c&&c.m(r,null),v(e,i),f&&f.m(e,null),a=!0,l||(s=[Y(e,"click",n[18]),Y(e,"keypress",n[19]),Y(e,"keydown",n[20]),Y(e,"keyup",n[21])],l=!0)},p(d,[h]){c&&c.p&&(!a||h&65536)&&Se(c,u,d,d[16],a?Ce(u,d[16],h,null):Ie(d[16]),null),(!a||h&8&&t!==(t="tab-list "+d[3]))&&m(r,"class",t),(!a||h&1)&&m(r,"aria-labelledby",d[0]),d[5].panel?f?(f.p(d,h),h&32&&A(f,1)):(f=wn(d),f.c(),A(f,1),f.m(e,null)):f&&(te(),j(f,1,1,()=>{f=null}),re()),(!a||h&16&&o!==(o="tab-group "+d[4]))&&m(e,"class",o)},i(d){a||(A(c,d),A(f),a=!0)},o(d){j(c,d),j(f),a=!1},d(d){d&&p(e),c&&c.d(d),f&&f.d(),l=!1,Qe(s)}}}const Ka="space-y-4",Ga="flex overflow-x-auto hide-scrollbar",Ja="";function za(n,e,r){let t,i,o,{$$slots:a={},$$scope:l}=e;const s=Kr(a);let{justify:u="justify-start"}=e,{border:c="border-b border-surface-400-500-token"}=e,{active:f="border-b-2 border-surface-900-50-token"}=e,{hover:d="hover:variant-soft"}=e,{flex:h="flex-none"}=e,{padding:_="px-4 py-2"}=e,{rounded:y="rounded-tl-container-token rounded-tr-container-token"}=e,{spacing:b="space-y-1"}=e,{regionList:E=""}=e,{regionPanel:S=""}=e,{labelledby:D=""}=e,{panel:T=""}=e;nt("active",f),nt("hover",d),nt("flex",h),nt("padding",_),nt("rounded",y),nt("spacing",b);function L(M){Be.call(this,n,M)}function O(M){Be.call(this,n,M)}function P(M){Be.call(this,n,M)}function R(M){Be.call(this,n,M)}return n.$$set=M=>{r(22,e=He(He({},e),Ye(M))),"justify"in M&&r(6,u=M.justify),"border"in M&&r(7,c=M.border),"active"in M&&r(8,f=M.active),"hover"in M&&r(9,d=M.hover),"flex"in M&&r(10,h=M.flex),"padding"in M&&r(11,_=M.padding),"rounded"in M&&r(12,y=M.rounded),"spacing"in M&&r(13,b=M.spacing),"regionList"in M&&r(14,E=M.regionList),"regionPanel"in M&&r(15,S=M.regionPanel),"labelledby"in M&&r(0,D=M.labelledby),"panel"in M&&r(1,T=M.panel),"$$scope"in M&&r(16,l=M.$$scope)},n.$$.update=()=>{r(4,t=`${Ka} ${e.class??""}`),n.$$.dirty&16576&&r(3,i=`${Ga} ${u} ${c} ${E}`),n.$$.dirty&32768&&r(2,o=`${Ja} ${S}`)},e=Ye(e),[D,T,o,i,t,s,u,c,f,d,h,_,y,b,E,S,l,a,L,O,P,R]}class Rd extends De{constructor(e){super(),Re(this,e,za,Qa,Pe,{justify:6,border:7,active:8,hover:9,flex:10,padding:11,rounded:12,spacing:13,regionList:14,regionPanel:15,labelledby:0,panel:1})}}const Wa=n=>({}),En=n=>({});function On(n){let e,r;const t=n[22].lead,i=Oe(t,n,n[21],En);return{c(){e=g("div"),i&&i.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=w(e);i&&i.l(a),a.forEach(p),this.h()},h(){m(e,"class","tab-lead")},m(o,a){I(o,e,a),i&&i.m(e,null),r=!0},p(o,a){i&&i.p&&(!r||a[0]&2097152)&&Se(i,t,o,o[21],r?Ce(t,o[21],a,Wa):Ie(o[21]),En)},i(o){r||(A(i,o),r=!0)},o(o){j(i,o),r=!1},d(o){o&&p(e),i&&i.d(o)}}}function Ya(n){let e,r,t,i,o,a,l,s,u,c,f,d,h,_,y,b=[{type:"radio"},{name:n[1]},{__value:n[2]},n[11](),{tabindex:"-1"}],E={};for(let L=0;L<b.length;L+=1)E=He(E,b[L]);let S=n[12].lead&&On(n);const D=n[22].default,T=Oe(D,n,n[21],null);return h=da(n[30][0]),{c(){e=g("label"),r=g("div"),t=g("div"),i=g("input"),o=F(),a=g("div"),S&&S.c(),l=F(),s=g("div"),T&&T.c(),this.h()},l(L){e=k(L,"LABEL",{class:!0,title:!0});var O=w(e);r=k(O,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0});var P=w(r);t=k(P,"DIV",{class:!0});var R=w(t);i=k(R,"INPUT",{type:!0,name:!0,tabindex:!0}),R.forEach(p),o=U(P),a=k(P,"DIV",{class:!0});var M=w(a);S&&S.l(M),l=U(M),s=k(M,"DIV",{class:!0});var Q=w(s);T&&T.l(Q),Q.forEach(p),M.forEach(p),P.forEach(p),O.forEach(p),this.h()},h(){nr(i,E),m(t,"class","h-0 w-0 overflow-hidden"),m(s,"class","tab-label"),m(a,"class",u="tab-interface "+n[8]),m(r,"class",c="tab "+n[7]),m(r,"data-testid","tab"),m(r,"role","tab"),m(r,"aria-controls",n[4]),m(r,"aria-selected",n[5]),m(r,"tabindex",f=n[5]?0:-1),m(e,"class",n[9]),m(e,"title",n[3]),h.p(i)},m(L,O){I(L,e,O),v(e,r),v(r,t),v(t,i),i.autofocus&&i.focus(),n[28](i),i.checked=i.__value===n[0],v(r,o),v(r,a),S&&S.m(a,null),v(a,l),v(a,s),T&&T.m(s,null),d=!0,_||(y=[Y(i,"change",n[29]),Y(i,"click",n[26]),Y(i,"change",n[27]),Y(r,"keydown",n[10]),Y(r,"keydown",n[23]),Y(r,"keyup",n[24]),Y(r,"keypress",n[25])],_=!0)},p(L,O){nr(i,E=Gr(b,[{type:"radio"},(!d||O[0]&2)&&{name:L[1]},(!d||O[0]&4)&&{__value:L[2]},L[11](),{tabindex:"-1"}])),O[0]&1&&(i.checked=i.__value===L[0]),L[12].lead?S?(S.p(L,O),O[0]&4096&&A(S,1)):(S=On(L),S.c(),A(S,1),S.m(a,l)):S&&(te(),j(S,1,1,()=>{S=null}),re()),T&&T.p&&(!d||O[0]&2097152)&&Se(T,D,L,L[21],d?Ce(D,L[21],O,null):Ie(L[21]),null),(!d||O[0]&256&&u!==(u="tab-interface "+L[8]))&&m(a,"class",u),(!d||O[0]&128&&c!==(c="tab "+L[7]))&&m(r,"class",c),(!d||O[0]&16)&&m(r,"aria-controls",L[4]),(!d||O[0]&32)&&m(r,"aria-selected",L[5]),(!d||O[0]&32&&f!==(f=L[5]?0:-1))&&m(r,"tabindex",f),(!d||O[0]&512)&&m(e,"class",L[9]),(!d||O[0]&8)&&m(e,"title",L[3])},i(L){d||(A(S),A(T,L),d=!0)},o(L){j(S),j(T,L),d=!1},d(L){L&&p(e),n[28](null),S&&S.d(),T&&T.d(L),h.r(),_=!1,Qe(y)}}}const Xa="text-center cursor-pointer transition-colors duration-100",Za="";function $a(n,e,r){let t,i,o,a,l;const s=["group","name","value","title","controls","regionTab","active","hover","flex","padding","rounded","spacing"];let u=cn(e,s),{$$slots:c={},$$scope:f}=e;const d=Kr(c);let{group:h}=e,{name:_}=e,{value:y}=e,{title:b=""}=e,{controls:E=""}=e,{regionTab:S=""}=e,{active:D=it("active")}=e,{hover:T=it("hover")}=e,{flex:L=it("flex")}=e,{padding:O=it("padding")}=e,{rounded:P=it("rounded")}=e,{spacing:R=it("spacing")}=e,M;function Q(J){if(["Enter","Space"].includes(J.code))J.preventDefault(),M.click();else if(J.code==="ArrowRight"){const de=M.closest(".tab-list");if(!de)return;const pe=Array.from(de.querySelectorAll(".tab")),se=M.closest(".tab");if(!se)return;const ne=pe.indexOf(se),ce=ne+1>=pe.length?0:ne+1,ve=pe[ce],Te=ve==null?void 0:ve.querySelector("input");ve&&Te&&(Te.click(),ve.focus())}else if(J.code==="ArrowLeft"){const de=M.closest(".tab-list");if(!de)return;const pe=Array.from(de.querySelectorAll(".tab")),se=M.closest(".tab");if(!se)return;const ne=pe.indexOf(se),ce=ne-1<0?pe.length-1:ne-1,ve=pe[ce],Te=ve==null?void 0:ve.querySelector("input");ve&&Te&&(Te.click(),ve.focus())}}function $(){return delete u.class,u}const z=[[]];function x(J){Be.call(this,n,J)}function _e(J){Be.call(this,n,J)}function W(J){Be.call(this,n,J)}function K(J){Be.call(this,n,J)}function G(J){Be.call(this,n,J)}function ee(J){ha[J?"unshift":"push"](()=>{M=J,r(6,M)})}function fe(){h=this.__value,r(0,h)}return n.$$set=J=>{r(32,e=He(He({},e),Ye(J))),r(31,u=cn(e,s)),"group"in J&&r(0,h=J.group),"name"in J&&r(1,_=J.name),"value"in J&&r(2,y=J.value),"title"in J&&r(3,b=J.title),"controls"in J&&r(4,E=J.controls),"regionTab"in J&&r(13,S=J.regionTab),"active"in J&&r(14,D=J.active),"hover"in J&&r(15,T=J.hover),"flex"in J&&r(16,L=J.flex),"padding"in J&&r(17,O=J.padding),"rounded"in J&&r(18,P=J.rounded),"spacing"in J&&r(19,R=J.spacing),"$$scope"in J&&r(21,f=J.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&5&&r(5,t=y===h),n.$$.dirty[0]&49184&&r(20,i=t?D:T),r(9,o=`${Xa} ${L} ${O} ${P} ${i} ${e.class??""}`),n.$$.dirty[0]&524288&&r(8,a=`${Za} ${R}`),n.$$.dirty[0]&8192&&r(7,l=`${S}`)},e=Ye(e),[h,_,y,b,E,t,M,l,a,o,Q,$,d,S,D,T,L,O,P,R,i,f,c,x,_e,W,K,G,ee,fe,z]}class Td extends De{constructor(e){super(),Re(this,e,$a,Ya,Pe,{group:0,name:1,value:2,title:3,controls:4,regionTab:13,active:14,hover:15,flex:16,padding:17,rounded:18,spacing:19},null,[-1,-1])}}function Sn(n){let e=n[12],r,t,i=Dn(n);return{c(){i.c(),r=Z()},l(o){i.l(o),r=Z()},m(o,a){i.m(o,a),I(o,r,a),t=!0},p(o,a){a[0]&4096&&Pe(e,e=o[12])?(te(),j(i,1,1,H),re(),i=Dn(o),i.c(),A(i,1),i.m(r.parentNode,r)):i.p(o,a)},i(o){t||(A(i),t=!0)},o(o){j(i),t=!1},d(o){o&&p(r),i.d(o)}}}function xa(n){var u,c;let e,r,t,i,o;const a=[(u=n[14])==null?void 0:u.props,{parent:n[15]}];var l=(c=n[14])==null?void 0:c.ref;function s(f){let d={$$slots:{default:[ts]},$$scope:{ctx:f}};for(let h=0;h<a.length;h+=1)d=He(d,a[h]);return{props:d}}return l&&(r=fn(l,s(n))),{c(){e=g("div"),r&&ie(r.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var d=w(e);r&&le(r.$$.fragment,d),d.forEach(p),this.h()},h(){var f;m(e,"class",t="modal contents "+(((f=n[12][0])==null?void 0:f.modalClasses)??"")),m(e,"data-testid","modal-component"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",i=n[12][0].title??"")},m(f,d){I(f,e,d),r&&oe(r,e,null),o=!0},p(f,d){var _,y,b;const h=d[0]&49152?Gr(a,[d[0]&16384&&va((_=f[14])==null?void 0:_.props),d[0]&32768&&{parent:f[15]}]):{};if(d[0]&16384|d[1]&8192&&(h.$$scope={dirty:d,ctx:f}),d[0]&16384&&l!==(l=(y=f[14])==null?void 0:y.ref)){if(r){te();const E=r;j(E.$$.fragment,1,0,()=>{ae(E,1)}),re()}l?(r=fn(l,s(f)),ie(r.$$.fragment),A(r.$$.fragment,1),oe(r,e,null)):r=null}else l&&r.$set(h);(!o||d[0]&4096&&t!==(t="modal contents "+(((b=f[12][0])==null?void 0:b.modalClasses)??"")))&&m(e,"class",t),(!o||d[0]&4096&&i!==(i=f[12][0].title??""))&&m(e,"aria-label",i)},i(f){o||(r&&A(r.$$.fragment,f),o=!0)},o(f){r&&j(r.$$.fragment,f),o=!1},d(f){f&&p(e),r&&ae(r)}}}function es(n){var y,b,E,S;let e,r,t,i,o,a,l,s,u=((y=n[12][0])==null?void 0:y.title)&&Cn(n),c=((b=n[12][0])==null?void 0:b.body)&&qn(n),f=((E=n[12][0])==null?void 0:E.image)&&typeof((S=n[12][0])==null?void 0:S.image)=="string"&&Pn(n);function d(D,T){if(D[12][0].type==="alert")return is;if(D[12][0].type==="confirm")return ns;if(D[12][0].type==="prompt")return rs}let h=d(n),_=h&&h(n);return{c(){e=g("div"),u&&u.c(),r=F(),c&&c.c(),t=F(),f&&f.c(),i=F(),_&&_.c(),this.h()},l(D){e=k(D,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var T=w(e);u&&u.l(T),r=U(T),c&&c.l(T),t=U(T),f&&f.l(T),i=U(T),_&&_.l(T),T.forEach(p),this.h()},h(){m(e,"class",o="modal "+n[16]),m(e,"data-testid","modal"),m(e,"role","dialog"),m(e,"aria-modal","true"),m(e,"aria-label",a=n[12][0].title??"")},m(D,T){I(D,e,T),u&&u.m(e,null),v(e,r),c&&c.m(e,null),v(e,t),f&&f.m(e,null),v(e,i),_&&_.m(e,null),s=!0},p(D,T){var L,O,P,R;n=D,(L=n[12][0])!=null&&L.title?u?u.p(n,T):(u=Cn(n),u.c(),u.m(e,r)):u&&(u.d(1),u=null),(O=n[12][0])!=null&&O.body?c?c.p(n,T):(c=qn(n),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(P=n[12][0])!=null&&P.image&&typeof((R=n[12][0])==null?void 0:R.image)=="string"?f?f.p(n,T):(f=Pn(n),f.c(),f.m(e,i)):f&&(f.d(1),f=null),h===(h=d(n))&&_?_.p(n,T):(_&&_.d(1),_=h&&h(n),_&&(_.c(),_.m(e,null))),(!s||T[0]&65536&&o!==(o="modal "+n[16]))&&m(e,"class",o),(!s||T[0]&4096&&a!==(a=n[12][0].title??""))&&m(e,"aria-label",a)},i(D){s||(Lr(()=>{s&&(l||(l=ft(e,or,{duration:n[3],opacity:0,y:100},!0)),l.run(1))}),s=!0)},o(D){l||(l=ft(e,or,{duration:n[3],opacity:0,y:100},!1)),l.run(0),s=!1},d(D){D&&p(e),u&&u.d(),c&&c.d(),f&&f.d(),_&&_.d(),D&&l&&l.end()}}}function In(n){var i;let e,r=((i=n[14])==null?void 0:i.slot)+"",t;return{c(){e=new ma(!1),t=Z(),this.h()},l(o){e=ya(o,!1),t=Z(),this.h()},h(){e.a=t},m(o,a){e.m(r,o,a),I(o,t,a)},p(o,a){var l;a[0]&16384&&r!==(r=((l=o[14])==null?void 0:l.slot)+"")&&e.p(r)},d(o){o&&p(t),o&&e.d()}}}function ts(n){var t;let e,r=((t=n[14])==null?void 0:t.slot)&&In(n);return{c(){r&&r.c(),e=Z()},l(i){r&&r.l(i),e=Z()},m(i,o){r&&r.m(i,o),I(i,e,o)},p(i,o){var a;(a=i[14])!=null&&a.slot?r?r.p(i,o):(r=In(i),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&p(e)}}}function Cn(n){let e,r=n[12][0].title+"",t;return{c(){e=g("header"),this.h()},l(i){e=k(i,"HEADER",{class:!0});var o=w(e);o.forEach(p),this.h()},h(){m(e,"class",t="modal-header "+n[9])},m(i,o){I(i,e,o),e.innerHTML=r},p(i,o){o[0]&4096&&r!==(r=i[12][0].title+"")&&(e.innerHTML=r),o[0]&512&&t!==(t="modal-header "+i[9])&&m(e,"class",t)},d(i){i&&p(e)}}}function qn(n){let e,r=n[12][0].body+"",t;return{c(){e=g("article"),this.h()},l(i){e=k(i,"ARTICLE",{class:!0});var o=w(e);o.forEach(p),this.h()},h(){m(e,"class",t="modal-body "+n[10])},m(i,o){I(i,e,o),e.innerHTML=r},p(i,o){o[0]&4096&&r!==(r=i[12][0].body+"")&&(e.innerHTML=r),o[0]&1024&&t!==(t="modal-body "+i[10])&&m(e,"class",t)},d(i){i&&p(e)}}}function Pn(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var t;m(e,"class","modal-image "+us),ue(e.src,r=(t=n[12][0])==null?void 0:t.image)||m(e,"src",r),m(e,"alt","Modal")},m(t,i){I(t,e,i)},p(t,i){var o;i[0]&4096&&!ue(e.src,r=(o=t[12][0])==null?void 0:o.image)&&m(e,"src",r)},d(t){t&&p(e)}}}function rs(n){let e,r,t,i,o,a,l,s,u,c,f,d,h,_,y=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},n[12][0].valueAttr],b={};for(let E=0;E<y.length;E+=1)b=He(b,y[E]);return{c(){e=g("form"),r=g("input"),t=F(),i=g("footer"),o=g("button"),a=C(n[0]),s=F(),u=g("button"),c=C(n[2]),this.h()},l(E){e=k(E,"FORM",{class:!0});var S=w(e);r=k(S,"INPUT",{class:!0,name:!0,type:!0}),t=U(S),i=k(S,"FOOTER",{class:!0});var D=w(i);o=k(D,"BUTTON",{type:!0,class:!0});var T=w(o);a=q(T,n[0]),T.forEach(p),s=U(D),u=k(D,"BUTTON",{type:!0,class:!0});var L=w(u);c=q(L,n[2]),L.forEach(p),D.forEach(p),S.forEach(p),this.h()},h(){nr(r,b),m(o,"type","button"),m(o,"class",l="btn "+n[7]),m(u,"type","submit"),m(u,"class",f="btn "+n[8]),m(i,"class",d="modal-footer "+n[11]),m(e,"class","space-y-4")},m(E,S){I(E,e,S),v(e,r),r.autofocus&&r.focus(),ir(r,n[13]),v(e,t),v(e,i),v(i,o),v(o,a),v(i,s),v(i,u),v(u,c),h||(_=[Y(r,"input",n[39]),Y(o,"click",n[21]),Y(e,"submit",n[23])],h=!0)},p(E,S){nr(r,b=Gr(y,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},S[0]&4096&&E[12][0].valueAttr])),S[0]&8192&&r.value!==E[13]&&ir(r,E[13]),S[0]&1&&N(a,E[0]),S[0]&128&&l!==(l="btn "+E[7])&&m(o,"class",l),S[0]&4&&N(c,E[2]),S[0]&256&&f!==(f="btn "+E[8])&&m(u,"class",f),S[0]&2048&&d!==(d="modal-footer "+E[11])&&m(i,"class",d)},d(E){E&&p(e),h=!1,Qe(_)}}}function ns(n){let e,r,t,i,o,a,l,s,u,c,f;return{c(){e=g("footer"),r=g("button"),t=C(n[0]),o=F(),a=g("button"),l=C(n[1]),this.h()},l(d){e=k(d,"FOOTER",{class:!0});var h=w(e);r=k(h,"BUTTON",{type:!0,class:!0});var _=w(r);t=q(_,n[0]),_.forEach(p),o=U(h),a=k(h,"BUTTON",{type:!0,class:!0});var y=w(a);l=q(y,n[1]),y.forEach(p),h.forEach(p),this.h()},h(){m(r,"type","button"),m(r,"class",i="btn "+n[7]),m(a,"type","button"),m(a,"class",s="btn "+n[8]),m(e,"class",u="modal-footer "+n[11])},m(d,h){I(d,e,h),v(e,r),v(r,t),v(e,o),v(e,a),v(a,l),c||(f=[Y(r,"click",n[21]),Y(a,"click",n[22])],c=!0)},p(d,h){h[0]&1&&N(t,d[0]),h[0]&128&&i!==(i="btn "+d[7])&&m(r,"class",i),h[0]&2&&N(l,d[1]),h[0]&256&&s!==(s="btn "+d[8])&&m(a,"class",s),h[0]&2048&&u!==(u="modal-footer "+d[11])&&m(e,"class",u)},d(d){d&&p(e),c=!1,Qe(f)}}}function is(n){let e,r,t,i,o,a,l;return{c(){e=g("footer"),r=g("button"),t=C(n[0]),this.h()},l(s){e=k(s,"FOOTER",{class:!0});var u=w(e);r=k(u,"BUTTON",{type:!0,class:!0});var c=w(r);t=q(c,n[0]),c.forEach(p),u.forEach(p),this.h()},h(){m(r,"type","button"),m(r,"class",i="btn "+n[7]),m(e,"class",o="modal-footer "+n[11])},m(s,u){I(s,e,u),v(e,r),v(r,t),a||(l=Y(r,"click",n[21]),a=!0)},p(s,u){u[0]&1&&N(t,s[0]),u[0]&128&&i!==(i="btn "+s[7])&&m(r,"class",i),u[0]&2048&&o!==(o="modal-footer "+s[11])&&m(e,"class",o)},d(s){s&&p(e),a=!1,l()}}}function Dn(n){let e,r,t,i,o,a,l,s,u,c,f;const d=[es,xa],h=[];function _(y,b){return y[12][0].type!=="component"?0:1}return t=_(n),i=h[t]=d[t](n),{c(){e=g("div"),r=g("div"),i.c(),this.h()},l(y){e=k(y,"DIV",{class:!0,"data-testid":!0});var b=w(e);r=k(b,"DIV",{class:!0});var E=w(r);i.l(E),E.forEach(p),b.forEach(p),this.h()},h(){m(r,"class",o="modal-transition "+n[17]),m(e,"class",l="modal-backdrop "+n[18]),m(e,"data-testid","modal-backdrop")},m(y,b){I(y,e,b),v(e,r),h[t].m(r,null),u=!0,c||(f=[Y(e,"mousedown",n[19]),Y(e,"mouseup",n[20]),Y(e,"touchstart",n[37],{passive:!0}),Y(e,"touchend",n[38],{passive:!0}),pa(Da.call(null,e,!0))],c=!0)},p(y,b){n=y;let E=t;t=_(n),t===E?h[t].p(n,b):(te(),j(h[E],1,1,()=>{h[E]=null}),re(),i=h[t],i?i.p(n,b):(i=h[t]=d[t](n),i.c()),A(i,1),i.m(r,null)),(!u||b[0]&131072&&o!==(o="modal-transition "+n[17]))&&m(r,"class",o),(!u||b[0]&262144&&l!==(l="modal-backdrop "+n[18]))&&m(e,"class",l)},i(y){u||(A(i),Lr(()=>{u&&(a||(a=ft(r,or,{duration:n[3],opacity:n[4],x:n[5],y:n[6]},!0)),a.run(1))}),Lr(()=>{u&&(s||(s=ft(e,dn,{duration:n[3]},!0)),s.run(1))}),u=!0)},o(y){j(i),a||(a=ft(r,or,{duration:n[3],opacity:n[4],x:n[5],y:n[6]},!1)),a.run(0),s||(s=ft(e,dn,{duration:n[3]},!1)),s.run(0),u=!1},d(y){y&&p(e),h[t].d(),y&&a&&a.end(),y&&s&&s.end(),c=!1,Qe(f)}}}function os(n){let e,r,t,i,o=n[12].length>0&&Sn(n);return{c(){o&&o.c(),e=Z()},l(a){o&&o.l(a),e=Z()},m(a,l){o&&o.m(a,l),I(a,e,l),r=!0,t||(i=Y(window,"keydown",n[24]),t=!0)},p(a,l){a[12].length>0?o?(o.p(a,l),l[0]&4096&&A(o,1)):(o=Sn(a),o.c(),A(o,1),o.m(e.parentNode,e)):o&&(te(),j(o,1,1,()=>{o=null}),re())},i(a){r||(A(o),r=!0)},o(a){j(o),r=!1},d(a){o&&o.d(a),a&&p(e),t=!1,i()}}}const as="fixed top-0 left-0 right-0 bottom-0 overflow-y-auto",ss="w-full h-fit min-h-full p-4 overflow-y-auto flex justify-center",ls="block overflow-y-auto",us="w-full h-auto";function cs(n,e,r){let t,i,o,a,l,s;Ue(n,qe,V=>r(12,s=V));const u=_a();let{position:c="items-center"}=e,{components:f={}}=e,{duration:d=150}=e,{flyOpacity:h=0}=e,{flyX:_=0}=e,{flyY:y=100}=e,{background:b="bg-surface-100-800-token"}=e,{width:E="w-modal"}=e,{height:S="h-auto"}=e,{padding:D="p-4"}=e,{spacing:T="space-y-4"}=e,{rounded:L="rounded-container-token"}=e,{shadow:O="shadow-xl"}=e,{zIndex:P="z-[999]"}=e,{buttonNeutral:R="variant-ghost-surface"}=e,{buttonPositive:M="variant-filled"}=e,{buttonTextCancel:Q="Cancel"}=e,{buttonTextConfirm:$="Confirm"}=e,{buttonTextSubmit:z="Submit"}=e,{regionBackdrop:x="bg-surface-backdrop-token"}=e,{regionHeader:_e="text-2xl font-bold"}=e,{regionBody:W="max-h-[200px] overflow-hidden"}=e,{regionFooter:K="flex justify-end space-x-2"}=e,G;const ee={buttonTextCancel:Q,buttonTextConfirm:$,buttonTextSubmit:z};let fe,J=!1;qe.subscribe(V=>{V.length&&(V[0].type==="prompt"&&r(13,G=V[0].value),r(0,Q=V[0].buttonTextCancel||ee.buttonTextCancel),r(1,$=V[0].buttonTextConfirm||ee.buttonTextConfirm),r(2,z=V[0].buttonTextSubmit||ee.buttonTextSubmit),r(14,fe=typeof V[0].component=="string"?f[V[0].component]:V[0].component))});function de(V){if(!(V.target instanceof Element))return;const ge=V.target.classList;(ge.contains("modal-backdrop")||ge.contains("modal-transition"))&&(J=!0)}function pe(V){if(!(V.target instanceof Element))return;const ge=V.target.classList;(ge.contains("modal-backdrop")||ge.contains("modal-transition"))&&J&&(s[0].response&&s[0].response(void 0),qe.close(),u("backdrop",V)),J=!1}function se(){s[0].response&&s[0].response(!1),qe.close()}function ne(){s[0].response&&s[0].response(!0),qe.close()}function ce(V){V.preventDefault(),s[0].response&&s[0].response(G),qe.close()}function ve(V){s.length&&V.code==="Escape"&&se()}function Te(V){Be.call(this,n,V)}function me(V){Be.call(this,n,V)}function Le(){G=this.value,r(13,G)}return n.$$set=V=>{r(43,e=He(He({},e),Ye(V))),"position"in V&&r(25,c=V.position),"components"in V&&r(26,f=V.components),"duration"in V&&r(3,d=V.duration),"flyOpacity"in V&&r(4,h=V.flyOpacity),"flyX"in V&&r(5,_=V.flyX),"flyY"in V&&r(6,y=V.flyY),"background"in V&&r(27,b=V.background),"width"in V&&r(28,E=V.width),"height"in V&&r(29,S=V.height),"padding"in V&&r(30,D=V.padding),"spacing"in V&&r(31,T=V.spacing),"rounded"in V&&r(32,L=V.rounded),"shadow"in V&&r(33,O=V.shadow),"zIndex"in V&&r(34,P=V.zIndex),"buttonNeutral"in V&&r(7,R=V.buttonNeutral),"buttonPositive"in V&&r(8,M=V.buttonPositive),"buttonTextCancel"in V&&r(0,Q=V.buttonTextCancel),"buttonTextConfirm"in V&&r(1,$=V.buttonTextConfirm),"buttonTextSubmit"in V&&r(2,z=V.buttonTextSubmit),"regionBackdrop"in V&&r(35,x=V.regionBackdrop),"regionHeader"in V&&r(9,_e=V.regionHeader),"regionBody"in V&&r(10,W=V.regionBody),"regionFooter"in V&&r(11,K=V.regionFooter)},n.$$.update=()=>{var V,ge,Ne;n.$$.dirty[0]&33558528&&r(36,t=((V=s[0])==null?void 0:V.position)??c),r(18,i=`${as} ${x} ${P} ${e.class??""} ${((ge=s[0])==null?void 0:ge.backdropClasses)??""}`),n.$$.dirty[1]&32&&r(17,o=`${ss} ${t??""}`),n.$$.dirty[0]&2013270016|n.$$.dirty[1]&7&&r(16,a=`${ls} ${b} ${E} ${S} ${D} ${T} ${L} ${O} ${((Ne=s[0])==null?void 0:Ne.modalClasses)??""}`),n.$$.dirty[0]&2046824447|n.$$.dirty[1]&23&&r(15,l={position:c,duration:d,flyOpacity:h,flyX:_,flyY:y,background:b,width:E,height:S,padding:D,spacing:T,rounded:L,shadow:O,buttonNeutral:R,buttonPositive:M,buttonTextCancel:Q,buttonTextConfirm:$,buttonTextSubmit:z,regionBackdrop:x,regionHeader:_e,regionBody:W,regionFooter:K,onClose:se})},e=Ye(e),[Q,$,z,d,h,_,y,R,M,_e,W,K,s,G,fe,l,a,o,i,de,pe,se,ne,ce,ve,c,f,b,E,S,D,T,L,O,P,x,t,Te,me,Le]}class Ad extends De{constructor(e){super(),Re(this,e,cs,os,Pe,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */const Jr=sr();var jr=function(n,e){return jr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])},jr(n,e)};function zr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jr(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function fs(n,e,r,t){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(c){try{u(t.next(c))}catch(f){a(f)}}function s(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(l,s)}u((t=t.apply(n,e||[])).next())})}function Eo(n,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(c){return s([u,c])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(t=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(n,r)}catch(c){u=[6,c],i=0}finally{t=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ht(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lr(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=t.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return o}function ur(n,e,r){if(r||arguments.length===2)for(var t=0,i=e.length,o;t<i;t++)(o||!(t in e))&&(o||(o=Array.prototype.slice.call(e,0,t)),o[t]=e[t]);return n.concat(o||Array.prototype.slice.call(e))}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function ds(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r.apply(n,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){t[d]&&(i[d]=function(h){return new Promise(function(_,y){o.push([d,h,_,y])>1||l(d,h)})})}function l(d,h){try{s(t[d](h))}catch(_){f(o[0][3],_)}}function s(d){d.value instanceof dt?Promise.resolve(d.value.v).then(u,c):f(o[0][2],d)}function u(d){l("next",d)}function c(d){l("throw",d)}function f(d,h){d(h),o.shift(),o.length&&l(o[0][0],o[0][1])}}function hs(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],r;return e?e.call(n):(n=typeof Ht=="function"?Ht(n):n[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r);function t(o){r[o]=n[o]&&function(a){return new Promise(function(l,s){a=n[o](a),i(l,s,a.done,a.value)})}}function i(o,a,l,s){Promise.resolve(s).then(function(u){o({value:u,done:l})},a)}}function Ee(n){return typeof n=="function"}function _s(n){var e=function(t){Error.call(t),t.stack=new Error().stack},r=n(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var kr=_s(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(t,i){return i+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Rn(n,e){if(n){var r=n.indexOf(e);0<=r&&n.splice(r,1)}}var Wr=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,r,t,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=Ht(a),s=l.next();!s.done;s=l.next()){var u=s.value;u.remove(this)}}catch(y){e={error:y}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(Ee(c))try{c()}catch(y){o=y instanceof kr?y.errors:[y]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Ht(f),h=d.next();!h.done;h=d.next()){var _=h.value;try{Tn(_)}catch(y){o=o??[],y instanceof kr?o=ur(ur([],lr(o)),lr(y.errors)):o.push(y)}}}catch(y){t={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(t)throw t.error}}}if(o)throw new kr(o)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Tn(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},n.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},n.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},n.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Rn(r,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&Rn(r,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}();Wr.EMPTY;function Oo(n){return n instanceof Wr||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function Tn(n){Ee(n)?n():n.unsubscribe()}var So={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Nr={setTimeout:function(n,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var i=Nr.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ur([n,e],lr(r))):setTimeout.apply(void 0,ur([n,e],lr(r)))},clearTimeout:function(n){var e=Nr.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Io(n){Nr.setTimeout(function(){throw n})}function An(){}function ps(n){n()}var Yr=function(n){zr(e,n);function e(r){var t=n.call(this)||this;return t.isStopped=!1,r?(t.destination=r,Oo(r)&&r.add(t)):t.destination=bs,t}return e.create=function(r,t,i){return new Vr(r,t,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Wr),vs=Function.prototype.bind;function wr(n,e){return vs.call(n,e)}var ms=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(t){Yt(t)}},n.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(t){Yt(t)}else Yt(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Yt(r)}},n}(),Vr=function(n){zr(e,n);function e(r,t,i){var o=n.call(this)||this,a;if(Ee(r)||!r)a={next:r??void 0,error:t??void 0,complete:i??void 0};else{var l;o&&So.useDeprecatedNextContext?(l=Object.create(r),l.unsubscribe=function(){return o.unsubscribe()},a={next:r.next&&wr(r.next,l),error:r.error&&wr(r.error,l),complete:r.complete&&wr(r.complete,l)}):a=r}return o.destination=new ms(a),o}return e}(Yr);function Yt(n){Io(n)}function ys(n){throw n}var bs={closed:!0,next:An,error:ys,complete:An},Xr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Co(n){return n}function vr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return qo(n)}function qo(n){return n.length===0?Co:n.length===1?n[0]:function(r){return n.reduce(function(t,i){return i(t)},r)}}var Ke=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var r=new n;return r.source=this,r.operator=e,r},n.prototype.subscribe=function(e,r,t){var i=this,o=ks(e)?e:new Vr(e,r,t);return ps(function(){var a=i,l=a.operator,s=a.source;o.add(l?l.call(o,s):s?i._subscribe(o):i._trySubscribe(o))}),o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},n.prototype.forEach=function(e,r){var t=this;return r=Mn(r),new r(function(i,o){var a=new Vr({next:function(l){try{e(l)}catch(s){o(s),a.unsubscribe()}},error:o,complete:i});t.subscribe(a)})},n.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},n.prototype[Xr]=function(){return this},n.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qo(e)(this)},n.prototype.toPromise=function(e){var r=this;return e=Mn(e),new e(function(t,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return t(o)})})},n.create=function(e){return new n(e)},n}();function Mn(n){var e;return(e=n??So.Promise)!==null&&e!==void 0?e:Promise}function gs(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function ks(n){return n&&n instanceof Yr||gs(n)&&Oo(n)}function ws(n){return Ee(n==null?void 0:n.lift)}function st(n){return function(e){if(ws(e))return e.lift(function(r){try{return n(r,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function ht(n,e,r,t,i){return new Es(n,e,r,t,i)}var Es=function(n){zr(e,n);function e(r,t,i,o,a,l){var s=n.call(this,r)||this;return s.onFinalize=a,s.shouldUnsubscribe=l,s._next=t?function(u){try{t(u)}catch(c){r.error(c)}}:n.prototype._next,s._error=o?function(u){try{o(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:n.prototype._error,s._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:n.prototype._complete,s}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;n.prototype.unsubscribe.call(this),!t&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(Yr);function Os(n){return n&&Ee(n.schedule)}function Ss(n){return n[n.length-1]}function Po(n){return Os(Ss(n))?n.pop():void 0}var Do=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function Ro(n){return Ee(n==null?void 0:n.then)}function To(n){return Ee(n[Xr])}function Ao(n){return Symbol.asyncIterator&&Ee(n==null?void 0:n[Symbol.asyncIterator])}function Mo(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Is(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lo=Is();function jo(n){return Ee(n==null?void 0:n[Lo])}function No(n){return ds(this,arguments,function(){var r,t,i,o;return Eo(this,function(a){switch(a.label){case 0:r=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,dt(r.read())];case 3:return t=a.sent(),i=t.value,o=t.done,o?[4,dt(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,dt(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Vo(n){return Ee(n==null?void 0:n.getReader)}function Kt(n){if(n instanceof Ke)return n;if(n!=null){if(To(n))return Cs(n);if(Do(n))return qs(n);if(Ro(n))return Ps(n);if(Ao(n))return Fo(n);if(jo(n))return Ds(n);if(Vo(n))return Rs(n)}throw Mo(n)}function Cs(n){return new Ke(function(e){var r=n[Xr]();if(Ee(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qs(n){return new Ke(function(e){for(var r=0;r<n.length&&!e.closed;r++)e.next(n[r]);e.complete()})}function Ps(n){return new Ke(function(e){n.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Io)})}function Ds(n){return new Ke(function(e){var r,t;try{for(var i=Ht(n),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(l){r={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}e.complete()})}function Fo(n){return new Ke(function(e){Ts(n,e).catch(function(r){return e.error(r)})})}function Rs(n){return Fo(No(n))}function Ts(n,e){var r,t,i,o;return fs(this,void 0,void 0,function(){var a,l;return Eo(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),r=hs(n),s.label=1;case 1:return[4,r.next()];case 2:if(t=s.sent(),!!t.done)return[3,4];if(a=t.value,e.next(a),e.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=s.sent(),i={error:l},[3,11];case 6:return s.trys.push([6,,9,10]),t&&!t.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function We(n,e,r,t,i){t===void 0&&(t=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(o),!i)return o}function Uo(n,e){return e===void 0&&(e=0),st(function(r,t){r.subscribe(ht(t,function(i){return We(t,n,function(){return t.next(i)},e)},function(){return We(t,n,function(){return t.complete()},e)},function(i){return We(t,n,function(){return t.error(i)},e)}))})}function Bo(n,e){return e===void 0&&(e=0),st(function(r,t){t.add(n.schedule(function(){return r.subscribe(t)},e))})}function As(n,e){return Kt(n).pipe(Bo(e),Uo(e))}function Ms(n,e){return Kt(n).pipe(Bo(e),Uo(e))}function Ls(n,e){return new Ke(function(r){var t=0;return e.schedule(function(){t===n.length?r.complete():(r.next(n[t++]),r.closed||this.schedule())})})}function js(n,e){return new Ke(function(r){var t;return We(r,e,function(){t=n[Lo](),We(r,e,function(){var i,o,a;try{i=t.next(),o=i.value,a=i.done}catch(l){r.error(l);return}a?r.complete():r.next(o)},0,!0)}),function(){return Ee(t==null?void 0:t.return)&&t.return()}})}function Ho(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ke(function(r){We(r,e,function(){var t=n[Symbol.asyncIterator]();We(r,e,function(){t.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function Ns(n,e){return Ho(No(n),e)}function Vs(n,e){if(n!=null){if(To(n))return As(n,e);if(Do(n))return Ls(n,e);if(Ro(n))return Ms(n,e);if(Ao(n))return Ho(n,e);if(jo(n))return js(n,e);if(Vo(n))return Ns(n,e)}throw Mo(n)}function Qo(n,e){return e?Vs(n,e):Kt(n)}function Zr(n,e){return st(function(r,t){var i=0;r.subscribe(ht(t,function(o){t.next(n.call(e,o,i++))}))})}function Fs(n,e,r,t,i,o,a,l){var s=[],u=0,c=0,f=!1,d=function(){f&&!s.length&&!u&&e.complete()},h=function(y){return u<t?_(y):s.push(y)},_=function(y){o&&e.next(y),u++;var b=!1;Kt(r(y,c++)).subscribe(ht(e,function(E){i==null||i(E),o?h(E):e.next(E)},function(){b=!0},void 0,function(){if(b)try{u--;for(var E=function(){var S=s.shift();a?We(e,a,function(){return _(S)}):_(S)};s.length&&u<t;)E();d()}catch(S){e.error(S)}}))};return n.subscribe(ht(e,h,function(){f=!0,d()})),function(){l==null||l()}}function Ko(n,e,r){return r===void 0&&(r=1/0),Ee(e)?Ko(function(t,i){return Zr(function(o,a){return e(t,o,i,a)})(Kt(n(t,i)))},r):(typeof e=="number"&&(r=e),st(function(t,i){return Fs(t,i,n,r)}))}function Us(n){return n===void 0&&(n=1/0),Ko(Co,n)}function Bs(){return Us(1)}function Ln(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Bs()(Qo(n,Po(n)))}function Go(n,e){return st(function(r,t){var i=0;r.subscribe(ht(t,function(o){return n.call(e,o,i++)&&t.next(o)}))})}function Hs(n,e,r,t,i){return function(o,a){var l=r,s=e,u=0;o.subscribe(ht(a,function(c){var f=u++;s=l?n(s,c,f):(l=!0,c),t&&a.next(s)},i&&function(){l&&a.next(s),a.complete()}))}}function Qs(n,e){return st(Hs(n,e,arguments.length>=2,!0))}function Ks(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Po(n);return st(function(t,i){(r?Ln(n,t,r):Ln(n,t)).subscribe(i)})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function Gs(n){return Go(e=>e.event.id===n)}function Js(n){return Go(e=>e.event.pubkey===n)}function zs(){return Qs((n,e)=>[...n,e],[])}function Ws(n){return vr(zs(),Zr(e=>{const r=new Map;return e.forEach(t=>{const i=n(t),o=r.get(i);o?r.set(i,[...o,t]):r.set(i,[t])}),r}))}function Ys(n){return vr(Ws(n),Zr(e=>Array.from(e.entries()).map(([,r])=>r.slice(-1)[0])))}class Gt{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Qt=typeof window>"u"||"Deno"in window;function Fe(){}function Xs(n,e){return typeof n=="function"?n(e):n}function Fr(n){return typeof n=="number"&&n>=0&&n!==1/0}function Jo(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Ut(n,e,r){return mr(n)?typeof e=="function"?{...r,queryKey:n,queryFn:e}:{...e,queryKey:n}:n}function ze(n,e,r){return mr(n)?[{...e,queryKey:n},r]:[n||{},e]}function jn(n,e){const{type:r="all",exact:t,fetchStatus:i,predicate:o,queryKey:a,stale:l}=n;if(mr(a)){if(t){if(e.queryHash!==$r(a,e.options))return!1}else if(!cr(e.queryKey,a))return!1}if(r!=="all"){const s=e.isActive();if(r==="active"&&!s||r==="inactive"&&s)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function Nn(n,e){const{exact:r,fetching:t,predicate:i,mutationKey:o}=n;if(mr(o)){if(!e.options.mutationKey)return!1;if(r){if(ot(e.options.mutationKey)!==ot(o))return!1}else if(!cr(e.options.mutationKey,o))return!1}return!(typeof t=="boolean"&&e.state.status==="loading"!==t||i&&!i(e))}function $r(n,e){return((e==null?void 0:e.queryKeyHashFn)||ot)(n)}function ot(n){return JSON.stringify(n,(e,r)=>Br(r)?Object.keys(r).sort().reduce((t,i)=>(t[i]=r[i],t),{}):r)}function cr(n,e){return zo(n,e)}function zo(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!zo(n[r],e[r])):!1}function Wo(n,e){if(n===e)return n;const r=Vn(n)&&Vn(e);if(r||Br(n)&&Br(e)){const t=r?n.length:Object.keys(n).length,i=r?e:Object.keys(e),o=i.length,a=r?[]:{};let l=0;for(let s=0;s<o;s++){const u=r?s:i[s];a[u]=Wo(n[u],e[u]),a[u]===n[u]&&l++}return t===o&&l===t?n:a}return e}function Ur(n,e){if(n&&!e||e&&!n)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}function Vn(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Br(n){if(!Fn(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!Fn(r)||!r.hasOwnProperty("isPrototypeOf"))}function Fn(n){return Object.prototype.toString.call(n)==="[object Object]"}function mr(n){return Array.isArray(n)}function Yo(n){return new Promise(e=>{setTimeout(e,n)})}function Un(n){Yo(0).then(n)}function Zs(){if(typeof AbortController=="function")return new AbortController}function Hr(n,e,r){return r.isDataEqual!=null&&r.isDataEqual(n,e)?n:typeof r.structuralSharing=="function"?r.structuralSharing(n,e):r.structuralSharing!==!1?Wo(n,e):e}class $s extends Gt{constructor(){super(),this.setup=e=>{if(!Qt&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const fr=new $s,Bn=["online","offline"];class xs extends Gt{constructor(){super(),this.setup=e=>{if(!Qt&&window.addEventListener){const r=()=>e();return Bn.forEach(t=>{window.addEventListener(t,r,!1)}),()=>{Bn.forEach(t=>{window.removeEventListener(t,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(t=>{typeof t=="boolean"?this.setOnline(t):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const dr=new xs;function el(n){return Math.min(1e3*2**n,3e4)}function yr(n){return(n??"online")==="online"?dr.isOnline():!0}class Xo{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function rr(n){return n instanceof Xo}function Zo(n){let e=!1,r=0,t=!1,i,o,a;const l=new Promise((b,E)=>{o=b,a=E}),s=b=>{t||(h(new Xo(b)),n.abort==null||n.abort())},u=()=>{e=!0},c=()=>{e=!1},f=()=>!fr.isFocused()||n.networkMode!=="always"&&!dr.isOnline(),d=b=>{t||(t=!0,n.onSuccess==null||n.onSuccess(b),i==null||i(),o(b))},h=b=>{t||(t=!0,n.onError==null||n.onError(b),i==null||i(),a(b))},_=()=>new Promise(b=>{i=E=>{const S=t||!f();return S&&b(E),S},n.onPause==null||n.onPause()}).then(()=>{i=void 0,t||n.onContinue==null||n.onContinue()}),y=()=>{if(t)return;let b;try{b=n.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(d).catch(E=>{var S,D;if(t)return;const T=(S=n.retry)!=null?S:3,L=(D=n.retryDelay)!=null?D:el,O=typeof L=="function"?L(r,E):L,P=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,E);if(e||!P){h(E);return}r++,n.onFail==null||n.onFail(r,E),Yo(O).then(()=>{if(f())return _()}).then(()=>{e?h(E):y()})})};return yr(n.networkMode)?y():_().then(y),{promise:l,cancel:s,continue:()=>(i==null?void 0:i())?l:Promise.resolve(),cancelRetry:u,continueRetry:c}}const xr=console;function tl(){let n=[],e=0,r=c=>{c()},t=c=>{c()};const i=c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},o=c=>{e?n.push(c):Un(()=>{r(c)})},a=c=>(...f)=>{o(()=>{c(...f)})},l=()=>{const c=n;n=[],c.length&&Un(()=>{t(()=>{c.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:a,schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{t=c}}}const be=tl();class $o{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fr(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Qt?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class rl extends $o{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||xr,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||nl(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const t=Hr(this.state.data,e,this.options);return this.dispatch({data:t,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),t}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const t=this.promise;return(r=this.retryer)==null||r.cancel(e),t?t.then(Fe).catch(Fe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Jo(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(t=>t.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(t=>t.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var t,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(_=>_.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const a=Zs(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};s(l);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(s(c),(t=this.options.behavior)==null||t.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta})}const d=h=>{if(rr(h)&&h.silent||this.dispatch({type:"error",error:h}),!rr(h)){var _,y,b,E;(_=(y=this.cache.config).onError)==null||_.call(y,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Zo({fn:c.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:h=>{var _,y,b,E;if(typeof h>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(_=(y=this.cache.config).onSuccess)==null||_.call(y,h,this),(b=(E=this.cache.config).onSettled)==null||b.call(E,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(h,_)=>{this.dispatch({type:"failed",failureCount:h,error:_})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=t=>{var i,o;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:yr(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return rr(a)&&a.revert&&this.revertState?{...this.revertState}:{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=r(this.state),be.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function nl(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,r=typeof e<"u",t=r?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?t??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class il extends Gt{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,t){var i;const o=r.queryKey,a=(i=r.queryHash)!=null?i:$r(o,r);let l=this.get(a);return l||(l=new rl({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(r),state:t,defaultOptions:e.getQueryDefaults(o)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){be.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[t]=ze(e,r);return typeof t.exact>"u"&&(t.exact=!0),this.queries.find(i=>jn(t,i))}findAll(e,r){const[t]=ze(e,r);return Object.keys(t).length>0?this.queries.filter(i=>jn(t,i)):this.queries}notify(e){be.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){be.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){be.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class ol extends $o{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||xr,this.observers=[],this.state=e.state||al(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var P;return this.retryer=Zo({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(R,M)=>{this.dispatch({type:"failed",failureCount:R,error:M})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(P=this.options.retry)!=null?P:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var t,i,o,a,l,s,u,c;if(!r){var f,d,h,_;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(d=this.mutationCache.config).onMutate)==null?void 0:f.call(d,this.state.variables,this));const R=await((h=(_=this.options).onMutate)==null?void 0:h.call(_,this.state.variables));R!==this.state.context&&this.dispatch({type:"loading",context:R,variables:this.state.variables})}const P=await e();return await((t=(i=this.mutationCache.config).onSuccess)==null?void 0:t.call(i,P,this.state.variables,this.state.context,this)),await((o=(a=this.options).onSuccess)==null?void 0:o.call(a,P,this.state.variables,this.state.context)),await((l=(s=this.mutationCache.config).onSettled)==null?void 0:l.call(s,P,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,P,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:P}),P}catch(P){try{var y,b,E,S,D,T,L,O;throw await((y=(b=this.mutationCache.config).onError)==null?void 0:y.call(b,P,this.state.variables,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,P,this.state.variables,this.state.context)),await((D=(T=this.mutationCache.config).onSettled)==null?void 0:D.call(T,void 0,P,this.state.variables,this.state.context,this)),await((L=(O=this.options).onSettled)==null?void 0:L.call(O,void 0,P,this.state.variables,this.state.context)),P}finally{this.dispatch({type:"error",error:P})}}}dispatch(e){const r=t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!yr(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}};this.state=r(this.state),be.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function al(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class sl extends Gt{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,t){const i=new ol({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:t,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){be.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>Nn(e,r))}findAll(e){return this.mutations.filter(r=>Nn(e,r))}notify(e){be.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(t=>t.state.isPaused);return be.batch(()=>r.reduce((t,i)=>t.then(()=>i.continue().catch(Fe)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function ll(){return{onFetch:n=>{n.fetchFn=()=>{var e,r,t,i,o,a;const l=(e=n.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,s=(t=n.fetchOptions)==null||(i=t.meta)==null?void 0:i.fetchMore,u=s==null?void 0:s.pageParam,c=(s==null?void 0:s.direction)==="forward",f=(s==null?void 0:s.direction)==="backward",d=((o=n.state.data)==null?void 0:o.pages)||[],h=((a=n.state.data)==null?void 0:a.pageParams)||[];let _=h,y=!1;const b=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>{var P;if((P=n.signal)!=null&&P.aborted)y=!0;else{var R;(R=n.signal)==null||R.addEventListener("abort",()=>{y=!0})}return n.signal}})},E=n.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+n.options.queryHash+"'")),S=(O,P,R,M)=>(_=M?[P,..._]:[..._,P],M?[R,...O]:[...O,R]),D=(O,P,R,M)=>{if(y)return Promise.reject("Cancelled");if(typeof R>"u"&&!P&&O.length)return Promise.resolve(O);const Q={queryKey:n.queryKey,pageParam:R,meta:n.options.meta};b(Q);const $=E(Q);return Promise.resolve($).then(x=>S(O,R,x,M))};let T;if(!d.length)T=D([]);else if(c){const O=typeof u<"u",P=O?u:Hn(n.options,d);T=D(d,O,P)}else if(f){const O=typeof u<"u",P=O?u:ul(n.options,d);T=D(d,O,P,!0)}else{_=[];const O=typeof n.options.getNextPageParam>"u";T=(l&&d[0]?l(d[0],0,d):!0)?D([],O,h[0]):Promise.resolve(S([],h[0],d[0]));for(let R=1;R<d.length;R++)T=T.then(M=>{if(l&&d[R]?l(d[R],R,d):!0){const $=O?h[R]:Hn(n.options,M);return D(M,O,$)}return Promise.resolve(S(M,h[R],d[R]))})}return T.then(O=>({pages:O,pageParams:_}))}}}}function Hn(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function ul(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}class xo{constructor(e={}){this.queryCache=e.queryCache||new il,this.mutationCache=e.mutationCache||new sl,this.logger=e.logger||xr,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=fr.subscribe(()=>{fr.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=dr.subscribe(()=>{dr.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[t]=ze(e,r);return t.fetchStatus="fetching",this.queryCache.findAll(t).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state.data}ensureQueryData(e,r,t){const i=Ut(e,r,t),o=this.getQueryData(i.queryKey);return o?Promise.resolve(o):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:t})=>{const i=t.data;return[r,i]})}setQueryData(e,r,t){const i=this.queryCache.find(e),o=i==null?void 0:i.state.data,a=Xs(r,o);if(typeof a>"u")return;const l=Ut(e),s=this.defaultQueryOptions(l);return this.queryCache.build(this,s).setData(a,{...t,manual:!0})}setQueriesData(e,r,t){return be.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,r,t)]))}getQueryState(e,r){var t;return(t=this.queryCache.find(e,r))==null?void 0:t.state}removeQueries(e,r){const[t]=ze(e,r),i=this.queryCache;be.batch(()=>{i.findAll(t).forEach(o=>{i.remove(o)})})}resetQueries(e,r,t){const[i,o]=ze(e,r,t),a=this.queryCache,l={type:"active",...i};return be.batch(()=>(a.findAll(i).forEach(s=>{s.reset()}),this.refetchQueries(l,o)))}cancelQueries(e,r,t){const[i,o={}]=ze(e,r,t);typeof o.revert>"u"&&(o.revert=!0);const a=be.batch(()=>this.queryCache.findAll(i).map(l=>l.cancel(o)));return Promise.all(a).then(Fe).catch(Fe)}invalidateQueries(e,r,t){const[i,o]=ze(e,r,t);return be.batch(()=>{var a,l;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const s={...i,type:(a=(l=i.refetchType)!=null?l:i.type)!=null?a:"active"};return this.refetchQueries(s,o)})}refetchQueries(e,r,t){const[i,o]=ze(e,r,t),a=be.batch(()=>this.queryCache.findAll(i).filter(s=>!s.isDisabled()).map(s=>{var u;return s.fetch(void 0,{...o,cancelRefetch:(u=o==null?void 0:o.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let l=Promise.all(a).then(Fe);return o!=null&&o.throwOnError||(l=l.catch(Fe)),l}fetchQuery(e,r,t){const i=Ut(e,r,t),o=this.defaultQueryOptions(i);typeof o.retry>"u"&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,r,t){return this.fetchQuery(e,r,t).then(Fe).catch(Fe)}fetchInfiniteQuery(e,r,t){const i=Ut(e,r,t);return i.behavior=ll(),this.fetchQuery(i)}prefetchInfiniteQuery(e,r,t){return this.fetchInfiniteQuery(e,r,t).then(Fe).catch(Fe)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const t=this.queryDefaults.find(i=>ot(e)===ot(i.queryKey));t?t.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(t=>cr(e,t.queryKey));return r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const t=this.mutationDefaults.find(i=>ot(e)===ot(i.mutationKey));t?t.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(t=>cr(e,t.mutationKey));return r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=$r(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class cl extends Gt{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Qn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qr(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qr(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const t=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Ur(t,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=t.queryKey),this.updateQuery();const o=this.hasListeners();o&&Kn(this.currentQuery,i,this.options,t)&&this.executeFetch(),this.updateResult(r),o&&(this.currentQuery!==i||this.options.enabled!==t.enabled||this.options.staleTime!==t.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();o&&(this.currentQuery!==i||this.options.enabled!==t.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),t=this.createResult(r,e);return dl(this,t,e)&&(this.currentResult=t,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),t}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(t=>{Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(t),e[t])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),t=this.client.getQueryCache().build(this.client,r);return t.isFetchingOptimistic=!0,t.fetch().then(()=>this.createResult(t,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Fe)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Qt||this.currentResult.isStale||!Fr(this.options.staleTime))return;const r=Jo(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Qt||this.options.enabled===!1||!Fr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||fr.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const t=this.currentQuery,i=this.options,o=this.currentResult,a=this.currentResultState,l=this.currentResultOptions,s=e!==t,u=s?e.state:this.currentQueryInitialState,c=s?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:d,error:h,errorUpdatedAt:_,fetchStatus:y,status:b}=f,E=!1,S=!1,D;if(r._optimisticResults){const R=this.hasListeners(),M=!R&&Qn(e,r),Q=R&&Kn(e,t,r,i);(M||Q)&&(y=yr(e.options.networkMode)?"fetching":"paused",d||(b="loading")),r._optimisticResults==="isRestoring"&&(y="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&c!=null&&c.isSuccess&&b!=="error")D=c.data,d=c.dataUpdatedAt,b=c.status,E=!0;else if(r.select&&typeof f.data<"u")if(o&&f.data===(a==null?void 0:a.data)&&r.select===this.selectFn)D=this.selectResult;else try{this.selectFn=r.select,D=r.select(f.data),D=Hr(o==null?void 0:o.data,D,r),this.selectResult=D,this.selectError=null}catch(R){this.selectError=R}else D=f.data;if(typeof r.placeholderData<"u"&&typeof D>"u"&&b==="loading"){let R;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))R=o.data;else if(R=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof R<"u")try{R=r.select(R),this.selectError=null}catch(M){this.selectError=M}typeof R<"u"&&(b="success",D=Hr(o==null?void 0:o.data,R,r),S=!0)}this.selectError&&(h=this.selectError,D=this.selectResult,_=Date.now(),b="error");const T=y==="fetching",L=b==="loading",O=b==="error";return{status:b,fetchStatus:y,isLoading:L,isSuccess:b==="success",isError:O,isInitialLoading:L&&T,data:D,dataUpdatedAt:d,error:h,errorUpdatedAt:_,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!L,isLoadingError:O&&f.dataUpdatedAt===0,isPaused:y==="paused",isPlaceholderData:S,isPreviousData:E,isRefetchError:O&&f.dataUpdatedAt!==0,isStale:en(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,t=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Ur(t,r))return;this.currentResult=t;const i={cache:!0},o=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!this.trackedProps.size)return!0;const s=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&s.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==r[c]&&s.has(c)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!rr(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){be.batch(()=>{if(e.onSuccess){var r,t,i,o;(r=(t=this.options).onSuccess)==null||r.call(t,this.currentResult.data),(i=(o=this.options).onSettled)==null||i.call(o,this.currentResult.data,null)}else if(e.onError){var a,l,s,u;(a=(l=this.options).onError)==null||a.call(l,this.currentResult.error),(s=(u=this.options).onSettled)==null||s.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function fl(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Qn(n,e){return fl(n,e)||n.state.dataUpdatedAt>0&&Qr(n,e,e.refetchOnMount)}function Qr(n,e,r){if(e.enabled!==!1){const t=typeof r=="function"?r(n):r;return t==="always"||t!==!1&&en(n,e)}return!1}function Kn(n,e,r,t){return r.enabled!==!1&&(n!==e||t.enabled===!1)&&(!r.suspense||n.state.status!=="error")&&en(n,r)}function en(n,e){return n.isStaleByTime(e.staleTime)}function dl(n,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:!Ur(n.getCurrentResult(),e)}const ea="$$_queryClient",hl=()=>{const n=it(ea);if(!n)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return n},_l=n=>{nt(ea,n)};function ta(){return hl()}function pl(n,e){const r=ta(),t=r.defaultQueryOptions(n);t._optimisticResults="optimistic";let i=new e(r,t);t.onError&&(t.onError=be.batchCalls(t.onError)),t.onSuccess&&(t.onSuccess=be.batchCalls(t.onSuccess)),t.onSettled&&(t.onSettled=be.batchCalls(t.onSettled)),Bt(i).subscribe(l=>{i=l,i.setOptions(t,{listeners:!1})});const o=Bt(i.getCurrentResult(),l=>i.subscribe(be.batchCalls(l))),{subscribe:a}=tr(o,l=>(l=i.getOptimisticResult(t),t.notifyOnChangeProps?l:i.trackResult(l)));return{subscribe:a}}function vl(n,e,r){const t=Ut(n,e,r);return pl(t,cl)}function ml(n){let e;const r=n[2].default,t=Oe(r,n,n[1],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,[o]){t&&t.p&&(!e||o&2)&&Se(t,r,i,i[1],e?Ce(r,i[1],o,null):Ie(i[1]),null)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function yl(n,e,r){let{$$slots:t={},$$scope:i}=e,{client:o=new xo}=e;return ba(()=>{o.mount()}),_l(o),go(()=>{o.unmount()}),n.$$set=a=>{"client"in a&&r(0,o=a.client),"$$scope"in a&&r(1,i=a.$$scope)},[o,i,t]}class bl extends De{constructor(e){super(),Re(this,e,yl,ml,Pe,{client:0})}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function ra({rxNostr:n,queryKey:e,filters:r,operator:t,req:i,initData:o}){const a=ta();if(n.getRelays().length===0)return a.setQueryData(e,o),{data:Bt(o),status:Bt("success"),error:Bt()};let l;i?(i.emit(r),l=i):l=ga({filters:r});const s=sr("loading"),u=sr(void 0),c=n.use(l).pipe(t),f=vl(e,()=>new Promise((d,h)=>{let _=!1;c.subscribe({next:y=>{_?a.setQueryData(e,y):(d(y),_=!0)},complete:()=>s.set("success"),error:y=>{console.error(y),s.set("error"),u.set(y),_||(h(y),_=!0)}})}));return{data:tr(f,d=>d.data,o),status:tr([f,s],([d,h])=>d.isSuccess?"success":d.isError?"error":h),error:tr([f,u],([d,h])=>d.isError?d.error:h)}}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function gl({rxNostr:n,relays:e}){if(e.length===0)return Qo([[]]);const r=e.map(t=>{const i=typeof t=="string"?t:t.url,o=n.hasRelay(i)?n.getRelayState(i):"not-started";return{from:i,state:o}});return n.createConnectionStateObservable().pipe(Ks(...r),Ys(({from:t})=>t))}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function kl(n,e,r,t,i){const o=[{kinds:[t],authors:[r],limit:1}],a=vr(wa(t),Js(r),ko(),ka());return ra({rxNostr:n,queryKey:e,filters:o,operator:a,req:i})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function wl(n,e,r,t){const i=[{ids:[r],limit:1}],o=vr(Gs(r),Ea(),ko());return ra({rxNostr:n,queryKey:e,filters:i,operator:o,req:t})}/**
 * @license Apache-2.0
 * @copyright 2023 Akiomi Kamakura
 */function El(n,e,r,t){return kl(n,e,r,Oa.Kind.Metadata,t)}const Ol=n=>({metadata:n&16,status:n&32}),Gn=n=>{var e;return{metadata:(e=n[4])==null?void 0:e.event,status:n[5]}},Sl=n=>({metadata:n&16,status:n&32}),Jn=n=>{var e;return{metadata:(e=n[4])==null?void 0:e.event,status:n[5]}},Il=n=>({metadata:n&16,status:n&32}),zn=n=>{var e;return{metadata:(e=n[4])==null?void 0:e.event,status:n[5]}},Cl=n=>({error:n&8,metadata:n&16,status:n&32}),Wn=n=>{var e;return{error:n[3],metadata:(e=n[4])==null?void 0:e.event,status:n[5]}};function ql(n){let e;const r=n[12].nodata,t=Oe(r,n,n[11],Gn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Ol):Ie(i[11]),Gn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Pl(n){let e;const r=n[12].loading,t=Oe(r,n,n[11],Jn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Sl):Ie(i[11]),Jn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Dl(n){let e;const r=n[12].default,t=Oe(r,n,n[11],zn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Il):Ie(i[11]),zn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Rl(n){let e;const r=n[12].error,t=Oe(r,n,n[11],Wn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2104)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Cl):Ie(i[11]),Wn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Tl(n){let e,r,t,i;const o=[Rl,Dl,Pl,ql],a=[];function l(s,u){return s[3]?0:s[4]?1:s[5]==="loading"?2:3}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,[u]){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function Al(n,e,r){let t,i,o,a,l,s,u=H,c=()=>(u(),u=at(a,O=>r(3,s=O)),a),f,d=H,h=()=>(d(),d=at(i,O=>r(4,f=O)),i),_,y=H,b=()=>(y(),y=at(o,O=>r(5,_=O)),o);Ue(n,Jr,O=>r(10,l=O)),n.$$.on_destroy.push(()=>u()),n.$$.on_destroy.push(()=>d()),n.$$.on_destroy.push(()=>y());let{$$slots:E={},$$scope:S}=e,{queryKey:D}=e,{pubkey:T}=e,{req:L=void 0}=e;return n.$$set=O=>{"queryKey"in O&&r(6,D=O.queryKey),"pubkey"in O&&r(7,T=O.pubkey),"req"in O&&r(8,L=O.req),"$$scope"in O&&r(11,S=O.$$scope)},n.$$.update=()=>{n.$$.dirty&1472&&r(9,t=El(l.rxNostr,D,T,L)),n.$$.dirty&512&&h(r(2,i=t.data)),n.$$.dirty&512&&b(r(1,o=t.status)),n.$$.dirty&512&&c(r(0,a=t.error))},[a,o,i,s,f,_,D,T,L,t,l,S,E]}class Ge extends De{constructor(e){super(),Re(this,e,Al,Tl,Pe,{queryKey:6,pubkey:7,req:8})}}const Ml=n=>({connections:n&4}),Yn=n=>({connections:n[2]});function Ll(n){let e;const r=n[6].default,t=Oe(r,n,n[7],Yn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&132)&&Se(t,r,i,i[7],e?Ce(r,i[7],o,Ml):Ie(i[7]),Yn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function jl(n){let e,r;return e=new bl({props:{client:n[0],$$slots:{default:[Ll]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,[i]){const o={};i&1&&(o.client=t[0]),i&132&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Nl(n,e,r){let t,i,o,a,l=H,s=()=>(l(),l=at(t,y=>r(2,a=y)),t);n.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:c}=e,{queryClientConfig:f={}}=e,{relays:d=[]}=e;const h=Sa(),_={defaultOptions:{queries:{staleTime:1e3*60,refetchInterval:1/0}}};return go(()=>{h.dispose()}),n.$$set=y=>{"queryClientConfig"in y&&r(3,f=y.queryClientConfig),"relays"in y&&r(4,d=y.relays),"$$scope"in y&&r(7,c=y.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&s(r(1,t=gl({rxNostr:h,relays:d}))),n.$$.dirty&8&&r(5,i={..._,...f}),n.$$.dirty&32&&r(0,o=new xo(i)),n.$$.dirty&16&&(h.setRelays(d),Jr.set({rxNostr:h}))},[o,t,a,f,d,i,u,c]}class Md extends De{constructor(e){super(),Re(this,e,Nl,jl,Pe,{queryClientConfig:3,relays:4})}}const Vl=n=>({text:n&16,status:n&32}),Xn=n=>{var e;return{text:(e=n[4])==null?void 0:e.event,status:n[5]}},Fl=n=>({text:n&16,status:n&32}),Zn=n=>{var e;return{text:(e=n[4])==null?void 0:e.event,status:n[5]}},Ul=n=>({text:n&16,status:n&32}),$n=n=>{var e;return{text:(e=n[4])==null?void 0:e.event,status:n[5]}},Bl=n=>({error:n&8,text:n&16,status:n&32}),xn=n=>{var e;return{error:n[3],text:(e=n[4])==null?void 0:e.event,status:n[5]}};function Hl(n){let e;const r=n[12].nodata,t=Oe(r,n,n[11],Xn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Vl):Ie(i[11]),Xn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Ql(n){let e;const r=n[12].loading,t=Oe(r,n,n[11],Zn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Fl):Ie(i[11]),Zn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Kl(n){let e;const r=n[12].default,t=Oe(r,n,n[11],$n);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2096)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Ul):Ie(i[11]),$n)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Gl(n){let e;const r=n[12].error,t=Oe(r,n,n[11],xn);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,o){t&&t.m(i,o),e=!0},p(i,o){t&&t.p&&(!e||o&2104)&&Se(t,r,i,i[11],e?Ce(r,i[11],o,Bl):Ie(i[11]),xn)},i(i){e||(A(t,i),e=!0)},o(i){j(t,i),e=!1},d(i){t&&t.d(i)}}}function Jl(n){let e,r,t,i;const o=[Gl,Kl,Ql,Hl],a=[];function l(s,u){return s[3]?0:s[4]?1:s[5]==="loading"?2:3}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,[u]){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function zl(n,e,r){let t,i,o,a,l,s,u=H,c=()=>(u(),u=at(a,O=>r(3,s=O)),a),f,d=H,h=()=>(d(),d=at(i,O=>r(4,f=O)),i),_,y=H,b=()=>(y(),y=at(o,O=>r(5,_=O)),o);Ue(n,Jr,O=>r(10,l=O)),n.$$.on_destroy.push(()=>u()),n.$$.on_destroy.push(()=>d()),n.$$.on_destroy.push(()=>y());let{$$slots:E={},$$scope:S}=e,{queryKey:D}=e,{id:T}=e,{req:L=void 0}=e;return n.$$set=O=>{"queryKey"in O&&r(6,D=O.queryKey),"id"in O&&r(7,T=O.id),"req"in O&&r(8,L=O.req),"$$scope"in O&&r(11,S=O.$$scope)},n.$$.update=()=>{n.$$.dirty&1472&&r(9,t=wl(l.rxNostr,D,T,L)),n.$$.dirty&512&&h(r(2,i=t.data)),n.$$.dirty&512&&b(r(1,o=t.status)),n.$$.dirty&512&&c(r(0,a=t.error))},[a,o,i,s,f,_,D,T,L,t,l,S,E]}class Jt extends De{constructor(e){super(),Re(this,e,zl,Jl,Pe,{queryKey:6,id:7,req:8})}}var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.is_node=void 0;var Er=null;function Wl(){return Er===null&&(Er=typeof B=="object"&&typeof B.process=="object"&&typeof B.process.versions=="object"&&typeof B.process.versions.node<"u"),Er}zt.is_node=Wl;var Or={},Sr,ei;function Yl(){if(ei)return Sr;ei=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Sr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),Sr}const Xl="websocket",Zl="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",$l=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],xl="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",eu=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],tu="1.0.34",ru={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},nu="https://github.com/theturtle32/WebSocket-Node",iu={node:">=4.0.0"},ou={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},au={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},su={verbose:!1},lu={test:"tape test/unit/*.js",gulp:"gulp"},uu="index",cu={lib:"./lib"},fu="lib/browser.js",du="Apache-2.0",hu={name:Xl,description:Zl,keywords:$l,author:xl,contributors:eu,version:tu,repository:ru,homepage:nu,engines:iu,dependencies:ou,devDependencies:au,config:su,scripts:lu,main:uu,directories:cu,browser:fu,license:du};var Ir,ti;function _u(){return ti||(ti=1,Ir=hu.version),Ir}var Cr,ri;function pu(){if(ri)return Cr;ri=1;var n;if(typeof globalThis=="object")n=globalThis;else try{n=Yl()}catch{}finally{if(!n&&typeof window<"u"&&(n=window),!n)throw new Error("Could not determine global this")}var e=n.WebSocket||n.MozWebSocket,r=_u();function t(i,o){var a;return o?a=new e(i,o):a=new e(i),a}return e&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(i){Object.defineProperty(t,i,{get:function(){return e[i]}})}),Cr={w3cwebsocket:e?t:null,version:r},Cr}var Xt={},qr={},yt={},bt={},gt={},kt={},ni;function vu(){if(ni)return kt;ni=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.ForOfAdaptor=void 0;var n=function(){function e(r,t){this.it_=r,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var r=this.it_;return this.it_=this.it_.next(),{done:!1,value:r.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return kt.ForOfAdaptor=n,kt}var ii;function tn(){if(ii)return gt;ii=1;var n=B&&B.__values||function(t){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&t[i],a=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(gt,"__esModule",{value:!0}),gt.Container=void 0;var e=vu(),r=function(){function t(){}return t.prototype.empty=function(){return this.size()===0},t.prototype.rbegin=function(){return this.end().reverse()},t.prototype.rend=function(){return this.begin().reverse()},t.prototype[Symbol.iterator]=function(){return new e.ForOfAdaptor(this.begin(),this.end())},t.prototype.toJSON=function(){var i,o,a=[];try{for(var l=n(this),s=l.next();!s.done;s=l.next()){var u=s.value;a.push(u)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},t}();return gt.Container=r,gt}var wt={},oi;function rn(){if(oi)return wt;oi=1;var n=B&&B.__read||function(r,t){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var o=i.call(r),a,l=[],s;try{for(;(t===void 0||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return l};Object.defineProperty(wt,"__esModule",{value:!0}),wt.NativeArrayIterator=void 0;var e=function(){function r(t,i){this.data_=t,this.index_=i}return r.prototype.index=function(){return this.index_},Object.defineProperty(r.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),r.prototype.prev=function(){return--this.index_,this},r.prototype.next=function(){return++this.index_,this},r.prototype.advance=function(t){return this.index_+=t,this},r.prototype.equals=function(t){return this.data_===t.data_&&this.index_===t.index_},r.prototype.swap=function(t){var i,o;i=n([t.data_,this.data_],2),this.data_=i[0],t.data_=i[1],o=n([t.index_,this.index_],2),this.index_=o[0],t.index_=o[1]},r}();return wt.NativeArrayIterator=e,wt}var ai;function mu(){if(ai)return bt;ai=1;var n=B&&B.__extends||function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function l(){this.constructor=o}o.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(bt,"__esModule",{value:!0}),bt.SetContainer=void 0;var e=tn(),r=rn(),t=function(i){n(o,i);function o(a){var l=i.call(this)||this;return l.data_=a(l),l}return o.prototype.assign=function(a,l){this.clear(),this.insert(a,l)},o.prototype.clear=function(){this.data_.clear()},o.prototype.begin=function(){return this.data_.begin()},o.prototype.end=function(){return this.data_.end()},o.prototype.has=function(a){return!this.find(a).equals(this.end())},o.prototype.size=function(){return this.data_.size()},o.prototype.push=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(a.length===0)return this.size();var s=new r.NativeArrayIterator(a,0),u=new r.NativeArrayIterator(a,a.length);return this._Insert_by_range(s,u),this.size()},o.prototype.insert=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1?this._Insert_by_key(a[0]):a[0].next instanceof Function&&a[1].next instanceof Function?this._Insert_by_range(a[0],a[1]):this._Insert_by_hint(a[0],a[1])},o.prototype.erase=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1&&!(a[0]instanceof this.end().constructor&&a[0].source()===this)?this._Erase_by_val(a[0]):a.length===1?this._Erase_by_range(a[0]):this._Erase_by_range(a[0],a[1])},o.prototype._Erase_by_range=function(a,l){l===void 0&&(l=a.next());var s=this.data_.erase(a,l);return this._Handle_erase(a,l),s},o}(e.Container);return bt.SetContainer=t,bt}var Pr={},Et={},Ot={},St={},si;function yu(){if(si)return St;si=1;var n=B&&B.__extends||function(){var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])},r(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(t,i);function o(){this.constructor=t}t.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(St,"__esModule",{value:!0}),St.Exception=void 0;var e=function(r){n(t,r);function t(i){var o=this.constructor,a=r.call(this,i)||this,l=o.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l,a}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),t.prototype.what=function(){return this.message},t.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},t}(Error);return St.Exception=e,St}var li;function na(){if(li)return Ot;li=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},t(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.LogicError=void 0;var e=yu(),r=function(t){n(i,t);function i(o){return t.call(this,o)||this}return i}(e.Exception);return Ot.LogicError=r,Ot}var ui;function ia(){if(ui)return Et;ui=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},t(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(Et,"__esModule",{value:!0}),Et.InvalidArgument=void 0;var e=na(),r=function(t){n(i,t);function i(o){return t.call(this,o)||this}return i}(e.LogicError);return Et.InvalidArgument=r,Et}var It={},ci;function bu(){if(ci)return It;ci=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[s]=l[s])},t(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(It,"__esModule",{value:!0}),It.OutOfRange=void 0;var e=na(),r=function(t){n(i,t);function i(o){return t.call(this,o)||this}return i}(e.LogicError);return It.OutOfRange=r,It}var fi;function br(){return fi||(fi=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorGenerator=void 0;var e=ia(),r=bu();(function(t){function i(h){if(typeof h=="string")return h;var _=h.constructor.name;return h.constructor.__MODULE&&(_="".concat(h.constructor.__MODULE,".").concat(_)),"std.".concat(_)}t.get_class_name=i;function o(h,_){return new r.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): it's empty container."))}t.empty=o;function a(h,_,y){return new r.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric index is negative -> (index = ").concat(y,")."))}t.negative_index=a;function l(h,_,y,b){return new r.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric index is equal or greater than size -> (index = ").concat(y,", size: ").concat(b,")."))}t.excessive_index=l;function s(h,_){return new e.InvalidArgument("Error on ".concat(i(h),".").concat(_,"(): parametric iterator is not this container's own."))}t.not_my_iterator=s;function u(h,_){return new e.InvalidArgument("Error on ".concat(i(h),".").concat(_,"(): parametric iterator, it already has been erased."))}t.erased_iterator=u;function c(h,_,y){return new r.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): parametric iterator is directing negative position -> (index = ").concat(y,")."))}t.negative_iterator=c;function f(h,_){_===void 0&&(_="end");var y=i(h);return new r.OutOfRange("Error on ".concat(y,".Iterator.value: cannot access to the ").concat(y,".").concat(_,"().value."))}t.iterator_end_value=f;function d(h,_,y){throw new r.OutOfRange("Error on ".concat(i(h),".").concat(_,"(): unable to find the matched key -> ").concat(y))}t.key_nout_found=d})(n.ErrorGenerator||(n.ErrorGenerator={}))}(Pr)),Pr}var di;function gu(){if(di)return yt;di=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(yt,"__esModule",{value:!0}),yt.UniqueSet=void 0;var t=mu(),i=br(),o=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.count=function(s){return this.find(s).equals(this.end())?0:1},l.prototype.insert=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.prototype.insert.apply(this,r([],e(s),!1))},l.prototype._Insert_by_range=function(s,u){for(;!s.equals(u);s=s.next())this._Insert_by_key(s.value)},l.prototype.extract=function(s){return s instanceof this.end().constructor?this._Extract_by_iterator(s):this._Extract_by_val(s)},l.prototype._Extract_by_val=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"extract",s);return this._Erase_by_range(u),s},l.prototype._Extract_by_iterator=function(s){return s.equals(this.end())===!0||this.has(s.value)===!1?this.end():(this._Erase_by_range(s),s)},l.prototype._Erase_by_val=function(s){var u=this.find(s);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(s){for(var u=s.begin();!u.equals(s.end());)this.has(u.value)===!1?(this.insert(u.value),u=s.erase(u)):u=u.next()},l}(t.SetContainer);return yt.UniqueSet=o,yt}var Dr={},Rr={},hi;function ku(){return hi||(hi=1,function(n){var e=B&&B.__read||function(t,i){var o=typeof Symbol=="function"&&t[Symbol.iterator];if(!o)return t;var a=o.call(t),l,s=[],u;try{for(;(i===void 0||i-- >0)&&!(l=a.next()).done;)s.push(l.value)}catch(c){u={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return s},r=B&&B.__spreadArray||function(t,i,o){if(o||arguments.length===2)for(var a=0,l=i.length,s;a<l;a++)(s||!(a in i))&&(s||(s=Array.prototype.slice.call(i,0,a)),s[a]=i[a]);return t.concat(s||Array.prototype.slice.call(i))};Object.defineProperty(n,"__esModule",{value:!0}),n.IAssociativeContainer=void 0,function(t){function i(o){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var s,u;return a.length>=1&&a[0]instanceof Array?(s=function(){var c=a[0];o.push.apply(o,r([],e(c),!1))},u=a.slice(1)):a.length>=2&&a[0].next instanceof Function&&a[1].next instanceof Function?(s=function(){var c=a[0],f=a[1];o.assign(c,f)},u=a.slice(2)):(s=null,u=a),{ramda:s,tail:u}}t.construct=i}(n.IAssociativeContainer||(n.IAssociativeContainer={}))}(Rr)),Rr}var Ct={},qt={},Pt={},_i;function wu(){if(_i)return Pt;_i=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt._Get_root=void 0;var n=zt;function e(){return r===null&&(r=(0,n.is_node)()?B:self,r.__s_iUID===void 0&&(r.__s_iUID=0)),r}Pt._Get_root=e;var r=null;return Pt}var pi;function oa(){if(pi)return qt;pi=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.get_uid=void 0;var n=wu();function e(r){if(r instanceof Object){if(r.hasOwnProperty("__get_m_iUID")===!1){var t=++(0,n._Get_root)().__s_iUID;Object.defineProperty(r,"__get_m_iUID",{value:function(){return t}})}return r.__get_m_iUID()}else return r===void 0?-1:0}return qt.get_uid=e,qt}var vi;function nn(){if(vi)return Ct;vi=1;var n=B&&B.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,c=u&&s[u],f=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.hash=void 0;var e=oa();function r(){for(var s,u,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=a;try{for(var h=n(c),_=h.next();!_.done;_=h.next()){var y=_.value;y=y&&y.valueOf();var b=typeof y;if(b==="boolean")d=t(y,d);else if(b==="number"||b==="bigint")d=i(y,d);else if(b==="string")d=o(y,d);else if(y instanceof Object&&y.hashCode instanceof Function){var E=y.hashCode();if(c.length===1)return E;d=d^E,d*=l}else d=i((0,e.get_uid)(y),d)}}catch(S){s={error:S}}finally{try{_&&!_.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return Math.abs(d)}Ct.hash=r;function t(s,u){return u^=s?1:0,u*=l,u}function i(s,u){return o(s.toString(),u)}function o(s,u){for(var c=0;c<s.length;++c)u^=s.charCodeAt(c),u*=l;return Math.abs(u)}var a=2166136261,l=16777619;return Ct}var Ae={},mi;function on(){if(mi)return Ae;mi=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.greater_equal=Ae.greater=Ae.less_equal=Ae.less=Ae.not_equal_to=Ae.equal_to=void 0;var n=oa();function e(l,s){return l=l&&l.valueOf(),s=s&&s.valueOf(),l instanceof Object&&l.equals instanceof Function?l.equals(s):l===s}Ae.equal_to=e;function r(l,s){return!e(l,s)}Ae.not_equal_to=r;function t(l,s){return l=l.valueOf(),s=s.valueOf(),l instanceof Object?l.less instanceof Function?l.less(s):(0,n.get_uid)(l)<(0,n.get_uid)(s):l<s}Ae.less=t;function i(l,s){return t(l,s)||e(l,s)}Ae.less_equal=i;function o(l,s){return!i(l,s)}Ae.greater=o;function a(l,s){return!t(l,s)}return Ae.greater_equal=a,Ae}var yi;function aa(){return yi||(yi=1,function(n){var e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(n,"__esModule",{value:!0}),n.IHashContainer=void 0;var t=ku(),i=nn(),o=on();(function(a){function l(s,u,c){for(var f=[],d=3;d<arguments.length;d++)f[d-3]=arguments[d];var h=null,_=i.hash,y=o.equal_to;if(f.length===1&&f[0]instanceof u){var b=f[0];_=b.hash_function(),y=b.key_eq(),h=function(){var S=b.begin(),D=b.end();s.assign(S,D)}}else{var E=t.IAssociativeContainer.construct.apply(t.IAssociativeContainer,r([s],e(f),!1));h=E.ramda,E.tail.length>=1&&(_=E.tail[0]),E.tail.length>=2&&(y=E.tail[1])}c(_,y),h!==null&&h()}a.construct=l})(n.IHashContainer||(n.IHashContainer={}))}(Dr)),Dr}var Tr={},Dt={},Rt={},bi;function an(){if(bi)return Rt;bi=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.ListIterator=void 0;var n=br(),e=function(){function r(t,i,o){this.prev_=t,this.next_=i,this.value_=o}return r._Set_prev=function(t,i){t.prev_=i},r._Set_next=function(t,i){t.next_=i},r.prototype.prev=function(){return this.prev_},r.prototype.next=function(){return this.next_},Object.defineProperty(r.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),r.prototype._Try_value=function(){if(this.value_===void 0&&this.equals(this.source().end())===!0)throw n.ErrorGenerator.iterator_end_value(this.source())},r.prototype.equals=function(t){return this===t},r}();return Rt.ListIterator=e,Rt}var Tt={},gi;function Eu(){if(gi)return Tt;gi=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.Repeater=void 0;var n=function(){function e(r,t){this.index_=r,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(r){return this.index_===r.index_},e}();return Tt.Repeater=n,Tt}var Me={},ki;function Ou(){if(ki)return Me;ki=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.next=Me.prev=Me.advance=Me.distance=Me.size=Me.empty=void 0;var n=ia();function e(s){return s instanceof Array?s.length!==0:s.empty()}Me.empty=e;function r(s){return s instanceof Array?s.length:s.size()}Me.size=r;function t(s,u){if(s.index instanceof Function)return i(s,u);for(var c=0;!s.equals(u);s=s.next())++c;return c}Me.distance=t;function i(s,u){var c=s.index(),f=u.index();return s.base instanceof Function?c-f:f-c}function o(s,u){if(u===0)return s;if(s.advance instanceof Function)return s.advance(u);var c;if(u<0){if(!(s.prev instanceof Function))throw new n.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");c=function(f){return f.prev()},u=-u}else c=function(f){return f.next()};for(;u-- >0;)s=c(s);return s}Me.advance=o;function a(s,u){return u===void 0&&(u=1),u===1?s.prev():o(s,-u)}Me.prev=a;function l(s,u){return u===void 0&&(u=1),u===1?s.next():o(s,u)}return Me.next=l,Me}var wi;function sa(){if(wi)return Dt;wi=1;var n=B&&B.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(d[_]=h[_])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),e=B&&B.__read||function(u,c){var f=typeof Symbol=="function"&&u[Symbol.iterator];if(!f)return u;var d=f.call(u),h,_=[],y;try{for(;(c===void 0||c-- >0)&&!(h=d.next()).done;)_.push(h.value)}catch(b){y={error:b}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(y)throw y.error}}return _};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.ListContainer=void 0;var r=tn(),t=an(),i=Eu(),o=rn(),a=Ou(),l=br(),s=function(u){n(c,u);function c(){var f=u.call(this)||this;return f.end_=f._Create_iterator(null,null),f.clear(),f}return c.prototype.assign=function(f,d){this.clear(),this.insert(this.end(),f,d)},c.prototype.clear=function(){t.ListIterator._Set_prev(this.end_,this.end_),t.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},c.prototype.resize=function(f){var d=f-this.size();d>0?this.insert(this.end(),d,void 0):d<0&&this.erase((0,a.advance)(this.end(),-d),this.end())},c.prototype.begin=function(){return this.begin_},c.prototype.end=function(){return this.end_},c.prototype.size=function(){return this.size_},c.prototype.push_front=function(f){this.insert(this.begin_,f)},c.prototype.push_back=function(f){this.insert(this.end_,f)},c.prototype.pop_front=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},c.prototype.pop_back=function(){if(this.empty()===!0)throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},c.prototype.push=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];if(f.length===0)return this.size();var h=new o.NativeArrayIterator(f,0),_=new o.NativeArrayIterator(f,f.length);return this._Insert_by_range(this.end(),h,_),this.size()},c.prototype.insert=function(f){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return d.length===1?this._Insert_by_repeating_val(f,1,d[0]):d.length===2&&typeof d[0]=="number"?this._Insert_by_repeating_val(f,d[0],d[1]):this._Insert_by_range(f,d[0],d[1])},c.prototype._Insert_by_repeating_val=function(f,d,h){var _=new i.Repeater(0,h),y=new i.Repeater(d);return this._Insert_by_range(f,_,y)},c.prototype._Insert_by_range=function(f,d,h){for(var _=f.prev(),y=null,b=0,E=d;E.equals(h)===!1;E=E.next()){var S=this._Create_iterator(_,null,E.value);b===0&&(y=S),t.ListIterator._Set_next(_,S),_=S,++b}return f.equals(this.begin())===!0&&(this.begin_=y),t.ListIterator._Set_next(_,f),t.ListIterator._Set_prev(f,_),this.size_+=b,y},c.prototype.erase=function(f,d){return d===void 0&&(d=f.next()),this._Erase_by_range(f,d)},c.prototype._Erase_by_range=function(f,d){if(f.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(f.erased_===!0)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(f.equals(this.end_))return this.end_;var h=f.prev();t.ListIterator._Set_next(h,d),t.ListIterator._Set_prev(d,h);for(var _=f;!_.equals(d);_=_.next())_.erased_=!0,--this.size_;return f.equals(this.begin_)&&(this.begin_=d),d},c.prototype.swap=function(f){var d,h,_;d=e([f.begin_,this.begin_],2),this.begin_=d[0],f.begin_=d[1],h=e([f.end_,this.end_],2),this.end_=h[0],f.end_=h[1],_=e([f.size_,this.size_],2),this.size_=_[0],f.size_=_[1]},c}(r.Container);return Dt.ListContainer=s,Dt}var At={},Ei;function la(){if(Ei)return At;Ei=1,Object.defineProperty(At,"__esModule",{value:!0}),At.ReverseIterator=void 0;var n=function(){function e(r){this.base_=r.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(r){return this.base_.equals(r.base_)},e}();return At.ReverseIterator=n,At}var Oi;function Su(){return Oi||(Oi=1,function(n){var e=B&&B.__extends||function(){var l=function(s,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=B&&B.__read||function(l,s){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(s===void 0||s-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(n,"__esModule",{value:!0}),n.SetElementList=void 0;var t=sa(),i=an(),o=la(),a=function(l){e(s,l);function s(u){var c=l.call(this)||this;return c.associative_=u,c}return s.prototype._Create_iterator=function(u,c,f){return s.Iterator.create(this,u,c,f)},s._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},s.prototype.associative=function(){return this.associative_},s}(t.ListContainer);n.SetElementList=a,function(l){var s=function(c){e(f,c);function f(d,h,_,y){var b=c.call(this,h,_,y)||this;return b.source_=d,b}return f.create=function(d,h,_,y){return new f(d,h,_,y)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.source_.associative()},f}(i.ListIterator);l.Iterator=s;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},f}(o.ReverseIterator);l.ReverseIterator=u}(a=n.SetElementList||(n.SetElementList={})),n.SetElementList=a}(Tr)),Tr}var Mt={},Lt={},Si;function ua(){if(Si)return Lt;Si=1;var n=B&&B.__values||function(i){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&i[o],l=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.HashBuckets=void 0;var e=function(){function i(o,a){this.fetcher_=o,this.hasher_=a,this.max_load_factor_=t,this.data_=[],this.size_=0,this.initialize()}return i.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},i.prototype.rehash=function(o){var a,l,s,u;o=Math.max(o,r);for(var c=[],f=0;f<o;++f)c.push([]);try{for(var d=n(this.data_),h=d.next();!h.done;h=d.next()){var _=h.value;try{for(var y=(s=void 0,n(_)),b=y.next();!b.done;b=y.next()){var E=b.value,S=this.hasher_(this.fetcher_(E))%c.length;c[S].push(E)}}catch(D){s={error:D}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}}}catch(D){a={error:D}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(a)throw a.error}}this.data_=c},i.prototype.reserve=function(o){o>this.capacity()&&(o=Math.floor(o/this.max_load_factor_),this.rehash(o))},i.prototype.initialize=function(){for(var o=0;o<r;++o)this.data_.push([])},i.prototype.length=function(){return this.data_.length},i.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},i.prototype.at=function(o){return this.data_[o]},i.prototype.load_factor=function(){return this.size_/this.length()},i.prototype.max_load_factor=function(o){if(o===void 0&&(o=null),o===null)return this.max_load_factor_;this.max_load_factor_=o},i.prototype.hash_function=function(){return this.hasher_},i.prototype.index=function(o){return this.hasher_(this.fetcher_(o))%this.length()},i.prototype.insert=function(o){var a=this.capacity();++this.size_>a&&this.reserve(a*2);var l=this.index(o);this.data_[l].push(o)},i.prototype.erase=function(o){for(var a=this.index(o),l=this.data_[a],s=0;s<l.length;++s)if(l[s]===o){l.splice(s,1),--this.size_;break}},i}();Lt.HashBuckets=e;var r=10,t=1;return Lt}var Ii;function Iu(){if(Ii)return Mt;Ii=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__values||function(a){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&a[l],u=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.SetHashBuckets=void 0;var t=ua(),i=function(a){n(l,a);function l(s,u,c){var f=a.call(this,o,u)||this;return f.source_=s,f.key_eq_=c,f}return l._Swap_source=function(s,u){var c;c=e([u.source_,s.source_],2),s.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(s){var u,c,f=this.hash_function()(s)%this.length(),d=this.at(f);try{for(var h=r(d),_=h.next();!_.done;_=h.next()){var y=_.value;if(this.key_eq_(y.value,s))return y}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);Mt.SetHashBuckets=i;function o(a){return a.value}return Mt}var rt={},Ci;function ca(){if(Ci)return rt;Ci=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.make_pair=rt.Pair=void 0;var n=nn(),e=on(),r=function(){function i(o,a){this.first=o,this.second=a}return i.prototype.equals=function(o){return(0,e.equal_to)(this.first,o.first)&&(0,e.equal_to)(this.second,o.second)},i.prototype.less=function(o){return(0,e.equal_to)(this.first,o.first)===!1?(0,e.less)(this.first,o.first):(0,e.less)(this.second,o.second)},i.prototype.hashCode=function(){return(0,n.hash)(this.first,this.second)},i}();rt.Pair=r;function t(i,o){return new r(i,o)}return rt.make_pair=t,rt}var qi;function Cu(){return qi||(qi=1,function(n){var e=B&&B.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(h[y]=_[y])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function h(){this.constructor=f}f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),r=B&&B.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h=d.call(c),_,y=[],b;try{for(;(f===void 0||f-- >0)&&!(_=h.next()).done;)y.push(_.value)}catch(E){b={error:E}}finally{try{_&&!_.done&&(d=h.return)&&d.call(h)}finally{if(b)throw b.error}}return y},t=B&&B.__spreadArray||function(c,f,d){if(d||arguments.length===2)for(var h=0,_=f.length,y;h<_;h++)(y||!(h in f))&&(y||(y=Array.prototype.slice.call(f,0,h)),y[h]=f[h]);return c.concat(y||Array.prototype.slice.call(f))};Object.defineProperty(n,"__esModule",{value:!0}),n.HashSet=void 0;var i=gu(),o=aa(),a=Su(),l=Iu(),s=ca(),u=function(c){e(f,c);function f(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var _=c.call(this,function(y){return new a.SetElementList(y)})||this;return o.IHashContainer.construct.apply(o.IHashContainer,t([_,f,function(y,b){_.buckets_=new l.SetHashBuckets(_,y,b)}],r(d),!1)),_}return f.prototype.clear=function(){this.buckets_.clear(),c.prototype.clear.call(this)},f.prototype.swap=function(d){var h,_;h=r([d.data_,this.data_],2),this.data_=h[0],d.data_=h[1],a.SetElementList._Swap_associative(this.data_,d.data_),l.SetHashBuckets._Swap_source(this.buckets_,d.buckets_),_=r([d.buckets_,this.buckets_],2),this.buckets_=_[0],d.buckets_=_[1]},f.prototype.find=function(d){return this.buckets_.find(d)},f.prototype.begin=function(d){return d===void 0&&(d=null),d===null?c.prototype.begin.call(this):this.buckets_.at(d)[0]},f.prototype.end=function(d){if(d===void 0&&(d=null),d===null)return c.prototype.end.call(this);var h=this.buckets_.at(d);return h[h.length-1].next()},f.prototype.rbegin=function(d){return d===void 0&&(d=null),this.end(d).reverse()},f.prototype.rend=function(d){return d===void 0&&(d=null),this.begin(d).reverse()},f.prototype.bucket_count=function(){return this.buckets_.length()},f.prototype.bucket_size=function(d){return this.buckets_.at(d).length},f.prototype.load_factor=function(){return this.buckets_.load_factor()},f.prototype.hash_function=function(){return this.buckets_.hash_function()},f.prototype.key_eq=function(){return this.buckets_.key_eq()},f.prototype.bucket=function(d){return this.hash_function()(d)%this.buckets_.length()},f.prototype.max_load_factor=function(d){return d===void 0&&(d=null),this.buckets_.max_load_factor(d)},f.prototype.reserve=function(d){this.buckets_.reserve(d)},f.prototype.rehash=function(d){this.buckets_.rehash(d)},f.prototype._Insert_by_key=function(d){var h=this.find(d);return h.equals(this.end())===!1?new s.Pair(h,!1):(this.data_.push(d),h=h.prev(),this._Handle_insert(h,h.next()),new s.Pair(h,!0))},f.prototype._Insert_by_hint=function(d,h){var _=this.find(h);return _.equals(this.end())===!0&&(_=this.data_.insert(d,h),this._Handle_insert(_,_.next())),_},f.prototype._Handle_insert=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.insert(d)},f.prototype._Handle_erase=function(d,h){for(;!d.equals(h);d=d.next())this.buckets_.erase(d)},f}(i.UniqueSet);n.HashSet=u,function(c){c.Iterator=a.SetElementList.Iterator,c.ReverseIterator=a.SetElementList.ReverseIterator}(u=n.HashSet||(n.HashSet={})),n.HashSet=u}(qr)),qr}var Ar={},jt={},Nt={},Pi;function qu(){if(Pi)return Nt;Pi=1;var n=B&&B.__extends||function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function l(){this.constructor=o}o.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.MapContainer=void 0;var e=tn(),r=rn(),t=function(i){n(o,i);function o(a){var l=i.call(this)||this;return l.data_=a(l),l}return o.prototype.assign=function(a,l){this.clear(),this.insert(a,l)},o.prototype.clear=function(){this.data_.clear()},o.prototype.begin=function(){return this.data_.begin()},o.prototype.end=function(){return this.data_.end()},o.prototype.has=function(a){return!this.find(a).equals(this.end())},o.prototype.size=function(){return this.data_.size()},o.prototype.push=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var s=new r.NativeArrayIterator(a,0),u=new r.NativeArrayIterator(a,a.length);return this.insert(s,u),this.size()},o.prototype.insert=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1?this.emplace(a[0].first,a[0].second):a[0].next instanceof Function&&a[1].next instanceof Function?this._Insert_by_range(a[0],a[1]):this.emplace_hint(a[0],a[1].first,a[1].second)},o.prototype.erase=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a.length===1&&(!(a[0]instanceof this.end().constructor)||a[0].source()!==this)?this._Erase_by_key(a[0]):a.length===1?this._Erase_by_range(a[0]):this._Erase_by_range(a[0],a[1])},o.prototype._Erase_by_range=function(a,l){l===void 0&&(l=a.next());var s=this.data_.erase(a,l);return this._Handle_erase(a,l),s},o}(e.Container);return Nt.MapContainer=t,Nt}var Di;function Pu(){if(Di)return jt;Di=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__spreadArray||function(a,l,s){if(s||arguments.length===2)for(var u=0,c=l.length,f;u<c;u++)(f||!(u in l))&&(f||(f=Array.prototype.slice.call(l,0,u)),f[u]=l[u]);return a.concat(f||Array.prototype.slice.call(l))};Object.defineProperty(jt,"__esModule",{value:!0}),jt.UniqueMap=void 0;var t=qu(),i=br(),o=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.count=function(s){return this.find(s).equals(this.end())?0:1},l.prototype.get=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"get",s);return u.second},l.prototype.take=function(s,u){var c=this.find(s);return c.equals(this.end())?this.emplace(s,u()).first.second:c.second},l.prototype.set=function(s,u){this.insert_or_assign(s,u)},l.prototype.insert=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.prototype.insert.apply(this,r([],e(s),!1))},l.prototype._Insert_by_range=function(s,u){for(var c=s;!c.equals(u);c=c.next())this.emplace(c.value.first,c.value.second)},l.prototype.insert_or_assign=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(s.length===2)return this._Insert_or_assign_with_key_value(s[0],s[1]);if(s.length===3)return this._Insert_or_assign_with_hint(s[0],s[1],s[2])},l.prototype._Insert_or_assign_with_key_value=function(s,u){var c=this.emplace(s,u);return c.second===!1&&(c.first.second=u),c},l.prototype._Insert_or_assign_with_hint=function(s,u,c){var f=this.emplace_hint(s,u,c);return f.second!==c&&(f.second=c),f},l.prototype.extract=function(s){return s instanceof this.end().constructor?this._Extract_by_iterator(s):this._Extract_by_key(s)},l.prototype._Extract_by_key=function(s){var u=this.find(s);if(u.equals(this.end())===!0)throw i.ErrorGenerator.key_nout_found(this,"extract",s);var c=u.value;return this._Erase_by_range(u),c},l.prototype._Extract_by_iterator=function(s){return s.equals(this.end())===!0?this.end():(this._Erase_by_range(s),s)},l.prototype._Erase_by_key=function(s){var u=this.find(s);return u.equals(this.end())===!0?0:(this._Erase_by_range(u),1)},l.prototype.merge=function(s){for(var u=s.begin();!u.equals(s.end());)this.has(u.first)===!1?(this.insert(u.value),u=s.erase(u)):u=u.next()},l}(t.MapContainer);return jt.UniqueMap=o,jt}var Mr={},Ri;function Du(){return Ri||(Ri=1,function(n){var e=B&&B.__extends||function(){var l=function(s,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},l(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=B&&B.__read||function(l,s){var u=typeof Symbol=="function"&&l[Symbol.iterator];if(!u)return l;var c=u.call(l),f,d=[],h;try{for(;(s===void 0||s-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(_){h={error:_}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(h)throw h.error}}return d};Object.defineProperty(n,"__esModule",{value:!0}),n.MapElementList=void 0;var t=sa(),i=an(),o=la(),a=function(l){e(s,l);function s(u){var c=l.call(this)||this;return c.associative_=u,c}return s.prototype._Create_iterator=function(u,c,f){return s.Iterator.create(this,u,c,f)},s._Swap_associative=function(u,c){var f;f=r([c.associative_,u.associative_],2),u.associative_=f[0],c.associative_=f[1]},s.prototype.associative=function(){return this.associative_},s}(t.ListContainer);n.MapElementList=a,function(l){var s=function(c){e(f,c);function f(d,h,_,y){var b=c.call(this,h,_,y)||this;return b.list_=d,b}return f.create=function(d,h,_,y){return new f(d,h,_,y)},f.prototype.reverse=function(){return new u(this)},f.prototype.source=function(){return this.list_.associative()},Object.defineProperty(f.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.value.second},set:function(d){this.value.second=d},enumerable:!1,configurable:!0}),f}(i.ListIterator);l.Iterator=s;var u=function(c){e(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype._Create_neighbor=function(d){return new f(d)},Object.defineProperty(f.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"second",{get:function(){return this.base_.second},set:function(d){this.base_.second=d},enumerable:!1,configurable:!0}),f}(o.ReverseIterator);l.ReverseIterator=u}(a=n.MapElementList||(n.MapElementList={})),n.MapElementList=a}(Mr)),Mr}var Vt={},Ti;function Ru(){if(Ti)return Vt;Ti=1;var n=B&&B.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function u(){this.constructor=l}l.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),e=B&&B.__read||function(a,l){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),c,f=[],d;try{for(;(l===void 0||l-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(d)throw d.error}}return f},r=B&&B.__values||function(a){var l=typeof Symbol=="function"&&Symbol.iterator,s=l&&a[l],u=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.MapHashBuckets=void 0;var t=ua(),i=function(a){n(l,a);function l(s,u,c){var f=a.call(this,o,u)||this;return f.source_=s,f.key_eq_=c,f}return l._Swap_source=function(s,u){var c;c=e([u.source_,s.source_],2),s.source_=c[0],u.source_=c[1]},l.prototype.key_eq=function(){return this.key_eq_},l.prototype.find=function(s){var u,c,f=this.hash_function()(s)%this.length(),d=this.at(f);try{for(var h=r(d),_=h.next();!_.done;_=h.next()){var y=_.value;if(this.key_eq_(y.first,s))return y}}catch(b){u={error:b}}finally{try{_&&!_.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return this.source_.end()},l}(t.HashBuckets);Vt.MapHashBuckets=i;function o(a){return a.first}return Vt}var Ft={},Ai;function Tu(){if(Ai)return Ft;Ai=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Entry=void 0;var n=nn(),e=on(),r=function(){function t(i,o){this.first=i,this.second=o}return t.prototype.equals=function(i){return(0,e.equal_to)(this.first,i.first)},t.prototype.less=function(i){return(0,e.less)(this.first,i.first)},t.prototype.hashCode=function(){return(0,n.hash)(this.first)},t}();return Ft.Entry=r,Ft}var Mi;function Au(){return Mi||(Mi=1,function(n){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(_[b]=y[b])},f(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),r=B&&B.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var _=h.call(f),y,b=[],E;try{for(;(d===void 0||d-- >0)&&!(y=_.next()).done;)b.push(y.value)}catch(S){E={error:S}}finally{try{y&&!y.done&&(h=_.return)&&h.call(_)}finally{if(E)throw E.error}}return b},t=B&&B.__spreadArray||function(f,d,h){if(h||arguments.length===2)for(var _=0,y=d.length,b;_<y;_++)(b||!(_ in d))&&(b||(b=Array.prototype.slice.call(d,0,_)),b[_]=d[_]);return f.concat(b||Array.prototype.slice.call(d))};Object.defineProperty(n,"__esModule",{value:!0}),n.HashMap=void 0;var i=Pu(),o=aa(),a=Du(),l=Ru(),s=Tu(),u=ca(),c=function(f){e(d,f);function d(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];var y=f.call(this,function(b){return new a.MapElementList(b)})||this;return o.IHashContainer.construct.apply(o.IHashContainer,t([y,d,function(b,E){y.buckets_=new l.MapHashBuckets(y,b,E)}],r(h),!1)),y}return d.prototype.clear=function(){this.buckets_.clear(),f.prototype.clear.call(this)},d.prototype.swap=function(h){var _,y;_=r([h.data_,this.data_],2),this.data_=_[0],h.data_=_[1],a.MapElementList._Swap_associative(this.data_,h.data_),l.MapHashBuckets._Swap_source(this.buckets_,h.buckets_),y=r([h.buckets_,this.buckets_],2),this.buckets_=y[0],h.buckets_=y[1]},d.prototype.find=function(h){return this.buckets_.find(h)},d.prototype.begin=function(h){return h===void 0&&(h=null),h===null?f.prototype.begin.call(this):this.buckets_.at(h)[0]},d.prototype.end=function(h){if(h===void 0&&(h=null),h===null)return f.prototype.end.call(this);var _=this.buckets_.at(h);return _[_.length-1].next()},d.prototype.rbegin=function(h){return h===void 0&&(h=null),this.end(h).reverse()},d.prototype.rend=function(h){return h===void 0&&(h=null),this.begin(h).reverse()},d.prototype.bucket_count=function(){return this.buckets_.length()},d.prototype.bucket_size=function(h){return this.buckets_.at(h).length},d.prototype.load_factor=function(){return this.buckets_.load_factor()},d.prototype.hash_function=function(){return this.buckets_.hash_function()},d.prototype.key_eq=function(){return this.buckets_.key_eq()},d.prototype.bucket=function(h){return this.hash_function()(h)%this.buckets_.length()},d.prototype.max_load_factor=function(h){return h===void 0&&(h=null),this.buckets_.max_load_factor(h)},d.prototype.reserve=function(h){this.buckets_.reserve(h)},d.prototype.rehash=function(h){this.buckets_.rehash(h)},d.prototype.emplace=function(h,_){var y=this.find(h);return y.equals(this.end())===!1?new u.Pair(y,!1):(this.data_.push(new s.Entry(h,_)),y=y.prev(),this._Handle_insert(y,y.next()),new u.Pair(y,!0))},d.prototype.emplace_hint=function(h,_,y){var b=this.find(_);return b.equals(this.end())===!0&&(b=this.data_.insert(h,new s.Entry(_,y)),this._Handle_insert(b,b.next())),b},d.prototype._Handle_insert=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.insert(h)},d.prototype._Handle_erase=function(h,_){for(;!h.equals(_);h=h.next())this.buckets_.erase(h)},d}(i.UniqueMap);n.HashMap=c,function(f){f.Iterator=a.MapElementList.Iterator,f.ReverseIterator=a.MapElementList.ReverseIterator}(c=n.HashMap||(n.HashMap={})),n.HashMap=c}(Ar)),Ar}var Li;function Mu(){if(Li)return Xt;Li=1;var n=B&&B.__values||function(i){var o=typeof Symbol=="function"&&i[Symbol.iterator],a=0;return o?o.call(i):{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}}};Object.defineProperty(Xt,"__esModule",{value:!0});var e=Cu(),r=Au(),t=function(){function i(){this.listeners_=new r.HashMap,this.created_at_=new Date}return i.prototype.dispatchEvent=function(o){var a,l,s=this.listeners_.find(o.type);if(!s.equals(this.listeners_.end())){o.target=this,o.timeStamp=new Date().getTime()-this.created_at_.getTime();try{for(var u=n(s.second),c=u.next();!c.done;c=u.next()){var f=c.value;f(o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}},i.prototype.addEventListener=function(o,a){var l=this.listeners_.find(o);l.equals(this.listeners_.end())&&(l=this.listeners_.emplace(o,new e.HashSet).first),l.second.insert(a)},i.prototype.removeEventListener=function(o,a){var l=this.listeners_.find(o);l.equals(this.listeners_.end())||(l.second.erase(a),l.second.empty()&&this.listeners_.erase(l))},i}();return Xt.EventTarget=t,Xt}var Zt={},ji;function gr(){if(ji)return Zt;ji=1,Object.defineProperty(Zt,"__esModule",{value:!0});var n=function(){function e(r,t){this.type=r,t&&Object.assign(this,t)}return e}();return Zt.Event=n,Zt}var $t={},Ni;function Lu(){if(Ni)return $t;Ni=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},t(i,o)};return function(i,o){t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty($t,"__esModule",{value:!0});var e=gr(),r=function(t){n(i,t);function i(o,a){return t.call(this,o,a)||this}return i}(e.Event);return $t.CloseEvent=r,$t}var xt={},Vi;function ju(){if(Vi)return xt;Vi=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},t(i,o)};return function(i,o){t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(xt,"__esModule",{value:!0});var e=gr(),r=function(t){n(i,t);function i(o,a){return t.call(this,o,a)||this}return i}(e.Event);return xt.MessageEvent=r,xt}var er={},Fi;function Nu(){if(Fi)return er;Fi=1;var n=B&&B.__extends||function(){var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var s in l)l.hasOwnProperty(s)&&(a[s]=l[s])},t(i,o)};return function(i,o){t(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(er,"__esModule",{value:!0});var e=gr(),r=function(t){n(i,t);function i(o,a){return t.call(this,o,a)||this}return i}(e.Event);return er.ErrorEvent=r,er}var Ui;function Vu(){return Ui||(Ui=1,function(n){var e=B&&B.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var b in y)y.hasOwnProperty(b)&&(_[b]=y[b])},f(d,h)};return function(d,h){f(d,h);function _(){this.constructor=d}d.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)}}(),r=B&&B.__assign||function(){return r=Object.assign||function(f){for(var d,h=1,_=arguments.length;h<_;h++){d=arguments[h];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var t=pu(),i=Mu(),o=gr(),a=Lu(),l=ju(),s=Nu(),u=function(f){e(d,f);function d(h,_){var y=f.call(this)||this;return y.on_={},y.state_=d.CONNECTING,y.client_=new t.client,y.client_.on("connect",y._Handle_connect.bind(y)),y.client_.on("connectFailed",y._Handle_error.bind(y)),typeof _=="string"&&(_=[_]),y.client_.connect(h,_),y}return d.prototype.close=function(h,_){this.state_=d.CLOSING,h===void 0?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(h,_,!0)},d.prototype.send=function(h){if(typeof h.valueOf()=="string")this.connection_.sendUTF(h);else{var _=void 0;h instanceof Buffer?_=h:h instanceof Blob?_=new Buffer(h,"blob"):h.buffer?_=new Buffer(h.buffer):_=new Buffer(h),this.connection_.sendBytes(_)}},Object.defineProperty(d.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onopen",{get:function(){return this.on_.open},set:function(h){this._Set_on("open",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onclose",{get:function(){return this.on_.close},set:function(h){this._Set_on("close",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onmessage",{get:function(){return this.on_.message},set:function(h){this._Set_on("message",h)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"onerror",{get:function(){return this.on_.error},set:function(h){this._Set_on("error",h)},enumerable:!0,configurable:!0}),d.prototype._Set_on=function(h,_){this.on_[h]&&this.removeEventListener(h,this.on_[h]),this.addEventListener(h,_),this.on_[h]=_},d.prototype._Handle_connect=function(h){this.connection_=h,this.state_=d.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var _=new o.Event("open",c);this.dispatchEvent(_)},d.prototype._Handle_close=function(h,_){var y=new a.CloseEvent("close",r({},c,{code:h,reason:_}));this.state_=d.CLOSED,this.dispatchEvent(y)},d.prototype._Handle_message=function(h){var _=new l.MessageEvent("message",r({},c,{data:h.binaryData?h.binaryData:h.utf8Data}));this.dispatchEvent(_)},d.prototype._Handle_error=function(h){var _=new s.ErrorEvent("error",r({},c,{error:h,message:h.message}));this.state_===d.CONNECTING&&(this.state_=d.CLOSED),this.dispatchEvent(_)},d}(i.EventTarget);n.WebSocket=u,function(f){f.CONNECTING=0,f.OPEN=1,f.CLOSING=2,f.CLOSED=3}(u=n.WebSocket||(n.WebSocket={})),n.WebSocket=u;var c={bubbles:!1,cancelable:!1}}(Or)),Or}var Fu=zt;Fu.is_node()&&(B.WebSocket=Vu().WebSocket);async function Bi(n){const e=Uu(n),r=await caches.open("user-icon-cache-v1"),t=await r.match(`../usericon/${e}`);if(t){console.log(t);const i=await t.blob();return URL.createObjectURL(i)}else try{const i=await fetch(n);if(i.ok){r.put(`../usericon/${e}`,i.clone());const o=await i.blob();return URL.createObjectURL(o)}else return n}catch{return n}}function Uu(n){const e=Bu(n),r=Hu(n);return`image-${e}.${r}`}function Bu(n){let e=0;for(let r=0;r<n.length;r++){const t=n.charCodeAt(r);e=(e<<5)-e+t,e|=0}return e}function Hu(n){const e=n.split(".");return e[e.length-1]}function Hi(n){let e,r,t,i,o=JSON.parse(n[1][0].value.metadata.content).picture,a,l,s,u,c,f,d,h,_,y,b=JSON.parse(n[1][0].value.metadata.content).about+"",E,S,D,T,L,O,P,R=JSON.stringify(n[1][0].value.metadata,void 0,4)+"",M,Q,$,z,x,_e,W,K,G,ee,fe,J,de,pe,se,ne=n[0].buttonTextCancel+"",ce,ve,Te,me=o&&Qi(n);return{c(){e=g("div"),r=g("div"),t=g("div"),i=g("div"),me&&me.c(),a=F(),l=g("div"),s=g("img"),c=F(),f=g("div"),d=g("div"),h=C("about"),_=F(),y=g("div"),E=C(b),S=F(),D=g("div"),T=g("div"),L=C("profileJSON"),O=F(),P=g("div"),M=C(R),Q=F(),$=g("div"),z=g("div"),x=g("button"),_e=C("copy pubKey"),W=F(),K=g("button"),G=C("copy hexKey"),ee=F(),fe=g("div"),J=g("button"),de=C("Open in external app"),pe=F(),se=g("button"),ce=C(ne),this.h()},l(Le){e=k(Le,"DIV",{class:!0});var V=w(e);r=k(V,"DIV",{class:!0});var ge=w(r);t=k(ge,"DIV",{class:!0});var Ne=w(t);i=k(Ne,"DIV",{class:!0});var $e=w(i);me&&me.l($e),$e.forEach(p),a=U(Ne),l=k(Ne,"DIV",{});var lt=w(l);s=k(lt,"IMG",{class:!0,src:!0,alt:!0}),lt.forEach(p),Ne.forEach(p),c=U(ge),f=k(ge,"DIV",{class:!0});var xe=w(f);d=k(xe,"DIV",{class:!0});var ke=w(d);h=q(ke,"about"),ke.forEach(p),_=U(xe),y=k(xe,"DIV",{class:!0});var we=w(y);E=q(we,b),we.forEach(p),xe.forEach(p),S=U(ge),D=k(ge,"DIV",{class:!0});var Ve=w(D);T=k(Ve,"DIV",{class:!0});var he=w(T);L=q(he,"profileJSON"),he.forEach(p),O=U(Ve),P=k(Ve,"DIV",{class:!0});var _t=w(P);M=q(_t,R),_t.forEach(p),Ve.forEach(p),ge.forEach(p),Q=U(V),$=k(V,"DIV",{class:!0});var et=w($);z=k(et,"DIV",{class:!0});var je=w(z);x=k(je,"BUTTON",{type:!0,class:!0});var ye=w(x);_e=q(ye,"copy pubKey"),ye.forEach(p),W=U(je),K=k(je,"BUTTON",{type:!0,class:!0});var pt=w(K);G=q(pt,"copy hexKey"),pt.forEach(p),je.forEach(p),ee=U(et),fe=k(et,"DIV",{class:!0});var tt=w(fe);J=k(tt,"BUTTON",{type:!0,class:!0});var vt=w(J);de=q(vt,"Open in external app"),vt.forEach(p),pe=U(tt),se=k(tt,"BUTTON",{type:!0,class:!0});var mt=w(se);ce=q(mt,ne),mt.forEach(p),tt.forEach(p),et.forEach(p),V.forEach(p),this.h()},h(){m(i,"class","w-16 h-16 rounded-lg flex justify-center overflow-hidden bg-surface-500/25"),m(s,"class",""),ue(s.src,u=JSON.parse(n[1][0].value.metadata.content).banner)||m(s,"src",u),m(s,"alt",""),m(t,"class","grid grid-cols-[auto_1fr] gap-2 max-w-md"),m(d,"class","font-bold"),m(y,"class","break-all whitespace-pre-wrap text-sm max-h-32 overflow-auto"),m(f,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(T,"class","font-bold"),m(P,"class","break-all whitespace-pre-wrap text-sm max-h-24 overflow-auto"),m(D,"class","rounded-sm border-4 border-dotted border-surface-300 p-1"),m(r,"class","grid grid-row-[auto_auto_auto] gap-1 max-w-md"),m(x,"type","button"),m(x,"class","btn variant-filled-secondary p-1"),m(K,"type","button"),m(K,"class","btn variant-filled-secondary p-1"),m(z,"class","grid grid-row-[auto_auto] gap-2"),m(J,"type","button"),m(J,"class","btn variant-filled-surface p-2"),m(se,"type","button"),m(se,"class","btn variant-filled-surface p-2"),m(fe,"class","grid grid-row-[auto_auto] gap-2"),m($,"class","grid grid-cols-[auto_auto] gap-2"),m(e,"class","modal-example-form "+zu+" svelte-1wtdwek")},m(Le,V){I(Le,e,V),v(e,r),v(r,t),v(t,i),me&&me.m(i,null),v(t,a),v(t,l),v(l,s),v(r,c),v(r,f),v(f,d),v(d,h),v(f,_),v(f,y),v(y,E),v(r,S),v(r,D),v(D,T),v(T,L),v(D,O),v(D,P),v(P,M),v(e,Q),v(e,$),v($,z),v(z,x),v(x,_e),v(z,W),v(z,K),v(K,G),v($,ee),v($,fe),v(fe,J),v(J,de),v(fe,pe),v(fe,se),v(se,ce),ve||(Te=[Y(x,"click",n[3]),Y(K,"click",n[4]),Y(J,"click",n[5]),Y(se,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],ve=!0)},p(Le,V){n=Le,V&2&&(o=JSON.parse(n[1][0].value.metadata.content).picture),o?me?me.p(n,V):(me=Qi(n),me.c(),me.m(i,null)):me&&(me.d(1),me=null),V&2&&!ue(s.src,u=JSON.parse(n[1][0].value.metadata.content).banner)&&m(s,"src",u),V&2&&b!==(b=JSON.parse(n[1][0].value.metadata.content).about+"")&&N(E,b),V&2&&R!==(R=JSON.stringify(n[1][0].value.metadata,void 0,4)+"")&&N(M,R),V&1&&ne!==(ne=n[0].buttonTextCancel+"")&&N(ce,ne)},d(Le){Le&&p(e),me&&me.d(),ve=!1,Qe(Te)}}}function Qi(n){let e,r,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Gu,then:Ku,catch:Qu,value:6};return Xe(r=Bi(JSON.parse(n[1][0].value.metadata.content).picture),t),{c(){e=Z(),t.block.c()},l(i){e=Z(),t.block.l(i)},m(i,o){I(i,e,o),t.block.m(i,t.anchor=o),t.mount=()=>e.parentNode,t.anchor=e},p(i,o){n=i,t.ctx=n,o&2&&r!==(r=Bi(JSON.parse(n[1][0].value.metadata.content).picture))&&Xe(r,t)||_r(t,n,o)},d(i){i&&p(e),t.block.d(i),t.token=null,t=null}}}function Qu(n){return{c:H,l:H,m:H,p:H,d:H}}function Ku(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","w-16 object-contain justify-center"),ue(e.src,r=n[6])||m(e,"src",r),m(e,"alt","avatar")},m(t,i){I(t,e,i)},p(t,i){i&2&&!ue(e.src,r=t[6])&&m(e,"src",r)},d(t){t&&p(e)}}}function Gu(n){return{c:H,l:H,m:H,p:H,d:H}}function Ju(n){let e,r=n[1][0]&&Hi(n);return{c(){r&&r.c(),e=Z()},l(t){r&&r.l(t),e=Z()},m(t,i){r&&r.m(t,i),I(t,e,i)},p(t,[i]){t[1][0]?r?r.p(t,i):(r=Hi(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:H,o:H,d(t){r&&r.d(t),t&&p(e)}}}const zu="card p-4  shadow-xl space-y-4 break-all";function Wu(n,e,r){let t;Ue(n,qe,u=>r(1,t=u));let{parent:i}=e;function o(u){var f,d;const c=u==="npub"?X.npubEncode((f=t[0])==null?void 0:f.value.pubkey):(d=t[0])==null?void 0:d.value.pubkey;navigator.clipboard.writeText(c).then(()=>{console.log(`copied: ${c.slice(0,15)}...`);const h={message:`copied: ${c.slice(0,15)}...`,timeout:3e3};ar.trigger(h)},()=>{console.log("");const h={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};ar.trigger(h)}),i.onClose()}const a=()=>o("npub"),l=()=>o("hex"),s=()=>{var u;window.open("https://nostr.com/"+X.npubEncode((u=t[0])==null?void 0:u.value.pubkey),"_blank"),i.onClose()};return n.$$set=u=>{"parent"in u&&r(0,i=u.parent)},[i,t,o,a,l,s]}class sn extends De{constructor(e){super(),Re(this,e,Wu,Ju,Pe,{parent:0})}}function Ki(n){let e,r,t=(n[1][0].title??"(title missing)")+"",i,o,a,l=JSON.stringify(n[1][0].value.note,void 0,4)+"",s,u,c,f,d,h,_,y,b,E,S,D=n[0].buttonTextCancel+"",T,L,O,P;return{c(){e=g("div"),r=g("header"),i=C(t),o=F(),a=g("div"),s=C(l),u=F(),c=g("footer"),f=g("div"),d=g("button"),h=C("copy noteID"),_=F(),y=g("button"),b=C("copy hexID"),E=F(),S=g("button"),T=C(D),this.h()},l(R){e=k(R,"DIV",{class:!0});var M=w(e);r=k(M,"HEADER",{class:!0});var Q=w(r);i=q(Q,t),Q.forEach(p),o=U(M),a=k(M,"DIV",{class:!0});var $=w(a);s=q($,l),$.forEach(p),u=U(M),c=k(M,"FOOTER",{class:!0});var z=w(c);f=k(z,"DIV",{class:!0});var x=w(f);d=k(x,"BUTTON",{type:!0,class:!0});var _e=w(d);h=q(_e,"copy noteID"),_e.forEach(p),_=U(x),y=k(x,"BUTTON",{type:!0,class:!0});var W=w(y);b=q(W,"copy hexID"),W.forEach(p),E=U(x),S=k(x,"BUTTON",{type:!0,class:!0});var K=w(S);T=q(K,D),K.forEach(p),x.forEach(p),z.forEach(p),M.forEach(p),this.h()},h(){m(r,"class",Zu),m(a,"class","bg-surface-50-900-token break-words whitespace-pre-wrap max-h-60 overflow-auto"),m(d,"type","button"),m(d,"class","btn variant-filled-secondary p-1"),m(y,"type","button"),m(y,"class","btn variant-filled-secondary p-1"),m(S,"type","button"),m(S,"class","btn variant-filled-surface p-2"),m(f,"class","flex flex-wrap gap-2"),m(c,"class",L="modal-footer "+n[0].regionFooter),m(e,"class","modal-example-form "+Xu+" bg-surface-200-700-token")},m(R,M){I(R,e,M),v(e,r),v(r,i),v(e,o),v(e,a),v(a,s),v(e,u),v(e,c),v(c,f),v(f,d),v(d,h),v(f,_),v(f,y),v(y,b),v(f,E),v(f,S),v(S,T),O||(P=[Y(d,"click",n[3]),Y(y,"click",n[4]),Y(S,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],O=!0)},p(R,M){n=R,M&2&&t!==(t=(n[1][0].title??"(title missing)")+"")&&N(i,t),M&2&&l!==(l=JSON.stringify(n[1][0].value.note,void 0,4)+"")&&N(s,l),M&1&&D!==(D=n[0].buttonTextCancel+"")&&N(T,D),M&1&&L!==(L="modal-footer "+n[0].regionFooter)&&m(c,"class",L)},d(R){R&&p(e),O=!1,Qe(P)}}}function Yu(n){let e,r=n[1][0]&&Ki(n);return{c(){r&&r.c(),e=Z()},l(t){r&&r.l(t),e=Z()},m(t,i){r&&r.m(t,i),I(t,e,i)},p(t,[i]){t[1][0]?r?r.p(t,i):(r=Ki(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:H,o:H,d(t){r&&r.d(t),t&&p(e)}}}const Xu="card p-4  shadow-xl space-y-4 break-all",Zu="text-2xl font-bold";function $u(n,e,r){let t;Ue(n,qe,s=>r(1,t=s));let{parent:i}=e;function o(s){var c,f;const u=s==="note"?X.noteEncode((c=t[0])==null?void 0:c.value.note.id):(f=t[0])==null?void 0:f.value.note.id;navigator.clipboard.writeText(u).then(()=>{console.log(`copied: ${u.slice(0,15)}...`);const d={message:`copied: ${u.slice(0,15)}...`,timeout:3e3};ar.trigger(d)},()=>{console.log("");const d={message:"failed to copy",timeout:3e3,background:"bg-orange-500 text-white width-filled "};ar.trigger(d)}),i.onClose()}const a=()=>o("note"),l=()=>o("hex");return n.$$set=s=>{"parent"in s&&r(0,i=s.parent)},[i,t,o,a,l]}class fa extends De{constructor(e){super(),Re(this,e,$u,Yu,Pe,{parent:0})}}function Gi(n){let e,r,t=(n[4][0].title??"(title missing)")+"",i,o,a,l=(n[4][0].body??"(body missing)")+"",s,u,c,f,d,h,_,y,b,E,S=n[3].kind+"",D,T,L,O,P,R,M,Q,$=n[3].content+"",z,x,_e,W,K,G,ee,fe,J=n[3].tags+"",de,pe,se,ne,ce,ve=n[0].buttonTextCancel+"",Te,me,Le,V,ge,Ne,$e,lt,xe,ke=n[3].pubkey!==""&&Ji(n),we=n[2]&&zi(n);return{c(){e=g("div"),r=g("header"),i=C(t),o=F(),a=g("article"),s=C(l),u=F(),c=g("label"),f=g("textarea"),d=F(),ke&&ke.c(),h=F(),_=g("div"),y=g("b"),b=C("kind:"),E=F(),D=C(S),T=g("br"),L=F(),O=g("b"),P=C("content:"),R=g("br"),M=F(),Q=g("span"),z=C($),x=g("br"),_e=F(),W=g("b"),K=C("tags:"),G=g("br"),ee=F(),we&&we.c(),fe=C("["),de=C(J),pe=C("]"),se=F(),ne=g("footer"),ce=g("button"),Te=C(ve),Le=F(),V=g("button"),ge=C("Post Note"),this.h()},l(Ve){e=k(Ve,"DIV",{class:!0});var he=w(e);r=k(he,"HEADER",{class:!0});var _t=w(r);i=q(_t,t),_t.forEach(p),o=U(he),a=k(he,"ARTICLE",{class:!0});var et=w(a);s=q(et,l),et.forEach(p),u=U(he),c=k(he,"LABEL",{class:!0});var je=w(c);f=k(je,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),w(f).forEach(p),d=U(je),ke&&ke.l(je),h=U(je),_=k(je,"DIV",{class:!0});var ye=w(_);y=k(ye,"B",{});var pt=w(y);b=q(pt,"kind:"),pt.forEach(p),E=U(ye),D=q(ye,S),T=k(ye,"BR",{}),L=U(ye),O=k(ye,"B",{});var tt=w(O);P=q(tt,"content:"),tt.forEach(p),R=k(ye,"BR",{}),M=U(ye),Q=k(ye,"SPAN",{class:!0});var vt=w(Q);z=q(vt,$),vt.forEach(p),x=k(ye,"BR",{}),_e=U(ye),W=k(ye,"B",{});var mt=w(W);K=q(mt,"tags:"),mt.forEach(p),G=k(ye,"BR",{}),ee=U(ye),we&&we.l(ye),fe=q(ye,"["),de=q(ye,J),pe=q(ye,"]"),ye.forEach(p),se=U(je),ne=k(je,"FOOTER",{class:!0});var Wt=w(ne);ce=k(Wt,"BUTTON",{class:!0});var ln=w(ce);Te=q(ln,ve),ln.forEach(p),Le=U(Wt),V=k(Wt,"BUTTON",{class:!0});var un=w(V);ge=q(un,"Post Note"),un.forEach(p),Wt.forEach(p),je.forEach(p),he.forEach(p),this.h()},h(){m(r,"class",tc),m(a,"class","body"),m(f,"class","textarea"),m(f,"rows","5"),m(f,"placeholder",""),m(Q,"class","whitespace-pre-wrap"),m(_,"class","break-all text-sm"),m(ce,"class",me="btn "+n[0].buttonNeutral),m(V,"class",Ne="btn "+n[0].buttonPositive),m(ne,"class",$e="modal-footer "+n[0].regionFooter),m(c,"class","label break-all whitespace-pre-wrap"),m(e,"class","modal-example-form "+ec)},m(Ve,he){I(Ve,e,he),v(e,r),v(r,i),v(e,o),v(e,a),v(a,s),v(e,u),v(e,c),v(c,f),ir(f,n[1].content),v(c,d),ke&&ke.m(c,null),v(c,h),v(c,_),v(_,y),v(y,b),v(_,E),v(_,D),v(_,T),v(_,L),v(_,O),v(O,P),v(_,R),v(_,M),v(_,Q),v(Q,z),v(_,x),v(_,_e),v(_,W),v(W,K),v(_,G),v(_,ee),we&&we.m(_,null),v(_,fe),v(_,de),v(_,pe),v(c,se),v(c,ne),v(ne,ce),v(ce,Te),v(ne,Le),v(ne,V),v(V,ge),lt||(xe=[Y(f,"input",n[6]),Y(ce,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)}),Y(V,"click",n[5])],lt=!0)},p(Ve,he){n=Ve,he&16&&t!==(t=(n[4][0].title??"(title missing)")+"")&&N(i,t),he&16&&l!==(l=(n[4][0].body??"(body missing)")+"")&&N(s,l),he&2&&ir(f,n[1].content),n[3].pubkey!==""?ke?ke.p(n,he):(ke=Ji(n),ke.c(),ke.m(c,h)):ke&&(ke.d(1),ke=null),he&8&&S!==(S=n[3].kind+"")&&N(D,S),he&8&&$!==($=n[3].content+"")&&N(z,$),n[2]?we?we.p(n,he):(we=zi(n),we.c(),we.m(_,fe)):we&&(we.d(1),we=null),he&8&&J!==(J=n[3].tags+"")&&N(de,J),he&1&&ve!==(ve=n[0].buttonTextCancel+"")&&N(Te,ve),he&1&&me!==(me="btn "+n[0].buttonNeutral)&&m(ce,"class",me),he&1&&Ne!==(Ne="btn "+n[0].buttonPositive)&&m(V,"class",Ne),he&1&&$e!==($e="modal-footer "+n[0].regionFooter)&&m(ne,"class",$e)},d(Ve){Ve&&p(e),ke&&ke.d(),we&&we.d(),lt=!1,Qe(xe)}}}function Ji(n){let e,r,t,i,o,a,l;return{c(){e=g("label"),r=g("input"),t=F(),i=g("p"),o=C("p"),this.h()},l(s){e=k(s,"LABEL",{class:!0});var u=w(e);r=k(u,"INPUT",{class:!0,type:!0}),t=U(u),i=k(u,"P",{});var c=w(i);o=q(c,"p"),c.forEach(p),u.forEach(p),this.h()},h(){m(r,"class","checkbox"),m(r,"type","checkbox"),m(e,"class","flex items-center space-x-2")},m(s,u){I(s,e,u),v(e,r),r.checked=n[2],v(e,t),v(e,i),v(i,o),a||(l=Y(r,"change",n[7]),a=!0)},p(s,u){u&4&&(r.checked=s[2])},d(s){s&&p(e),a=!1,l()}}}function zi(n){let e,r=n[3].pubkey+"",t,i,o,a;return{c(){e=C("[p,"),t=C(r),i=C(",,mention],"),o=g("br"),a=F()},l(l){e=q(l,"[p,"),t=q(l,r),i=q(l,",,mention],"),o=k(l,"BR",{}),a=U(l)},m(l,s){I(l,e,s),I(l,t,s),I(l,i,s),I(l,o,s),I(l,a,s)},p(l,s){s&8&&r!==(r=l[3].pubkey+"")&&N(t,r)},d(l){l&&p(e),l&&p(t),l&&p(i),l&&p(o),l&&p(a)}}}function xu(n){let e,r=n[4][0]&&Gi(n);return{c(){r&&r.c(),e=Z()},l(t){r&&r.l(t),e=Z()},m(t,i){r&&r.m(t,i),I(t,e,i)},p(t,[i]){t[4][0]?r?r.p(t,i):(r=Gi(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:H,o:H,d(t){r&&r.d(t),t&&p(e)}}}const ec="card p-4 w-modal shadow-xl space-y-4",tc="text-2xl font-bold";function rc(n,e,r){let t;Ue(n,qe,f=>r(4,t=f));let{parent:i}=e,o,a={pubkey:t[0].value.pubkey?t[0].value.pubkey:"",kind:1,tags:t[0].value.tags,content:t[0].value.content},l={content:t[0].value.content,tags:t[0].value.tags};function s(){l.content===void 0&&r(1,l.content="",l),r(1,l.content=l.content.trim(),l),o&&r(1,l.tags=[["p",a.pubkey,"","mention"],...a.tags],l),t[0].response&&t[0].response(l),qe.close()}function u(){l.content=this.value,r(1,l)}function c(){o=this.checked,r(2,o)}return n.$$set=f=>{"parent"in f&&r(0,i=f.parent)},n.$$.update=()=>{n.$$.dirty&2&&r(3,a.content=l.content,a)},[i,l,o,a,t,s,u,c]}class Ld extends De{constructor(e){super(),Re(this,e,rc,xu,Pe,{parent:0})}}const Wi=/(:[^:\s]+:)/,Yi=/(https?:\/\/+[^\s"'<`\]\)]+[^\s"'<`:\].\)]+)/,Xi=/\.(?:jpg|jpeg|png|gif|webp)$/i,Zi=/(\r\n|\n|\r)/,$i=/(nostr:[A-Za-z0-9]+)/,xi=/(#\[\d+\])/i;async function nc(n,e){var l;const r=e.filter(s=>s[0]==="emoji");let t=[];r.length>0&&t.push(Wi.source),t.push($i.source),t.push(Yi.source),t.push(Xi.source),t.push(Zi.source),t.push(xi.source);const i=new RegExp(t.join("|"),"g"),o=n.split(i||" "),a=[];for(let s of o)if(s!==void 0)if(s.match($i)){const u=s.indexOf("nostr:"),c=s.slice(0,u),f=s.slice(u);a.push({content:c,type:"text"}),a.push({content:f,type:"nostr",url:f.slice(6)})}else if(r.length>0&&s.match(Wi)){const u=(l=r.find(c=>`:${c[1]}:`===s))==null?void 0:l[2];u?a.push({content:s,type:"emoji",url:u}):a.push({content:s,type:"text"})}else ic(s)?s.match(Yi)?s.match(Xi)?a.push({content:s,type:"image"}):a.push({content:s,type:"url"}):a.push({content:s,type:"url"}):s.match(Zi)?a.push({content:"Newline",type:"newline"}):s.match(xi)?a.push({content:s,type:"quote",number:parseInt(s.slice(2,-1))}):a.push({content:s,type:"text"});return console.log(a),a}function ic(n){const e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;try{return new URL(n),e.test(n)}catch{return!1}}function eo(n){let e,r,t,i,o,a,l=n[0].buttonTextCancel+"",s,u,c,f,d;return{c(){e=g("div"),r=g("img"),i=F(),o=g("footer"),a=g("button"),s=C(l),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=w(e);r=k(_,"IMG",{src:!0,alt:!0,class:!0}),i=U(_),o=k(_,"FOOTER",{class:!0});var y=w(o);a=k(y,"BUTTON",{class:!0});var b=w(a);s=q(b,l),b.forEach(p),y.forEach(p),_.forEach(p),this.h()},h(){var h;ue(r.src,t=(h=n[1][0])==null?void 0:h.image)||m(r,"src",t),m(r,"alt",""),m(r,"class","svelte-1scgpoe"),m(a,"class",u="btn "+n[0].buttonNeutral),m(o,"class",c="modal-footer "+n[0].regionFooter),m(e,"class","modal-example-form "+ac)},m(h,_){I(h,e,_),v(e,r),v(e,i),v(e,o),v(o,a),v(a,s),f||(d=[Y(r,"click",n[2]),Y(a,"click",function(){hr(n[0].onClose)&&n[0].onClose.apply(this,arguments)})],f=!0)},p(h,_){var y;n=h,_&2&&!ue(r.src,t=(y=n[1][0])==null?void 0:y.image)&&m(r,"src",t),_&1&&l!==(l=n[0].buttonTextCancel+"")&&N(s,l),_&1&&u!==(u="btn "+n[0].buttonNeutral)&&m(a,"class",u),_&1&&c!==(c="modal-footer "+n[0].regionFooter)&&m(o,"class",c)},d(h){h&&p(e),f=!1,Qe(d)}}}function oc(n){let e,r=n[1][0]&&eo(n);return{c(){r&&r.c(),e=Z()},l(t){r&&r.l(t),e=Z()},m(t,i){r&&r.m(t,i),I(t,e,i)},p(t,[i]){t[1][0]?r?r.p(t,i):(r=eo(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:H,o:H,d(t){r&&r.d(t),t&&p(e)}}}const ac="card p-4  shadow-xl space-y-4 break-all";function sc(n,e,r){let t;Ue(n,qe,a=>r(1,t=a));let{parent:i}=e;function o(){var a;window.open((a=t[0])==null?void 0:a.image,"_blank")}return n.$$set=a=>{"parent"in a&&r(0,i=a.parent)},[i,t,o]}class lc extends De{constructor(e){super(),Re(this,e,sc,oc,Pe,{parent:0})}}function to(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain object-contain max-h-[6rem]"),ue(e.src,r=n[0].image)||m(e,"src",r),m(e,"alt","")},m(t,i){I(t,e,i)},p(t,i){i&1&&!ue(e.src,r=t[0].image)&&m(e,"src",r)},d(t){t&&p(e)}}}function ro(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","object-contain w-5 pl-0.5 pr-0.5"),ue(e.src,r=n[0].favicon)||m(e,"src",r),m(e,"alt","")},m(t,i){I(t,e,i)},p(t,i){i&1&&!ue(e.src,r=t[0].favicon)&&m(e,"src",r)},d(t){t&&p(e)}}}function uc(n){let e,r,t,i,o,a,l,s,u=n[0].title+"",c,f,d,h=n[0].description+"",_,y,b,E,S,D=new URL(n[1]).hostname+"",T,L=n[0].image&&to(n),O=n[0].favicon!==""&&ro(n);return{c(){e=g("div"),r=g("a"),t=g("div"),i=g("div"),o=g("div"),L&&L.c(),a=F(),l=g("div"),s=g("div"),c=C(u),f=F(),d=g("div"),_=C(h),y=F(),b=g("div"),O&&O.c(),E=F(),S=g("div"),T=C(D),this.h()},l(P){e=k(P,"DIV",{class:!0});var R=w(e);r=k(R,"A",{class:!0,href:!0,target:!0});var M=w(r);t=k(M,"DIV",{class:!0});var Q=w(t);i=k(Q,"DIV",{class:!0});var $=w(i);o=k($,"DIV",{class:!0});var z=w(o);L&&L.l(z),z.forEach(p),a=U($),l=k($,"DIV",{class:!0});var x=w(l);s=k(x,"DIV",{class:!0});var _e=w(s);c=q(_e,u),_e.forEach(p),f=U(x),d=k(x,"DIV",{class:!0});var W=w(d);_=q(W,h),W.forEach(p),x.forEach(p),$.forEach(p),y=U(Q),b=k(Q,"DIV",{class:!0});var K=w(b);O&&O.l(K),E=U(K),S=k(K,"DIV",{class:!0});var G=w(S);T=q(G,D),G.forEach(p),K.forEach(p),Q.forEach(p),M.forEach(p),R.forEach(p),this.h()},h(){m(o,"class","overflow-hidden relative rounded-xl max-h-[6rem]"),m(s,"class","line-clamp-2 text-sm font-bold text-primary-800 underline decoration-primary-600"),m(d,"class","line-clamp-4 text-xs text-primary-500"),m(l,"class","p-0.5 grid grid-rows-[auto_1fr] z-10 min-w-[12em]"),m(i,"class","grid grid-cols-[auto_1fr] gap-0.5"),m(S,"class","text-xs text-purple-900/50"),m(b,"class","flex flex-row-reverse ... -my-1"),m(t,"class","grid grid-rows-[auto_1fr]"),m(r,"class",""),m(r,"href",n[1]),m(r,"target","_blank"),m(e,"class","drop-shadow-md rounded-2xl m-0 p-1 border-2 border-primary-500 hover:drop-shadow-xl z-20 break-all bg-primary-200")},m(P,R){I(P,e,R),v(e,r),v(r,t),v(t,i),v(i,o),L&&L.m(o,null),v(i,a),v(i,l),v(l,s),v(s,c),v(l,f),v(l,d),v(d,_),v(t,y),v(t,b),O&&O.m(b,null),v(b,E),v(b,S),v(S,T)},p(P,[R]){P[0].image?L?L.p(P,R):(L=to(P),L.c(),L.m(o,null)):L&&(L.d(1),L=null),R&1&&u!==(u=P[0].title+"")&&N(c,u),R&1&&h!==(h=P[0].description+"")&&N(_,h),P[0].favicon!==""?O?O.p(P,R):(O=ro(P),O.c(),O.m(b,E)):O&&(O.d(1),O=null),R&2&&D!==(D=new URL(P[1]).hostname+"")&&N(T,D),R&2&&m(r,"href",P[1])},i:H,o:H,d(P){P&&p(e),L&&L.d(),O&&O.d()}}}function cc(n,e,r){let{ogp:t}=e,{url:i}=e;return n.$$set=o=>{"ogp"in o&&r(0,t=o.ogp),"url"in o&&r(1,i=o.url)},[t,i]}class fc extends De{constructor(e){super(),Re(this,e,cc,uc,Pe,{ogp:0,url:1})}}function no(n,e,r){const t=n.slice();return t[22]=e[r],t}function io(n,e,r){const t=n.slice();return t[22]=e[r],t}function dc(n){let e,r,t,i,o;r=new Ge({props:{queryKey:["metadata",X.decode(n[0]).data.pubkey],pubkey:X.decode(n[0]).data.pubkey,$$slots:{nodata:[bc,({metadata:l})=>({21:l}),({metadata:l})=>l?2097152:0],error:[yc,({metadata:l})=>({21:l}),({metadata:l})=>l?2097152:0],loading:[mc,({metadata:l})=>({21:l}),({metadata:l})=>l?2097152:0],default:[vc,({metadata:l})=>({21:l}),({metadata:l})=>l?2097152:0]},$$scope:{ctx:n}}});let a={ctx:n,current:null,token:null,hasCatch:!1,pending:Cc,then:kc,catch:gc,value:20,blocks:[,,,]};return Xe(i=n[4](n[0]),a),{c(){e=g("div"),ie(r.$$.fragment),t=F(),a.block.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var s=w(e);le(r.$$.fragment,s),t=U(s),a.block.l(s),s.forEach(p),this.h()},h(){m(e,"class","card border border-surface-400 px-3 py-2")},m(l,s){I(l,e,s),oe(r,e,null),v(e,t),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,o=!0},p(l,s){n=l;const u={};s&1&&(u.queryKey=["metadata",X.decode(n[0]).data.pubkey]),s&1&&(u.pubkey=X.decode(n[0]).data.pubkey),s&136314881&&(u.$$scope={dirty:s,ctx:n}),r.$set(u),a.ctx=n,s&1&&i!==(i=n[4](n[0]))&&Xe(i,a)||_r(a,n,s)},i(l){o||(A(r.$$.fragment,l),A(a.block),o=!0)},o(l){j(r.$$.fragment,l);for(let s=0;s<3;s+=1){const u=a.blocks[s];j(u)}o=!1},d(l){l&&p(e),ae(r),a.block.d(),a.token=null,a=null}}}function hc(n){let e,r;return e=new Ge({props:{queryKey:["metadata",X.decode(n[0]).data.pubkey],pubkey:X.decode(n[0]).data.pubkey,$$slots:{nodata:[Rc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],error:[Dc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],loading:[Pc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],default:[qc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1&&(o.queryKey=["metadata",X.decode(t[0]).data.pubkey]),i&1&&(o.pubkey=X.decode(t[0]).data.pubkey),i&136314881&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function _c(n){let e,r;return e=new Ge({props:{queryKey:["metadata",X.decode(n[0]).data],pubkey:X.decode(n[0]).data,$$slots:{nodata:[Lc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],error:[Mc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],loading:[Ac,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],default:[Tc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1&&(o.queryKey=["metadata",X.decode(t[0]).data]),i&1&&(o.pubkey=X.decode(t[0]).data),i&136314881&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function pc(n){let e,r,t,i;return t=new Jt({props:{queryKey:[X.decode(n[0]).type==="note"?X.decode(n[0]).data:X.decode(n[0]).data.id],id:X.decode(n[0]).type==="note"?X.decode(n[0]).data:X.decode(n[0]).data.id,$$slots:{nodata:[rf,({text:o})=>({20:o}),({text:o})=>o?1048576:0],error:[tf,({text:o})=>({20:o}),({text:o})=>o?1048576:0],loading:[ef,({text:o})=>({20:o}),({text:o})=>o?1048576:0],default:[xc,({text:o})=>({20:o}),({text:o})=>o?1048576:0]},$$scope:{ctx:n}}}),{c(){e=g("div"),r=g("div"),ie(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);le(t.$$.fragment,l),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(o,a){I(o,e,a),v(e,r),oe(t,r,null),i=!0},p(o,a){const l={};a&1&&(l.queryKey=[X.decode(o[0]).type==="note"?X.decode(o[0]).data:X.decode(o[0]).data.id]),a&1&&(l.id=X.decode(o[0]).type==="note"?X.decode(o[0]).data:X.decode(o[0]).data.id),a&135266307&&(l.$$scope={dirty:a,ctx:o}),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),i=!1},d(o){o&&p(e),ae(t)}}}function vc(n){let e,r,t,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[13](n[21])}return{c(){e=g("button"),r=C("@"),t=g("u"),o=C(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=q(c,"@"),t=k(c,"U",{});var f=w(t);o=q(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80")},m(u,c){I(u,e,c),v(e,r),v(e,t),v(t,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function mc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function yc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function bc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function gc(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function kc(n){let e,r,t=n[20]&&oo(n);return{c(){t&&t.c(),e=Z()},l(i){t&&t.l(i),e=Z()},m(i,o){t&&t.m(i,o),I(i,e,o),r=!0},p(i,o){i[20]?t?(t.p(i,o),o&1&&A(t,1)):(t=oo(i),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(te(),j(t,1,1,()=>{t=null}),re())},i(i){r||(A(t),r=!0)},o(i){j(t),r=!1},d(i){t&&t.d(i),i&&p(e)}}}function oo(n){let e,r=new Date(n[20].created_at*1e3).toLocaleString()+"",t,i,o,a,l,s,u,c,f;function d(){return n[14](n[20])}let h=n[20].tags.length>0&&ao(n);return s=new Je({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("button"),t=C(r),i=F(),o=g("div"),h&&h.c(),a=F(),l=g("div"),ie(s.$$.fragment),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var y=w(e);t=q(y,r),y.forEach(p),i=U(_),o=k(_,"DIV",{class:!0});var b=w(o);h&&h.l(b),a=U(b),l=k(b,"DIV",{class:!0});var E=w(l);le(s.$$.fragment,E),E.forEach(p),b.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 ml-2 text-xs underline decoration-secondary-500"),m(l,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(o,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix")},m(_,y){I(_,e,y),v(e,t),I(_,i,y),I(_,o,y),h&&h.m(o,null),v(o,a),v(o,l),oe(s,l,null),u=!0,c||(f=Y(e,"click",d),c=!0)},p(_,y){n=_,(!u||y&1)&&r!==(r=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(t,r),n[20].tags.length>0?h?(h.p(n,y),y&1&&A(h,1)):(h=ao(n),h.c(),A(h,1),h.m(o,a)):h&&(te(),j(h,1,1,()=>{h=null}),re());const b={};y&1&&(b.text=n[20].content),y&1&&(b.tag=n[20].tags),y&1&&(b.id=n[20].id),y&2&&(b.view=n[1]),s.$set(b)},i(_){u||(A(h),A(s.$$.fragment,_),u=!0)},o(_){j(h),j(s.$$.fragment,_),u=!1},d(_){_&&p(e),_&&p(i),_&&p(o),h&&h.d(),ae(s),c=!1,f()}}}function ao(n){let e,r,t=n[20].tags,i=[];for(let a=0;a<t.length;a+=1)i[a]=so(no(n,t,a));const o=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);r=!0},p(a,l){if(l&3145757){t=a[20].tags;let s;for(s=0;s<t.length;s+=1){const u=no(a,t,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=so(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(te(),s=t.length;s<i.length;s+=1)o(s);re()}},i(a){if(!r){for(let l=0;l<t.length;l+=1)A(i[l]);r=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)j(i[l]);r=!1},d(a){a&&p(e),pr(i,a)}}}function wc(n){let e,r,t=n[22][0]+"",i,o,a=n[22][1]+"",l,s;return{c(){e=g("div"),r=C("["),i=C(t),o=C(`]
                    `),l=C(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=q(c,"["),i=q(c,t),o=q(c,`]
                    `),l=q(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden")},m(u,c){I(u,e,c),v(e,r),v(e,i),v(e,o),v(e,l),v(e,s)},p(u,c){c&1&&t!==(t=u[22][0]+"")&&N(i,t),c&1&&a!==(a=u[22][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function Ec(n){let e,r;return e=new Jt({props:{queryKey:[n[22][1]],id:n[22][1],$$slots:{default:[Sc,({text:t})=>({20:t}),({text:t})=>t?1048576:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1&&(o.queryKey=[t[22][1]]),i&1&&(o.id=t[22][1]),i&135266304&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Oc(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[22][1]],pubkey:n[22][1],$$slots:{default:[Ic,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1&&(o.queryKey=["metadata",t[22][1]]),i&1&&(o.pubkey=t[22][1]),i&136314881&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Sc(n){let e,r,t,i=n[20].content+"",o,a,l,s;function u(){return n[16](n[20])}return{c(){e=g("div"),r=C("[e] "),t=g("button"),o=C(i),a=F(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=w(e);r=q(f,"[e] "),t=k(f,"BUTTON",{class:!0});var d=w(t);o=q(d,i),d.forEach(p),f.forEach(p),a=U(c),this.h()},h(){m(t,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(c,f){I(c,e,f),v(e,r),v(e,t),v(t,o),I(c,a,f),l||(s=Y(t,"click",u),l=!0)},p(c,f){n=c,f&1048576&&i!==(i=n[20].content+"")&&N(o,i)},d(c){c&&p(e),c&&p(a),l=!1,s()}}}function Ic(n){let e,r,t,i,o,a=JSON.parse(n[21].content).name+"",l,s,u,c;function f(){return n[15](n[21],n[22])}return{c(){e=g("div"),r=C("to "),t=g("button"),i=C("@"),o=g("u"),l=C(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=q(h,"to "),t=k(h,"BUTTON",{class:!0});var _=w(t);i=q(_,"@"),o=k(_,"U",{});var y=w(o);l=q(y,a),y.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(t,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),v(e,r),v(e,t),v(t,i),v(t,o),v(o,l),I(d,s,h),u||(c=Y(t,"click",f),u=!0)},p(d,h){n=d,h&2097152&&a!==(a=JSON.parse(n[21].content).name+"")&&N(l,a)},d(d){d&&p(e),d&&p(s),u=!1,c()}}}function so(n){let e,r,t,i;const o=[Oc,Ec,wc],a=[];function l(s,u){return s[22][0]==="p"?0:s[22][0]==="e"||s[22][0]==="q"?1:s[22][0]!=="emoji"&&s[22][0]!=="r"&&s[22][0]!=="t"?2:-1}return~(e=l(n))&&(r=a[e]=o[e](n)),{c(){r&&r.c(),t=Z()},l(s){r&&r.l(s),t=Z()},m(s,u){~e&&a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?~e&&a[e].p(s,u):(r&&(te(),j(a[c],1,1,()=>{a[c]=null}),re()),~e?(r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t)):r=null)},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){~e&&a[e].d(s),s&&p(t)}}}function Cc(n){let e,r;return{c(){e=g("div"),r=C(n[0]),this.h()},l(t){e=k(t,"DIV",{class:!0});var i=w(e);r=q(i,n[0]),i.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(t,i){I(t,e,i),v(e,r)},p(t,i){i&1&&N(r,t[0])},i:H,o:H,d(t){t&&p(e)}}}function qc(n){let e,r,t,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[12](n[21])}return{c(){e=g("button"),r=C("@"),t=g("u"),o=C(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=q(c,"@"),t=k(c,"U",{});var f=w(t);o=q(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-xs text-black/80")},m(u,c){I(u,e,c),v(e,r),v(e,t),v(t,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function Pc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function Dc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function Rc(n){let e,r,t=X.decode(n[0]).data.pubkey+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm whitespace-nowrap overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data.pubkey+"")&&N(i,t)},d(o){o&&p(e)}}}function Tc(n){let e,r,t,i=JSON.parse(n[21].content).name+"",o,a,l;function s(){return n[11](n[21])}return{c(){e=g("button"),r=C("@"),t=g("u"),o=C(i),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var c=w(e);r=q(c,"@"),t=k(c,"U",{});var f=w(t);o=q(f,i),f.forEach(p),c.forEach(p),this.h()},h(){m(e,"class","inline-flex text-sm text-black/80")},m(u,c){I(u,e,c),v(e,r),v(e,t),v(t,o),a||(l=Y(e,"click",s),a=!0)},p(u,c){n=u,c&2097152&&i!==(i=JSON.parse(n[21].content).name+"")&&N(o,i)},d(u){u&&p(e),a=!1,l()}}}function Ac(n){let e,r,t=X.decode(n[0]).data+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data+"")&&N(i,t)},d(o){o&&p(e)}}}function Mc(n){let e,r,t=X.decode(n[0]).data+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data+"")&&N(i,t)},d(o){o&&p(e)}}}function Lc(n){let e,r,t=X.decode(n[0]).data+"",i;return{c(){e=g("div"),r=g("div"),i=C(t),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);i=q(l,t),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(o,a){I(o,e,a),v(e,r),v(r,i)},p(o,a){a&1&&t!==(t=X.decode(o[0]).data+"")&&N(i,t)},d(o){o&&p(e)}}}function lo(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),ue(e.src,r=JSON.parse(n[21].content).picture)||m(e,"src",r),m(e,"alt","avatar")},m(t,i){I(t,e,i)},p(t,i){i&2097152&&!ue(e.src,r=JSON.parse(t[21].content).picture)&&m(e,"src",r)},d(t){t&&p(e)}}}function uo(n){let e,r,t=Ze(n[20].tags),i=[];for(let a=0;a<t.length;a+=1)i[a]=co(io(n,t,a));const o=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);r=!0},p(a,l){if(l&3145742){t=Ze(a[20].tags);let s;for(s=0;s<t.length;s+=1){const u=io(a,t,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=co(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(te(),s=t.length;s<i.length;s+=1)o(s);re()}},i(a){if(!r){for(let l=0;l<t.length;l+=1)A(i[l]);r=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)j(i[l]);r=!1},d(a){a&&p(e),pr(i,a)}}}function jc(n){let e,r,t=n[22][0]+"",i,o,a=n[22][1]+"",l,s;return{c(){e=g("div"),r=C("["),i=C(t),o=C(`]
                    `),l=C(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=q(c,"["),i=q(c,t),o=q(c,`]
                    `),l=q(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){I(u,e,c),v(e,r),v(e,i),v(e,o),v(e,l),v(e,s)},p(u,c){c&1048576&&t!==(t=u[22][0]+"")&&N(i,t),c&1048576&&a!==(a=u[22][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function Nc(n){let e,r;return e=new Jt({props:{queryKey:[n[22][1]],id:n[22][1],$$slots:{nodata:[Kc,({text:t})=>({20:t}),({text:t})=>t?1048576:0],error:[Qc,({text:t})=>({20:t}),({text:t})=>t?1048576:0],loading:[Hc,({text:t})=>({20:t}),({text:t})=>t?1048576:0],default:[Bc,({text:t})=>({20:t}),({text:t})=>t?1048576:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1048576&&(o.queryKey=[t[22][1]]),i&1048576&&(o.id=t[22][1]),i&135266306&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Vc(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[22][1]],pubkey:n[22][1],$$slots:{nodata:[Wc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],error:[zc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],loading:[Jc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],default:[Gc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1048576&&(o.queryKey=["metadata",t[22][1]]),i&1048576&&(o.pubkey=t[22][1]),i&137363456&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Fc(n){let e=n[20].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&1048576&&e!==(e=t[20].content+"")&&N(r,e)},d(t){t&&p(r)}}}function Uc(n){let e="<content-warning>",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p:H,d(t){t&&p(r)}}}function Bc(n){let e,r,t=n[22][0]+"",i,o,a,l,s,u,c;function f(y,b){return b&1048578&&(l=null),l==null&&(l=!!(y[20].tags.some(of)&&y[1]==!1)),l?Uc:Fc}let d=f(n,-1),h=d(n);function _(){return n[10](n[20])}return{c(){e=g("div"),r=C("["),i=C(t),o=C(`]
                      `),a=g("button"),h.c(),s=F(),this.h()},l(y){e=k(y,"DIV",{class:!0});var b=w(e);r=q(b,"["),i=q(b,t),o=q(b,`]
                      `),a=k(b,"BUTTON",{class:!0});var E=w(a);h.l(E),E.forEach(p),b.forEach(p),s=U(y),this.h()},h(){m(a,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(y,b){I(y,e,b),v(e,r),v(e,i),v(e,o),v(e,a),h.m(a,null),I(y,s,b),u||(c=Y(a,"click",_),u=!0)},p(y,b){n=y,b&1048576&&t!==(t=n[22][0]+"")&&N(i,t),d===(d=f(n,b))&&h?h.p(n,b):(h.d(1),h=d(n),h&&(h.c(),h.m(a,null)))},d(y){y&&p(e),h.d(),y&&p(s),u=!1,c()}}}function Hc(n){let e,r,t,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),r=g("div"),t=C("["),o=C(i),a=C("] "),s=C(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=q(d,"["),o=q(d,i),a=q(d,"] "),s=q(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(c,f){I(c,e,f),v(e,r),v(r,t),v(r,o),v(r,a),v(r,s),v(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function Qc(n){let e,r,t,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),r=g("div"),t=C("["),o=C(i),a=C("] "),s=C(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=q(d,"["),o=q(d,i),a=q(d,"] "),s=q(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(c,f){I(c,e,f),v(e,r),v(r,t),v(r,o),v(r,a),v(r,s),v(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function Kc(n){let e,r,t,i=n[22][0]+"",o,a,l=n[22][1]+"",s,u;return{c(){e=g("div"),r=g("div"),t=C("["),o=C(i),a=C("] "),s=C(l),u=F(),this.h()},l(c){e=k(c,"DIV",{slot:!0});var f=w(e);r=k(f,"DIV",{class:!0});var d=w(r);t=q(d,"["),o=q(d,i),a=q(d,"] "),s=q(d,l),d.forEach(p),u=U(f),f.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(c,f){I(c,e,f),v(e,r),v(r,t),v(r,o),v(r,a),v(r,s),v(e,u)},p(c,f){f&1048576&&i!==(i=c[22][0]+"")&&N(o,i),f&1048576&&l!==(l=c[22][1]+"")&&N(s,l)},d(c){c&&p(e)}}}function Gc(n){let e,r,t,i,o,a=JSON.parse(n[21].content).name+"",l,s,u,c;function f(){return n[9](n[21],n[22])}return{c(){e=g("div"),r=C("to[p] "),t=g("button"),i=C("@"),o=g("u"),l=C(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=q(h,"to[p] "),t=k(h,"BUTTON",{class:!0});var _=w(t);i=q(_,"@"),o=k(_,"U",{});var y=w(o);l=q(y,a),y.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(t,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),v(e,r),v(e,t),v(t,i),v(t,o),v(o,l),I(d,s,h),u||(c=Y(t,"click",f),u=!0)},p(d,h){n=d,h&2097152&&a!==(a=JSON.parse(n[21].content).name+"")&&N(l,a)},d(d){d&&p(e),d&&p(s),u=!1,c()}}}function Jc(n){let e,r,t,i=n[22][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function zc(n){let e,r,t,i=n[22][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function Wc(n){let e,r,t,i=n[22][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&1048576&&i!==(i=l[22][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function co(n){let e,r,t,i;const o=[Vc,Nc,jc],a=[];function l(s,u){return s[22][0]==="p"?0:s[22][0]==="e"||s[22][0]==="q"?1:2}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function Yc(n){let e,r,t=JSON.parse(n[21].content).picture,i,o,a=JSON.parse(n[21].content).display_name+"",l,s,u,c,f,d,h=JSON.parse(n[21].content).name+"",_,y,b,E,S=new Date(n[20].created_at*1e3).toLocaleString()+"",D,T,L=n[20].tags&&Ze(n[20].tags).length>0,O,P,R,M,Q,$,z=t&&lo(n);function x(){return n[7](n[21],n[20])}function _e(){return n[8](n[20])}let W=L&&uo(n);return R=new Je({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),z&&z.c(),i=F(),o=g("div"),l=C(a),s=F(),u=g("div"),c=g("button"),f=C("@"),d=g("u"),_=C(h),y=F(),b=g("div"),E=g("button"),D=C(S),T=F(),W&&W.c(),O=F(),P=g("div"),ie(R.$$.fragment),this.h()},l(K){e=k(K,"DIV",{class:!0});var G=w(e);r=k(G,"DIV",{});var ee=w(r);z&&z.l(ee),ee.forEach(p),i=U(G),o=k(G,"DIV",{class:!0});var fe=w(o);l=q(fe,a),fe.forEach(p),s=U(G),u=k(G,"DIV",{class:!0});var J=w(u);c=k(J,"BUTTON",{class:!0});var de=w(c);f=q(de,"@"),d=k(de,"U",{});var pe=w(d);_=q(pe,h),pe.forEach(p),de.forEach(p),J.forEach(p),y=U(G),b=k(G,"DIV",{class:!0});var se=w(b);E=k(se,"BUTTON",{class:!0});var ne=w(E);D=q(ne,S),ne.forEach(p),se.forEach(p),G.forEach(p),T=U(K),W&&W.l(K),O=U(K),P=k(K,"DIV",{class:!0});var ce=w(P);le(R.$$.fragment,ce),ce.forEach(p),this.h()},h(){m(o,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(E,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(P,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(K,G){I(K,e,G),v(e,r),z&&z.m(r,null),v(e,i),v(e,o),v(o,l),v(e,s),v(e,u),v(u,c),v(c,f),v(c,d),v(d,_),v(e,y),v(e,b),v(b,E),v(E,D),I(K,T,G),W&&W.m(K,G),I(K,O,G),I(K,P,G),oe(R,P,null),M=!0,Q||($=[Y(c,"click",x),Y(E,"click",_e)],Q=!0)},p(K,G){n=K,G&2097152&&(t=JSON.parse(n[21].content).picture),t?z?z.p(n,G):(z=lo(n),z.c(),z.m(r,null)):z&&(z.d(1),z=null),(!M||G&2097152)&&a!==(a=JSON.parse(n[21].content).display_name+"")&&N(l,a),(!M||G&2097152)&&h!==(h=JSON.parse(n[21].content).name+"")&&N(_,h),(!M||G&1048576)&&S!==(S=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(D,S),G&1048576&&(L=n[20].tags&&Ze(n[20].tags).length>0),L?W?(W.p(n,G),G&1048576&&A(W,1)):(W=uo(n),W.c(),A(W,1),W.m(O.parentNode,O)):W&&(te(),j(W,1,1,()=>{W=null}),re());const ee={};G&1048576&&(ee.text=n[20].content),G&1048576&&(ee.tag=n[20].tags),G&1048576&&(ee.id=n[20].id),G&2&&(ee.view=n[1]),R.$set(ee)},i(K){M||(A(W),A(R.$$.fragment,K),M=!0)},o(K){j(W),j(R.$$.fragment,K),M=!1},d(K){K&&p(e),z&&z.d(),K&&p(T),W&&W.d(K),K&&p(O),K&&p(P),ae(R),Q=!1,Qe($)}}}function Xc(n){let e,r,t=n[20].pubkey+"",i,o,a,l,s=new Date(n[20].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function y(){return n[6](n[20])}return f=new Je({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("div"),l=g("button"),u=C(s),c=F(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);i=q(S,t),S.forEach(p),o=U(E),a=k(E,"DIV",{class:!0});var D=w(a);l=k(D,"BUTTON",{class:!0});var T=w(l);u=q(T,s),T.forEach(p),c=U(D),le(f.$$.fragment,D),D.forEach(p),E.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(a,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,E){I(b,e,E),v(e,r),v(r,i),v(e,o),v(e,a),v(a,l),v(l,u),v(a,c),oe(f,a,null),d=!0,h||(_=Y(l,"click",y),h=!0)},p(b,E){n=b,(!d||E&1048576)&&t!==(t=n[20].pubkey+"")&&N(i,t),(!d||E&1048576)&&s!==(s=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(u,s);const S={};E&1048576&&(S.text=n[20].content),E&1048576&&(S.tag=n[20].tags),E&1048576&&(S.id=n[20].id),E&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){j(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function Zc(n){let e,r,t=n[20].pubkey+"",i,o,a,l=new Date(n[20].created_at*1e3).toLocaleString()+"",s,u,c,f,d,h,_;function y(){return n[5](n[20])}return f=new Je({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("button"),s=C(l),u=F(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);i=q(S,t),o=U(S),a=k(S,"BUTTON",{class:!0});var D=w(a);s=q(D,l),D.forEach(p),S.forEach(p),u=U(E),c=k(E,"DIV",{class:!0});var T=w(c);le(f.$$.fragment,T),T.forEach(p),E.forEach(p),this.h()},h(){m(a,"class","text-xs underline decoration-secondary-500"),m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,E){I(b,e,E),v(e,r),v(r,i),v(r,o),v(r,a),v(a,s),v(e,u),v(e,c),oe(f,c,null),d=!0,h||(_=Y(a,"click",y),h=!0)},p(b,E){n=b,(!d||E&1048576)&&t!==(t=n[20].pubkey+"")&&N(i,t),(!d||E&1048576)&&l!==(l=new Date(n[20].created_at*1e3).toLocaleString()+"")&&N(s,l);const S={};E&1048576&&(S.text=n[20].content),E&1048576&&(S.tag=n[20].tags),E&1048576&&(S.id=n[20].id),E&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){j(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function $c(n){let e,r,t=n[20].pubkey+"",i,o,a,l,s;return l=new Je({props:{text:n[20].content,tag:n[20].tags,id:n[20].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);i=q(f,t),f.forEach(p),o=U(c),a=k(c,"DIV",{class:!0});var d=w(a);le(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(a,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){I(u,e,c),v(e,r),v(r,i),v(e,o),v(e,a),oe(l,a,null),s=!0},p(u,c){(!s||c&1048576)&&t!==(t=u[20].pubkey+"")&&N(i,t);const f={};c&1048576&&(f.text=u[20].content),c&1048576&&(f.tag=u[20].tags),c&1048576&&(f.id=u[20].id),c&2&&(f.view=u[1]),l.$set(f)},i(u){s||(A(l.$$.fragment,u),s=!0)},o(u){j(l.$$.fragment,u),s=!1},d(u){u&&p(e),ae(l)}}}function xc(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[20].pubkey],pubkey:n[20].pubkey,$$slots:{nodata:[$c,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],error:[Zc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],loading:[Xc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0],default:[Yc,({metadata:t})=>({21:t}),({metadata:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&1048576&&(o.queryKey=["metadata",t[20].pubkey]),i&1048576&&(o.pubkey=t[20].pubkey),i&137363458&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function ef(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function tf(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function rf(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function nf(n){let e,r,t,i,o,a,l,s;const u=[pc,_c,hc,dc],c=[];function f(d,h){return h&1&&(e=null),h&1&&(r=null),h&1&&(t=null),h&1&&(i=null),e==null&&(e=X.decode(d[0]).type==="note"||X.decode(d[0]).type==="nevent"),e?0:(r==null&&(r=X.decode(d[0]).type==="npub"),r?1:(t==null&&(t=X.decode(d[0]).type==="nprofile"),t?2:(i==null&&(i=X.decode(d[0]).type==="naddr"),i?3:-1)))}return~(o=f(n,-1))&&(a=c[o]=u[o](n)),{c(){a&&a.c(),l=Z()},l(d){a&&a.l(d),l=Z()},m(d,h){~o&&c[o].m(d,h),I(d,l,h),s=!0},p(d,[h]){let _=o;o=f(d,h),o===_?~o&&c[o].p(d,h):(a&&(te(),j(c[_],1,1,()=>{c[_]=null}),re()),~o?(a=c[o],a?a.p(d,h):(a=c[o]=u[o](d),a.c()),A(a,1),a.m(l.parentNode,l)):a=null)},i(d){s||(A(a),s=!0)},o(d){j(a),s=!1},d(d){~o&&c[o].d(d),d&&p(l)}}}const of=n=>n[0]==="content-warning";function af(n,e,r){let t,i;Ue(n,hn,P=>r(17,t=P)),Ue(n,wo,P=>r(1,i=P));let{encodedId:o}=e;const a={ref:sn,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function l(P,R){console.log(P);const M={type:"component",value:{metadata:P,pubkey:R},component:a};qe.trigger(M)}const s={ref:fa,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function u(P){console.log("click");const R={type:"component",title:"Event Json",value:{note:P},component:s};qe.trigger(R)}async function c(P){const R=X.decode(P).data;if(console.log(t),!(P in t)){const M=R.relays&&R.relays.length>0?R.relays:Ia,Q=[{authors:[R.pubkey],"#d":[R.identifier],kinds:[R.kind]}],$=await Ca(M,Q);return $.length>0&&($.sort((z,x)=>x.created_at-z.created_at),ct(hn,t[P]=$[0],t)),$[0]}return t[P]}const f=P=>{u(P)},d=P=>{u(P)},h=(P,R)=>{l(P,R.pubkey)},_=P=>{u(P)},y=(P,R)=>{l(P,R[1])},b=P=>{u(P)},E=P=>{l(P,X.decode(o).data)},S=P=>{l(P,X.decode(o).data.pubkey)},D=P=>{l(P,X.decode(o).data.pubkey)},T=P=>{u(P)},L=(P,R)=>{l(P,R[1])},O=P=>{u(P)};return n.$$set=P=>{"encodedId"in P&&r(0,o=P.encodedId)},[o,i,l,u,c,f,d,h,_,y,b,E,S,D,T,L,O]}class sf extends De{constructor(e){super(),Re(this,e,af,nf,Pe,{encodedId:0})}}function fo(n,e,r){const t=n.slice();return t[14]=e[r],t}function ho(n){let e,r;return{c(){e=g("img"),this.h()},l(t){e=k(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(e,"class","h-5 object-contain justify-center"),ue(e.src,r=JSON.parse(n[13].content).picture)||m(e,"src",r),m(e,"alt","avatar")},m(t,i){I(t,e,i)},p(t,i){i&8192&&!ue(e.src,r=JSON.parse(t[13].content).picture)&&m(e,"src",r)},d(t){t&&p(e)}}}function _o(n){let e,r,t=Ze(n[12].tags),i=[];for(let a=0;a<t.length;a+=1)i[a]=po(fo(n,t,a));const o=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","max-h-[4em] overflow-auto whitespace-nowrap border-s-4 border-s-rose-800/25")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);r=!0},p(a,l){if(l&12302){t=Ze(a[12].tags);let s;for(s=0;s<t.length;s+=1){const u=fo(a,t,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=po(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(te(),s=t.length;s<i.length;s+=1)o(s);re()}},i(a){if(!r){for(let l=0;l<t.length;l+=1)A(i[l]);r=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)j(i[l]);r=!1},d(a){a&&p(e),pr(i,a)}}}function lf(n){let e,r,t=n[14][0]+"",i,o,a=n[14][1]+"",l,s;return{c(){e=g("div"),r=C("["),i=C(t),o=C(`]
                  `),l=C(a),s=F(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=w(e);r=q(c,"["),i=q(c,t),o=q(c,`]
                  `),l=q(c,a),s=U(c),c.forEach(p),this.h()},h(){m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(u,c){I(u,e,c),v(e,r),v(e,i),v(e,o),v(e,l),v(e,s)},p(u,c){c&4096&&t!==(t=u[14][0]+"")&&N(i,t),c&4096&&a!==(a=u[14][1]+"")&&N(l,a)},i:H,o:H,d(u){u&&p(e)}}}function uf(n){let e,r;return e=new Jt({props:{queryKey:[n[14][1]],id:n[14][1],$$slots:{nodata:[vf,({text:t})=>({12:t}),({text:t})=>t?4096:0],error:[pf,({text:t})=>({12:t}),({text:t})=>t?4096:0],loading:[_f,({text:t})=>({12:t}),({text:t})=>t?4096:0],default:[hf,({text:t})=>({12:t}),({text:t})=>t?4096:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&4096&&(o.queryKey=[t[14][1]]),i&4096&&(o.id=t[14][1]),i&135170&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function cf(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[14][1]],pubkey:n[14][1],$$slots:{nodata:[gf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],error:[bf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],loading:[yf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],default:[mf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&4096&&(o.queryKey=["metadata",t[14][1]]),i&4096&&(o.pubkey=t[14][1]),i&143360&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function ff(n){let e=n[12].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&4096&&e!==(e=t[12].content+"")&&N(r,e)},d(t){t&&p(r)}}}function df(n){let e="<content-warning>",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p:H,d(t){t&&p(r)}}}function hf(n){let e,r,t,i,o,a,l;function s(d,h){return h&4098&&(i=null),i==null&&(i=!!(d[12].tags.some(Df)&&d[1]==!1)),i?df:ff}let u=s(n,-1),c=u(n);function f(){return n[9](n[12])}return{c(){e=g("div"),r=C("[e] "),t=g("button"),c.c(),o=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=q(h,"[e] "),t=k(h,"BUTTON",{class:!0});var _=w(t);c.l(_),_.forEach(p),h.forEach(p),o=U(d),this.h()},h(){m(t,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),v(e,r),v(e,t),c.m(t,null),I(d,o,h),a||(l=Y(t,"click",f),a=!0)},p(d,h){n=d,u===(u=s(n,h))&&c?c.p(n,h):(c.d(1),c=u(n),c&&(c.c(),c.m(t,null)))},d(d){d&&p(e),c.d(),d&&p(o),a=!1,l()}}}function _f(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("[e] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"[e] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function pf(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("[e] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"[e] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function vf(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("[e] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"[e] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function mf(n){let e,r,t,i,o,a=JSON.parse(n[13].content).name+"",l,s,u,c;function f(){return n[8](n[13],n[14])}return{c(){e=g("div"),r=C("to[p] "),t=g("button"),i=C("@"),o=g("u"),l=C(a),s=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=q(h,"to[p] "),t=k(h,"BUTTON",{class:!0});var _=w(t);i=q(_,"@"),o=k(_,"U",{});var y=w(o);l=q(y,a),y.forEach(p),_.forEach(p),h.forEach(p),s=U(d),this.h()},h(){m(t,"class","text-emerald-800 overflow-hidden text-ellipsis"),m(e,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden")},m(d,h){I(d,e,h),v(e,r),v(e,t),v(t,i),v(t,o),v(o,l),I(d,s,h),u||(c=Y(t,"click",f),u=!0)},p(d,h){n=d,h&8192&&a!==(a=JSON.parse(n[13].content).name+"")&&N(l,a)},d(d){d&&p(e),d&&p(s),u=!1,c()}}}function yf(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function bf(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function gf(n){let e,r,t,i=n[14][1]+"",o,a;return{c(){e=g("div"),r=g("div"),t=C("to[p] "),o=C(i),a=F(),this.h()},l(l){e=k(l,"DIV",{slot:!0});var s=w(e);r=k(s,"DIV",{class:!0});var u=w(r);t=q(u,"to[p] "),o=q(u,i),u.forEach(p),a=U(s),s.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(l,s){I(l,e,s),v(e,r),v(r,t),v(r,o),v(e,a)},p(l,s){s&4096&&i!==(i=l[14][1]+"")&&N(o,i)},d(l){l&&p(e)}}}function po(n){let e,r,t,i;const o=[cf,uf,lf],a=[];function l(s,u){return s[14][0]==="p"?0:s[14][0]==="e"||s[14][0]==="q"?1:2}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function kf(n){let e,r,t=JSON.parse(n[13].content).picture,i,o,a=JSON.parse(n[13].content).display_name+"",l,s,u,c,f,d,h=JSON.parse(n[13].content).name+"",_,y,b,E,S=new Date(n[12].created_at*1e3).toLocaleString()+"",D,T,L=n[12].tags&&Ze(n[12].tags).length>0,O,P,R,M,Q,$,z=t&&ho(n);function x(){return n[6](n[13],n[12])}function _e(){return n[7](n[12])}let W=L&&_o(n);return R=new Je({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),z&&z.c(),i=F(),o=g("div"),l=C(a),s=F(),u=g("div"),c=g("button"),f=C("@"),d=g("u"),_=C(h),y=F(),b=g("div"),E=g("button"),D=C(S),T=F(),W&&W.c(),O=F(),P=g("div"),ie(R.$$.fragment),this.h()},l(K){e=k(K,"DIV",{class:!0});var G=w(e);r=k(G,"DIV",{});var ee=w(r);z&&z.l(ee),ee.forEach(p),i=U(G),o=k(G,"DIV",{class:!0});var fe=w(o);l=q(fe,a),fe.forEach(p),s=U(G),u=k(G,"DIV",{class:!0});var J=w(u);c=k(J,"BUTTON",{class:!0});var de=w(c);f=q(de,"@"),d=k(de,"U",{});var pe=w(d);_=q(pe,h),pe.forEach(p),de.forEach(p),J.forEach(p),y=U(G),b=k(G,"DIV",{class:!0});var se=w(b);E=k(se,"BUTTON",{class:!0});var ne=w(E);D=q(ne,S),ne.forEach(p),se.forEach(p),G.forEach(p),T=U(K),W&&W.l(K),O=U(K),P=k(K,"DIV",{class:!0});var ce=w(P);le(R.$$.fragment,ce),ce.forEach(p),this.h()},h(){m(o,"class","wi truncate justify-items-end"),m(c,"class","text-emerald-800/60 text-xs"),m(u,"class","truncate wid min-w-[2em] justify-items-end"),m(E,"class","text-xs underline decoration-secondary-500"),m(b,"class","min-w-max"),m(e,"class","w-full grid grid-cols-[auto_auto_1fr_auto] gap-1 h-fix"),m(P,"class","max-h-[20em] overflow-auto break-all whitespace-pre-wrap")},m(K,G){I(K,e,G),v(e,r),z&&z.m(r,null),v(e,i),v(e,o),v(o,l),v(e,s),v(e,u),v(u,c),v(c,f),v(c,d),v(d,_),v(e,y),v(e,b),v(b,E),v(E,D),I(K,T,G),W&&W.m(K,G),I(K,O,G),I(K,P,G),oe(R,P,null),M=!0,Q||($=[Y(c,"click",x),Y(E,"click",_e)],Q=!0)},p(K,G){n=K,G&8192&&(t=JSON.parse(n[13].content).picture),t?z?z.p(n,G):(z=ho(n),z.c(),z.m(r,null)):z&&(z.d(1),z=null),(!M||G&8192)&&a!==(a=JSON.parse(n[13].content).display_name+"")&&N(l,a),(!M||G&8192)&&h!==(h=JSON.parse(n[13].content).name+"")&&N(_,h),(!M||G&4096)&&S!==(S=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(D,S),G&4096&&(L=n[12].tags&&Ze(n[12].tags).length>0),L?W?(W.p(n,G),G&4096&&A(W,1)):(W=_o(n),W.c(),A(W,1),W.m(O.parentNode,O)):W&&(te(),j(W,1,1,()=>{W=null}),re());const ee={};G&4096&&(ee.text=n[12].content),G&4096&&(ee.tag=n[12].tags),G&4096&&(ee.id=n[12].id),G&2&&(ee.view=n[1]),R.$set(ee)},i(K){M||(A(W),A(R.$$.fragment,K),M=!0)},o(K){j(W),j(R.$$.fragment,K),M=!1},d(K){K&&p(e),z&&z.d(),K&&p(T),W&&W.d(K),K&&p(O),K&&p(P),ae(R),Q=!1,Qe($)}}}function wf(n){let e,r,t=n[12].pubkey+"",i,o,a,l,s=new Date(n[12].created_at*1e3).toLocaleString()+"",u,c,f,d,h,_;function y(){return n[5](n[12])}return f=new Je({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("div"),l=g("button"),u=C(s),c=F(),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);i=q(S,t),S.forEach(p),o=U(E),a=k(E,"DIV",{class:!0});var D=w(a);l=k(D,"BUTTON",{class:!0});var T=w(l);u=q(T,s),T.forEach(p),c=U(D),le(f.$$.fragment,D),D.forEach(p),E.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm verflow-hidden"),m(l,"class","text-xs underline decoration-secondary-500"),m(a,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","loading")},m(b,E){I(b,e,E),v(e,r),v(r,i),v(e,o),v(e,a),v(a,l),v(l,u),v(a,c),oe(f,a,null),d=!0,h||(_=Y(l,"click",y),h=!0)},p(b,E){n=b,(!d||E&4096)&&t!==(t=n[12].pubkey+"")&&N(i,t),(!d||E&4096)&&s!==(s=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(u,s);const S={};E&4096&&(S.text=n[12].content),E&4096&&(S.tag=n[12].tags),E&4096&&(S.id=n[12].id),E&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){j(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function Ef(n){let e,r,t=n[12].pubkey+"",i,o,a,l=new Date(n[12].created_at*1e3).toLocaleString()+"",s,u,c,f,d,h,_;function y(){return n[4](n[12])}return f=new Je({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("button"),s=C(l),u=F(),c=g("div"),ie(f.$$.fragment),this.h()},l(b){e=k(b,"DIV",{slot:!0});var E=w(e);r=k(E,"DIV",{class:!0});var S=w(r);i=q(S,t),o=U(S),a=k(S,"BUTTON",{class:!0});var D=w(a);s=q(D,l),D.forEach(p),S.forEach(p),u=U(E),c=k(E,"DIV",{class:!0});var T=w(c);le(f.$$.fragment,T),T.forEach(p),E.forEach(p),this.h()},h(){m(a,"class","text-xs underline decoration-secondary-500"),m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(c,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","error")},m(b,E){I(b,e,E),v(e,r),v(r,i),v(r,o),v(r,a),v(a,s),v(e,u),v(e,c),oe(f,c,null),d=!0,h||(_=Y(a,"click",y),h=!0)},p(b,E){n=b,(!d||E&4096)&&t!==(t=n[12].pubkey+"")&&N(i,t),(!d||E&4096)&&l!==(l=new Date(n[12].created_at*1e3).toLocaleString()+"")&&N(s,l);const S={};E&4096&&(S.text=n[12].content),E&4096&&(S.tag=n[12].tags),E&4096&&(S.id=n[12].id),E&2&&(S.view=n[1]),f.$set(S)},i(b){d||(A(f.$$.fragment,b),d=!0)},o(b){j(f.$$.fragment,b),d=!1},d(b){b&&p(e),ae(f),h=!1,_()}}}function Of(n){let e,r,t=n[12].pubkey+"",i,o,a,l,s;return l=new Je({props:{text:n[12].content,tag:n[12].tags,id:n[12].id,view:n[1]}}),{c(){e=g("div"),r=g("div"),i=C(t),o=F(),a=g("div"),ie(l.$$.fragment),this.h()},l(u){e=k(u,"DIV",{slot:!0});var c=w(e);r=k(c,"DIV",{class:!0});var f=w(r);i=q(f,t),f.forEach(p),o=U(c),a=k(c,"DIV",{class:!0});var d=w(a);le(l.$$.fragment,d),d.forEach(p),c.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(a,"class","max-h-40 overflow-auto break-all whitespace-pre-wrap"),m(e,"slot","nodata")},m(u,c){I(u,e,c),v(e,r),v(r,i),v(e,o),v(e,a),oe(l,a,null),s=!0},p(u,c){(!s||c&4096)&&t!==(t=u[12].pubkey+"")&&N(i,t);const f={};c&4096&&(f.text=u[12].content),c&4096&&(f.tag=u[12].tags),c&4096&&(f.id=u[12].id),c&2&&(f.view=u[1]),l.$set(f)},i(u){s||(A(l.$$.fragment,u),s=!0)},o(u){j(l.$$.fragment,u),s=!1},d(u){u&&p(e),ae(l)}}}function Sf(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[12].pubkey],pubkey:n[12].pubkey,$$slots:{nodata:[Of,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],error:[Ef,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],loading:[wf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0],default:[kf,({metadata:t})=>({13:t}),({metadata:t})=>t?8192:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&4096&&(o.queryKey=["metadata",t[12].pubkey]),i&4096&&(o.pubkey=t[12].pubkey),i&143362&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function If(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function Cf(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function qf(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=C(n[0]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var o=w(e);r=k(o,"DIV",{class:!0});var a=w(r);t=q(a,n[0]),a.forEach(p),o.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(i,o){I(i,e,o),v(e,r),v(r,t)},p(i,o){o&1&&N(t,i[0])},d(i){i&&p(e)}}}function Pf(n){let e,r,t,i;return t=new Jt({props:{queryKey:[n[0]],id:n[0],$$slots:{nodata:[qf,({text:o})=>({12:o}),({text:o})=>o?4096:0],error:[Cf,({text:o})=>({12:o}),({text:o})=>o?4096:0],loading:[If,({text:o})=>({12:o}),({text:o})=>o?4096:0],default:[Sf,({text:o})=>({12:o}),({text:o})=>o?4096:0]},$$scope:{ctx:n}}}),{c(){e=g("div"),r=g("div"),ie(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=w(e);r=k(a,"DIV",{class:!0});var l=w(r);le(t.$$.fragment,l),l.forEach(p),a.forEach(p),this.h()},h(){m(r,"class","w-full grid grid-rows-[auto_auto] gap-0 h-fix"),m(e,"class","card border border-surface-400 px-3 py-2 mt-1")},m(o,a){I(o,e,a),v(e,r),oe(t,r,null),i=!0},p(o,[a]){const l={};a&1&&(l.queryKey=[o[0]]),a&1&&(l.id=o[0]),a&135171&&(l.$$scope={dirty:a,ctx:o}),t.$set(l)},i(o){i||(A(t.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),i=!1},d(o){o&&p(e),ae(t)}}}const Df=n=>n[0]==="content-warning";function Rf(n,e,r){let t;Ue(n,wo,y=>r(1,t=y));let{id:i}=e;const o={ref:sn,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function a(y,b){console.log(y);const E={type:"component",value:{metadata:y,pubkey:b},component:o};qe.trigger(E)}const l={ref:fa,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function s(y){console.log("click");const b={type:"component",title:"Event Json",value:{note:y},component:l};qe.trigger(b)}const u=y=>{s(y)},c=y=>{s(y)},f=(y,b)=>{a(y,b.pubkey)},d=y=>{s(y)},h=(y,b)=>{a(y,b[1])},_=y=>{s(y)};return n.$$set=y=>{"id"in y&&r(0,i=y.id)},[i,t,a,s,u,c,f,d,h,_]}class Tf extends De{constructor(e){super(),Re(this,e,Rf,Pf,Pe,{id:0})}}function vo(n,e,r){const t=n.slice();return t[20]=e[r],t[22]=r,t}function Af(n){let e,r,t,i={ctx:n,current:null,token:null,hasCatch:!1,pending:kd,then:jf,catch:Lf,value:19,blocks:[,,,]};return Xe(r=n[10](n[1],n[2]),i),{c(){e=Z(),i.block.c()},l(o){e=Z(),i.block.l(o)},m(o,a){I(o,e,a),i.block.m(o,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,t=!0},p(o,a){n=o,i.ctx=n,a&6&&r!==(r=n[10](n[1],n[2]))&&Xe(r,i)||_r(i,n,a)},i(o){t||(A(i.block),t=!0)},o(o){for(let a=0;a<3;a+=1){const l=i.blocks[a];j(l)}t=!1},d(o){o&&p(e),i.block.d(o),i.token=null,i=null}}}function Mf(n){let e,r,t,i,o=n[2][n[2].findIndex(bo)][1]+"",a,l,s;return{c(){e=g("button"),r=C("content-warning"),t=g("br"),i=F(),a=C(o),this.h()},l(u){e=k(u,"BUTTON",{type:!0,class:!0});var c=w(e);r=q(c,"content-warning"),t=k(c,"BR",{}),i=U(c),a=q(c,o),c.forEach(p),this.h()},h(){m(e,"type","button"),m(e,"class","btn variant-filled-warning m-0")},m(u,c){I(u,e,c),v(e,r),v(e,t),v(e,i),v(e,a),l||(s=Y(e,"click",n[11]),l=!0)},p(u,c){c&4&&o!==(o=u[2][u[2].findIndex(bo)][1]+"")&&N(a,o)},i:H,o:H,d(u){u&&p(e),l=!1,s()}}}function Lf(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function jf(n){let e,r,t=n[19],i=[];for(let a=0;a<t.length;a+=1)i[a]=yo(vo(n,t,a));const o=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){e=g("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=w(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(p),this.h()},h(){m(e,"class","parent-container break-all whitespace-pre-wrap")},m(a,l){I(a,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);r=!0},p(a,l){if(l&16779262){t=a[19];let s;for(s=0;s<t.length;s+=1){const u=vo(a,t,s);i[s]?(i[s].p(u,l),A(i[s],1)):(i[s]=yo(u),i[s].c(),A(i[s],1),i[s].m(e,null))}for(te(),s=t.length;s<i.length;s+=1)o(s);re()}},i(a){if(!r){for(let l=0;l<t.length;l+=1)A(i[l]);r=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)j(i[l]);r=!1},d(a){a&&p(e),pr(i,a)}}}function mo(n){let e,r,t,i;const o=[Qf,Hf,Bf,Uf,Ff,Vf,Nf],a=[];function l(s,u){return s[20].type==="newline"?0:s[20].type==="emoji"?1:s[20].type==="url"?2:s[20].type==="image"?3:s[20].type==="nostr"&&s[20].url?4:s[20].type==="quote"&&s[20].number!==void 0?5:s[20].content.length>0?6:-1}return~(e=l(n))&&(r=a[e]=o[e](n)),{c(){r&&r.c(),t=Z()},l(s){r&&r.l(s),t=Z()},m(s,u){~e&&a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?~e&&a[e].p(s,u):(r&&(te(),j(a[c],1,1,()=>{a[c]=null}),re()),~e?(r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t)):r=null)},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){~e&&a[e].d(s),s&&p(t)}}}function Nf(n){let e,r=n[20].content+"",t;return{c(){e=g("span"),t=C(r)},l(i){e=k(i,"SPAN",{});var o=w(e);t=q(o,r),o.forEach(p)},m(i,o){I(i,e,o),v(e,t)},p(i,o){o&6&&r!==(r=i[20].content+"")&&N(t,r)},i:H,o:H,d(i){i&&p(e)}}}function Vf(n){let e,r,t,i;const o=[zf,Jf,Gf,Kf],a=[];function l(s,u){return s[2][s[20].number][0]==="p"?0:s[2][s[20].number][0]==="e"||s[2][s[20].number][0]==="q"?1:s[2][s[20].number][0]==="t"?2:3}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function Ff(n){let e,r,t,i,o;const a=[xf,$f],l=[];function s(u,c){return c&6&&(e=null),e==null&&(e=!!u[6](u[20].url)),e?0:1}return r=s(n,-1),t=l[r]=a[r](n),{c(){t.c(),i=Z()},l(u){t.l(u),i=Z()},m(u,c){l[r].m(u,c),I(u,i,c),o=!0},p(u,c){let f=r;r=s(u,c),r===f?l[r].p(u,c):(te(),j(l[f],1,1,()=>{l[f]=null}),re(),t=l[r],t?t.p(u,c):(t=l[r]=a[r](u),t.c()),A(t,1),t.m(i.parentNode,i))},i(u){o||(A(t),o=!0)},o(u){j(t),o=!1},d(u){l[r].d(u),u&&p(i)}}}function Uf(n){let e;function r(o,a){return o[3]?td:ed}let t=r(n),i=t(n);return{c(){i.c(),e=Z()},l(o){i.l(o),e=Z()},m(o,a){i.m(o,a),I(o,e,a)},p(o,a){t===(t=r(o))&&i?i.p(o,a):(i.d(1),i=t(o),i&&(i.c(),i.m(e.parentNode,e)))},i:H,o:H,d(o){i.d(o),o&&p(e)}}}function Bf(n){let e,r,t,i;const o=[od,id],a=[];function l(s,u){return s[3]?0:1}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=Z()},l(s){r.l(s),t=Z()},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function Hf(n){let e,r,t,i,o,a;function l(){return n[13](n[20])}return{c(){e=g("span"),r=g("img"),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0}),i=U(u),u.forEach(p),this.h()},h(){m(r,"class","max-h-[1.5em] object-contain"),ue(r.src,t=n[20].url)||m(r,"src",t),m(r,"alt",""),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(s,u){I(s,e,u),v(e,r),v(e,i),o||(a=Y(r,"click",l),o=!0)},p(s,u){n=s,u&6&&!ue(r.src,t=n[20].url)&&m(r,"src",t)},i:H,o:H,d(s){s&&p(e),o=!1,a()}}}function Qf(n){let e;return{c(){e=g("br")},l(r){e=k(r,"BR",{})},m(r,t){I(r,e,t)},p:H,i:H,o:H,d(r){r&&p(e)}}}function Kf(n){let e=n[2][n[20].number][1]+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&6&&e!==(e=t[2][t[20].number][1]+"")&&N(r,e)},i:H,o:H,d(t){t&&p(r)}}}function Gf(n){let e,r,t=n[2][n[20].number][1]+"",i;return{c(){e=g("u"),r=C("#"),i=C(t)},l(o){e=k(o,"U",{});var a=w(e);r=q(a,"#"),i=q(a,t),a.forEach(p)},m(o,a){I(o,e,a),v(e,r),v(e,i)},p(o,a){a&6&&t!==(t=o[2][o[20].number][1]+"")&&N(i,t)},i:H,o:H,d(o){o&&p(e)}}}function Jf(n){let e,r;return e=new Tf({props:{id:n[2][n[20].number][1]}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&6&&(o.id=t[2][t[20].number][1]),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function zf(n){let e,r;return e=new Ge({props:{queryKey:["metadata",n[2][n[20].number][1]],pubkey:n[2][n[20].number][1],$$slots:{nodata:[Zf,({metadata:t})=>({24:t}),({metadata:t})=>t?16777216:0],error:[Xf,({metadata:t})=>({24:t}),({metadata:t})=>t?16777216:0],loading:[Yf,({metadata:t})=>({24:t}),({metadata:t})=>t?16777216:0],default:[Wf,({metadata:t})=>({24:t}),({metadata:t})=>t?16777216:0]},$$scope:{ctx:n}}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&6&&(o.queryKey=["metadata",t[2][t[20].number][1]]),i&6&&(o.pubkey=t[2][t[20].number][1]),i&50331654&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function Wf(n){let e,r,t,i=JSON.parse(n[24].content).name+"",o,a,l,s;function u(){return n[15](n[20],n[24])}return{c(){e=g("button"),r=C("@"),t=g("u"),o=C(i),a=F(),this.h()},l(c){e=k(c,"BUTTON",{class:!0});var f=w(e);r=q(f,"@"),t=k(f,"U",{});var d=w(t);o=q(d,i),d.forEach(p),f.forEach(p),a=U(c),this.h()},h(){m(e,"class","flex inline-flex text-sm text-black/80")},m(c,f){I(c,e,f),v(e,r),v(e,t),v(t,o),I(c,a,f),l||(s=Y(e,"click",u),l=!0)},p(c,f){n=c,f&16777216&&i!==(i=JSON.parse(n[24].content).name+"")&&N(o,i)},d(c){c&&p(e),c&&p(a),l=!1,s()}}}function Yf(n){let e,r,t=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),r=g("div"),i=C(t),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var s=w(r);i=q(s,t),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","loading")},m(a,l){I(a,e,l),v(e,r),v(r,i),v(e,o)},p(a,l){l&6&&t!==(t=a[2][a[20].number][1]+"")&&N(i,t)},d(a){a&&p(e)}}}function Xf(n){let e,r,t=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),r=g("div"),i=C(t),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var s=w(r);i=q(s,t),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","error")},m(a,l){I(a,e,l),v(e,r),v(r,i),v(e,o)},p(a,l){l&6&&t!==(t=a[2][a[20].number][1]+"")&&N(i,t)},d(a){a&&p(e)}}}function Zf(n){let e,r,t=n[2][n[20].number][1]+"",i,o;return{c(){e=g("div"),r=g("div"),i=C(t),o=F(),this.h()},l(a){e=k(a,"DIV",{slot:!0});var l=w(e);r=k(l,"DIV",{class:!0});var s=w(r);i=q(s,t),s.forEach(p),o=U(l),l.forEach(p),this.h()},h(){m(r,"class","-mt-0.5 px-2 opacity-60 text-sm overflow-hidden"),m(e,"slot","nodata")},m(a,l){I(a,e,l),v(e,r),v(r,i),v(e,o)},p(a,l){l&6&&t!==(t=a[2][a[20].number][1]+"")&&N(i,t)},d(a){a&&p(e)}}}function $f(n){let e,r=n[20].content+"",t;return{c(){e=g("span"),t=C(r),this.h()},l(i){e=k(i,"SPAN",{class:!0});var o=w(e);t=q(o,r),o.forEach(p),this.h()},h(){m(e,"class","text-black/80")},m(i,o){I(i,e,o),v(e,t)},p(i,o){o&6&&r!==(r=i[20].content+"")&&N(t,r)},i:H,o:H,d(i){i&&p(e)}}}function xf(n){let e,r;return e=new sf({props:{encodedId:n[20].url}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&6&&(o.encodedId=t[20].url),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function ed(n){let e,r,t,i;function o(s,u){return s[20].content.length>80?nd:rd}let a=o(n),l=a(n);return{c(){e=g("span"),r=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),i=U(u),u.forEach(p),this.h()},h(){m(r,"class","anchor"),m(r,"href",t=n[20].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),v(e,r),l.m(r,null),v(e,i)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=s[20].content)&&m(r,"href",t)},d(s){s&&p(e),l.d()}}}function td(n){let e,r,t,i,o,a;function l(){return n[14](n[20])}return{c(){e=g("span"),r=g("img"),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=w(e);r=k(u,"IMG",{class:!0,src:!0,alt:!0}),i=U(u),u.forEach(p),this.h()},h(){m(r,"class","max-h-[10em] object-contain"),ue(r.src,t=n[20].content)||m(r,"src",t),m(r,"alt",""),m(e,"class","w-[fit-content] inline-flex flex align-bottom")},m(s,u){I(s,e,u),v(e,r),v(e,i),o||(a=Y(r,"click",l),o=!0)},p(s,u){n=s,u&6&&!ue(r.src,t=n[20].content)&&m(r,"src",t)},d(s){s&&p(e),o=!1,a()}}}function rd(n){let e=n[20].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&6&&e!==(e=t[20].content+"")&&N(r,e)},d(t){t&&p(r)}}}function nd(n){let e=n[20].content.slice(0,75)+"",r,t;return{c(){r=C(e),t=C("...")},l(i){r=q(i,e),t=q(i,"...")},m(i,o){I(i,r,o),I(i,t,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(r,e)},d(i){i&&p(r),i&&p(t)}}}function id(n){let e,r,t,i;function o(s,u){return s[20].content.length>80?sd:ad}let a=o(n),l=a(n);return{c(){e=g("span"),r=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),i=U(u),u.forEach(p),this.h()},h(){m(r,"class","anchor"),m(r,"href",t=n[20].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),v(e,r),l.m(r,null),v(e,i)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=s[20].content)&&m(r,"href",t)},i:H,o:H,d(s){s&&p(e),l.d()}}}function od(n){let e,r,t,i,o,a,l;const s=[fd,cd,ud,ld],u=[];function c(f,d){var h;return d&6&&(e=null),d&6&&(r=null),d&6&&(t=null),e==null&&(e=!!new URL(f[20].content).hostname.endsWith("twitter.com")),e?0:(r==null&&(r=new URL(f[20].content).hostname==="www.youtube.com"||new URL(f[20].content).hostname==="m.youtube.com"||new URL(f[20].content).hostname==="youtu.be"),r?1:(t==null&&(t=!!((h=f[20].content)!=null&&h.endsWith(".mp4"))),t?2:3))}return i=c(n,-1),o=u[i]=s[i](n),{c(){o.c(),a=Z()},l(f){o.l(f),a=Z()},m(f,d){u[i].m(f,d),I(f,a,d),l=!0},p(f,d){let h=i;i=c(f,d),i===h?u[i].p(f,d):(te(),j(u[h],1,1,()=>{u[h]=null}),re(),o=u[i],o?o.p(f,d):(o=u[i]=s[i](f),o.c()),A(o,1),o.m(a.parentNode,a))},i(f){l||(A(o),l=!0)},o(f){j(o),l=!1},d(f){u[i].d(f),f&&p(a)}}}function ad(n){let e=n[20].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&6&&e!==(e=t[20].content+"")&&N(r,e)},d(t){t&&p(r)}}}function sd(n){let e=n[20].content.slice(0,75)+"",r,t;return{c(){r=C(e),t=C("...")},l(i){r=q(i,e),t=q(i,"...")},m(i,o){I(i,r,o),I(i,t,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(r,e)},d(i){i&&p(r),i&&p(t)}}}function ld(n){let e,r,t,i={ctx:n,current:null,token:null,hasCatch:!1,pending:yd,then:hd,catch:dd,value:23,blocks:[,,,]};return Xe(r=n[7](n[20].content),i),{c(){e=Z(),i.block.c()},l(o){e=Z(),i.block.l(o)},m(o,a){I(o,e,a),i.block.m(o,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,t=!0},p(o,a){n=o,i.ctx=n,a&6&&r!==(r=n[7](n[20].content))&&Xe(r,i)||_r(i,n,a)},i(o){t||(A(i.block),t=!0)},o(o){for(let a=0;a<3;a+=1){const l=i.blocks[a];j(l)}t=!1},d(o){o&&p(e),i.block.d(o),i.token=null,i=null}}}function ud(n){let e,r,t,i,o,a;return{c(){e=g("video"),r=g("source"),i=g("track"),a=C(`
                  Your browser does not support the video tag.
                `),this.h()},l(l){e=k(l,"VIDEO",{class:!0});var s=w(e);r=k(s,"SOURCE",{src:!0,type:!0}),i=k(s,"TRACK",{kind:!0,src:!0,label:!0}),a=q(s,`
                  Your browser does not support the video tag.
                `),s.forEach(p),this.h()},h(){ue(r.src,t=n[20].content)||m(r,"src",t),m(r,"type","video/mp4"),m(i,"kind","captions"),ue(i.src,o="")||m(i,"src",o),m(i,"label","English"),i.default=!0,e.controls=!0,m(e,"class","max-h-[20em]")},m(l,s){I(l,e,s),v(e,r),v(e,i),v(e,a)},p(l,s){s&6&&!ue(r.src,t=l[20].content)&&m(r,"src",t)},i:H,o:H,d(l){l&&p(e)}}}function cd(n){let e,r;return{c(){e=g("iframe"),this.h()},l(t){e=k(t,"IFRAME",{class:!0,width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),w(e).forEach(p),this.h()},h(){m(e,"class","rounded"),m(e,"width","320"),m(e,"height","180"),ue(e.src,r=`https://www.youtube.com/embed/${n[8](n[20].content)}`)||m(e,"src",r),m(e,"title","YouTube video player"),m(e,"frameborder","0"),m(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.allowFullscreen=!0},m(t,i){I(t,e,i)},p(t,i){i&6&&!ue(e.src,r=`https://www.youtube.com/embed/${t[8](t[20].content)}`)&&m(e,"src",r)},i:H,o:H,d(t){t&&p(e)}}}function fd(n){let e,r,t,i,o=n[20].content+"",a,l,s,u,c,f;return{c(){e=g("div"),r=g("blockquote"),t=g("p"),i=g("a"),a=C(o),s=F(),u=g("script"),f=F(),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=w(e);r=k(h,"BLOCKQUOTE",{class:!0});var _=w(r);t=k(_,"P",{lang:!0,dir:!0});var y=w(t);i=k(y,"A",{class:!0,href:!0});var b=w(i);a=q(b,o),b.forEach(p),y.forEach(p),_.forEach(p),s=U(h),u=k(h,"SCRIPT",{src:!0,charset:!0});var E=w(u);E.forEach(p),f=U(h),h.forEach(p),this.h()},h(){m(i,"class","anchor"),m(i,"href",l=n[20].content),m(t,"lang","ja"),m(t,"dir","ltr"),m(r,"class","twitter-tweet"),u.async=!0,ue(u.src,c="https://platform.twitter.com/widgets.js")||m(u,"src",c),m(u,"charset","utf-8"),m(e,"class","max-h-[24rem] max-w-[36rem] overflow-auto")},m(d,h){I(d,e,h),v(e,r),v(r,t),v(t,i),v(i,a),v(e,s),v(e,u),v(e,f)},p(d,h){h&6&&o!==(o=d[20].content+"")&&N(a,o),h&6&&l!==(l=d[20].content)&&m(i,"href",l)},i:H,o:H,d(d){d&&p(e)}}}function dd(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function hd(n){let e,r,t,i;const o=[pd,_d],a=[];function l(s,u){return s[4][s[20].content].title!==""?0:1}return e=l(n),r=a[e]=o[e](n),{c(){r.c(),t=F()},l(s){r.l(s),t=U(s)},m(s,u){a[e].m(s,u),I(s,t,u),i=!0},p(s,u){let c=e;e=l(s),e===c?a[e].p(s,u):(te(),j(a[c],1,1,()=>{a[c]=null}),re(),r=a[e],r?r.p(s,u):(r=a[e]=o[e](s),r.c()),A(r,1),r.m(t.parentNode,t))},i(s){i||(A(r),i=!0)},o(s){j(r),i=!1},d(s){a[e].d(s),s&&p(t)}}}function _d(n){let e,r,t;function i(l,s){return l[20].content.length>80?md:vd}let o=i(n),a=o(n);return{c(){e=g("span"),r=g("a"),a.c(),this.h()},l(l){e=k(l,"SPAN",{class:!0});var s=w(e);r=k(s,"A",{class:!0,href:!0,target:!0});var u=w(r);a.l(u),u.forEach(p),s.forEach(p),this.h()},h(){m(r,"class","anchor"),m(r,"href",t=n[20].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(l,s){I(l,e,s),v(e,r),a.m(r,null)},p(l,s){o===(o=i(l))&&a?a.p(l,s):(a.d(1),a=o(l),a&&(a.c(),a.m(r,null))),s&6&&t!==(t=l[20].content)&&m(r,"href",t)},i:H,o:H,d(l){l&&p(e),a.d()}}}function pd(n){let e,r;return e=new fc({props:{ogp:n[4][n[20].content],url:n[20].content}}),{c(){ie(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,i){oe(e,t,i),r=!0},p(t,i){const o={};i&22&&(o.ogp=t[4][t[20].content]),i&6&&(o.url=t[20].content),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){ae(e,t)}}}function vd(n){let e=n[20].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&6&&e!==(e=t[20].content+"")&&N(r,e)},d(t){t&&p(r)}}}function md(n){let e=n[20].content.slice(0,75)+"",r,t;return{c(){r=C(e),t=C("...")},l(i){r=q(i,e),t=q(i,"...")},m(i,o){I(i,r,o),I(i,t,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(r,e)},d(i){i&&p(r),i&&p(t)}}}function yd(n){let e,r,t,i;function o(s,u){return s[20].content.length>80?gd:bd}let a=o(n),l=a(n);return{c(){e=g("span"),r=g("a"),l.c(),i=F(),this.h()},l(s){e=k(s,"SPAN",{class:!0});var u=w(e);r=k(u,"A",{class:!0,href:!0,target:!0});var c=w(r);l.l(c),c.forEach(p),u.forEach(p),i=U(s),this.h()},h(){m(r,"class","anchor"),m(r,"href",t=n[20].content),m(r,"target","_blank"),m(e,"class","break-all whitespace-pre-wrap")},m(s,u){I(s,e,u),v(e,r),l.m(r,null),I(s,i,u)},p(s,u){a===(a=o(s))&&l?l.p(s,u):(l.d(1),l=a(s),l&&(l.c(),l.m(r,null))),u&6&&t!==(t=s[20].content)&&m(r,"href",t)},i:H,o:H,d(s){s&&p(e),l.d(),s&&p(i)}}}function bd(n){let e=n[20].content+"",r;return{c(){r=C(e)},l(t){r=q(t,e)},m(t,i){I(t,r,i)},p(t,i){i&6&&e!==(e=t[20].content+"")&&N(r,e)},d(t){t&&p(r)}}}function gd(n){let e=n[20].content.slice(0,75)+"",r,t;return{c(){r=C(e),t=C("...")},l(i){r=q(i,e),t=q(i,"...")},m(i,o){I(i,r,o),I(i,t,o)},p(i,o){o&6&&e!==(e=i[20].content.slice(0,75)+"")&&N(r,e)},d(i){i&&p(r),i&&p(t)}}}function yo(n){let e,r,t=n[20].content.length>0&&mo(n);return{c(){t&&t.c(),e=Z()},l(i){t&&t.l(i),e=Z()},m(i,o){t&&t.m(i,o),I(i,e,o),r=!0},p(i,o){i[20].content.length>0?t?(t.p(i,o),o&6&&A(t,1)):(t=mo(i),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(te(),j(t,1,1,()=>{t=null}),re())},i(i){r||(A(t),r=!0)},o(i){j(t),r=!1},d(i){t&&t.d(i),i&&p(e)}}}function kd(n){let e;return{c(){e=C(n[1])},l(r){e=q(r,n[1])},m(r,t){I(r,e,t)},p(r,t){t&2&&N(e,r[1])},i:H,o:H,d(r){r&&p(e)}}}function wd(n){let e,r,t,i,o;const a=[Mf,Af],l=[];function s(u,c){return c&5&&(e=null),e==null&&(e=!!(u[2].some(Od)&&u[0]==!1)),e?0:1}return r=s(n,-1),t=l[r]=a[r](n),{c(){t.c(),i=Z()},l(u){t.l(u),i=Z()},m(u,c){l[r].m(u,c),I(u,i,c),o=!0},p(u,[c]){let f=r;r=s(u,c),r===f?l[r].p(u,c):(te(),j(l[f],1,1,()=>{l[f]=null}),re(),t=l[r],t?t.p(u,c):(t=l[r]=a[r](u),t.c()),A(t,1),t.m(i.parentNode,i))},i(u){o||(A(t),o=!0)},o(u){j(t),o=!1},d(u){l[r].d(u),u&&p(i)}}}function Ed(n,e){e||(e=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");const t=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}const Od=n=>n[0]==="content-warning",bo=n=>n[0]==="content-warning";function Sd(n,e,r){let t,i;Ue(n,_n,O=>r(16,t=O)),Ue(n,ut,O=>r(4,i=O));let{id:o}=e,{text:a}=e,{tag:l}=e,{URLPreview:s}=e;const u={ref:lc,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function c(O){if(typeof O=="string"){const P={type:"component",image:O,component:u};qe.trigger(P)}}function f(O){try{return X.decode(O),!0}catch{return!1}}async function d(O){if(!i[O]||i[O].title==="")try{const P=await qa(O);ut.update(R=>({...R,[O]:P}))}catch(P){console.log(P),ct(ut,i[O].title="",i),ct(ut,i[O].image="",i),ct(ut,i[O].description="",i),ct(ut,i[O].favicon="",i)}}const h=O=>{const P=new URL(O);if(P.hostname==="youtu.be")return P.pathname.substring(1);if(P.hostname==="www.youtube.com"||P.hostname==="m.youtube.com")return P.pathname.startsWith("/shorts/")?P.pathname.replace("/shorts/",""):Ed("v",O)},_={ref:sn,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function y(O,P){console.log(O);const R={type:"component",value:{metadata:O,pubkey:P},component:_};qe.trigger(R)}async function b(O,P){if(o in t)return t[o];{const R=await nc(O,P);return ct(_n,t[o]=R,t),R}}let{view:E=!1}=e;function S(){r(0,E=!0)}const D=O=>c(O.url),T=O=>c(O.content),L=(O,P)=>{const R=O.number===void 0?0:O.number;y(P,l[R][1])};return n.$$set=O=>{"id"in O&&r(12,o=O.id),"text"in O&&r(1,a=O.text),"tag"in O&&r(2,l=O.tag),"URLPreview"in O&&r(3,s=O.URLPreview),"view"in O&&r(0,E=O.view)},[E,a,l,s,i,c,f,d,h,y,b,S,o,D,T,L]}class Je extends De{constructor(e){super(),Re(this,e,Sd,wd,Pe,{id:12,text:1,tag:2,URLPreview:3,view:0})}}export{Dd as A,Je as C,Ad as M,Md as N,Ld as P,Rd as T,Td as a,sn as b,fa as c,Jt as d,Ge as e,Bi as g,qe as m};
