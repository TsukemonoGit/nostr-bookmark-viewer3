import{S as Je,i as Ke,s as We,C as Ve,k as p,l as g,m as v,h as a,n as f,b as T,G as Me,I as ze,J as Fe,g as J,d as Y,M as x,N as Ge,O as He,a as U,c as w,F as u,P as K,v as Gt,f as Ht,Q as Ye,R as Kt,T as ee,U as Wt,V as _t,W as je,X as qe,K as jt,y as ce,q as L,e as ke,z as fe,r as B,A as de,Y as ve,B as me,o as Yt,Z as qt,u as Jt,D as Qt}from"../chunks/index.2325ee3b.js";import{R as Pt,n as Ot,P as Xt,t as ue,d as Zt,g as xt}from"../chunks/navigation.b09c0480.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.7cb4d88a.js";import{T as $t}from"../chunks/Toast.29847fe0.js";function el(n){let e,t,r;const l=n[15].default,s=Ve(l,n,n[14],null);return{c(){e=p("div"),s&&s.c(),this.h()},l(i){e=g(i,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-multiselectable":!0,"aria-label":!0});var c=v(e);s&&s.l(c),c.forEach(a),this.h()},h(){f(e,"class",t="tree "+n[1]),f(e,"data-testid","tree"),f(e,"role","tree"),f(e,"aria-multiselectable","true"),f(e,"aria-label",n[0])},m(i,c){T(i,e,c),s&&s.m(e,null),r=!0},p(i,[c]){s&&s.p&&(!r||c&16384)&&Me(s,l,i,i[14],r?Fe(l,i[14],c,null):ze(i[14]),null),(!r||c&2&&t!==(t="tree "+i[1]))&&f(e,"class",t),(!r||c&1)&&f(e,"aria-label",i[0])},i(i){r||(J(s,i),r=!0)},o(i){Y(s,i),r=!1},d(i){i&&a(e),s&&s.d(i)}}}function tl(n,e,t){let r,{$$slots:l={},$$scope:s}=e,{width:i="w-full"}=e,{spacing:c="space-y-1"}=e,{padding:y="py-4 px-4"}=e,{indent:S="ml-4"}=e,{hover:b="hover:variant-soft"}=e,{rounded:N="rounded-container-token"}=e,{caretOpen:k="rotate-180"}=e,{caretClosed:m=""}=e,{hyphenOpacity:o="opacity-10"}=e,{regionSummary:h=""}=e,{regionSymbol:P=""}=e,{regionChildren:C=""}=e,{labelledby:A=""}=e;return x("padding",y),x("indent",S),x("hover",b),x("rounded",N),x("caretOpen",k),x("caretClosed",m),x("hyphenOpacity",o),x("regionSummary",h),x("regionSymbol",P),x("regionChildren",C),n.$$set=_=>{t(16,e=Ge(Ge({},e),He(_))),"width"in _&&t(2,i=_.width),"spacing"in _&&t(3,c=_.spacing),"padding"in _&&t(4,y=_.padding),"indent"in _&&t(5,S=_.indent),"hover"in _&&t(6,b=_.hover),"rounded"in _&&t(7,N=_.rounded),"caretOpen"in _&&t(8,k=_.caretOpen),"caretClosed"in _&&t(9,m=_.caretClosed),"hyphenOpacity"in _&&t(10,o=_.hyphenOpacity),"regionSummary"in _&&t(11,h=_.regionSummary),"regionSymbol"in _&&t(12,P=_.regionSymbol),"regionChildren"in _&&t(13,C=_.regionChildren),"labelledby"in _&&t(0,A=_.labelledby),"$$scope"in _&&t(14,s=_.$$scope)},n.$$.update=()=>{t(1,r=`${i} ${c} ${e.class??""}`)},e=He(e),[A,r,i,c,y,S,b,N,k,m,o,h,P,C,s,l]}class ll extends Je{constructor(e){super(),Ke(this,e,tl,el,We,{width:2,spacing:3,padding:4,indent:5,hover:6,rounded:7,caretOpen:8,caretClosed:9,hyphenOpacity:10,regionSummary:11,regionSymbol:12,regionChildren:13,labelledby:0})}}const rl=n=>({}),Ut=n=>({}),sl=n=>({}),wt=n=>({});function nl(n){let e,t,r;return{c(){e=je("svg"),t=je("path"),this.h()},l(l){e=qe(l,"svg",{xmlns:!0,viewBox:!0,class:!0});var s=v(e);t=qe(s,"path",{d:!0}),v(t).forEach(a),s.forEach(a),this.h()},h(){f(t,"d","M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 448 512"),f(e,"class",r="w-3 "+n[2])},m(l,s){T(l,e,s),u(e,t)},p(l,s){s&4&&r!==(r="w-3 "+l[2])&&f(e,"class",r)},d(l){l&&a(e)}}}function il(n){let e,t;return{c(){e=je("svg"),t=je("path"),this.h()},l(r){e=qe(r,"svg",{xmlns:!0,viewBox:!0});var l=v(e);t=qe(l,"path",{d:!0}),v(t).forEach(a),l.forEach(a),this.h()},h(){f(t,"d","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 448 512")},m(r,l){T(r,e,l),u(e,t)},p:jt,d(r){r&&a(e)}}}function Rt(n){let e,t;const r=n[21].lead,l=Ve(r,n,n[20],wt);return{c(){e=p("div"),l&&l.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var i=v(e);l&&l.l(i),i.forEach(a),this.h()},h(){f(e,"class","tree-item-lead")},m(s,i){T(s,e,i),l&&l.m(e,null),t=!0},p(s,i){l&&l.p&&(!t||i&1048576)&&Me(l,r,s,s[20],t?Fe(r,s[20],i,sl):ze(s[20]),wt)},i(s){t||(J(l,s),t=!0)},o(s){Y(l,s),t=!1},d(s){s&&a(e),l&&l.d(s)}}}function al(n){let e,t,r,l,s,i,c,y,S,b,N,k,m,o,h,P;function C(I,E){return I[6].children?il:nl}let A=C(n),_=A(n),R=n[6].lead&&Rt(n);const j=n[21].default,z=Ve(j,n,n[20],null),q=n[21].children,V=Ve(q,n,n[20],Ut);return{c(){e=p("details"),t=p("summary"),r=p("div"),_.c(),s=U(),R&&R.c(),i=U(),c=p("div"),z&&z.c(),b=U(),N=p("div"),V&&V.c(),this.h()},l(I){e=g(I,"DETAILS",{class:!0,"data-testid":!0});var E=v(e);t=g(E,"SUMMARY",{class:!0,role:!0,"aria-selected":!0,"aria-expanded":!0});var G=v(t);r=g(G,"DIV",{class:!0});var F=v(r);_.l(F),F.forEach(a),s=w(G),R&&R.l(G),i=w(G),c=g(G,"DIV",{class:!0});var M=v(c);z&&z.l(M),M.forEach(a),G.forEach(a),b=w(E),N=g(E,"DIV",{class:!0,role:!0});var O=v(N);V&&V.l(O),O.forEach(a),E.forEach(a),this.h()},h(){f(r,"class",l="tree-summary-symbol "+n[3]),f(c,"class","tree-item-content"),f(t,"class",y="tree-item-summary "+n[4]),f(t,"role","treeitem"),f(t,"aria-selected","false"),f(t,"aria-expanded",S=n[6].children?n[0]:void 0),f(N,"class",k="tree-item-children "+n[1]),f(N,"role","group"),f(e,"class",m="tree-item "+n[5]),f(e,"data-testid","tree-item")},m(I,E){T(I,e,E),u(e,t),u(t,r),_.m(r,null),u(t,s),R&&R.m(t,null),u(t,i),u(t,c),z&&z.m(c,null),u(e,b),u(e,N),V&&V.m(N,null),e.open=n[0],o=!0,h||(P=[K(t,"click",n[22]),K(t,"keydown",n[23]),K(t,"keyup",n[24]),K(e,"toggle",n[25])],h=!0)},p(I,[E]){A===(A=C(I))&&_?_.p(I,E):(_.d(1),_=A(I),_&&(_.c(),_.m(r,null))),(!o||E&8&&l!==(l="tree-summary-symbol "+I[3]))&&f(r,"class",l),I[6].lead?R?(R.p(I,E),E&64&&J(R,1)):(R=Rt(I),R.c(),J(R,1),R.m(t,i)):R&&(Gt(),Y(R,1,1,()=>{R=null}),Ht()),z&&z.p&&(!o||E&1048576)&&Me(z,j,I,I[20],o?Fe(j,I[20],E,null):ze(I[20]),null),(!o||E&16&&y!==(y="tree-item-summary "+I[4]))&&f(t,"class",y),(!o||E&65&&S!==(S=I[6].children?I[0]:void 0))&&f(t,"aria-expanded",S),V&&V.p&&(!o||E&1048576)&&Me(V,q,I,I[20],o?Fe(q,I[20],E,rl):ze(I[20]),Ut),(!o||E&2&&k!==(k="tree-item-children "+I[1]))&&f(N,"class",k),(!o||E&32&&m!==(m="tree-item "+I[5]))&&f(e,"class",m),E&1&&(e.open=I[0])},i(I){o||(J(R),J(z,I),J(V,I),o=!0)},o(I){Y(R),Y(z,I),Y(V,I),o=!1},d(I){I&&a(e),_.d(),R&&R.d(),z&&z.d(I),V&&V.d(I),h=!1,Ye(P)}}}const ol="",ul="list-none flex items-center cursor-pointer",cl="fill-current w-3 text-center transition-transform duration-[200ms]",fl="";function dl(n,e,t){let r,l,s,i,c,y,S,{$$slots:b={},$$scope:N}=e;const k=Kt(b);let{open:m=!1}=e,{spacing:o="space-x-4"}=e,{padding:h=ee("padding")}=e,{indent:P=ee("indent")}=e,{hover:C=ee("hover")}=e,{rounded:A=ee("rounded")}=e,{caretOpen:_=ee("caretOpen")}=e,{caretClosed:R=ee("caretClosed")}=e,{hyphenOpacity:j=ee("hyphenOpacity")}=e,{regionSummary:z=""}=e,{regionSymbol:q=ee("regionSymbol")}=e,{regionChildren:V=ee("regionChildren")}=e;const I=Wt();function E(O){_t.call(this,n,O)}function G(O){_t.call(this,n,O)}function F(O){_t.call(this,n,O)}function M(){m=this.open,t(0,m)}return n.$$set=O=>{t(27,e=Ge(Ge({},e),He(O))),"open"in O&&t(0,m=O.open),"spacing"in O&&t(7,o=O.spacing),"padding"in O&&t(8,h=O.padding),"indent"in O&&t(9,P=O.indent),"hover"in O&&t(10,C=O.hover),"rounded"in O&&t(11,A=O.rounded),"caretOpen"in O&&t(12,_=O.caretOpen),"caretClosed"in O&&t(13,R=O.caretClosed),"hyphenOpacity"in O&&t(14,j=O.hyphenOpacity),"regionSummary"in O&&t(15,z=O.regionSummary),"regionSymbol"in O&&t(16,q=O.regionSymbol),"regionChildren"in O&&t(17,V=O.regionChildren),"$$scope"in O&&t(20,N=O.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&I("toggle",{open:m}),n.$$.dirty&12289&&t(18,r=m?_:R),t(5,l=`${ol} ${e.class??""}`),n.$$.dirty&36224&&t(4,s=`${ul} ${o} ${A} ${h} ${C} ${z}`),n.$$.dirty&262144&&t(19,c=`${r}`),n.$$.dirty&589824&&t(3,i=`${cl} ${c} ${q}`),n.$$.dirty&16384&&t(2,y=`${j}`),n.$$.dirty&131584&&t(1,S=`${fl} ${P} ${V}`)},e=He(e),[m,S,y,i,s,l,k,o,h,P,C,A,_,R,j,z,q,V,r,c,N,b,E,G,F,M]}class pt extends Je{constructor(e){super(),Ke(this,e,dl,al,We,{open:0,spacing:7,padding:8,indent:9,hover:10,rounded:11,caretOpen:12,caretClosed:13,hyphenOpacity:14,regionSummary:15,regionSymbol:16,regionChildren:17})}}function Lt(n,e,t){const r=n.slice();return r[23]=e[t],r[25]=t,r}function Bt(n,e,t){const r=n.slice();return r[23]=e[t],r[25]=t,r}function At(n){let e,t=n[1],r=[];for(let l=0;l<t.length;l+=1)r[l]=Dt(Bt(n,t,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=ke()},l(l){for(let s=0;s<r.length;s+=1)r[s].l(l);e=ke()},m(l,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(l,s);T(l,e,s)},p(l,s){if(s&514){t=l[1];let i;for(i=0;i<t.length;i+=1){const c=Bt(l,t,i);r[i]?r[i].p(c,s):(r[i]=Dt(c),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(l){qt(r,l),l&&a(e)}}}function Dt(n){let e,t,r,l,s=n[23]+"",i,c,y,S,b;function N(){return n[14](n[25])}return{c(){e=p("li"),t=p("button"),r=L("delete"),l=U(),i=L(s),c=U(),this.h()},l(k){e=g(k,"LI",{class:!0});var m=v(e);t=g(m,"BUTTON",{class:!0});var o=v(t);r=B(o,"delete"),o.forEach(a),l=w(m),i=B(m,s),c=w(m),m.forEach(a),this.h()},h(){f(t,"class","py-1 btn variant-filled-primary rounded-full"),e.value=y=n[23],f(e,"class","pb-1 px-5")},m(k,m){T(k,e,m),u(e,t),u(t,r),u(e,l),u(e,i),u(e,c),S||(b=K(t,"click",N),S=!0)},p(k,m){n=k,m&2&&s!==(s=n[23]+"")&&Jt(i,s),m&2&&y!==(y=n[23])&&(e.value=y)},d(k){k&&a(e),S=!1,b()}}}function ml(n){let e;return{c(){e=L("詳細設定")},l(t){e=B(t,"詳細設定")},m(t,r){T(t,e,r)},d(t){t&&a(e)}}}function hl(n){let e;return{c(){e=L("検索用リレー")},l(t){e=B(t,"検索用リレー")},m(t,r){T(t,e,r)},d(t){t&&a(e)}}}function Vt(n){let e,t=n[4],r=[];for(let l=0;l<t.length;l+=1)r[l]=Mt(Lt(n,t,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=ke()},l(l){for(let s=0;s<r.length;s+=1)r[s].l(l);e=ke()},m(l,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(l,s);T(l,e,s)},p(l,s){if(s&2064){t=l[4];let i;for(i=0;i<t.length;i+=1){const c=Lt(l,t,i);r[i]?r[i].p(c,s):(r[i]=Mt(c),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(l){qt(r,l),l&&a(e)}}}function Mt(n){let e,t,r,l,s=n[23]+"",i,c,y,S,b;function N(){return n[17](n[25])}return{c(){e=p("li"),t=p("button"),r=L("delete"),l=U(),i=L(s),c=U(),this.h()},l(k){e=g(k,"LI",{class:!0});var m=v(e);t=g(m,"BUTTON",{class:!0});var o=v(t);r=B(o,"delete"),o.forEach(a),l=w(m),i=B(m,s),c=w(m),m.forEach(a),this.h()},h(){f(t,"class","py-1 btn variant-filled-primary rounded-full"),e.value=y=n[23],f(e,"class","pb-1 px-5")},m(k,m){T(k,e,m),u(e,t),u(t,r),u(e,l),u(e,i),u(e,c),S||(b=K(t,"click",N),S=!0)},p(k,m){n=k,m&16&&s!==(s=n[23]+"")&&Jt(i,s),m&16&&y!==(y=n[23])&&(e.value=y)},d(k){k&&a(e),S=!1,b()}}}function _l(n){let e,t,r,l,s,i,c,y,S,b,N,k,m,o=n[4].length>0&&Vt(n);return{c(){e=p("button"),t=L("デフォルトに戻す"),r=U(),l=p("div"),s=p("input"),i=U(),c=p("button"),y=L("add relay"),S=U(),b=p("ul"),N=L(`リレーリスト
            `),o&&o.c(),this.h()},l(h){e=g(h,"BUTTON",{type:!0,class:!0});var P=v(e);t=B(P,"デフォルトに戻す"),P.forEach(a),r=w(h),l=g(h,"DIV",{class:!0});var C=v(l);s=g(C,"INPUT",{class:!0,type:!0,placeholder:!0}),i=w(C),c=g(C,"BUTTON",{class:!0});var A=v(c);y=B(A,"add relay"),A.forEach(a),C.forEach(a),S=w(h),b=g(h,"UL",{class:!0});var _=v(b);N=B(_,`リレーリスト
            `),o&&o.l(_),_.forEach(a),this.h()},h(){f(e,"type","button"),f(e,"class","btn variant-filled-surface mb-3 mt-1"),f(s,"class","px-2"),f(s,"type","text"),f(s,"placeholder","wss://..."),s.disabled=n[3],f(c,"class","py-1 btn variant-filled"),f(l,"class","relay input-group input-group-divider grid-cols-[1fr_auto] h-12"),f(b,"class","border-solid border-2 border-surface-500/25 mx-8 my-1")},m(h,P){T(h,e,P),u(e,t),T(h,r,P),T(h,l,P),u(l,s),ve(s,n[2]),u(l,i),u(l,c),u(c,y),T(h,S,P),T(h,b,P),u(b,N),o&&o.m(b,null),k||(m=[K(e,"click",n[15]),K(s,"input",n[16]),K(c,"click",kl)],k=!0)},p(h,P){P&8&&(s.disabled=h[3]),P&4&&s.value!==h[2]&&ve(s,h[2]),h[4].length>0?o?o.p(h,P):(o=Vt(h),o.c(),o.m(b,null)):o&&(o.d(1),o=null)},d(h){h&&a(e),h&&a(r),h&&a(l),h&&a(S),h&&a(b),o&&o.d(),k=!1,Ye(m)}}}function pl(n){let e;return{c(){e=L("軽量用設定")},l(t){e=B(t,"軽量用設定")},m(t,r){T(t,e,r)},d(t){t&&a(e)}}}function gl(n){let e,t,r,l,s,i,c,y,S,b,N,k,m,o,h,P;return{c(){e=p("button"),t=L("デフォルトに戻す"),r=U(),l=p("label"),s=p("input"),i=U(),c=p("p"),y=L("自動的に画像を読み込む、URLプレビューを表示する"),S=U(),b=p("label"),N=p("input"),k=U(),m=p("p"),o=L("イベントの内容を自動で読み込む"),this.h()},l(C){e=g(C,"BUTTON",{type:!0,class:!0});var A=v(e);t=B(A,"デフォルトに戻す"),A.forEach(a),r=w(C),l=g(C,"LABEL",{class:!0});var _=v(l);s=g(_,"INPUT",{class:!0,type:!0}),i=w(_),c=g(_,"P",{});var R=v(c);y=B(R,"自動的に画像を読み込む、URLプレビューを表示する"),R.forEach(a),_.forEach(a),S=w(C),b=g(C,"LABEL",{class:!0});var j=v(b);N=g(j,"INPUT",{class:!0,type:!0}),k=w(j),m=g(j,"P",{});var z=v(m);o=B(z,"イベントの内容を自動で読み込む"),z.forEach(a),j.forEach(a),this.h()},h(){f(e,"type","button"),f(e,"class","btn variant-filled-surface mb-3 mt-1"),f(s,"class","checkbox"),f(s,"type","checkbox"),f(l,"class","flex items-center space-x-2"),f(N,"class","checkbox"),f(N,"type","checkbox"),f(b,"class","flex items-center space-x-2")},m(C,A){T(C,e,A),u(e,t),T(C,r,A),T(C,l,A),u(l,s),s.checked=n[5],u(l,i),u(l,c),u(c,y),T(C,S,A),T(C,b,A),u(b,N),N.checked=n[6],u(b,k),u(b,m),u(m,o),h||(P=[K(e,"click",n[18]),K(s,"change",n[19]),K(N,"change",n[20])],h=!0)},p(C,A){A&32&&(s.checked=C[5]),A&64&&(N.checked=C[6])},d(C){C&&a(e),C&&a(r),C&&a(l),C&&a(S),C&&a(b),h=!1,Ye(P)}}}function bl(n){let e,t,r,l,s,i,c,y,S,b,N,k,m;return b=new pt({props:{$$slots:{children:[_l],default:[hl]},$$scope:{ctx:n}}}),k=new pt({props:{$$slots:{children:[gl],default:[pl]},$$scope:{ctx:n}}}),{c(){e=p("p"),t=L("nextボタンをおしたときに設定が保存されます"),r=U(),l=p("p"),s=L("とりあえずnprofileの方だけに適応"),i=U(),c=p("p"),y=L("(naddrのほうはデフォルトのまま)"),S=U(),ce(b.$$.fragment),N=U(),ce(k.$$.fragment)},l(o){e=g(o,"P",{});var h=v(e);t=B(h,"nextボタンをおしたときに設定が保存されます"),h.forEach(a),r=w(o),l=g(o,"P",{});var P=v(l);s=B(P,"とりあえずnprofileの方だけに適応"),P.forEach(a),i=w(o),c=g(o,"P",{});var C=v(c);y=B(C,"(naddrのほうはデフォルトのまま)"),C.forEach(a),S=w(o),fe(b.$$.fragment,o),N=w(o),fe(k.$$.fragment,o)},m(o,h){T(o,e,h),u(e,t),T(o,r,h),T(o,l,h),u(l,s),T(o,i,h),T(o,c,h),u(c,y),T(o,S,h),de(b,o,h),T(o,N,h),de(k,o,h),m=!0},p(o,h){const P={};h&134217756&&(P.$$scope={dirty:h,ctx:o}),b.$set(P);const C={};h&134217824&&(C.$$scope={dirty:h,ctx:o}),k.$set(C)},i(o){m||(J(b.$$.fragment,o),J(k.$$.fragment,o),m=!0)},o(o){Y(b.$$.fragment,o),Y(k.$$.fragment,o),m=!1},d(o){o&&a(e),o&&a(r),o&&a(l),o&&a(i),o&&a(c),o&&a(S),me(b,o),o&&a(N),me(k,o)}}}function yl(n){let e,t;return e=new pt({props:{$$slots:{children:[bl],default:[ml]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,l){de(e,r,l),t=!0},p(r,l){const s={};l&134217852&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(J(e.$$.fragment,r),t=!0)},o(r){Y(e.$$.fragment,r),t=!1},d(r){me(e,r)}}}function zt(n){let e,t,r;return t=new Xt({props:{"...":!0,stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30",width:"w-24"}}),{c(){e=p("div"),ce(t.$$.fragment),this.h()},l(l){e=g(l,"DIV",{class:!0});var s=v(e);fe(t.$$.fragment,s),s.forEach(a),this.h()},h(){f(e,"class","block fixed bottom-2 right-2")},m(l,s){T(l,e,s),de(t,e,null),r=!0},i(l){r||(J(t.$$.fragment,l),r=!0)},o(l){Y(t.$$.fragment,l),r=!1},d(l){l&&a(e),me(t)}}}function vl(n){let e,t,r,l,s,i,c,y,S,b,N,k,m,o,h,P,C,A,_,R,j,z,q,V,I,E,G,F,M,O,he,Qe,Te,X,te,_e,Xe,Ze,pe,xe,$e,et,le,Q,tt,ae,lt,rt,re,st,Ce,se,Ie,$,nt,Pe,Oe,Ue,Z,it,ne,at,ot,ut,ct,ie,ft,we,ge,Ee,dt,gt;e=new $t({});let W=n[1].length>0&&At(n);se=new ll({props:{$$slots:{default:[yl]},$$scope:{ctx:n}}});let H=n[3]&&zt();return{c(){ce(e.$$.fragment),t=U(),r=p("h4"),l=L("ぶくまびうあ"),s=U(),i=p("div"),c=p("ul"),y=p("li"),S=p("span"),b=p("span"),N=L("kind:30001に保存されているリストを取得、表示します。"),k=U(),m=p("li"),o=p("span"),h=U(),P=p("span"),C=L("ブックマークを取得する公開鍵を設定し、接続するリレーをリレーリストに追加してください。"),A=U(),_=p("div"),R=p("p"),j=L("公開鍵(public key)"),z=U(),q=p("div"),V=p("button"),I=L("use NIP-07 "),E=p("br"),G=L("Extension"),F=U(),M=p("input"),O=U(),he=p("div"),Qe=L(`※use NIP-07 Extension:
    拡張機能に有効なリレー(write)を設定している場合リレーリストを上書きします`),Te=U(),X=p("div"),te=p("p"),_e=p("span"),Xe=L("リレー(relay)"),Ze=L(`
    URLを入力したら`),pe=p("span"),xe=L("add relay"),$e=L("をクリックしてください"),et=U(),le=p("div"),Q=p("input"),tt=U(),ae=p("button"),lt=L("add relay"),rt=U(),re=p("ul"),st=L(`リレーリスト
    `),W&&W.c(),Ce=U(),ce(se.$$.fragment),Ie=U(),$=p("button"),nt=L("Next →"),Pe=U(),Oe=p("hr"),Ue=U(),Z=p("div"),it=L("Github: "),ne=p("a"),at=L("TsukemonoGit/nostr-bookmark-viewer3"),ot=U(),ut=p("br"),ct=L(`
  Author:
  `),ie=p("a"),ft=L("mono(Nostr)"),we=U(),H&&H.c(),ge=ke(),this.h()},l(d){fe(e.$$.fragment,d),t=w(d),r=g(d,"H4",{class:!0});var D=v(r);l=B(D,"ぶくまびうあ"),D.forEach(a),s=w(d),i=g(d,"DIV",{class:!0});var Se=v(i);c=g(Se,"UL",{class:!0});var Re=v(c);y=g(Re,"LI",{});var mt=v(y);S=g(mt,"SPAN",{class:!0}),v(S).forEach(a),b=g(mt,"SPAN",{});var bt=v(b);N=B(bt,"kind:30001に保存されているリストを取得、表示します。"),bt.forEach(a),mt.forEach(a),k=w(Re),m=g(Re,"LI",{});var Le=v(m);o=g(Le,"SPAN",{class:!0}),v(o).forEach(a),h=w(Le),P=g(Le,"SPAN",{});var yt=v(P);C=B(yt,"ブックマークを取得する公開鍵を設定し、接続するリレーをリレーリストに追加してください。"),yt.forEach(a),Le.forEach(a),Re.forEach(a),Se.forEach(a),A=w(d),_=g(d,"DIV",{class:!0});var be=v(_);R=g(be,"P",{class:!0});var vt=v(R);j=B(vt,"公開鍵(public key)"),vt.forEach(a),z=w(be),q=g(be,"DIV",{class:!0});var Be=v(q);V=g(Be,"BUTTON",{class:!0});var Ae=v(V);I=B(Ae,"use NIP-07 "),E=g(Ae,"BR",{}),G=B(Ae,"Extension"),Ae.forEach(a),F=w(Be),M=g(Be,"INPUT",{type:!0,class:!0,placeholder:!0}),Be.forEach(a),O=w(be),he=g(be,"DIV",{class:!0});var kt=v(he);Qe=B(kt,`※use NIP-07 Extension:
    拡張機能に有効なリレー(write)を設定している場合リレーリストを上書きします`),kt.forEach(a),be.forEach(a),Te=w(d),X=g(d,"DIV",{class:!0});var ye=v(X);te=g(ye,"P",{});var Ne=v(te);_e=g(Ne,"SPAN",{class:!0});var Et=v(_e);Xe=B(Et,"リレー(relay)"),Et.forEach(a),Ze=B(Ne,`
    URLを入力したら`),pe=g(Ne,"SPAN",{class:!0});var St=v(pe);xe=B(St,"add relay"),St.forEach(a),$e=B(Ne,"をクリックしてください"),Ne.forEach(a),et=w(ye),le=g(ye,"DIV",{class:!0});var De=v(le);Q=g(De,"INPUT",{class:!0,type:!0,placeholder:!0}),tt=w(De),ae=g(De,"BUTTON",{class:!0});var Nt=v(ae);lt=B(Nt,"add relay"),Nt.forEach(a),De.forEach(a),rt=w(ye),re=g(ye,"UL",{class:!0});var ht=v(re);st=B(ht,`リレーリスト
    `),W&&W.l(ht),ht.forEach(a),ye.forEach(a),Ce=w(d),fe(se.$$.fragment,d),Ie=w(d),$=g(d,"BUTTON",{type:!0,class:!0});var Tt=v($);nt=B(Tt,"Next →"),Tt.forEach(a),Pe=w(d),Oe=g(d,"HR",{}),Ue=w(d),Z=g(d,"DIV",{});var oe=v(Z);it=B(oe,"Github: "),ne=g(oe,"A",{href:!0,target:!0,rel:!0});var Ct=v(ne);at=B(Ct,"TsukemonoGit/nostr-bookmark-viewer3"),Ct.forEach(a),ot=w(oe),ut=g(oe,"BR",{}),ct=B(oe,`
  Author:
  `),ie=g(oe,"A",{href:!0,target:!0,rel:!0});var It=v(ie);ft=B(It,"mono(Nostr)"),It.forEach(a),oe.forEach(a),we=w(d),H&&H.l(d),ge=ke(),this.h()},h(){f(r,"class","h4"),f(S,"class","badge bg-primary-500"),f(o,"class","badge bg-primary-500"),f(c,"class","list px-4"),f(i,"class","py-2 border-solid border-2 border-surface-500/25 mx-4"),f(R,"class","font-medium"),f(V,"class","py-1 btn variant-filled-secondary"),f(M,"type","text"),f(M,"class","px-2 text-ellipsis"),f(M,"placeholder","npub1..."),f(q,"class","input-group input-group-divider grid-cols-[auto_1fr]"),f(he,"class","text-sm mx-8"),f(_,"class","container my-4"),f(_e,"class","font-medium mr-1"),f(pe,"class","rounded-full variant-filled p-1 m-1"),f(Q,"class","px-2"),f(Q,"type","text"),f(Q,"placeholder","wss://..."),Q.disabled=n[3],f(ae,"class","py-1 btn variant-filled"),f(le,"class","relay input-group input-group-divider grid-cols-[1fr_auto] h-12"),f(re,"class","border-solid border-2 border-surface-500/25 mx-8 my-1"),f(X,"class","container py-4"),f($,"type","button"),f($,"class","btn variant-filled-secondary rounded-full my-5"),f(ne,"href","https://github.com/TsukemonoGit/nostr-bookmark-viewer3"),f(ne,"target","_blank"),f(ne,"rel","noopener noreferrer"),f(ie,"href","https://nostx.shino3.net/npub1sjcvg64knxkrt6ev52rywzu9uzqakgy8ehhk8yezxmpewsthst6sw3jqcw"),f(ie,"target","_blank"),f(ie,"rel","noopener noreferrer")},m(d,D){de(e,d,D),T(d,t,D),T(d,r,D),u(r,l),T(d,s,D),T(d,i,D),u(i,c),u(c,y),u(y,S),u(y,b),u(b,N),u(c,k),u(c,m),u(m,o),u(m,h),u(m,P),u(P,C),T(d,A,D),T(d,_,D),u(_,R),u(R,j),u(_,z),u(_,q),u(q,V),u(V,I),u(V,E),u(V,G),u(q,F),u(q,M),ve(M,n[0]),u(_,O),u(_,he),u(he,Qe),T(d,Te,D),T(d,X,D),u(X,te),u(te,_e),u(_e,Xe),u(te,Ze),u(te,pe),u(pe,xe),u(te,$e),u(X,et),u(X,le),u(le,Q),ve(Q,n[2]),u(le,tt),u(le,ae),u(ae,lt),u(X,rt),u(X,re),u(re,st),W&&W.m(re,null),T(d,Ce,D),de(se,d,D),T(d,Ie,D),T(d,$,D),u($,nt),T(d,Pe,D),T(d,Oe,D),T(d,Ue,D),T(d,Z,D),u(Z,it),u(Z,ne),u(ne,at),u(Z,ot),u(Z,ut),u(Z,ct),u(Z,ie),u(ie,ft),T(d,we,D),H&&H.m(d,D),T(d,ge,D),Ee=!0,dt||(gt=[K(V,"click",n[7]),K(M,"input",n[12]),K(Q,"input",n[13]),K(ae,"click",n[8]),K($,"click",n[10])],dt=!0)},p(d,[D]){D&1&&M.value!==d[0]&&ve(M,d[0]),(!Ee||D&8)&&(Q.disabled=d[3]),D&4&&Q.value!==d[2]&&ve(Q,d[2]),d[1].length>0?W?W.p(d,D):(W=At(d),W.c(),W.m(re,null)):W&&(W.d(1),W=null);const Se={};D&134217852&&(Se.$$scope={dirty:D,ctx:d}),se.$set(Se),d[3]?H?D&8&&J(H,1):(H=zt(),H.c(),J(H,1),H.m(ge.parentNode,ge)):H&&(Gt(),Y(H,1,1,()=>{H=null}),Ht())},i(d){Ee||(J(e.$$.fragment,d),J(se.$$.fragment,d),J(H),Ee=!0)},o(d){Y(e.$$.fragment,d),Y(se.$$.fragment,d),Y(H),Ee=!1},d(d){me(e,d),d&&a(t),d&&a(r),d&&a(s),d&&a(i),d&&a(A),d&&a(_),d&&a(Te),d&&a(X),W&&W.d(),d&&a(Ce),me(se,d),d&&a(Ie),d&&a($),d&&a(Pe),d&&a(Oe),d&&a(Ue),d&&a(Z),d&&a(we),H&&H.d(d),d&&a(ge),dt=!1,Ye(gt)}}}async function Ft(n){let e,t;if(n.startsWith("ws://"))e=n.slice(5),t=new URL("http://"+e);else if(n.startsWith("wss://"))e=n.slice(6),t=new URL("https://"+e);else return console.log("test"),!1;let r=new Headers;r.set("Accept","application/nostr+json");try{let l=await fetch(t,{headers:r});console.log(l),console.log(l.status);try{console.log(await l.json())}catch{}return!!l.ok}catch(l){return console.log(l),!1}}function kl(){}function El(n,e,t){let r,l=[],s,i=!1,c,y=[],S,b;Yt(async()=>{const E=localStorage.getItem("config");if(E){const F=JSON.parse(E);t(4,y=F.searchRelays),t(5,S=F.URLPreview),t(6,b=F.loadEvent)}else t(4,y=Pt),t(5,S=!0),t(6,b=!0);const G=localStorage.getItem("nprofile");if(G)try{const{type:F,data:M}=Ot.decode(G);console.log(F),console.log(M),F==="nprofile"&&M.relays&&(t(0,r=M.pubkey),t(1,l=M.relays))}catch{console.log("nprofileのデコードに失敗しました")}});async function N(){try{t(0,r=await window.nostr.getPublicKey())}catch(E){console.log(E),c={message:"failed to get pubkey",timeout:3e3,background:"variant-filled-error"},ue.trigger(c);return}try{t(3,i=!0);const E=await window.nostr.getRelays(),G=Object.keys(E).filter(M=>E[M].write===!0),F=[];for(const M of G)console.log(M),F.includes(M)||await Ft(M)&&F.push(M);F.length>0&&t(1,l=F),t(3,i=!1)}catch(E){console.log(E),c={message:"failed to get relays",timeout:3e3,background:"variant-filled-error"},ue.trigger(c)}}async function k(){if(!i){if(t(3,i=!0),t(2,s=s.trim()),l.includes(s))c={message:"already exists",timeout:3e3,background:"variant-filled"},ue.trigger(c);else try{if(await Ft(s))l.push(s),t(1,l);else throw t(3,i=!1),new Error}catch{c={message:"Please check relay URL",timeout:3e3,background:"variant-filled-error"},ue.trigger(c)}t(2,s=""),t(3,i=!1)}}function m(E){l.splice(E,1),t(1,l)}async function o(){t(3,i=!0),P();let E;try{E=Zt(r)}catch{c={message:"Please check pubkey",timeout:3e3,background:"variant-filled-error"},ue.trigger(c),t(3,i=!1);return}if(l.length<1){c={message:"Please add relay",timeout:3e3,background:"variant-filled-error"},ue.trigger(c),t(3,i=!1);return}const G={pubkey:E,relays:l};try{const F=Ot.nprofileEncode(G);localStorage.setItem("nprofile",F),t(3,i=!1),await xt("/p/"+F)}catch{c={message:"nprofileエンコードに失敗しました",timeout:3e3,background:"variant-filled-error"},ue.trigger(c),t(3,i=!1);return}}function h(E){y.splice(E,1),t(4,y)}function P(){if(y)try{const G=JSON.stringify({searchRelays:y,URLPreview:S,loadEvent:b});localStorage.setItem("config",G)}catch(E){console.log(E)}}function C(){r=this.value,t(0,r)}function A(){s=this.value,t(2,s)}const _=E=>m(E),R=()=>{t(4,y=Pt)};function j(){s=this.value,t(2,s)}const z=E=>h(E),q=()=>{t(5,S=!0),t(6,b=!0)};function V(){S=this.checked,t(5,S)}function I(){b=this.checked,t(6,b)}return[r,l,s,i,y,S,b,N,k,m,o,h,C,A,_,R,j,z,q,V,I]}class Sl extends Je{constructor(e){super(),Ke(this,e,El,vl,We,{})}}function Nl(n){let e,t,r,l,s,i,c,y,S,b,N,k;return N=new Sl({}),{c(){e=p("meta"),t=p("meta"),r=p("meta"),l=p("meta"),s=p("meta"),i=U(),c=p("main"),y=p("h1"),S=L("nostr-bookmark-viewer3(v4)"),b=U(),ce(N.$$.fragment),this.h()},l(m){const o=Qt("svelte-1ive41a",document.head);e=g(o,"META",{name:!0,content:!0}),t=g(o,"META",{prefix:!0}),r=g(o,"META",{property:!0,content:!0}),l=g(o,"META",{property:!0,content:!0}),s=g(o,"META",{property:!0,content:!0}),o.forEach(a),i=w(m),c=g(m,"MAIN",{class:!0});var h=v(c);y=g(h,"H1",{class:!0});var P=v(y);S=B(P,"nostr-bookmark-viewer3(v4)"),P.forEach(a),b=w(h),fe(N.$$.fragment,h),h.forEach(a),this.h()},h(){document.title="nostr-bookmark-viewer",f(e,"name","description"),f(e,"content","user setting"),f(t,"prefix","og: https://ogp.me/ns#"),f(r,"property","og:title"),f(r,"content","nostr-bookmark-viewer3"),f(l,"property","og:description"),f(l,"content","Nostrのブックマークをみたりできるやつ"),f(s,"property","og:image"),f(s,"content","https://nostr-bookmark-viewer3.vercel.app/img2.png"),f(y,"class","h1 mb-5"),f(c,"class","container max-w-5xl p-2")},m(m,o){u(document.head,e),u(document.head,t),u(document.head,r),u(document.head,l),u(document.head,s),T(m,i,o),T(m,c,o),u(c,y),u(y,S),u(c,b),de(N,c,null),k=!0},p:jt,i(m){k||(J(N.$$.fragment,m),k=!0)},o(m){Y(N.$$.fragment,m),k=!1},d(m){a(e),a(t),a(r),a(l),a(s),m&&a(i),m&&a(c),me(N)}}}class Ol extends Je{constructor(e){super(),Ke(this,e,null,Nl,We,{})}}export{Ol as component};
